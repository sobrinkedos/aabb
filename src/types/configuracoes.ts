import { PapelUsuario } from './multitenant';\n\n// Categorias de configura√ß√£o com controle de acesso\nexport enum CategoriaConfiguracaoHierarquica {\n  GERAL = 'geral',\n  SEGURANCA = 'seguranca',\n  SISTEMA = 'sistema',\n  NOTIFICACOES = 'notificacoes',\n  INTEGRACAO = 'integracao'\n}\n\n// N√≠veis de acesso para configura√ß√µes\nexport enum NivelAcessoConfiguracao {\n  TODOS = 'todos',\n  ADMIN = 'admin',\n  SUPER_ADMIN = 'super_admin'\n}\n\n// Interface para definir controle de acesso de configura√ß√µes\nexport interface ConfiguracaoAcesso {\n  categoria: CategoriaConfiguracaoHierarquica;\n  nivelMinimo: NivelAcessoConfiguracao;\n  papeisPermitidos: PapelUsuario[];\n  requerConfirmacaoSenha: boolean;\n  requerConfirmacaoDupla: boolean;\n  descricao: string;\n  icone: string;\n  alertaImpacto?: string;\n}\n\n// Configura√ß√µes gerais (acess√≠vel por ADMIN e acima)\nexport interface ConfiguracaoGeral {\n  nome_empresa: string;\n  cnpj: string;\n  email_admin: string;\n  telefone: string;\n  endereco: {\n    logradouro: string;\n    cidade: string;\n    estado: string;\n    cep: string;\n  };\n  tema_padrao: 'claro' | 'escuro' | 'auto';\n  idioma: string;\n  timezone: string;\n  formato_data: string;\n  formato_moeda: string;\n  moeda_padrao: string;\n}\n\n// Configura√ß√µes de seguran√ßa (apenas SUPER_ADMIN)\nexport interface ConfiguracaoSeguranca {\n  // Pol√≠ticas de senha\n  senha_minima_caracteres: number;\n  senha_exigir_maiuscula: boolean;\n  senha_exigir_minuscula: boolean;\n  senha_exigir_numero: boolean;\n  senha_exigir_simbolo: boolean;\n  senha_historico_bloqueio: number; // Quantas senhas anteriores bloquear\n  senha_validade_dias: number; // 0 = sem expira√ß√£o\n  \n  // Controle de sess√£o\n  tempo_sessao_minutos: number;\n  logout_automatico_inatividade: boolean;\n  sessoes_simultaneas_permitidas: number;\n  \n  // Controle de tentativas\n  tentativas_login_max: number;\n  bloqueio_temporario_minutos: number;\n  bloqueio_permanente_tentativas: number;\n  \n  // Autentica√ß√£o de dois fatores\n  exigir_2fa: boolean;\n  exigir_2fa_admins: boolean;\n  metodos_2fa_permitidos: ('totp' | 'sms' | 'email')[];\n  \n  // Controles de IP\n  restringir_por_ip: boolean;\n  ips_permitidos: string[];\n  bloquear_ips_suspeitos: boolean;\n  \n  // Auditoria\n  log_todas_acoes: boolean;\n  retencao_logs_dias: number;\n  alertar_tentativas_suspeitas: boolean;\n}\n\n// Configura√ß√µes do sistema (apenas SUPER_ADMIN)\nexport interface ConfiguracaoSistema {\n  // Backup\n  backup_automatico: boolean;\n  backup_frequencia: 'diario' | 'semanal' | 'mensal';\n  backup_horario: string;\n  backup_retencao_dias: number;\n  \n  // Performance\n  cache_habilitado: boolean;\n  cache_ttl_minutos: number;\n  compressao_dados: boolean;\n  \n  // Limites\n  limite_usuarios: number;\n  limite_armazenamento_gb: number;\n  limite_requisicoes_por_minuto: number;\n  \n  // Manuten√ß√£o\n  manutencao_automatica: boolean;\n  manutencao_horario: string;\n  limpeza_logs_automatica: boolean;\n  \n  // Monitoramento\n  monitoramento_performance: boolean;\n  alertas_sistema: boolean;\n  notificar_erros_criticos: boolean;\n}\n\n// Configura√ß√µes de notifica√ß√µes (acess√≠vel por ADMIN e acima)\nexport interface ConfiguracaoNotificacoes {\n  // Email\n  email_novos_usuarios: boolean;\n  email_tentativas_login: boolean;\n  email_alteracoes_config: boolean;\n  email_backup_diario: boolean;\n  email_relatorios_semanais: boolean;\n  email_alertas_sistema: boolean;\n  \n  // Notifica√ß√µes no sistema\n  notificacao_browser: boolean;\n  som_notificacoes: boolean;\n  notificacao_desktop: boolean;\n  \n  // Configura√ß√µes de envio\n  servidor_smtp: {\n    host: string;\n    porta: number;\n    usuario: string;\n    senha: string;\n    ssl: boolean;\n  };\n  \n  // Templates\n  template_boas_vindas: string;\n  template_reset_senha: string;\n  template_alerta_seguranca: string;\n}\n\n// Configura√ß√µes de integra√ß√£o (apenas SUPER_ADMIN)\nexport interface ConfiguracaoIntegracao {\n  // APIs externas\n  api_keys: Record<string, {\n    chave: string;\n    ativa: boolean;\n    criada_em: string;\n    expira_em?: string;\n  }>;\n  \n  // Webhooks\n  webhooks: {\n    url: string;\n    eventos: string[];\n    ativo: boolean;\n    token_seguranca: string;\n  }[];\n  \n  // Integra√ß√µes espec√≠ficas\n  integracao_contabil: {\n    ativa: boolean;\n    sistema: string;\n    configuracoes: Record<string, any>;\n  };\n  \n  integracao_fiscal: {\n    ativa: boolean;\n    certificado_digital: {\n      arquivo: string;\n      senha: string;\n      valido_ate: string;\n    };\n  };\n  \n  // Sincroniza√ß√£o\n  sincronizacao_automatica: boolean;\n  intervalo_sincronizacao_minutos: number;\n}\n\n// Tipo uni√£o para todas as configura√ß√µes\nexport type TodasConfiguracoes = {\n  geral: ConfiguracaoGeral;\n  seguranca: ConfiguracaoSeguranca;\n  sistema: ConfiguracaoSistema;\n  notificacoes: ConfiguracaoNotificacoes;\n  integracao: ConfiguracaoIntegracao;\n};\n\n// Mapeamento de controle de acesso\nexport const CONTROLE_ACESSO_CONFIGURACOES: Record<CategoriaConfiguracaoHierarquica, ConfiguracaoAcesso> = {\n  [CategoriaConfiguracaoHierarquica.GERAL]: {\n    categoria: CategoriaConfiguracaoHierarquica.GERAL,\n    nivelMinimo: NivelAcessoConfiguracao.ADMIN,\n    papeisPermitidos: [PapelUsuario.SUPER_ADMIN, PapelUsuario.ADMIN],\n    requerConfirmacaoSenha: false,\n    requerConfirmacaoDupla: false,\n    descricao: 'Configura√ß√µes gerais da empresa e interface',\n    icone: 'üè¢',\n    alertaImpacto: 'Altera√ß√µes afetam a apar√™ncia e dados b√°sicos da empresa'\n  },\n  \n  [CategoriaConfiguracaoHierarquica.SEGURANCA]: {\n    categoria: CategoriaConfiguracaoHierarquica.SEGURANCA,\n    nivelMinimo: NivelAcessoConfiguracao.SUPER_ADMIN,\n    papeisPermitidos: [PapelUsuario.SUPER_ADMIN],\n    requerConfirmacaoSenha: true,\n    requerConfirmacaoDupla: true,\n    descricao: 'Pol√≠ticas de seguran√ßa, autentica√ß√£o e controle de acesso',\n    icone: 'üîí',\n    alertaImpacto: '‚ö†Ô∏è CR√çTICO: Altera√ß√µes afetam a seguran√ßa de toda a empresa'\n  },\n  \n  [CategoriaConfiguracaoHierarquica.SISTEMA]: {\n    categoria: CategoriaConfiguracaoHierarquica.SISTEMA,\n    nivelMinimo: NivelAcessoConfiguracao.SUPER_ADMIN,\n    papeisPermitidos: [PapelUsuario.SUPER_ADMIN],\n    requerConfirmacaoSenha: true,\n    requerConfirmacaoDupla: false,\n    descricao: 'Configura√ß√µes de sistema, backup e performance',\n    icone: '‚öôÔ∏è',\n    alertaImpacto: '‚ö†Ô∏è Altera√ß√µes podem afetar a performance e disponibilidade do sistema'\n  },\n  \n  [CategoriaConfiguracaoHierarquica.NOTIFICACOES]: {\n    categoria: CategoriaConfiguracaoHierarquica.NOTIFICACOES,\n    nivelMinimo: NivelAcessoConfiguracao.ADMIN,\n    papeisPermitidos: [PapelUsuario.SUPER_ADMIN, PapelUsuario.ADMIN],\n    requerConfirmacaoSenha: false,\n    requerConfirmacaoDupla: false,\n    descricao: 'Configura√ß√µes de notifica√ß√µes e alertas',\n    icone: 'üîî',\n    alertaImpacto: 'Altera√ß√µes afetam como os usu√°rios recebem notifica√ß√µes'\n  },\n  \n  [CategoriaConfiguracaoHierarquica.INTEGRACAO]: {\n    categoria: CategoriaConfiguracaoHierarquica.INTEGRACAO,\n    nivelMinimo: NivelAcessoConfiguracao.SUPER_ADMIN,\n    papeisPermitidos: [PapelUsuario.SUPER_ADMIN],\n    requerConfirmacaoSenha: true,\n    requerConfirmacaoDupla: false,\n    descricao: 'Integra√ß√µes externas, APIs e webhooks',\n    icone: 'üîó',\n    alertaImpacto: '‚ö†Ô∏è Altera√ß√µes podem afetar integra√ß√µes com sistemas externos'\n  }\n};\n\n// Configura√ß√µes padr√£o para cada categoria\nexport const CONFIGURACOES_PADRAO: TodasConfiguracoes = {\n  geral: {\n    nome_empresa: '',\n    cnpj: '',\n    email_admin: '',\n    telefone: '',\n    endereco: {\n      logradouro: '',\n      cidade: '',\n      estado: '',\n      cep: ''\n    },\n    tema_padrao: 'auto',\n    idioma: 'pt-BR',\n    timezone: 'America/Sao_Paulo',\n    formato_data: 'DD/MM/YYYY',\n    formato_moeda: 'R$ 0,00',\n    moeda_padrao: 'BRL'\n  },\n  \n  seguranca: {\n    senha_minima_caracteres: 8,\n    senha_exigir_maiuscula: true,\n    senha_exigir_minuscula: true,\n    senha_exigir_numero: true,\n    senha_exigir_simbolo: false,\n    senha_historico_bloqueio: 5,\n    senha_validade_dias: 0,\n    \n    tempo_sessao_minutos: 480, // 8 horas\n    logout_automatico_inatividade: true,\n    sessoes_simultaneas_permitidas: 3,\n    \n    tentativas_login_max: 5,\n    bloqueio_temporario_minutos: 30,\n    bloqueio_permanente_tentativas: 10,\n    \n    exigir_2fa: false,\n    exigir_2fa_admins: false,\n    metodos_2fa_permitidos: ['totp', 'email'],\n    \n    restringir_por_ip: false,\n    ips_permitidos: [],\n    bloquear_ips_suspeitos: true,\n    \n    log_todas_acoes: true,\n    retencao_logs_dias: 90,\n    alertar_tentativas_suspeitas: true\n  },\n  \n  sistema: {\n    backup_automatico: true,\n    backup_frequencia: 'diario',\n    backup_horario: '02:00',\n    backup_retencao_dias: 30,\n    \n    cache_habilitado: true,\n    cache_ttl_minutos: 60,\n    compressao_dados: true,\n    \n    limite_usuarios: 100,\n    limite_armazenamento_gb: 10,\n    limite_requisicoes_por_minuto: 1000,\n    \n    manutencao_automatica: true,\n    manutencao_horario: '03:00',\n    limpeza_logs_automatica: true,\n    \n    monitoramento_performance: true,\n    alertas_sistema: true,\n    notificar_erros_criticos: true\n  },\n  \n  notificacoes: {\n    email_novos_usuarios: true,\n    email_tentativas_login: true,\n    email_alteracoes_config: true,\n    email_backup_diario: false,\n    email_relatorios_semanais: false,\n    email_alertas_sistema: true,\n    \n    notificacao_browser: true,\n    som_notificacoes: true,\n    notificacao_desktop: false,\n    \n    servidor_smtp: {\n      host: '',\n      porta: 587,\n      usuario: '',\n      senha: '',\n      ssl: true\n    },\n    \n    template_boas_vindas: 'Bem-vindo ao sistema!',\n    template_reset_senha: 'Solicita√ß√£o de redefini√ß√£o de senha',\n    template_alerta_seguranca: 'Alerta de seguran√ßa'\n  },\n  \n  integracao: {\n    api_keys: {},\n    webhooks: [],\n    \n    integracao_contabil: {\n      ativa: false,\n      sistema: '',\n      configuracoes: {}\n    },\n    \n    integracao_fiscal: {\n      ativa: false,\n      certificado_digital: {\n        arquivo: '',\n        senha: '',\n        valido_ate: ''\n      }\n    },\n    \n    sincronizacao_automatica: false,\n    intervalo_sincronizacao_minutos: 60\n  }\n};