(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function yv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function SN(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var l=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,l.get?l:{enumerable:!0,get:function(){return e[i]}})}),n}var Eh={exports:{}},_o={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx;function TN(){if(Xx)return _o;Xx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,l,c){var u=null;if(c!==void 0&&(u=""+c),l.key!==void 0&&(u=""+l.key),"key"in l){c={};for(var h in l)h!=="key"&&(c[h]=l[h])}else c=l;return l=c.ref,{$$typeof:e,type:i,key:u,ref:l!==void 0?l:null,props:c}}return _o.Fragment=t,_o.jsx=n,_o.jsxs=n,_o}var Kx;function CN(){return Kx||(Kx=1,Eh.exports=TN()),Eh.exports}var s=CN(),Ah={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function EN(){if(Wx)return Le;Wx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,N={};function T(A,F,B){this.props=A,this.context=F,this.refs=N,this.updater=B||w}T.prototype.isReactComponent={},T.prototype.setState=function(A,F){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,F,"setState")},T.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function R(){}R.prototype=T.prototype;function S(A,F,B){this.props=A,this.context=F,this.refs=N,this.updater=B||w}var k=S.prototype=new R;k.constructor=S,_(k,T.prototype),k.isPureReactComponent=!0;var E=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function z(A,F,B,W,se,fe){return B=fe.ref,{$$typeof:e,type:A,key:F,ref:B!==void 0?B:null,props:fe}}function U(A,F){return z(A.type,F,void 0,void 0,void 0,A.props)}function I(A){return typeof A=="object"&&A!==null&&A.$$typeof===e}function V(A){var F={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(B){return F[B]})}var Q=/\/+/g;function K(A,F){return typeof A=="object"&&A!==null&&A.key!=null?V(""+A.key):F.toString(36)}function ie(){}function pe(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(ie,ie):(A.status="pending",A.then(function(F){A.status==="pending"&&(A.status="fulfilled",A.value=F)},function(F){A.status==="pending"&&(A.status="rejected",A.reason=F)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function L(A,F,B,W,se){var fe=typeof A;(fe==="undefined"||fe==="boolean")&&(A=null);var ge=!1;if(A===null)ge=!0;else switch(fe){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(A.$$typeof){case e:case t:ge=!0;break;case g:return ge=A._init,L(ge(A._payload),F,B,W,se)}}if(ge)return se=se(A),ge=W===""?"."+K(A,0):W,E(se)?(B="",ge!=null&&(B=ge.replace(Q,"$&/")+"/"),L(se,F,B,"",function(Ne){return Ne})):se!=null&&(I(se)&&(se=U(se,B+(se.key==null||A&&A.key===se.key?"":(""+se.key).replace(Q,"$&/")+"/")+ge)),F.push(se)),1;ge=0;var oe=W===""?".":W+":";if(E(A))for(var me=0;me<A.length;me++)W=A[me],fe=oe+K(W,me),ge+=L(W,F,B,fe,se);else if(me=b(A),typeof me=="function")for(A=me.call(A),me=0;!(W=A.next()).done;)W=W.value,fe=oe+K(W,me++),ge+=L(W,F,B,fe,se);else if(fe==="object"){if(typeof A.then=="function")return L(pe(A),F,B,W,se);throw F=String(A),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ge}function O(A,F,B){if(A==null)return A;var W=[],se=0;return L(A,W,"","",function(fe){return F.call(B,fe,se++)}),W}function P(A){if(A._status===-1){var F=A._result;F=F(),F.then(function(B){(A._status===0||A._status===-1)&&(A._status=1,A._result=B)},function(B){(A._status===0||A._status===-1)&&(A._status=2,A._result=B)}),A._status===-1&&(A._status=0,A._result=F)}if(A._status===1)return A._result.default;throw A._result}var $=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function Y(){}return Le.Children={map:O,forEach:function(A,F,B){O(A,function(){F.apply(this,arguments)},B)},count:function(A){var F=0;return O(A,function(){F++}),F},toArray:function(A){return O(A,function(F){return F})||[]},only:function(A){if(!I(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Le.Component=T,Le.Fragment=n,Le.Profiler=l,Le.PureComponent=S,Le.StrictMode=i,Le.Suspense=f,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Le.__COMPILER_RUNTIME={__proto__:null,c:function(A){return j.H.useMemoCache(A)}},Le.cache=function(A){return function(){return A.apply(null,arguments)}},Le.cloneElement=function(A,F,B){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var W=_({},A.props),se=A.key,fe=void 0;if(F!=null)for(ge in F.ref!==void 0&&(fe=void 0),F.key!==void 0&&(se=""+F.key),F)!M.call(F,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&F.ref===void 0||(W[ge]=F[ge]);var ge=arguments.length-2;if(ge===1)W.children=B;else if(1<ge){for(var oe=Array(ge),me=0;me<ge;me++)oe[me]=arguments[me+2];W.children=oe}return z(A.type,se,void 0,void 0,fe,W)},Le.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:c,_context:A},A},Le.createElement=function(A,F,B){var W,se={},fe=null;if(F!=null)for(W in F.key!==void 0&&(fe=""+F.key),F)M.call(F,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(se[W]=F[W]);var ge=arguments.length-2;if(ge===1)se.children=B;else if(1<ge){for(var oe=Array(ge),me=0;me<ge;me++)oe[me]=arguments[me+2];se.children=oe}if(A&&A.defaultProps)for(W in ge=A.defaultProps,ge)se[W]===void 0&&(se[W]=ge[W]);return z(A,fe,void 0,void 0,null,se)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(A){return{$$typeof:h,render:A}},Le.isValidElement=I,Le.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:P}},Le.memo=function(A,F){return{$$typeof:p,type:A,compare:F===void 0?null:F}},Le.startTransition=function(A){var F=j.T,B={};j.T=B;try{var W=A(),se=j.S;se!==null&&se(B,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Y,$)}catch(fe){$(fe)}finally{j.T=F}},Le.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Le.use=function(A){return j.H.use(A)},Le.useActionState=function(A,F,B){return j.H.useActionState(A,F,B)},Le.useCallback=function(A,F){return j.H.useCallback(A,F)},Le.useContext=function(A){return j.H.useContext(A)},Le.useDebugValue=function(){},Le.useDeferredValue=function(A,F){return j.H.useDeferredValue(A,F)},Le.useEffect=function(A,F,B){var W=j.H;if(typeof B=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(A,F)},Le.useId=function(){return j.H.useId()},Le.useImperativeHandle=function(A,F,B){return j.H.useImperativeHandle(A,F,B)},Le.useInsertionEffect=function(A,F){return j.H.useInsertionEffect(A,F)},Le.useLayoutEffect=function(A,F){return j.H.useLayoutEffect(A,F)},Le.useMemo=function(A,F){return j.H.useMemo(A,F)},Le.useOptimistic=function(A,F){return j.H.useOptimistic(A,F)},Le.useReducer=function(A,F,B){return j.H.useReducer(A,F,B)},Le.useRef=function(A){return j.H.useRef(A)},Le.useState=function(A){return j.H.useState(A)},Le.useSyncExternalStore=function(A,F,B){return j.H.useSyncExternalStore(A,F,B)},Le.useTransition=function(){return j.H.useTransition()},Le.version="19.1.0",Le}var Qx;function Jm(){return Qx||(Qx=1,Ah.exports=EN()),Ah.exports}var v=Jm();const Ie=yv(v);var kh={exports:{}},No={},Mh={exports:{}},Oh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx;function AN(){return Zx||(Zx=1,function(e){function t(O,P){var $=O.length;O.push(P);e:for(;0<$;){var Y=$-1>>>1,A=O[Y];if(0<l(A,P))O[Y]=P,O[$]=A,$=Y;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var P=O[0],$=O.pop();if($!==P){O[0]=$;e:for(var Y=0,A=O.length,F=A>>>1;Y<F;){var B=2*(Y+1)-1,W=O[B],se=B+1,fe=O[se];if(0>l(W,$))se<A&&0>l(fe,W)?(O[Y]=fe,O[se]=$,Y=se):(O[Y]=W,O[B]=$,Y=B);else if(se<A&&0>l(fe,$))O[Y]=fe,O[se]=$,Y=se;else break e}}return P}function l(O,P){var $=O.sortIndex-P.sortIndex;return $!==0?$:O.id-P.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var f=[],p=[],g=1,y=null,b=3,w=!1,_=!1,N=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function E(O){for(var P=n(p);P!==null;){if(P.callback===null)i(p);else if(P.startTime<=O)i(p),P.sortIndex=P.expirationTime,t(f,P);else break;P=n(p)}}function j(O){if(N=!1,E(O),!_)if(n(f)!==null)_=!0,M||(M=!0,K());else{var P=n(p);P!==null&&L(j,P.startTime-O)}}var M=!1,z=-1,U=5,I=-1;function V(){return T?!0:!(e.unstable_now()-I<U)}function Q(){if(T=!1,M){var O=e.unstable_now();I=O;var P=!0;try{e:{_=!1,N&&(N=!1,S(z),z=-1),w=!0;var $=b;try{t:{for(E(O),y=n(f);y!==null&&!(y.expirationTime>O&&V());){var Y=y.callback;if(typeof Y=="function"){y.callback=null,b=y.priorityLevel;var A=Y(y.expirationTime<=O);if(O=e.unstable_now(),typeof A=="function"){y.callback=A,E(O),P=!0;break t}y===n(f)&&i(f),E(O)}else i(f);y=n(f)}if(y!==null)P=!0;else{var F=n(p);F!==null&&L(j,F.startTime-O),P=!1}}break e}finally{y=null,b=$,w=!1}P=void 0}}finally{P?K():M=!1}}}var K;if(typeof k=="function")K=function(){k(Q)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,pe=ie.port2;ie.port1.onmessage=Q,K=function(){pe.postMessage(null)}}else K=function(){R(Q,0)};function L(O,P){z=R(function(){O(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(O){switch(b){case 1:case 2:case 3:var P=3;break;default:P=b}var $=b;b=P;try{return O()}finally{b=$}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(O,P){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var $=b;b=O;try{return P()}finally{b=$}},e.unstable_scheduleCallback=function(O,P,$){var Y=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Y+$:Y):$=Y,O){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=$+A,O={id:g++,callback:P,priorityLevel:O,startTime:$,expirationTime:A,sortIndex:-1},$>Y?(O.sortIndex=$,t(p,O),n(f)===null&&O===n(p)&&(N?(S(z),z=-1):N=!0,L(j,$-Y))):(O.sortIndex=A,t(f,O),_||w||(_=!0,M||(M=!0,K()))),O},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(O){var P=b;return function(){var $=b;b=P;try{return O.apply(this,arguments)}finally{b=$}}}}(Oh)),Oh}var Jx;function kN(){return Jx||(Jx=1,Mh.exports=AN()),Mh.exports}var Dh={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function MN(){if(ey)return Yt;ey=1;var e=Jm();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(f,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:f,containerInfo:p,implementation:g}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yt.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return c(f,p,null,g)},Yt.flushSync=function(f){var p=u.T,g=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=p,i.p=g,i.d.f()}},Yt.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},Yt.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Yt.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:w}):g==="script"&&i.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Yt.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=h(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},Yt.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=h(g,p.crossOrigin);i.d.L(f,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Yt.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=h(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},Yt.requestFormReset=function(f){i.d.r(f)},Yt.unstable_batchedUpdates=function(f,p){return f(p)},Yt.useFormState=function(f,p,g){return u.H.useFormState(f,p,g)},Yt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Yt.version="19.1.0",Yt}var ty;function ON(){if(ty)return Dh.exports;ty=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Dh.exports=MN(),Dh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function DN(){if(sy)return No;sy=1;var e=kN(),t=Jm(),n=ON();function i(a){var r="https://react.dev/errors/"+a;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+a+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var r=a,o=a;if(a.alternate)for(;r.return;)r=r.return;else{a=r;do r=a,(r.flags&4098)!==0&&(o=r.return),a=r.return;while(a)}return r.tag===3?o:null}function u(a){if(a.tag===13){var r=a.memoizedState;if(r===null&&(a=a.alternate,a!==null&&(r=a.memoizedState)),r!==null)return r.dehydrated}return null}function h(a){if(c(a)!==a)throw Error(i(188))}function f(a){var r=a.alternate;if(!r){if(r=c(a),r===null)throw Error(i(188));return r!==a?null:a}for(var o=a,d=r;;){var m=o.return;if(m===null)break;var x=m.alternate;if(x===null){if(d=m.return,d!==null){o=d;continue}break}if(m.child===x.child){for(x=m.child;x;){if(x===o)return h(m),a;if(x===d)return h(m),r;x=x.sibling}throw Error(i(188))}if(o.return!==d.return)o=m,d=x;else{for(var C=!1,D=m.child;D;){if(D===o){C=!0,o=m,d=x;break}if(D===d){C=!0,d=m,o=x;break}D=D.sibling}if(!C){for(D=x.child;D;){if(D===o){C=!0,o=x,d=m;break}if(D===d){C=!0,d=x,o=m;break}D=D.sibling}if(!C)throw Error(i(189))}}if(o.alternate!==d)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?a:r}function p(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a;for(a=a.child;a!==null;){if(r=p(a),r!==null)return r;a=a.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),k=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function K(a){return a===null||typeof a!="object"?null:(a=Q&&a[Q]||a["@@iterator"],typeof a=="function"?a:null)}var ie=Symbol.for("react.client.reference");function pe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ie?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case T:return"Profiler";case N:return"StrictMode";case j:return"Suspense";case M:return"SuspenseList";case I:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case k:return(a.displayName||"Context")+".Provider";case S:return(a._context.displayName||"Context")+".Consumer";case E:var r=a.render;return a=a.displayName,a||(a=r.displayName||r.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return r=a.displayName||null,r!==null?r:pe(a.type)||"Memo";case U:r=a._payload,a=a._init;try{return pe(a(r))}catch{}}return null}var L=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},Y=[],A=-1;function F(a){return{current:a}}function B(a){0>A||(a.current=Y[A],Y[A]=null,A--)}function W(a,r){A++,Y[A]=a.current,a.current=r}var se=F(null),fe=F(null),ge=F(null),oe=F(null);function me(a,r){switch(W(ge,r),W(fe,a),W(se,null),r.nodeType){case 9:case 11:a=(a=r.documentElement)&&(a=a.namespaceURI)?wx(a):0;break;default:if(a=r.tagName,r=r.namespaceURI)r=wx(r),a=_x(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}B(se),W(se,a)}function Ne(){B(se),B(fe),B(ge)}function Be(a){a.memoizedState!==null&&W(oe,a);var r=se.current,o=_x(r,a.type);r!==o&&(W(fe,a),W(se,o))}function je(a){fe.current===a&&(B(se),B(fe)),oe.current===a&&(B(oe),yo._currentValue=$)}var De=Object.prototype.hasOwnProperty,St=e.unstable_scheduleCallback,ds=e.unstable_cancelCallback,Ra=e.unstable_shouldYield,la=e.unstable_requestPaint,Tt=e.unstable_now,er=e.unstable_getCurrentPriorityLevel,ca=e.unstable_ImmediatePriority,H=e.unstable_UserBlockingPriority,ee=e.unstable_NormalPriority,ce=e.unstable_LowPriority,be=e.unstable_IdlePriority,ye=e.log,Z=e.unstable_setDisableYieldValue,xe=null,Ee=null;function ze(a){if(typeof ye=="function"&&Z(a),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(xe,a)}catch{}}var ne=Math.clz32?Math.clz32:Wt,Re=Math.log,Ve=Math.LN2;function Wt(a){return a>>>=0,a===0?32:31-(Re(a)/Ve|0)|0}var Ht=256,us=4194304;function js(a){var r=a&42;if(r!==0)return r;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Gs(a,r,o){var d=a.pendingLanes;if(d===0)return 0;var m=0,x=a.suspendedLanes,C=a.pingedLanes;a=a.warmLanes;var D=d&134217727;return D!==0?(d=D&~x,d!==0?m=js(d):(C&=D,C!==0?m=js(C):o||(o=D&~a,o!==0&&(m=js(o))))):(D=d&~x,D!==0?m=js(D):C!==0?m=js(C):o||(o=d&~a,o!==0&&(m=js(o)))),m===0?0:r!==0&&r!==m&&(r&x)===0&&(x=m&-m,o=r&-r,x>=o||x===32&&(o&4194048)!==0)?r:m}function Ys(a,r){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&r)===0}function xn(a,r){switch(a){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ni(){var a=Ht;return Ht<<=1,(Ht&4194048)===0&&(Ht=256),a}function Si(){var a=us;return us<<=1,(us&62914560)===0&&(us=4194304),a}function Ti(a){for(var r=[],o=0;31>o;o++)r.push(a);return r}function tr(a,r){a.pendingLanes|=r,r!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Ci(a,r,o,d,m,x){var C=a.pendingLanes;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=o,a.entangledLanes&=o,a.errorRecoveryDisabledLanes&=o,a.shellSuspendCounter=0;var D=a.entanglements,q=a.expirationTimes,te=a.hiddenUpdates;for(o=C&~o;0<o;){var de=31-ne(o),he=1<<de;D[de]=0,q[de]=-1;var ae=te[de];if(ae!==null)for(te[de]=null,de=0;de<ae.length;de++){var re=ae[de];re!==null&&(re.lane&=-536870913)}o&=~he}d!==0&&o0(a,d,0),x!==0&&m===0&&a.tag!==0&&(a.suspendedLanes|=x&~(C&~r))}function o0(a,r,o){a.pendingLanes|=r,a.suspendedLanes&=~r;var d=31-ne(r);a.entangledLanes|=r,a.entanglements[d]=a.entanglements[d]|1073741824|o&4194090}function l0(a,r){var o=a.entangledLanes|=r;for(a=a.entanglements;o;){var d=31-ne(o),m=1<<d;m&r|a[d]&r&&(a[d]|=r),o&=~m}}function yd(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function bd(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function c0(){var a=P.p;return a!==0?a:(a=window.event,a===void 0?32:qx(a.type))}function f1(a,r){var o=P.p;try{return P.p=a,r()}finally{P.p=o}}var Pa=Math.random().toString(36).slice(2),It="__reactFiber$"+Pa,ss="__reactProps$"+Pa,sr="__reactContainer$"+Pa,vd="__reactEvents$"+Pa,p1="__reactListeners$"+Pa,g1="__reactHandles$"+Pa,d0="__reactResources$"+Pa,Ei="__reactMarker$"+Pa;function jd(a){delete a[It],delete a[ss],delete a[vd],delete a[p1],delete a[g1]}function ar(a){var r=a[It];if(r)return r;for(var o=a.parentNode;o;){if(r=o[sr]||o[It]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(a=Cx(a);a!==null;){if(o=a[It])return o;a=Cx(a)}return r}a=o,o=a.parentNode}return null}function nr(a){if(a=a[It]||a[sr]){var r=a.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return a}return null}function Ai(a){var r=a.tag;if(r===5||r===26||r===27||r===6)return a.stateNode;throw Error(i(33))}function rr(a){var r=a[d0];return r||(r=a[d0]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ot(a){a[Ei]=!0}var u0=new Set,h0={};function yn(a,r){ir(a,r),ir(a+"Capture",r)}function ir(a,r){for(h0[a]=r,a=0;a<r.length;a++)u0.add(r[a])}var x1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),m0={},f0={};function y1(a){return De.call(f0,a)?!0:De.call(m0,a)?!1:x1.test(a)?f0[a]=!0:(m0[a]=!0,!1)}function dl(a,r,o){if(y1(r))if(o===null)a.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":a.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(r);return}}a.setAttribute(r,""+o)}}function ul(a,r,o){if(o===null)a.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(r);return}a.setAttribute(r,""+o)}}function da(a,r,o,d){if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttributeNS(r,o,""+d)}}var wd,p0;function or(a){if(wd===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);wd=r&&r[1]||"",p0=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wd+a+p0}var _d=!1;function Nd(a,r){if(!a||_d)return"";_d=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var ae=re}Reflect.construct(a,[],he)}else{try{he.call()}catch(re){ae=re}a.call(he.prototype)}}else{try{throw Error()}catch(re){ae=re}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&ae&&typeof re.stack=="string")return[re.stack,ae.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),C=x[0],D=x[1];if(C&&D){var q=C.split(`
`),te=D.split(`
`);for(m=d=0;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;for(;m<te.length&&!te[m].includes("DetermineComponentFrameRoot");)m++;if(d===q.length||m===te.length)for(d=q.length-1,m=te.length-1;1<=d&&0<=m&&q[d]!==te[m];)m--;for(;1<=d&&0<=m;d--,m--)if(q[d]!==te[m]){if(d!==1||m!==1)do if(d--,m--,0>m||q[d]!==te[m]){var de=`
`+q[d].replace(" at new "," at ");return a.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",a.displayName)),de}while(1<=d&&0<=m);break}}}finally{_d=!1,Error.prepareStackTrace=o}return(o=a?a.displayName||a.name:"")?or(o):""}function b1(a){switch(a.tag){case 26:case 27:case 5:return or(a.type);case 16:return or("Lazy");case 13:return or("Suspense");case 19:return or("SuspenseList");case 0:case 15:return Nd(a.type,!1);case 11:return Nd(a.type.render,!1);case 1:return Nd(a.type,!0);case 31:return or("Activity");default:return""}}function g0(a){try{var r="";do r+=b1(a),a=a.return;while(a);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function ws(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function x0(a){var r=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function v1(a){var r=x0(a)?"checked":"value",o=Object.getOwnPropertyDescriptor(a.constructor.prototype,r),d=""+a[r];if(!a.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,x=o.set;return Object.defineProperty(a,r,{configurable:!0,get:function(){return m.call(this)},set:function(C){d=""+C,x.call(this,C)}}),Object.defineProperty(a,r,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){a._valueTracker=null,delete a[r]}}}}function hl(a){a._valueTracker||(a._valueTracker=v1(a))}function y0(a){if(!a)return!1;var r=a._valueTracker;if(!r)return!0;var o=r.getValue(),d="";return a&&(d=x0(a)?a.checked?"true":"false":a.value),a=d,a!==o?(r.setValue(a),!0):!1}function ml(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var j1=/[\n"\\]/g;function _s(a){return a.replace(j1,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Sd(a,r,o,d,m,x,C,D){a.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.type=C:a.removeAttribute("type"),r!=null?C==="number"?(r===0&&a.value===""||a.value!=r)&&(a.value=""+ws(r)):a.value!==""+ws(r)&&(a.value=""+ws(r)):C!=="submit"&&C!=="reset"||a.removeAttribute("value"),r!=null?Td(a,C,ws(r)):o!=null?Td(a,C,ws(o)):d!=null&&a.removeAttribute("value"),m==null&&x!=null&&(a.defaultChecked=!!x),m!=null&&(a.checked=m&&typeof m!="function"&&typeof m!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.name=""+ws(D):a.removeAttribute("name")}function b0(a,r,o,d,m,x,C,D){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),r!=null||o!=null){if(!(x!=="submit"&&x!=="reset"||r!=null))return;o=o!=null?""+ws(o):"",r=r!=null?""+ws(r):o,D||r===a.value||(a.value=r),a.defaultValue=r}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=D?a.checked:!!d,a.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.name=C)}function Td(a,r,o){r==="number"&&ml(a.ownerDocument)===a||a.defaultValue===""+o||(a.defaultValue=""+o)}function lr(a,r,o,d){if(a=a.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<a.length;o++)m=r.hasOwnProperty("$"+a[o].value),a[o].selected!==m&&(a[o].selected=m),m&&d&&(a[o].defaultSelected=!0)}else{for(o=""+ws(o),r=null,m=0;m<a.length;m++){if(a[m].value===o){a[m].selected=!0,d&&(a[m].defaultSelected=!0);return}r!==null||a[m].disabled||(r=a[m])}r!==null&&(r.selected=!0)}}function v0(a,r,o){if(r!=null&&(r=""+ws(r),r!==a.value&&(a.value=r),o==null)){a.defaultValue!==r&&(a.defaultValue=r);return}a.defaultValue=o!=null?""+ws(o):""}function j0(a,r,o,d){if(r==null){if(d!=null){if(o!=null)throw Error(i(92));if(L(d)){if(1<d.length)throw Error(i(93));d=d[0]}o=d}o==null&&(o=""),r=o}o=ws(r),a.defaultValue=o,d=a.textContent,d===o&&d!==""&&d!==null&&(a.value=d)}function cr(a,r){if(r){var o=a.firstChild;if(o&&o===a.lastChild&&o.nodeType===3){o.nodeValue=r;return}}a.textContent=r}var w1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function w0(a,r,o){var d=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?d?a.setProperty(r,""):r==="float"?a.cssFloat="":a[r]="":d?a.setProperty(r,o):typeof o!="number"||o===0||w1.has(r)?r==="float"?a.cssFloat=o:a[r]=(""+o).trim():a[r]=o+"px"}function _0(a,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(a=a.style,o!=null){for(var d in o)!o.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var m in r)d=r[m],r.hasOwnProperty(m)&&o[m]!==d&&w0(a,m,d)}else for(var x in r)r.hasOwnProperty(x)&&w0(a,x,r[x])}function Cd(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),N1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fl(a){return N1.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Ed=null;function Ad(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var dr=null,ur=null;function N0(a){var r=nr(a);if(r&&(a=r.stateNode)){var o=a[ss]||null;e:switch(a=r.stateNode,r.type){case"input":if(Sd(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=a;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+_s(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var d=o[r];if(d!==a&&d.form===a.form){var m=d[ss]||null;if(!m)throw Error(i(90));Sd(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<o.length;r++)d=o[r],d.form===a.form&&y0(d)}break e;case"textarea":v0(a,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&lr(a,!!o.multiple,r,!1)}}}var kd=!1;function S0(a,r,o){if(kd)return a(r,o);kd=!0;try{var d=a(r);return d}finally{if(kd=!1,(dr!==null||ur!==null)&&(Jl(),dr&&(r=dr,a=ur,ur=dr=null,N0(r),a)))for(r=0;r<a.length;r++)N0(a[r])}}function ki(a,r){var o=a.stateNode;if(o===null)return null;var d=o[ss]||null;if(d===null)return null;o=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Md=!1;if(ua)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){Md=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{Md=!1}var za=null,Od=null,pl=null;function T0(){if(pl)return pl;var a,r=Od,o=r.length,d,m="value"in za?za.value:za.textContent,x=m.length;for(a=0;a<o&&r[a]===m[a];a++);var C=o-a;for(d=1;d<=C&&r[o-d]===m[x-d];d++);return pl=m.slice(a,1<d?1-d:void 0)}function gl(a){var r=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&r===13&&(a=13)):a=r,a===10&&(a=13),32<=a||a===13?a:0}function xl(){return!0}function C0(){return!1}function as(a){function r(o,d,m,x,C){this._reactName=o,this._targetInst=m,this.type=d,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var D in a)a.hasOwnProperty(D)&&(o=a[D],this[D]=o?o(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?xl:C0,this.isPropagationStopped=C0,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),r}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yl=as(bn),Oi=g({},bn,{view:0,detail:0}),S1=as(Oi),Dd,Rd,Di,bl=g({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Di&&(Di&&a.type==="mousemove"?(Dd=a.screenX-Di.screenX,Rd=a.screenY-Di.screenY):Rd=Dd=0,Di=a),Dd)},movementY:function(a){return"movementY"in a?a.movementY:Rd}}),E0=as(bl),T1=g({},bl,{dataTransfer:0}),C1=as(T1),E1=g({},Oi,{relatedTarget:0}),Pd=as(E1),A1=g({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),k1=as(A1),M1=g({},bn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),O1=as(M1),D1=g({},bn,{data:0}),A0=as(D1),R1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L1(a){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(a):(a=z1[a])?!!r[a]:!1}function zd(){return L1}var B1=g({},Oi,{key:function(a){if(a.key){var r=R1[a.key]||a.key;if(r!=="Unidentified")return r}return a.type==="keypress"?(a=gl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?P1[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?gl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?gl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),$1=as(B1),V1=g({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k0=as(V1),U1=g({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),q1=as(U1),F1=g({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),H1=as(F1),I1=g({},bl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),G1=as(I1),Y1=g({},bn,{newState:0,oldState:0}),X1=as(Y1),K1=[9,13,27,32],Ld=ua&&"CompositionEvent"in window,Ri=null;ua&&"documentMode"in document&&(Ri=document.documentMode);var W1=ua&&"TextEvent"in window&&!Ri,M0=ua&&(!Ld||Ri&&8<Ri&&11>=Ri),O0=" ",D0=!1;function R0(a,r){switch(a){case"keyup":return K1.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P0(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var hr=!1;function Q1(a,r){switch(a){case"compositionend":return P0(r);case"keypress":return r.which!==32?null:(D0=!0,O0);case"textInput":return a=r.data,a===O0&&D0?null:a;default:return null}}function Z1(a,r){if(hr)return a==="compositionend"||!Ld&&R0(a,r)?(a=T0(),pl=Od=za=null,hr=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return M0&&r.locale!=="ko"?null:r.data;default:return null}}var J1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z0(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r==="input"?!!J1[a.type]:r==="textarea"}function L0(a,r,o,d){dr?ur?ur.push(d):ur=[d]:dr=d,r=rc(r,"onChange"),0<r.length&&(o=new yl("onChange","change",null,o,d),a.push({event:o,listeners:r}))}var Pi=null,zi=null;function e_(a){xx(a,0)}function vl(a){var r=Ai(a);if(y0(r))return a}function B0(a,r){if(a==="change")return r}var $0=!1;if(ua){var Bd;if(ua){var $d="oninput"in document;if(!$d){var V0=document.createElement("div");V0.setAttribute("oninput","return;"),$d=typeof V0.oninput=="function"}Bd=$d}else Bd=!1;$0=Bd&&(!document.documentMode||9<document.documentMode)}function U0(){Pi&&(Pi.detachEvent("onpropertychange",q0),zi=Pi=null)}function q0(a){if(a.propertyName==="value"&&vl(zi)){var r=[];L0(r,zi,a,Ad(a)),S0(e_,r)}}function t_(a,r,o){a==="focusin"?(U0(),Pi=r,zi=o,Pi.attachEvent("onpropertychange",q0)):a==="focusout"&&U0()}function s_(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return vl(zi)}function a_(a,r){if(a==="click")return vl(r)}function n_(a,r){if(a==="input"||a==="change")return vl(r)}function r_(a,r){return a===r&&(a!==0||1/a===1/r)||a!==a&&r!==r}var hs=typeof Object.is=="function"?Object.is:r_;function Li(a,r){if(hs(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var o=Object.keys(a),d=Object.keys(r);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var m=o[d];if(!De.call(r,m)||!hs(a[m],r[m]))return!1}return!0}function F0(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function H0(a,r){var o=F0(a);a=0;for(var d;o;){if(o.nodeType===3){if(d=a+o.textContent.length,a<=r&&d>=r)return{node:o,offset:r-a};a=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=F0(o)}}function I0(a,r){return a&&r?a===r?!0:a&&a.nodeType===3?!1:r&&r.nodeType===3?I0(a,r.parentNode):"contains"in a?a.contains(r):a.compareDocumentPosition?!!(a.compareDocumentPosition(r)&16):!1:!1}function G0(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var r=ml(a.document);r instanceof a.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)a=r.contentWindow;else break;r=ml(a.document)}return r}function Vd(a){var r=a&&a.nodeName&&a.nodeName.toLowerCase();return r&&(r==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||r==="textarea"||a.contentEditable==="true")}var i_=ua&&"documentMode"in document&&11>=document.documentMode,mr=null,Ud=null,Bi=null,qd=!1;function Y0(a,r,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qd||mr==null||mr!==ml(d)||(d=mr,"selectionStart"in d&&Vd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Bi&&Li(Bi,d)||(Bi=d,d=rc(Ud,"onSelect"),0<d.length&&(r=new yl("onSelect","select",null,r,o),a.push({event:r,listeners:d}),r.target=mr)))}function vn(a,r){var o={};return o[a.toLowerCase()]=r.toLowerCase(),o["Webkit"+a]="webkit"+r,o["Moz"+a]="moz"+r,o}var fr={animationend:vn("Animation","AnimationEnd"),animationiteration:vn("Animation","AnimationIteration"),animationstart:vn("Animation","AnimationStart"),transitionrun:vn("Transition","TransitionRun"),transitionstart:vn("Transition","TransitionStart"),transitioncancel:vn("Transition","TransitionCancel"),transitionend:vn("Transition","TransitionEnd")},Fd={},X0={};ua&&(X0=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function jn(a){if(Fd[a])return Fd[a];if(!fr[a])return a;var r=fr[a],o;for(o in r)if(r.hasOwnProperty(o)&&o in X0)return Fd[a]=r[o];return a}var K0=jn("animationend"),W0=jn("animationiteration"),Q0=jn("animationstart"),o_=jn("transitionrun"),l_=jn("transitionstart"),c_=jn("transitioncancel"),Z0=jn("transitionend"),J0=new Map,Hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hd.push("scrollEnd");function Rs(a,r){J0.set(a,r),yn(r,[a])}var ep=new WeakMap;function Ns(a,r){if(typeof a=="object"&&a!==null){var o=ep.get(a);return o!==void 0?o:(r={value:a,source:r,stack:g0(r)},ep.set(a,r),r)}return{value:a,source:r,stack:g0(r)}}var Ss=[],pr=0,Id=0;function jl(){for(var a=pr,r=Id=pr=0;r<a;){var o=Ss[r];Ss[r++]=null;var d=Ss[r];Ss[r++]=null;var m=Ss[r];Ss[r++]=null;var x=Ss[r];if(Ss[r++]=null,d!==null&&m!==null){var C=d.pending;C===null?m.next=m:(m.next=C.next,C.next=m),d.pending=m}x!==0&&tp(o,m,x)}}function wl(a,r,o,d){Ss[pr++]=a,Ss[pr++]=r,Ss[pr++]=o,Ss[pr++]=d,Id|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Gd(a,r,o,d){return wl(a,r,o,d),_l(a)}function gr(a,r){return wl(a,null,null,r),_l(a)}function tp(a,r,o){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o);for(var m=!1,x=a.return;x!==null;)x.childLanes|=o,d=x.alternate,d!==null&&(d.childLanes|=o),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(m=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,m&&r!==null&&(m=31-ne(o),a=x.hiddenUpdates,d=a[m],d===null?a[m]=[r]:d.push(r),r.lane=o|536870912),x):null}function _l(a){if(50<co)throw co=0,Zu=null,Error(i(185));for(var r=a.return;r!==null;)a=r,r=a.return;return a.tag===3?a.stateNode:null}var xr={};function d_(a,r,o,d){this.tag=a,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(a,r,o,d){return new d_(a,r,o,d)}function Yd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ha(a,r){var o=a.alternate;return o===null?(o=ms(a.tag,r,a.key,a.mode),o.elementType=a.elementType,o.type=a.type,o.stateNode=a.stateNode,o.alternate=a,a.alternate=o):(o.pendingProps=r,o.type=a.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=a.flags&65011712,o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,r=a.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=a.sibling,o.index=a.index,o.ref=a.ref,o.refCleanup=a.refCleanup,o}function sp(a,r){a.flags&=65011714;var o=a.alternate;return o===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a}function Nl(a,r,o,d,m,x){var C=0;if(d=a,typeof a=="function")Yd(a)&&(C=1);else if(typeof a=="string")C=hN(a,o,se.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case I:return a=ms(31,o,r,m),a.elementType=I,a.lanes=x,a;case _:return wn(o.children,m,x,r);case N:C=8,m|=24;break;case T:return a=ms(12,o,r,m|2),a.elementType=T,a.lanes=x,a;case j:return a=ms(13,o,r,m),a.elementType=j,a.lanes=x,a;case M:return a=ms(19,o,r,m),a.elementType=M,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case R:case k:C=10;break e;case S:C=9;break e;case E:C=11;break e;case z:C=14;break e;case U:C=16,d=null;break e}C=29,o=Error(i(130,a===null?"null":typeof a,"")),d=null}return r=ms(C,o,r,m),r.elementType=a,r.type=d,r.lanes=x,r}function wn(a,r,o,d){return a=ms(7,a,d,r),a.lanes=o,a}function Xd(a,r,o){return a=ms(6,a,null,r),a.lanes=o,a}function Kd(a,r,o){return r=ms(4,a.children!==null?a.children:[],a.key,r),r.lanes=o,r.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},r}var yr=[],br=0,Sl=null,Tl=0,Ts=[],Cs=0,_n=null,ma=1,fa="";function Nn(a,r){yr[br++]=Tl,yr[br++]=Sl,Sl=a,Tl=r}function ap(a,r,o){Ts[Cs++]=ma,Ts[Cs++]=fa,Ts[Cs++]=_n,_n=a;var d=ma;a=fa;var m=32-ne(d)-1;d&=~(1<<m),o+=1;var x=32-ne(r)+m;if(30<x){var C=m-m%5;x=(d&(1<<C)-1).toString(32),d>>=C,m-=C,ma=1<<32-ne(r)+m|o<<m|d,fa=x+a}else ma=1<<x|o<<m|d,fa=a}function Wd(a){a.return!==null&&(Nn(a,1),ap(a,1,0))}function Qd(a){for(;a===Sl;)Sl=yr[--br],yr[br]=null,Tl=yr[--br],yr[br]=null;for(;a===_n;)_n=Ts[--Cs],Ts[Cs]=null,fa=Ts[--Cs],Ts[Cs]=null,ma=Ts[--Cs],Ts[Cs]=null}var Qt=null,ut=null,Xe=!1,Sn=null,Xs=!1,Zd=Error(i(519));function Tn(a){var r=Error(i(418,""));throw Ui(Ns(r,a)),Zd}function np(a){var r=a.stateNode,o=a.type,d=a.memoizedProps;switch(r[It]=a,r[ss]=d,o){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(o=0;o<ho.length;o++)Fe(ho[o],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),b0(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),hl(r);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),j0(r,d.value,d.defaultValue,d.children),hl(r)}o=d.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||d.suppressHydrationWarning===!0||jx(r.textContent,o)?(d.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),d.onScroll!=null&&Fe("scroll",r),d.onScrollEnd!=null&&Fe("scrollend",r),d.onClick!=null&&(r.onclick=ic),r=!0):r=!1,r||Tn(a)}function rp(a){for(Qt=a.return;Qt;)switch(Qt.tag){case 5:case 13:Xs=!1;return;case 27:case 3:Xs=!0;return;default:Qt=Qt.return}}function $i(a){if(a!==Qt)return!1;if(!Xe)return rp(a),Xe=!0,!1;var r=a.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=a.type,o=!(o!=="form"&&o!=="button")||fh(a.type,a.memoizedProps)),o=!o),o&&ut&&Tn(a),rp(a),r===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));e:{for(a=a.nextSibling,r=0;a;){if(a.nodeType===8)if(o=a.data,o==="/$"){if(r===0){ut=zs(a.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;a=a.nextSibling}ut=null}}else r===27?(r=ut,Za(a.type)?(a=yh,yh=null,ut=a):ut=r):ut=Qt?zs(a.stateNode.nextSibling):null;return!0}function Vi(){ut=Qt=null,Xe=!1}function ip(){var a=Sn;return a!==null&&(is===null?is=a:is.push.apply(is,a),Sn=null),a}function Ui(a){Sn===null?Sn=[a]:Sn.push(a)}var Jd=F(null),Cn=null,pa=null;function La(a,r,o){W(Jd,r._currentValue),r._currentValue=o}function ga(a){a._currentValue=Jd.current,B(Jd)}function eu(a,r,o){for(;a!==null;){var d=a.alternate;if((a.childLanes&r)!==r?(a.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),a===o)break;a=a.return}}function tu(a,r,o,d){var m=a.child;for(m!==null&&(m.return=a);m!==null;){var x=m.dependencies;if(x!==null){var C=m.child;x=x.firstContext;e:for(;x!==null;){var D=x;x=m;for(var q=0;q<r.length;q++)if(D.context===r[q]){x.lanes|=o,D=x.alternate,D!==null&&(D.lanes|=o),eu(x.return,o,a),d||(C=null);break e}x=D.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(i(341));C.lanes|=o,x=C.alternate,x!==null&&(x.lanes|=o),eu(C,o,a),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===a){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function qi(a,r,o,d){a=null;for(var m=r,x=!1;m!==null;){if(!x){if((m.flags&524288)!==0)x=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var D=m.type;hs(m.pendingProps.value,C.value)||(a!==null?a.push(D):a=[D])}}else if(m===oe.current){if(C=m.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(a!==null?a.push(yo):a=[yo])}m=m.return}a!==null&&tu(r,a,o,d),r.flags|=262144}function Cl(a){for(a=a.firstContext;a!==null;){if(!hs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function En(a){Cn=a,pa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Gt(a){return op(Cn,a)}function El(a,r){return Cn===null&&En(a),op(a,r)}function op(a,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},pa===null){if(a===null)throw Error(i(308));pa=r,a.dependencies={lanes:0,firstContext:r},a.flags|=524288}else pa=pa.next=r;return o}var u_=typeof AbortController<"u"?AbortController:function(){var a=[],r=this.signal={aborted:!1,addEventListener:function(o,d){a.push(d)}};this.abort=function(){r.aborted=!0,a.forEach(function(o){return o()})}},h_=e.unstable_scheduleCallback,m_=e.unstable_NormalPriority,Ct={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function su(){return{controller:new u_,data:new Map,refCount:0}}function Fi(a){a.refCount--,a.refCount===0&&h_(m_,function(){a.controller.abort()})}var Hi=null,au=0,vr=0,jr=null;function f_(a,r){if(Hi===null){var o=Hi=[];au=0,vr=rh(),jr={status:"pending",value:void 0,then:function(d){o.push(d)}}}return au++,r.then(lp,lp),r}function lp(){if(--au===0&&Hi!==null){jr!==null&&(jr.status="fulfilled");var a=Hi;Hi=null,vr=0,jr=null;for(var r=0;r<a.length;r++)(0,a[r])()}}function p_(a,r){var o=[],d={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return a.then(function(){d.status="fulfilled",d.value=r;for(var m=0;m<o.length;m++)(0,o[m])(r)},function(m){for(d.status="rejected",d.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),d}var cp=O.S;O.S=function(a,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&f_(a,r),cp!==null&&cp(a,r)};var An=F(null);function nu(){var a=An.current;return a!==null?a:st.pooledCache}function Al(a,r){r===null?W(An,An.current):W(An,r.pool)}function dp(){var a=nu();return a===null?null:{parent:Ct._currentValue,pool:a}}var Ii=Error(i(460)),up=Error(i(474)),kl=Error(i(542)),ru={then:function(){}};function hp(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ml(){}function mp(a,r,o){switch(o=a[o],o===void 0?a.push(r):o!==r&&(r.then(Ml,Ml),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,pp(a),a;default:if(typeof r.status=="string")r.then(Ml,Ml);else{if(a=st,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=r,a.status="pending",a.then(function(d){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=d}},function(d){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw a=r.reason,pp(a),a}throw Gi=r,Ii}}var Gi=null;function fp(){if(Gi===null)throw Error(i(459));var a=Gi;return Gi=null,a}function pp(a){if(a===Ii||a===kl)throw Error(i(483))}var Ba=!1;function iu(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ou(a,r){a=a.updateQueue,r.updateQueue===a&&(r.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function $a(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Va(a,r,o){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Ke&2)!==0){var m=d.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),d.pending=r,r=_l(a),tp(a,null,o),r}return wl(a,d,r,o),_l(a)}function Yi(a,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var d=r.lanes;d&=a.pendingLanes,o|=d,r.lanes=o,l0(a,o)}}function lu(a,r){var o=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var m=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var C={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};x===null?m=x=C:x=x.next=C,o=o.next}while(o!==null);x===null?m=x=r:x=x.next=r}else m=x=r;o={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},a.updateQueue=o;return}a=o.lastBaseUpdate,a===null?o.firstBaseUpdate=r:a.next=r,o.lastBaseUpdate=r}var cu=!1;function Xi(){if(cu){var a=jr;if(a!==null)throw a}}function Ki(a,r,o,d){cu=!1;var m=a.updateQueue;Ba=!1;var x=m.firstBaseUpdate,C=m.lastBaseUpdate,D=m.shared.pending;if(D!==null){m.shared.pending=null;var q=D,te=q.next;q.next=null,C===null?x=te:C.next=te,C=q;var de=a.alternate;de!==null&&(de=de.updateQueue,D=de.lastBaseUpdate,D!==C&&(D===null?de.firstBaseUpdate=te:D.next=te,de.lastBaseUpdate=q))}if(x!==null){var he=m.baseState;C=0,de=te=q=null,D=x;do{var ae=D.lane&-536870913,re=ae!==D.lane;if(re?(Ge&ae)===ae:(d&ae)===ae){ae!==0&&ae===vr&&(cu=!0),de!==null&&(de=de.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Me=a,Ae=D;ae=r;var et=o;switch(Ae.tag){case 1:if(Me=Ae.payload,typeof Me=="function"){he=Me.call(et,he,ae);break e}he=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ae.payload,ae=typeof Me=="function"?Me.call(et,he,ae):Me,ae==null)break e;he=g({},he,ae);break e;case 2:Ba=!0}}ae=D.callback,ae!==null&&(a.flags|=64,re&&(a.flags|=8192),re=m.callbacks,re===null?m.callbacks=[ae]:re.push(ae))}else re={lane:ae,tag:D.tag,payload:D.payload,callback:D.callback,next:null},de===null?(te=de=re,q=he):de=de.next=re,C|=ae;if(D=D.next,D===null){if(D=m.shared.pending,D===null)break;re=D,D=re.next,re.next=null,m.lastBaseUpdate=re,m.shared.pending=null}}while(!0);de===null&&(q=he),m.baseState=q,m.firstBaseUpdate=te,m.lastBaseUpdate=de,x===null&&(m.shared.lanes=0),Xa|=C,a.lanes=C,a.memoizedState=he}}function gp(a,r){if(typeof a!="function")throw Error(i(191,a));a.call(r)}function xp(a,r){var o=a.callbacks;if(o!==null)for(a.callbacks=null,a=0;a<o.length;a++)gp(o[a],r)}var wr=F(null),Ol=F(0);function yp(a,r){a=_a,W(Ol,a),W(wr,r),_a=a|r.baseLanes}function du(){W(Ol,_a),W(wr,wr.current)}function uu(){_a=Ol.current,B(wr),B(Ol)}var Ua=0,$e=null,Ze=null,jt=null,Dl=!1,_r=!1,kn=!1,Rl=0,Wi=0,Nr=null,g_=0;function pt(){throw Error(i(321))}function hu(a,r){if(r===null)return!1;for(var o=0;o<r.length&&o<a.length;o++)if(!hs(a[o],r[o]))return!1;return!0}function mu(a,r,o,d,m,x){return Ua=x,$e=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=a===null||a.memoizedState===null?tg:sg,kn=!1,x=o(d,m),kn=!1,_r&&(x=vp(r,o,d,m)),bp(a),x}function bp(a){O.H=Vl;var r=Ze!==null&&Ze.next!==null;if(Ua=0,jt=Ze=$e=null,Dl=!1,Wi=0,Nr=null,r)throw Error(i(300));a===null||Dt||(a=a.dependencies,a!==null&&Cl(a)&&(Dt=!0))}function vp(a,r,o,d){$e=a;var m=0;do{if(_r&&(Nr=null),Wi=0,_r=!1,25<=m)throw Error(i(301));if(m+=1,jt=Ze=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}O.H=__,x=r(o,d)}while(_r);return x}function x_(){var a=O.H,r=a.useState()[0];return r=typeof r.then=="function"?Qi(r):r,a=a.useState()[0],(Ze!==null?Ze.memoizedState:null)!==a&&($e.flags|=1024),r}function fu(){var a=Rl!==0;return Rl=0,a}function pu(a,r,o){r.updateQueue=a.updateQueue,r.flags&=-2053,a.lanes&=~o}function gu(a){if(Dl){for(a=a.memoizedState;a!==null;){var r=a.queue;r!==null&&(r.pending=null),a=a.next}Dl=!1}Ua=0,jt=Ze=$e=null,_r=!1,Wi=Rl=0,Nr=null}function ns(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?$e.memoizedState=jt=a:jt=jt.next=a,jt}function wt(){if(Ze===null){var a=$e.alternate;a=a!==null?a.memoizedState:null}else a=Ze.next;var r=jt===null?$e.memoizedState:jt.next;if(r!==null)jt=r,Ze=a;else{if(a===null)throw $e.alternate===null?Error(i(467)):Error(i(310));Ze=a,a={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},jt===null?$e.memoizedState=jt=a:jt=jt.next=a}return jt}function xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qi(a){var r=Wi;return Wi+=1,Nr===null&&(Nr=[]),a=mp(Nr,a,r),r=$e,(jt===null?r.memoizedState:jt.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?tg:sg),a}function Pl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Qi(a);if(a.$$typeof===k)return Gt(a)}throw Error(i(438,String(a)))}function yu(a){var r=null,o=$e.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var d=$e.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=xu(),$e.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(a),d=0;d<a;d++)o[d]=V;return r.index++,o}function xa(a,r){return typeof r=="function"?r(a):r}function zl(a){var r=wt();return bu(r,Ze,a)}function bu(a,r,o){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=o;var m=a.baseQueue,x=d.pending;if(x!==null){if(m!==null){var C=m.next;m.next=x.next,x.next=C}r.baseQueue=m=x,d.pending=null}if(x=a.baseState,m===null)a.memoizedState=x;else{r=m.next;var D=C=null,q=null,te=r,de=!1;do{var he=te.lane&-536870913;if(he!==te.lane?(Ge&he)===he:(Ua&he)===he){var ae=te.revertLane;if(ae===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),he===vr&&(de=!0);else if((Ua&ae)===ae){te=te.next,ae===vr&&(de=!0);continue}else he={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},q===null?(D=q=he,C=x):q=q.next=he,$e.lanes|=ae,Xa|=ae;he=te.action,kn&&o(x,he),x=te.hasEagerState?te.eagerState:o(x,he)}else ae={lane:he,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},q===null?(D=q=ae,C=x):q=q.next=ae,$e.lanes|=he,Xa|=he;te=te.next}while(te!==null&&te!==r);if(q===null?C=x:q.next=D,!hs(x,a.memoizedState)&&(Dt=!0,de&&(o=jr,o!==null)))throw o;a.memoizedState=x,a.baseState=C,a.baseQueue=q,d.lastRenderedState=x}return m===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function vu(a){var r=wt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var d=o.dispatch,m=o.pending,x=r.memoizedState;if(m!==null){o.pending=null;var C=m=m.next;do x=a(x,C.action),C=C.next;while(C!==m);hs(x,r.memoizedState)||(Dt=!0),r.memoizedState=x,r.baseQueue===null&&(r.baseState=x),o.lastRenderedState=x}return[x,d]}function jp(a,r,o){var d=$e,m=wt(),x=Xe;if(x){if(o===void 0)throw Error(i(407));o=o()}else o=r();var C=!hs((Ze||m).memoizedState,o);C&&(m.memoizedState=o,Dt=!0),m=m.queue;var D=Np.bind(null,d,m,a);if(Zi(2048,8,D,[a]),m.getSnapshot!==r||C||jt!==null&&jt.memoizedState.tag&1){if(d.flags|=2048,Sr(9,Ll(),_p.bind(null,d,m,o,r),null),st===null)throw Error(i(349));x||(Ua&124)!==0||wp(d,r,o)}return o}function wp(a,r,o){a.flags|=16384,a={getSnapshot:r,value:o},r=$e.updateQueue,r===null?(r=xu(),$e.updateQueue=r,r.stores=[a]):(o=r.stores,o===null?r.stores=[a]:o.push(a))}function _p(a,r,o,d){r.value=o,r.getSnapshot=d,Sp(r)&&Tp(a)}function Np(a,r,o){return o(function(){Sp(r)&&Tp(a)})}function Sp(a){var r=a.getSnapshot;a=a.value;try{var o=r();return!hs(a,o)}catch{return!0}}function Tp(a){var r=gr(a,2);r!==null&&ys(r,a,2)}function ju(a){var r=ns();if(typeof a=="function"){var o=a;if(a=o(),kn){ze(!0);try{o()}finally{ze(!1)}}}return r.memoizedState=r.baseState=a,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:a},r}function Cp(a,r,o,d){return a.baseState=o,bu(a,Ze,typeof d=="function"?d:xa)}function y_(a,r,o,d,m){if($l(a))throw Error(i(485));if(a=r.action,a!==null){var x={payload:m,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};O.T!==null?o(!0):x.isTransition=!1,d(x),o=r.pending,o===null?(x.next=r.pending=x,Ep(r,x)):(x.next=o.next,r.pending=o.next=x)}}function Ep(a,r){var o=r.action,d=r.payload,m=a.state;if(r.isTransition){var x=O.T,C={};O.T=C;try{var D=o(m,d),q=O.S;q!==null&&q(C,D),Ap(a,r,D)}catch(te){wu(a,r,te)}finally{O.T=x}}else try{x=o(m,d),Ap(a,r,x)}catch(te){wu(a,r,te)}}function Ap(a,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(d){kp(a,r,d)},function(d){return wu(a,r,d)}):kp(a,r,o)}function kp(a,r,o){r.status="fulfilled",r.value=o,Mp(r),a.state=o,r=a.pending,r!==null&&(o=r.next,o===r?a.pending=null:(o=o.next,r.next=o,Ep(a,o)))}function wu(a,r,o){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=o,Mp(r),r=r.next;while(r!==d)}a.action=null}function Mp(a){a=a.listeners;for(var r=0;r<a.length;r++)(0,a[r])()}function Op(a,r){return r}function Dp(a,r){if(Xe){var o=st.formState;if(o!==null){e:{var d=$e;if(Xe){if(ut){t:{for(var m=ut,x=Xs;m.nodeType!==8;){if(!x){m=null;break t}if(m=zs(m.nextSibling),m===null){m=null;break t}}x=m.data,m=x==="F!"||x==="F"?m:null}if(m){ut=zs(m.nextSibling),d=m.data==="F!";break e}}Tn(d)}d=!1}d&&(r=o[0])}}return o=ns(),o.memoizedState=o.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Op,lastRenderedState:r},o.queue=d,o=Zp.bind(null,$e,d),d.dispatch=o,d=ju(!1),x=Cu.bind(null,$e,!1,d.queue),d=ns(),m={state:r,dispatch:null,action:a,pending:null},d.queue=m,o=y_.bind(null,$e,m,x,o),m.dispatch=o,d.memoizedState=a,[r,o,!1]}function Rp(a){var r=wt();return Pp(r,Ze,a)}function Pp(a,r,o){if(r=bu(a,r,Op)[0],a=zl(xa)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Qi(r)}catch(C){throw C===Ii?kl:C}else d=r;r=wt();var m=r.queue,x=m.dispatch;return o!==r.memoizedState&&($e.flags|=2048,Sr(9,Ll(),b_.bind(null,m,o),null)),[d,x,a]}function b_(a,r){a.action=r}function zp(a){var r=wt(),o=Ze;if(o!==null)return Pp(r,o,a);wt(),r=r.memoizedState,o=wt();var d=o.queue.dispatch;return o.memoizedState=a,[r,d,!1]}function Sr(a,r,o,d){return a={tag:a,create:o,deps:d,inst:r,next:null},r=$e.updateQueue,r===null&&(r=xu(),$e.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=a.next=a:(d=o.next,o.next=a,a.next=d,r.lastEffect=a),a}function Ll(){return{destroy:void 0,resource:void 0}}function Lp(){return wt().memoizedState}function Bl(a,r,o,d){var m=ns();d=d===void 0?null:d,$e.flags|=a,m.memoizedState=Sr(1|r,Ll(),o,d)}function Zi(a,r,o,d){var m=wt();d=d===void 0?null:d;var x=m.memoizedState.inst;Ze!==null&&d!==null&&hu(d,Ze.memoizedState.deps)?m.memoizedState=Sr(r,x,o,d):($e.flags|=a,m.memoizedState=Sr(1|r,x,o,d))}function Bp(a,r){Bl(8390656,8,a,r)}function $p(a,r){Zi(2048,8,a,r)}function Vp(a,r){return Zi(4,2,a,r)}function Up(a,r){return Zi(4,4,a,r)}function qp(a,r){if(typeof r=="function"){a=a();var o=r(a);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return a=a(),r.current=a,function(){r.current=null}}function Fp(a,r,o){o=o!=null?o.concat([a]):null,Zi(4,4,qp.bind(null,r,a),o)}function _u(){}function Hp(a,r){var o=wt();r=r===void 0?null:r;var d=o.memoizedState;return r!==null&&hu(r,d[1])?d[0]:(o.memoizedState=[a,r],a)}function Ip(a,r){var o=wt();r=r===void 0?null:r;var d=o.memoizedState;if(r!==null&&hu(r,d[1]))return d[0];if(d=a(),kn){ze(!0);try{a()}finally{ze(!1)}}return o.memoizedState=[d,r],d}function Nu(a,r,o){return o===void 0||(Ua&1073741824)!==0?a.memoizedState=r:(a.memoizedState=o,a=Xg(),$e.lanes|=a,Xa|=a,o)}function Gp(a,r,o,d){return hs(o,r)?o:wr.current!==null?(a=Nu(a,o,d),hs(a,r)||(Dt=!0),a):(Ua&42)===0?(Dt=!0,a.memoizedState=o):(a=Xg(),$e.lanes|=a,Xa|=a,r)}function Yp(a,r,o,d,m){var x=P.p;P.p=x!==0&&8>x?x:8;var C=O.T,D={};O.T=D,Cu(a,!1,r,o);try{var q=m(),te=O.S;if(te!==null&&te(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var de=p_(q,d);Ji(a,r,de,xs(a))}else Ji(a,r,d,xs(a))}catch(he){Ji(a,r,{then:function(){},status:"rejected",reason:he},xs())}finally{P.p=x,O.T=C}}function v_(){}function Su(a,r,o,d){if(a.tag!==5)throw Error(i(476));var m=Xp(a).queue;Yp(a,m,r,$,o===null?v_:function(){return Kp(a),o(d)})}function Xp(a){var r=a.memoizedState;if(r!==null)return r;r={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:$},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:o},next:null},a.memoizedState=r,a=a.alternate,a!==null&&(a.memoizedState=r),r}function Kp(a){var r=Xp(a).next.queue;Ji(a,r,{},xs())}function Tu(){return Gt(yo)}function Wp(){return wt().memoizedState}function Qp(){return wt().memoizedState}function j_(a){for(var r=a.return;r!==null;){switch(r.tag){case 24:case 3:var o=xs();a=$a(o);var d=Va(r,a,o);d!==null&&(ys(d,r,o),Yi(d,r,o)),r={cache:su()},a.payload=r;return}r=r.return}}function w_(a,r,o){var d=xs();o={lane:d,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},$l(a)?Jp(r,o):(o=Gd(a,r,o,d),o!==null&&(ys(o,a,d),eg(o,r,d)))}function Zp(a,r,o){var d=xs();Ji(a,r,o,d)}function Ji(a,r,o,d){var m={lane:d,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if($l(a))Jp(r,m);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var C=r.lastRenderedState,D=x(C,o);if(m.hasEagerState=!0,m.eagerState=D,hs(D,C))return wl(a,r,m,0),st===null&&jl(),!1}catch{}finally{}if(o=Gd(a,r,m,d),o!==null)return ys(o,a,d),eg(o,r,d),!0}return!1}function Cu(a,r,o,d){if(d={lane:2,revertLane:rh(),action:d,hasEagerState:!1,eagerState:null,next:null},$l(a)){if(r)throw Error(i(479))}else r=Gd(a,o,d,2),r!==null&&ys(r,a,2)}function $l(a){var r=a.alternate;return a===$e||r!==null&&r===$e}function Jp(a,r){_r=Dl=!0;var o=a.pending;o===null?r.next=r:(r.next=o.next,o.next=r),a.pending=r}function eg(a,r,o){if((o&4194048)!==0){var d=r.lanes;d&=a.pendingLanes,o|=d,r.lanes=o,l0(a,o)}}var Vl={readContext:Gt,use:Pl,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},tg={readContext:Gt,use:Pl,useCallback:function(a,r){return ns().memoizedState=[a,r===void 0?null:r],a},useContext:Gt,useEffect:Bp,useImperativeHandle:function(a,r,o){o=o!=null?o.concat([a]):null,Bl(4194308,4,qp.bind(null,r,a),o)},useLayoutEffect:function(a,r){return Bl(4194308,4,a,r)},useInsertionEffect:function(a,r){Bl(4,2,a,r)},useMemo:function(a,r){var o=ns();r=r===void 0?null:r;var d=a();if(kn){ze(!0);try{a()}finally{ze(!1)}}return o.memoizedState=[d,r],d},useReducer:function(a,r,o){var d=ns();if(o!==void 0){var m=o(r);if(kn){ze(!0);try{o(r)}finally{ze(!1)}}}else m=r;return d.memoizedState=d.baseState=m,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:m},d.queue=a,a=a.dispatch=w_.bind(null,$e,a),[d.memoizedState,a]},useRef:function(a){var r=ns();return a={current:a},r.memoizedState=a},useState:function(a){a=ju(a);var r=a.queue,o=Zp.bind(null,$e,r);return r.dispatch=o,[a.memoizedState,o]},useDebugValue:_u,useDeferredValue:function(a,r){var o=ns();return Nu(o,a,r)},useTransition:function(){var a=ju(!1);return a=Yp.bind(null,$e,a.queue,!0,!1),ns().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,r,o){var d=$e,m=ns();if(Xe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),st===null)throw Error(i(349));(Ge&124)!==0||wp(d,r,o)}m.memoizedState=o;var x={value:o,getSnapshot:r};return m.queue=x,Bp(Np.bind(null,d,x,a),[a]),d.flags|=2048,Sr(9,Ll(),_p.bind(null,d,x,o,r),null),o},useId:function(){var a=ns(),r=st.identifierPrefix;if(Xe){var o=fa,d=ma;o=(d&~(1<<32-ne(d)-1)).toString(32)+o,r=""+r+"R"+o,o=Rl++,0<o&&(r+="H"+o.toString(32)),r+=""}else o=g_++,r=""+r+"r"+o.toString(32)+"";return a.memoizedState=r},useHostTransitionStatus:Tu,useFormState:Dp,useActionState:Dp,useOptimistic:function(a){var r=ns();r.memoizedState=r.baseState=a;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Cu.bind(null,$e,!0,o),o.dispatch=r,[a,r]},useMemoCache:yu,useCacheRefresh:function(){return ns().memoizedState=j_.bind(null,$e)}},sg={readContext:Gt,use:Pl,useCallback:Hp,useContext:Gt,useEffect:$p,useImperativeHandle:Fp,useInsertionEffect:Vp,useLayoutEffect:Up,useMemo:Ip,useReducer:zl,useRef:Lp,useState:function(){return zl(xa)},useDebugValue:_u,useDeferredValue:function(a,r){var o=wt();return Gp(o,Ze.memoizedState,a,r)},useTransition:function(){var a=zl(xa)[0],r=wt().memoizedState;return[typeof a=="boolean"?a:Qi(a),r]},useSyncExternalStore:jp,useId:Wp,useHostTransitionStatus:Tu,useFormState:Rp,useActionState:Rp,useOptimistic:function(a,r){var o=wt();return Cp(o,Ze,a,r)},useMemoCache:yu,useCacheRefresh:Qp},__={readContext:Gt,use:Pl,useCallback:Hp,useContext:Gt,useEffect:$p,useImperativeHandle:Fp,useInsertionEffect:Vp,useLayoutEffect:Up,useMemo:Ip,useReducer:vu,useRef:Lp,useState:function(){return vu(xa)},useDebugValue:_u,useDeferredValue:function(a,r){var o=wt();return Ze===null?Nu(o,a,r):Gp(o,Ze.memoizedState,a,r)},useTransition:function(){var a=vu(xa)[0],r=wt().memoizedState;return[typeof a=="boolean"?a:Qi(a),r]},useSyncExternalStore:jp,useId:Wp,useHostTransitionStatus:Tu,useFormState:zp,useActionState:zp,useOptimistic:function(a,r){var o=wt();return Ze!==null?Cp(o,Ze,a,r):(o.baseState=a,[a,o.queue.dispatch])},useMemoCache:yu,useCacheRefresh:Qp},Tr=null,eo=0;function Ul(a){var r=eo;return eo+=1,Tr===null&&(Tr=[]),mp(Tr,a,r)}function to(a,r){r=r.props.ref,a.ref=r!==void 0?r:null}function ql(a,r){throw r.$$typeof===y?Error(i(525)):(a=Object.prototype.toString.call(r),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":a)))}function ag(a){var r=a._init;return r(a._payload)}function ng(a){function r(X,G){if(a){var J=X.deletions;J===null?(X.deletions=[G],X.flags|=16):J.push(G)}}function o(X,G){if(!a)return null;for(;G!==null;)r(X,G),G=G.sibling;return null}function d(X){for(var G=new Map;X!==null;)X.key!==null?G.set(X.key,X):G.set(X.index,X),X=X.sibling;return G}function m(X,G){return X=ha(X,G),X.index=0,X.sibling=null,X}function x(X,G,J){return X.index=J,a?(J=X.alternate,J!==null?(J=J.index,J<G?(X.flags|=67108866,G):J):(X.flags|=67108866,G)):(X.flags|=1048576,G)}function C(X){return a&&X.alternate===null&&(X.flags|=67108866),X}function D(X,G,J,ue){return G===null||G.tag!==6?(G=Xd(J,X.mode,ue),G.return=X,G):(G=m(G,J),G.return=X,G)}function q(X,G,J,ue){var we=J.type;return we===_?de(X,G,J.props.children,ue,J.key):G!==null&&(G.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===U&&ag(we)===G.type)?(G=m(G,J.props),to(G,J),G.return=X,G):(G=Nl(J.type,J.key,J.props,null,X.mode,ue),to(G,J),G.return=X,G)}function te(X,G,J,ue){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=Kd(J,X.mode,ue),G.return=X,G):(G=m(G,J.children||[]),G.return=X,G)}function de(X,G,J,ue,we){return G===null||G.tag!==7?(G=wn(J,X.mode,ue,we),G.return=X,G):(G=m(G,J),G.return=X,G)}function he(X,G,J){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Xd(""+G,X.mode,J),G.return=X,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return J=Nl(G.type,G.key,G.props,null,X.mode,J),to(J,G),J.return=X,J;case w:return G=Kd(G,X.mode,J),G.return=X,G;case U:var ue=G._init;return G=ue(G._payload),he(X,G,J)}if(L(G)||K(G))return G=wn(G,X.mode,J,null),G.return=X,G;if(typeof G.then=="function")return he(X,Ul(G),J);if(G.$$typeof===k)return he(X,El(X,G),J);ql(X,G)}return null}function ae(X,G,J,ue){var we=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return we!==null?null:D(X,G,""+J,ue);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===we?q(X,G,J,ue):null;case w:return J.key===we?te(X,G,J,ue):null;case U:return we=J._init,J=we(J._payload),ae(X,G,J,ue)}if(L(J)||K(J))return we!==null?null:de(X,G,J,ue,null);if(typeof J.then=="function")return ae(X,G,Ul(J),ue);if(J.$$typeof===k)return ae(X,G,El(X,J),ue);ql(X,J)}return null}function re(X,G,J,ue,we){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return X=X.get(J)||null,D(G,X,""+ue,we);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return X=X.get(ue.key===null?J:ue.key)||null,q(G,X,ue,we);case w:return X=X.get(ue.key===null?J:ue.key)||null,te(G,X,ue,we);case U:var Ue=ue._init;return ue=Ue(ue._payload),re(X,G,J,ue,we)}if(L(ue)||K(ue))return X=X.get(J)||null,de(G,X,ue,we,null);if(typeof ue.then=="function")return re(X,G,J,Ul(ue),we);if(ue.$$typeof===k)return re(X,G,J,El(G,ue),we);ql(G,ue)}return null}function Me(X,G,J,ue){for(var we=null,Ue=null,Te=G,ke=G=0,Pt=null;Te!==null&&ke<J.length;ke++){Te.index>ke?(Pt=Te,Te=null):Pt=Te.sibling;var Ye=ae(X,Te,J[ke],ue);if(Ye===null){Te===null&&(Te=Pt);break}a&&Te&&Ye.alternate===null&&r(X,Te),G=x(Ye,G,ke),Ue===null?we=Ye:Ue.sibling=Ye,Ue=Ye,Te=Pt}if(ke===J.length)return o(X,Te),Xe&&Nn(X,ke),we;if(Te===null){for(;ke<J.length;ke++)Te=he(X,J[ke],ue),Te!==null&&(G=x(Te,G,ke),Ue===null?we=Te:Ue.sibling=Te,Ue=Te);return Xe&&Nn(X,ke),we}for(Te=d(Te);ke<J.length;ke++)Pt=re(Te,X,ke,J[ke],ue),Pt!==null&&(a&&Pt.alternate!==null&&Te.delete(Pt.key===null?ke:Pt.key),G=x(Pt,G,ke),Ue===null?we=Pt:Ue.sibling=Pt,Ue=Pt);return a&&Te.forEach(function(an){return r(X,an)}),Xe&&Nn(X,ke),we}function Ae(X,G,J,ue){if(J==null)throw Error(i(151));for(var we=null,Ue=null,Te=G,ke=G=0,Pt=null,Ye=J.next();Te!==null&&!Ye.done;ke++,Ye=J.next()){Te.index>ke?(Pt=Te,Te=null):Pt=Te.sibling;var an=ae(X,Te,Ye.value,ue);if(an===null){Te===null&&(Te=Pt);break}a&&Te&&an.alternate===null&&r(X,Te),G=x(an,G,ke),Ue===null?we=an:Ue.sibling=an,Ue=an,Te=Pt}if(Ye.done)return o(X,Te),Xe&&Nn(X,ke),we;if(Te===null){for(;!Ye.done;ke++,Ye=J.next())Ye=he(X,Ye.value,ue),Ye!==null&&(G=x(Ye,G,ke),Ue===null?we=Ye:Ue.sibling=Ye,Ue=Ye);return Xe&&Nn(X,ke),we}for(Te=d(Te);!Ye.done;ke++,Ye=J.next())Ye=re(Te,X,ke,Ye.value,ue),Ye!==null&&(a&&Ye.alternate!==null&&Te.delete(Ye.key===null?ke:Ye.key),G=x(Ye,G,ke),Ue===null?we=Ye:Ue.sibling=Ye,Ue=Ye);return a&&Te.forEach(function(NN){return r(X,NN)}),Xe&&Nn(X,ke),we}function et(X,G,J,ue){if(typeof J=="object"&&J!==null&&J.type===_&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var we=J.key;G!==null;){if(G.key===we){if(we=J.type,we===_){if(G.tag===7){o(X,G.sibling),ue=m(G,J.props.children),ue.return=X,X=ue;break e}}else if(G.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===U&&ag(we)===G.type){o(X,G.sibling),ue=m(G,J.props),to(ue,J),ue.return=X,X=ue;break e}o(X,G);break}else r(X,G);G=G.sibling}J.type===_?(ue=wn(J.props.children,X.mode,ue,J.key),ue.return=X,X=ue):(ue=Nl(J.type,J.key,J.props,null,X.mode,ue),to(ue,J),ue.return=X,X=ue)}return C(X);case w:e:{for(we=J.key;G!==null;){if(G.key===we)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){o(X,G.sibling),ue=m(G,J.children||[]),ue.return=X,X=ue;break e}else{o(X,G);break}else r(X,G);G=G.sibling}ue=Kd(J,X.mode,ue),ue.return=X,X=ue}return C(X);case U:return we=J._init,J=we(J._payload),et(X,G,J,ue)}if(L(J))return Me(X,G,J,ue);if(K(J)){if(we=K(J),typeof we!="function")throw Error(i(150));return J=we.call(J),Ae(X,G,J,ue)}if(typeof J.then=="function")return et(X,G,Ul(J),ue);if(J.$$typeof===k)return et(X,G,El(X,J),ue);ql(X,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,G!==null&&G.tag===6?(o(X,G.sibling),ue=m(G,J),ue.return=X,X=ue):(o(X,G),ue=Xd(J,X.mode,ue),ue.return=X,X=ue),C(X)):o(X,G)}return function(X,G,J,ue){try{eo=0;var we=et(X,G,J,ue);return Tr=null,we}catch(Te){if(Te===Ii||Te===kl)throw Te;var Ue=ms(29,Te,null,X.mode);return Ue.lanes=ue,Ue.return=X,Ue}finally{}}}var Cr=ng(!0),rg=ng(!1),Es=F(null),Ks=null;function qa(a){var r=a.alternate;W(Et,Et.current&1),W(Es,a),Ks===null&&(r===null||wr.current!==null||r.memoizedState!==null)&&(Ks=a)}function ig(a){if(a.tag===22){if(W(Et,Et.current),W(Es,a),Ks===null){var r=a.alternate;r!==null&&r.memoizedState!==null&&(Ks=a)}}else Fa()}function Fa(){W(Et,Et.current),W(Es,Es.current)}function ya(a){B(Es),Ks===a&&(Ks=null),B(Et)}var Et=F(0);function Fl(a){for(var r=a;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||xh(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Eu(a,r,o,d){r=a.memoizedState,o=o(d,r),o=o==null?r:g({},r,o),a.memoizedState=o,a.lanes===0&&(a.updateQueue.baseState=o)}var Au={enqueueSetState:function(a,r,o){a=a._reactInternals;var d=xs(),m=$a(d);m.payload=r,o!=null&&(m.callback=o),r=Va(a,m,d),r!==null&&(ys(r,a,d),Yi(r,a,d))},enqueueReplaceState:function(a,r,o){a=a._reactInternals;var d=xs(),m=$a(d);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=Va(a,m,d),r!==null&&(ys(r,a,d),Yi(r,a,d))},enqueueForceUpdate:function(a,r){a=a._reactInternals;var o=xs(),d=$a(o);d.tag=2,r!=null&&(d.callback=r),r=Va(a,d,o),r!==null&&(ys(r,a,o),Yi(r,a,o))}};function og(a,r,o,d,m,x,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,x,C):r.prototype&&r.prototype.isPureReactComponent?!Li(o,d)||!Li(m,x):!0}function lg(a,r,o,d){a=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,d),r.state!==a&&Au.enqueueReplaceState(r,r.state,null)}function Mn(a,r){var o=r;if("ref"in r){o={};for(var d in r)d!=="ref"&&(o[d]=r[d])}if(a=a.defaultProps){o===r&&(o=g({},o));for(var m in a)o[m]===void 0&&(o[m]=a[m])}return o}var Hl=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function cg(a){Hl(a)}function dg(a){console.error(a)}function ug(a){Hl(a)}function Il(a,r){try{var o=a.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function hg(a,r,o){try{var d=a.onCaughtError;d(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function ku(a,r,o){return o=$a(o),o.tag=3,o.payload={element:null},o.callback=function(){Il(a,r)},o}function mg(a){return a=$a(a),a.tag=3,a}function fg(a,r,o,d){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var x=d.value;a.payload=function(){return m(x)},a.callback=function(){hg(r,o,d)}}var C=o.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(a.callback=function(){hg(r,o,d),typeof m!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var D=d.stack;this.componentDidCatch(d.value,{componentStack:D!==null?D:""})})}function N_(a,r,o,d,m){if(o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=o.alternate,r!==null&&qi(r,o,m,!0),o=Es.current,o!==null){switch(o.tag){case 13:return Ks===null?eh():o.alternate===null&&ht===0&&(ht=3),o.flags&=-257,o.flags|=65536,o.lanes=m,d===ru?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([d]):r.add(d),sh(a,d,m)),!1;case 22:return o.flags|=65536,d===ru?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([d]):o.add(d)),sh(a,d,m)),!1}throw Error(i(435,o.tag))}return sh(a,d,m),eh(),!1}if(Xe)return r=Es.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,d!==Zd&&(a=Error(i(422),{cause:d}),Ui(Ns(a,o)))):(d!==Zd&&(r=Error(i(423),{cause:d}),Ui(Ns(r,o))),a=a.current.alternate,a.flags|=65536,m&=-m,a.lanes|=m,d=Ns(d,o),m=ku(a.stateNode,d,m),lu(a,m),ht!==4&&(ht=2)),!1;var x=Error(i(520),{cause:d});if(x=Ns(x,o),lo===null?lo=[x]:lo.push(x),ht!==4&&(ht=2),r===null)return!0;d=Ns(d,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,a=m&-m,o.lanes|=a,a=ku(o.stateNode,d,a),lu(o,a),!1;case 1:if(r=o.type,x=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ka===null||!Ka.has(x))))return o.flags|=65536,m&=-m,o.lanes|=m,m=mg(m),fg(m,a,o,d),lu(o,m),!1}o=o.return}while(o!==null);return!1}var pg=Error(i(461)),Dt=!1;function Bt(a,r,o,d){r.child=a===null?rg(r,null,o,d):Cr(r,a.child,o,d)}function gg(a,r,o,d,m){o=o.render;var x=r.ref;if("ref"in d){var C={};for(var D in d)D!=="ref"&&(C[D]=d[D])}else C=d;return En(r),d=mu(a,r,o,C,x,m),D=fu(),a!==null&&!Dt?(pu(a,r,m),ba(a,r,m)):(Xe&&D&&Wd(r),r.flags|=1,Bt(a,r,d,m),r.child)}function xg(a,r,o,d,m){if(a===null){var x=o.type;return typeof x=="function"&&!Yd(x)&&x.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=x,yg(a,r,x,d,m)):(a=Nl(o.type,null,d,r,r.mode,m),a.ref=r.ref,a.return=r,r.child=a)}if(x=a.child,!Bu(a,m)){var C=x.memoizedProps;if(o=o.compare,o=o!==null?o:Li,o(C,d)&&a.ref===r.ref)return ba(a,r,m)}return r.flags|=1,a=ha(x,d),a.ref=r.ref,a.return=r,r.child=a}function yg(a,r,o,d,m){if(a!==null){var x=a.memoizedProps;if(Li(x,d)&&a.ref===r.ref)if(Dt=!1,r.pendingProps=d=x,Bu(a,m))(a.flags&131072)!==0&&(Dt=!0);else return r.lanes=a.lanes,ba(a,r,m)}return Mu(a,r,o,d,m)}function bg(a,r,o){var d=r.pendingProps,m=d.children,x=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((r.flags&128)!==0){if(d=x!==null?x.baseLanes|o:o,a!==null){for(m=r.child=a.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;r.childLanes=x&~d}else r.childLanes=0,r.child=null;return vg(a,r,d,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},a!==null&&Al(r,x!==null?x.cachePool:null),x!==null?yp(r,x):du(),ig(r);else return r.lanes=r.childLanes=536870912,vg(a,r,x!==null?x.baseLanes|o:o,o)}else x!==null?(Al(r,x.cachePool),yp(r,x),Fa(),r.memoizedState=null):(a!==null&&Al(r,null),du(),Fa());return Bt(a,r,m,o),r.child}function vg(a,r,o,d){var m=nu();return m=m===null?null:{parent:Ct._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},a!==null&&Al(r,null),du(),ig(r),a!==null&&qi(a,r,d,!0),null}function Gl(a,r){var o=r.ref;if(o===null)a!==null&&a.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(a===null||a.ref!==o)&&(r.flags|=4194816)}}function Mu(a,r,o,d,m){return En(r),o=mu(a,r,o,d,void 0,m),d=fu(),a!==null&&!Dt?(pu(a,r,m),ba(a,r,m)):(Xe&&d&&Wd(r),r.flags|=1,Bt(a,r,o,m),r.child)}function jg(a,r,o,d,m,x){return En(r),r.updateQueue=null,o=vp(r,d,o,m),bp(a),d=fu(),a!==null&&!Dt?(pu(a,r,x),ba(a,r,x)):(Xe&&d&&Wd(r),r.flags|=1,Bt(a,r,o,x),r.child)}function wg(a,r,o,d,m){if(En(r),r.stateNode===null){var x=xr,C=o.contextType;typeof C=="object"&&C!==null&&(x=Gt(C)),x=new o(d,x),r.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Au,r.stateNode=x,x._reactInternals=r,x=r.stateNode,x.props=d,x.state=r.memoizedState,x.refs={},iu(r),C=o.contextType,x.context=typeof C=="object"&&C!==null?Gt(C):xr,x.state=r.memoizedState,C=o.getDerivedStateFromProps,typeof C=="function"&&(Eu(r,o,C,d),x.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&Au.enqueueReplaceState(x,x.state,null),Ki(r,d,x,m),Xi(),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(a===null){x=r.stateNode;var D=r.memoizedProps,q=Mn(o,D);x.props=q;var te=x.context,de=o.contextType;C=xr,typeof de=="object"&&de!==null&&(C=Gt(de));var he=o.getDerivedStateFromProps;de=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",D=r.pendingProps!==D,de||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D||te!==C)&&lg(r,x,d,C),Ba=!1;var ae=r.memoizedState;x.state=ae,Ki(r,d,x,m),Xi(),te=r.memoizedState,D||ae!==te||Ba?(typeof he=="function"&&(Eu(r,o,he,d),te=r.memoizedState),(q=Ba||og(r,o,q,d,ae,te,C))?(de||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=te),x.props=d,x.state=te,x.context=C,d=q):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{x=r.stateNode,ou(a,r),C=r.memoizedProps,de=Mn(o,C),x.props=de,he=r.pendingProps,ae=x.context,te=o.contextType,q=xr,typeof te=="object"&&te!==null&&(q=Gt(te)),D=o.getDerivedStateFromProps,(te=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==he||ae!==q)&&lg(r,x,d,q),Ba=!1,ae=r.memoizedState,x.state=ae,Ki(r,d,x,m),Xi();var re=r.memoizedState;C!==he||ae!==re||Ba||a!==null&&a.dependencies!==null&&Cl(a.dependencies)?(typeof D=="function"&&(Eu(r,o,D,d),re=r.memoizedState),(de=Ba||og(r,o,de,d,ae,re,q)||a!==null&&a.dependencies!==null&&Cl(a.dependencies))?(te||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,re,q),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,re,q)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=re),x.props=d,x.state=re,x.context=q,d=de):(typeof x.componentDidUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&ae===a.memoizedState||(r.flags|=1024),d=!1)}return x=d,Gl(a,r),d=(r.flags&128)!==0,x||d?(x=r.stateNode,o=d&&typeof o.getDerivedStateFromError!="function"?null:x.render(),r.flags|=1,a!==null&&d?(r.child=Cr(r,a.child,null,m),r.child=Cr(r,null,o,m)):Bt(a,r,o,m),r.memoizedState=x.state,a=r.child):a=ba(a,r,m),a}function _g(a,r,o,d){return Vi(),r.flags|=256,Bt(a,r,o,d),r.child}var Ou={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Du(a){return{baseLanes:a,cachePool:dp()}}function Ru(a,r,o){return a=a!==null?a.childLanes&~o:0,r&&(a|=As),a}function Ng(a,r,o){var d=r.pendingProps,m=!1,x=(r.flags&128)!==0,C;if((C=x)||(C=a!==null&&a.memoizedState===null?!1:(Et.current&2)!==0),C&&(m=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,a===null){if(Xe){if(m?qa(r):Fa(),Xe){var D=ut,q;if(q=D){e:{for(q=D,D=Xs;q.nodeType!==8;){if(!D){D=null;break e}if(q=zs(q.nextSibling),q===null){D=null;break e}}D=q}D!==null?(r.memoizedState={dehydrated:D,treeContext:_n!==null?{id:ma,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},q=ms(18,null,null,0),q.stateNode=D,q.return=r,r.child=q,Qt=r,ut=null,q=!0):q=!1}q||Tn(r)}if(D=r.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return xh(D)?r.lanes=32:r.lanes=536870912,null;ya(r)}return D=d.children,d=d.fallback,m?(Fa(),m=r.mode,D=Yl({mode:"hidden",children:D},m),d=wn(d,m,o,null),D.return=r,d.return=r,D.sibling=d,r.child=D,m=r.child,m.memoizedState=Du(o),m.childLanes=Ru(a,C,o),r.memoizedState=Ou,d):(qa(r),Pu(r,D))}if(q=a.memoizedState,q!==null&&(D=q.dehydrated,D!==null)){if(x)r.flags&256?(qa(r),r.flags&=-257,r=zu(a,r,o)):r.memoizedState!==null?(Fa(),r.child=a.child,r.flags|=128,r=null):(Fa(),m=d.fallback,D=r.mode,d=Yl({mode:"visible",children:d.children},D),m=wn(m,D,o,null),m.flags|=2,d.return=r,m.return=r,d.sibling=m,r.child=d,Cr(r,a.child,null,o),d=r.child,d.memoizedState=Du(o),d.childLanes=Ru(a,C,o),r.memoizedState=Ou,r=m);else if(qa(r),xh(D)){if(C=D.nextSibling&&D.nextSibling.dataset,C)var te=C.dgst;C=te,d=Error(i(419)),d.stack="",d.digest=C,Ui({value:d,source:null,stack:null}),r=zu(a,r,o)}else if(Dt||qi(a,r,o,!1),C=(o&a.childLanes)!==0,Dt||C){if(C=st,C!==null&&(d=o&-o,d=(d&42)!==0?1:yd(d),d=(d&(C.suspendedLanes|o))!==0?0:d,d!==0&&d!==q.retryLane))throw q.retryLane=d,gr(a,d),ys(C,a,d),pg;D.data==="$?"||eh(),r=zu(a,r,o)}else D.data==="$?"?(r.flags|=192,r.child=a.child,r=null):(a=q.treeContext,ut=zs(D.nextSibling),Qt=r,Xe=!0,Sn=null,Xs=!1,a!==null&&(Ts[Cs++]=ma,Ts[Cs++]=fa,Ts[Cs++]=_n,ma=a.id,fa=a.overflow,_n=r),r=Pu(r,d.children),r.flags|=4096);return r}return m?(Fa(),m=d.fallback,D=r.mode,q=a.child,te=q.sibling,d=ha(q,{mode:"hidden",children:d.children}),d.subtreeFlags=q.subtreeFlags&65011712,te!==null?m=ha(te,m):(m=wn(m,D,o,null),m.flags|=2),m.return=r,d.return=r,d.sibling=m,r.child=d,d=m,m=r.child,D=a.child.memoizedState,D===null?D=Du(o):(q=D.cachePool,q!==null?(te=Ct._currentValue,q=q.parent!==te?{parent:te,pool:te}:q):q=dp(),D={baseLanes:D.baseLanes|o,cachePool:q}),m.memoizedState=D,m.childLanes=Ru(a,C,o),r.memoizedState=Ou,d):(qa(r),o=a.child,a=o.sibling,o=ha(o,{mode:"visible",children:d.children}),o.return=r,o.sibling=null,a!==null&&(C=r.deletions,C===null?(r.deletions=[a],r.flags|=16):C.push(a)),r.child=o,r.memoizedState=null,o)}function Pu(a,r){return r=Yl({mode:"visible",children:r},a.mode),r.return=a,a.child=r}function Yl(a,r){return a=ms(22,a,null,r),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function zu(a,r,o){return Cr(r,a.child,null,o),a=Pu(r,r.pendingProps.children),a.flags|=2,r.memoizedState=null,a}function Sg(a,r,o){a.lanes|=r;var d=a.alternate;d!==null&&(d.lanes|=r),eu(a.return,r,o)}function Lu(a,r,o,d,m){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=o,x.tailMode=m)}function Tg(a,r,o){var d=r.pendingProps,m=d.revealOrder,x=d.tail;if(Bt(a,r,d.children,o),d=Et.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=r.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Sg(a,o,r);else if(a.tag===19)Sg(a,o,r);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(W(Et,d),m){case"forwards":for(o=r.child,m=null;o!==null;)a=o.alternate,a!==null&&Fl(a)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),Lu(r,!1,m,o,x);break;case"backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(a=m.alternate,a!==null&&Fl(a)===null){r.child=m;break}a=m.sibling,m.sibling=o,o=m,m=a}Lu(r,!0,o,null,x);break;case"together":Lu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ba(a,r,o){if(a!==null&&(r.dependencies=a.dependencies),Xa|=r.lanes,(o&r.childLanes)===0)if(a!==null){if(qi(a,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(a!==null&&r.child!==a.child)throw Error(i(153));if(r.child!==null){for(a=r.child,o=ha(a,a.pendingProps),r.child=o,o.return=r;a.sibling!==null;)a=a.sibling,o=o.sibling=ha(a,a.pendingProps),o.return=r;o.sibling=null}return r.child}function Bu(a,r){return(a.lanes&r)!==0?!0:(a=a.dependencies,!!(a!==null&&Cl(a)))}function S_(a,r,o){switch(r.tag){case 3:me(r,r.stateNode.containerInfo),La(r,Ct,a.memoizedState.cache),Vi();break;case 27:case 5:Be(r);break;case 4:me(r,r.stateNode.containerInfo);break;case 10:La(r,r.type,r.memoizedProps.value);break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(qa(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Ng(a,r,o):(qa(r),a=ba(a,r,o),a!==null?a.sibling:null);qa(r);break;case 19:var m=(a.flags&128)!==0;if(d=(o&r.childLanes)!==0,d||(qi(a,r,o,!1),d=(o&r.childLanes)!==0),m){if(d)return Tg(a,r,o);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),W(Et,Et.current),d)break;return null;case 22:case 23:return r.lanes=0,bg(a,r,o);case 24:La(r,Ct,a.memoizedState.cache)}return ba(a,r,o)}function Cg(a,r,o){if(a!==null)if(a.memoizedProps!==r.pendingProps)Dt=!0;else{if(!Bu(a,o)&&(r.flags&128)===0)return Dt=!1,S_(a,r,o);Dt=(a.flags&131072)!==0}else Dt=!1,Xe&&(r.flags&1048576)!==0&&ap(r,Tl,r.index);switch(r.lanes=0,r.tag){case 16:e:{a=r.pendingProps;var d=r.elementType,m=d._init;if(d=m(d._payload),r.type=d,typeof d=="function")Yd(d)?(a=Mn(d,a),r.tag=1,r=wg(null,r,d,a,o)):(r.tag=0,r=Mu(null,r,d,a,o));else{if(d!=null){if(m=d.$$typeof,m===E){r.tag=11,r=gg(null,r,d,a,o);break e}else if(m===z){r.tag=14,r=xg(null,r,d,a,o);break e}}throw r=pe(d)||d,Error(i(306,r,""))}}return r;case 0:return Mu(a,r,r.type,r.pendingProps,o);case 1:return d=r.type,m=Mn(d,r.pendingProps),wg(a,r,d,m,o);case 3:e:{if(me(r,r.stateNode.containerInfo),a===null)throw Error(i(387));d=r.pendingProps;var x=r.memoizedState;m=x.element,ou(a,r),Ki(r,d,null,o);var C=r.memoizedState;if(d=C.cache,La(r,Ct,d),d!==x.cache&&tu(r,[Ct],o,!0),Xi(),d=C.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=x,r.memoizedState=x,r.flags&256){r=_g(a,r,d,o);break e}else if(d!==m){m=Ns(Error(i(424)),r),Ui(m),r=_g(a,r,d,o);break e}else{switch(a=r.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ut=zs(a.firstChild),Qt=r,Xe=!0,Sn=null,Xs=!0,o=rg(r,null,d,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Vi(),d===m){r=ba(a,r,o);break e}Bt(a,r,d,o)}r=r.child}return r;case 26:return Gl(a,r),a===null?(o=Mx(r.type,null,r.pendingProps,null))?r.memoizedState=o:Xe||(o=r.type,a=r.pendingProps,d=oc(ge.current).createElement(o),d[It]=r,d[ss]=a,Vt(d,o,a),Ot(d),r.stateNode=d):r.memoizedState=Mx(r.type,a.memoizedProps,r.pendingProps,a.memoizedState),null;case 27:return Be(r),a===null&&Xe&&(d=r.stateNode=Ex(r.type,r.pendingProps,ge.current),Qt=r,Xs=!0,m=ut,Za(r.type)?(yh=m,ut=zs(d.firstChild)):ut=m),Bt(a,r,r.pendingProps.children,o),Gl(a,r),a===null&&(r.flags|=4194304),r.child;case 5:return a===null&&Xe&&((m=d=ut)&&(d=J_(d,r.type,r.pendingProps,Xs),d!==null?(r.stateNode=d,Qt=r,ut=zs(d.firstChild),Xs=!1,m=!0):m=!1),m||Tn(r)),Be(r),m=r.type,x=r.pendingProps,C=a!==null?a.memoizedProps:null,d=x.children,fh(m,x)?d=null:C!==null&&fh(m,C)&&(r.flags|=32),r.memoizedState!==null&&(m=mu(a,r,x_,null,null,o),yo._currentValue=m),Gl(a,r),Bt(a,r,d,o),r.child;case 6:return a===null&&Xe&&((a=o=ut)&&(o=eN(o,r.pendingProps,Xs),o!==null?(r.stateNode=o,Qt=r,ut=null,a=!0):a=!1),a||Tn(r)),null;case 13:return Ng(a,r,o);case 4:return me(r,r.stateNode.containerInfo),d=r.pendingProps,a===null?r.child=Cr(r,null,d,o):Bt(a,r,d,o),r.child;case 11:return gg(a,r,r.type,r.pendingProps,o);case 7:return Bt(a,r,r.pendingProps,o),r.child;case 8:return Bt(a,r,r.pendingProps.children,o),r.child;case 12:return Bt(a,r,r.pendingProps.children,o),r.child;case 10:return d=r.pendingProps,La(r,r.type,d.value),Bt(a,r,d.children,o),r.child;case 9:return m=r.type._context,d=r.pendingProps.children,En(r),m=Gt(m),d=d(m),r.flags|=1,Bt(a,r,d,o),r.child;case 14:return xg(a,r,r.type,r.pendingProps,o);case 15:return yg(a,r,r.type,r.pendingProps,o);case 19:return Tg(a,r,o);case 31:return d=r.pendingProps,o=r.mode,d={mode:d.mode,children:d.children},a===null?(o=Yl(d,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=ha(a.child,d),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return bg(a,r,o);case 24:return En(r),d=Gt(Ct),a===null?(m=nu(),m===null&&(m=st,x=su(),m.pooledCache=x,x.refCount++,x!==null&&(m.pooledCacheLanes|=o),m=x),r.memoizedState={parent:d,cache:m},iu(r),La(r,Ct,m)):((a.lanes&o)!==0&&(ou(a,r),Ki(r,null,null,o),Xi()),m=a.memoizedState,x=r.memoizedState,m.parent!==d?(m={parent:d,cache:d},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),La(r,Ct,d)):(d=x.cache,La(r,Ct,d),d!==m.cache&&tu(r,[Ct],o,!0))),Bt(a,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function va(a){a.flags|=4}function Eg(a,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!zx(r)){if(r=Es.current,r!==null&&((Ge&4194048)===Ge?Ks!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||r!==Ks))throw Gi=ru,up;a.flags|=8192}}function Xl(a,r){r!==null&&(a.flags|=4),a.flags&16384&&(r=a.tag!==22?Si():536870912,a.lanes|=r,Mr|=r)}function so(a,r){if(!Xe)switch(a.tailMode){case"hidden":r=a.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?a.tail=null:o.sibling=null;break;case"collapsed":o=a.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?r||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function ct(a){var r=a.alternate!==null&&a.alternate.child===a.child,o=0,d=0;if(r)for(var m=a.child;m!==null;)o|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=a,m=m.sibling;else for(m=a.child;m!==null;)o|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=a,m=m.sibling;return a.subtreeFlags|=d,a.childLanes=o,r}function T_(a,r,o){var d=r.pendingProps;switch(Qd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return o=r.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),ga(Ct),Ne(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(a===null||a.child===null)&&($i(r)?va(r):a===null||a.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ip())),ct(r),null;case 26:return o=r.memoizedState,a===null?(va(r),o!==null?(ct(r),Eg(r,o)):(ct(r),r.flags&=-16777217)):o?o!==a.memoizedState?(va(r),ct(r),Eg(r,o)):(ct(r),r.flags&=-16777217):(a.memoizedProps!==d&&va(r),ct(r),r.flags&=-16777217),null;case 27:je(r),o=ge.current;var m=r.type;if(a!==null&&r.stateNode!=null)a.memoizedProps!==d&&va(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return ct(r),null}a=se.current,$i(r)?np(r):(a=Ex(m,d,o),r.stateNode=a,va(r))}return ct(r),null;case 5:if(je(r),o=r.type,a!==null&&r.stateNode!=null)a.memoizedProps!==d&&va(r);else{if(!d){if(r.stateNode===null)throw Error(i(166));return ct(r),null}if(a=se.current,$i(r))np(r);else{switch(m=oc(ge.current),a){case 1:a=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:a=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":a=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":a=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":a=m.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?m.createElement("select",{is:d.is}):m.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?m.createElement(o,{is:d.is}):m.createElement(o)}}a[It]=r,a[ss]=d;e:for(m=r.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===r)break e;for(;m.sibling===null;){if(m.return===null||m.return===r)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}r.stateNode=a;e:switch(Vt(a,o,d),o){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&va(r)}}return ct(r),r.flags&=-16777217,null;case 6:if(a&&r.stateNode!=null)a.memoizedProps!==d&&va(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(i(166));if(a=ge.current,$i(r)){if(a=r.stateNode,o=r.memoizedProps,d=null,m=Qt,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}a[It]=r,a=!!(a.nodeValue===o||d!==null&&d.suppressHydrationWarning===!0||jx(a.nodeValue,o)),a||Tn(r)}else a=oc(a).createTextNode(d),a[It]=r,r.stateNode=a}return ct(r),null;case 13:if(d=r.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(m=$i(r),d!==null&&d.dehydrated!==null){if(a===null){if(!m)throw Error(i(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[It]=r}else Vi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),m=!1}else m=ip(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(ya(r),r):(ya(r),null)}if(ya(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=d!==null,a=a!==null&&a.memoizedState!==null,o){d=r.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var x=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==m&&(d.flags|=2048)}return o!==a&&o&&(r.child.flags|=8192),Xl(r,r.updateQueue),ct(r),null;case 4:return Ne(),a===null&&ch(r.stateNode.containerInfo),ct(r),null;case 10:return ga(r.type),ct(r),null;case 19:if(B(Et),m=r.memoizedState,m===null)return ct(r),null;if(d=(r.flags&128)!==0,x=m.rendering,x===null)if(d)so(m,!1);else{if(ht!==0||a!==null&&(a.flags&128)!==0)for(a=r.child;a!==null;){if(x=Fl(a),x!==null){for(r.flags|=128,so(m,!1),a=x.updateQueue,r.updateQueue=a,Xl(r,a),r.subtreeFlags=0,a=o,o=r.child;o!==null;)sp(o,a),o=o.sibling;return W(Et,Et.current&1|2),r.child}a=a.sibling}m.tail!==null&&Tt()>Ql&&(r.flags|=128,d=!0,so(m,!1),r.lanes=4194304)}else{if(!d)if(a=Fl(x),a!==null){if(r.flags|=128,d=!0,a=a.updateQueue,r.updateQueue=a,Xl(r,a),so(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!Xe)return ct(r),null}else 2*Tt()-m.renderingStartTime>Ql&&o!==536870912&&(r.flags|=128,d=!0,so(m,!1),r.lanes=4194304);m.isBackwards?(x.sibling=r.child,r.child=x):(a=m.last,a!==null?a.sibling=x:r.child=x,m.last=x)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=Tt(),r.sibling=null,a=Et.current,W(Et,d?a&1|2:a&1),r):(ct(r),null);case 22:case 23:return ya(r),uu(),d=r.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(o&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),o=r.updateQueue,o!==null&&Xl(r,o.retryQueue),o=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==o&&(r.flags|=2048),a!==null&&B(An),null;case 24:return o=null,a!==null&&(o=a.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ga(Ct),ct(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function C_(a,r){switch(Qd(r),r.tag){case 1:return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 3:return ga(Ct),Ne(),a=r.flags,(a&65536)!==0&&(a&128)===0?(r.flags=a&-65537|128,r):null;case 26:case 27:case 5:return je(r),null;case 13:if(ya(r),a=r.memoizedState,a!==null&&a.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Vi()}return a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 19:return B(Et),null;case 4:return Ne(),null;case 10:return ga(r.type),null;case 22:case 23:return ya(r),uu(),a!==null&&B(An),a=r.flags,a&65536?(r.flags=a&-65537|128,r):null;case 24:return ga(Ct),null;case 25:return null;default:return null}}function Ag(a,r){switch(Qd(r),r.tag){case 3:ga(Ct),Ne();break;case 26:case 27:case 5:je(r);break;case 4:Ne();break;case 13:ya(r);break;case 19:B(Et);break;case 10:ga(r.type);break;case 22:case 23:ya(r),uu(),a!==null&&B(An);break;case 24:ga(Ct)}}function ao(a,r){try{var o=r.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var m=d.next;o=m;do{if((o.tag&a)===a){d=void 0;var x=o.create,C=o.inst;d=x(),C.destroy=d}o=o.next}while(o!==m)}}catch(D){tt(r,r.return,D)}}function Ha(a,r,o){try{var d=r.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var x=m.next;d=x;do{if((d.tag&a)===a){var C=d.inst,D=C.destroy;if(D!==void 0){C.destroy=void 0,m=r;var q=o,te=D;try{te()}catch(de){tt(m,q,de)}}}d=d.next}while(d!==x)}}catch(de){tt(r,r.return,de)}}function kg(a){var r=a.updateQueue;if(r!==null){var o=a.stateNode;try{xp(r,o)}catch(d){tt(a,a.return,d)}}}function Mg(a,r,o){o.props=Mn(a.type,a.memoizedProps),o.state=a.memoizedState;try{o.componentWillUnmount()}catch(d){tt(a,r,d)}}function no(a,r){try{var o=a.ref;if(o!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof o=="function"?a.refCleanup=o(d):o.current=d}}catch(m){tt(a,r,m)}}function Ws(a,r){var o=a.ref,d=a.refCleanup;if(o!==null)if(typeof d=="function")try{d()}catch(m){tt(a,r,m)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){tt(a,r,m)}else o.current=null}function Og(a){var r=a.type,o=a.memoizedProps,d=a.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&d.focus();break e;case"img":o.src?d.src=o.src:o.srcSet&&(d.srcset=o.srcSet)}}catch(m){tt(a,a.return,m)}}function $u(a,r,o){try{var d=a.stateNode;X_(d,a.type,o,r),d[ss]=r}catch(m){tt(a,a.return,m)}}function Dg(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Za(a.type)||a.tag===4}function Vu(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Dg(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Za(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Uu(a,r,o){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(a,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(a),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ic));else if(d!==4&&(d===27&&Za(a.type)&&(o=a.stateNode,r=null),a=a.child,a!==null))for(Uu(a,r,o),a=a.sibling;a!==null;)Uu(a,r,o),a=a.sibling}function Kl(a,r,o){var d=a.tag;if(d===5||d===6)a=a.stateNode,r?o.insertBefore(a,r):o.appendChild(a);else if(d!==4&&(d===27&&Za(a.type)&&(o=a.stateNode),a=a.child,a!==null))for(Kl(a,r,o),a=a.sibling;a!==null;)Kl(a,r,o),a=a.sibling}function Rg(a){var r=a.stateNode,o=a.memoizedProps;try{for(var d=a.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);Vt(r,d,o),r[It]=a,r[ss]=o}catch(x){tt(a,a.return,x)}}var ja=!1,gt=!1,qu=!1,Pg=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function E_(a,r){if(a=a.containerInfo,hh=mc,a=G0(a),Vd(a)){if("selectionStart"in a)var o={start:a.selectionStart,end:a.selectionEnd};else e:{o=(o=a.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var m=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var C=0,D=-1,q=-1,te=0,de=0,he=a,ae=null;t:for(;;){for(var re;he!==o||m!==0&&he.nodeType!==3||(D=C+m),he!==x||d!==0&&he.nodeType!==3||(q=C+d),he.nodeType===3&&(C+=he.nodeValue.length),(re=he.firstChild)!==null;)ae=he,he=re;for(;;){if(he===a)break t;if(ae===o&&++te===m&&(D=C),ae===x&&++de===d&&(q=C),(re=he.nextSibling)!==null)break;he=ae,ae=he.parentNode}he=re}o=D===-1||q===-1?null:{start:D,end:q}}else o=null}o=o||{start:0,end:0}}else o=null;for(mh={focusedElem:a,selectionRange:o},mc=!1,Rt=r;Rt!==null;)if(r=Rt,a=r.child,(r.subtreeFlags&1024)!==0&&a!==null)a.return=r,Rt=a;else for(;Rt!==null;){switch(r=Rt,x=r.alternate,a=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,o=r,m=x.memoizedProps,x=x.memoizedState,d=o.stateNode;try{var Me=Mn(o.type,m,o.elementType===o.type);a=d.getSnapshotBeforeUpdate(Me,x),d.__reactInternalSnapshotBeforeUpdate=a}catch(Ae){tt(o,o.return,Ae)}}break;case 3:if((a&1024)!==0){if(a=r.stateNode.containerInfo,o=a.nodeType,o===9)gh(a);else if(o===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":gh(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=r.sibling,a!==null){a.return=r.return,Rt=a;break}Rt=r.return}}function zg(a,r,o){var d=o.flags;switch(o.tag){case 0:case 11:case 15:Ia(a,o),d&4&&ao(5,o);break;case 1:if(Ia(a,o),d&4)if(a=o.stateNode,r===null)try{a.componentDidMount()}catch(C){tt(o,o.return,C)}else{var m=Mn(o.type,r.memoizedProps);r=r.memoizedState;try{a.componentDidUpdate(m,r,a.__reactInternalSnapshotBeforeUpdate)}catch(C){tt(o,o.return,C)}}d&64&&kg(o),d&512&&no(o,o.return);break;case 3:if(Ia(a,o),d&64&&(a=o.updateQueue,a!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{xp(a,r)}catch(C){tt(o,o.return,C)}}break;case 27:r===null&&d&4&&Rg(o);case 26:case 5:Ia(a,o),r===null&&d&4&&Og(o),d&512&&no(o,o.return);break;case 12:Ia(a,o);break;case 13:Ia(a,o),d&4&&$g(a,o),d&64&&(a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(o=L_.bind(null,o),tN(a,o))));break;case 22:if(d=o.memoizedState!==null||ja,!d){r=r!==null&&r.memoizedState!==null||gt,m=ja;var x=gt;ja=d,(gt=r)&&!x?Ga(a,o,(o.subtreeFlags&8772)!==0):Ia(a,o),ja=m,gt=x}break;case 30:break;default:Ia(a,o)}}function Lg(a){var r=a.alternate;r!==null&&(a.alternate=null,Lg(r)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(r=a.stateNode,r!==null&&jd(r)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var it=null,rs=!1;function wa(a,r,o){for(o=o.child;o!==null;)Bg(a,r,o),o=o.sibling}function Bg(a,r,o){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(xe,o)}catch{}switch(o.tag){case 26:gt||Ws(o,r),wa(a,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:gt||Ws(o,r);var d=it,m=rs;Za(o.type)&&(it=o.stateNode,rs=!1),wa(a,r,o),fo(o.stateNode),it=d,rs=m;break;case 5:gt||Ws(o,r);case 6:if(d=it,m=rs,it=null,wa(a,r,o),it=d,rs=m,it!==null)if(rs)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(o.stateNode)}catch(x){tt(o,r,x)}else try{it.removeChild(o.stateNode)}catch(x){tt(o,r,x)}break;case 18:it!==null&&(rs?(a=it,Tx(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.stateNode),wo(a)):Tx(it,o.stateNode));break;case 4:d=it,m=rs,it=o.stateNode.containerInfo,rs=!0,wa(a,r,o),it=d,rs=m;break;case 0:case 11:case 14:case 15:gt||Ha(2,o,r),gt||Ha(4,o,r),wa(a,r,o);break;case 1:gt||(Ws(o,r),d=o.stateNode,typeof d.componentWillUnmount=="function"&&Mg(o,r,d)),wa(a,r,o);break;case 21:wa(a,r,o);break;case 22:gt=(d=gt)||o.memoizedState!==null,wa(a,r,o),gt=d;break;default:wa(a,r,o)}}function $g(a,r){if(r.memoizedState===null&&(a=r.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{wo(a)}catch(o){tt(r,r.return,o)}}function A_(a){switch(a.tag){case 13:case 19:var r=a.stateNode;return r===null&&(r=a.stateNode=new Pg),r;case 22:return a=a.stateNode,r=a._retryCache,r===null&&(r=a._retryCache=new Pg),r;default:throw Error(i(435,a.tag))}}function Fu(a,r){var o=A_(a);r.forEach(function(d){var m=B_.bind(null,a,d);o.has(d)||(o.add(d),d.then(m,m))})}function fs(a,r){var o=r.deletions;if(o!==null)for(var d=0;d<o.length;d++){var m=o[d],x=a,C=r,D=C;e:for(;D!==null;){switch(D.tag){case 27:if(Za(D.type)){it=D.stateNode,rs=!1;break e}break;case 5:it=D.stateNode,rs=!1;break e;case 3:case 4:it=D.stateNode.containerInfo,rs=!0;break e}D=D.return}if(it===null)throw Error(i(160));Bg(x,C,m),it=null,rs=!1,x=m.alternate,x!==null&&(x.return=null),m.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Vg(r,a),r=r.sibling}var Ps=null;function Vg(a,r){var o=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:fs(r,a),ps(a),d&4&&(Ha(3,a,a.return),ao(3,a),Ha(5,a,a.return));break;case 1:fs(r,a),ps(a),d&512&&(gt||o===null||Ws(o,o.return)),d&64&&ja&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(o=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=o===null?d:o.concat(d))));break;case 26:var m=Ps;if(fs(r,a),ps(a),d&512&&(gt||o===null||Ws(o,o.return)),d&4){var x=o!==null?o.memoizedState:null;if(d=a.memoizedState,o===null)if(d===null)if(a.stateNode===null){e:{d=a.type,o=a.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":x=m.getElementsByTagName("title")[0],(!x||x[Ei]||x[It]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=m.createElement(d),m.head.insertBefore(x,m.querySelector("head > title"))),Vt(x,d,o),x[It]=a,Ot(x),d=x;break e;case"link":var C=Rx("link","href",m).get(d+(o.href||""));if(C){for(var D=0;D<C.length;D++)if(x=C[D],x.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&x.getAttribute("rel")===(o.rel==null?null:o.rel)&&x.getAttribute("title")===(o.title==null?null:o.title)&&x.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){C.splice(D,1);break t}}x=m.createElement(d),Vt(x,d,o),m.head.appendChild(x);break;case"meta":if(C=Rx("meta","content",m).get(d+(o.content||""))){for(D=0;D<C.length;D++)if(x=C[D],x.getAttribute("content")===(o.content==null?null:""+o.content)&&x.getAttribute("name")===(o.name==null?null:o.name)&&x.getAttribute("property")===(o.property==null?null:o.property)&&x.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&x.getAttribute("charset")===(o.charSet==null?null:o.charSet)){C.splice(D,1);break t}}x=m.createElement(d),Vt(x,d,o),m.head.appendChild(x);break;default:throw Error(i(468,d))}x[It]=a,Ot(x),d=x}a.stateNode=d}else Px(m,a.type,a.stateNode);else a.stateNode=Dx(m,d,a.memoizedProps);else x!==d?(x===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):x.count--,d===null?Px(m,a.type,a.stateNode):Dx(m,d,a.memoizedProps)):d===null&&a.stateNode!==null&&$u(a,a.memoizedProps,o.memoizedProps)}break;case 27:fs(r,a),ps(a),d&512&&(gt||o===null||Ws(o,o.return)),o!==null&&d&4&&$u(a,a.memoizedProps,o.memoizedProps);break;case 5:if(fs(r,a),ps(a),d&512&&(gt||o===null||Ws(o,o.return)),a.flags&32){m=a.stateNode;try{cr(m,"")}catch(re){tt(a,a.return,re)}}d&4&&a.stateNode!=null&&(m=a.memoizedProps,$u(a,m,o!==null?o.memoizedProps:m)),d&1024&&(qu=!0);break;case 6:if(fs(r,a),ps(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,o=a.stateNode;try{o.nodeValue=d}catch(re){tt(a,a.return,re)}}break;case 3:if(dc=null,m=Ps,Ps=lc(r.containerInfo),fs(r,a),Ps=m,ps(a),d&4&&o!==null&&o.memoizedState.isDehydrated)try{wo(r.containerInfo)}catch(re){tt(a,a.return,re)}qu&&(qu=!1,Ug(a));break;case 4:d=Ps,Ps=lc(a.stateNode.containerInfo),fs(r,a),ps(a),Ps=d;break;case 12:fs(r,a),ps(a);break;case 13:fs(r,a),ps(a),a.child.flags&8192&&a.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ku=Tt()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Fu(a,d)));break;case 22:m=a.memoizedState!==null;var q=o!==null&&o.memoizedState!==null,te=ja,de=gt;if(ja=te||m,gt=de||q,fs(r,a),gt=de,ja=te,ps(a),d&8192)e:for(r=a.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(o===null||q||ja||gt||On(a)),o=null,r=a;;){if(r.tag===5||r.tag===26){if(o===null){q=o=r;try{if(x=q.stateNode,m)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{D=q.stateNode;var he=q.memoizedProps.style,ae=he!=null&&he.hasOwnProperty("display")?he.display:null;D.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(re){tt(q,q.return,re)}}}else if(r.tag===6){if(o===null){q=r;try{q.stateNode.nodeValue=m?"":q.memoizedProps}catch(re){tt(q,q.return,re)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===a)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=a.updateQueue,d!==null&&(o=d.retryQueue,o!==null&&(d.retryQueue=null,Fu(a,o))));break;case 19:fs(r,a),ps(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Fu(a,d)));break;case 30:break;case 21:break;default:fs(r,a),ps(a)}}function ps(a){var r=a.flags;if(r&2){try{for(var o,d=a.return;d!==null;){if(Dg(d)){o=d;break}d=d.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var m=o.stateNode,x=Vu(a);Kl(a,x,m);break;case 5:var C=o.stateNode;o.flags&32&&(cr(C,""),o.flags&=-33);var D=Vu(a);Kl(a,D,C);break;case 3:case 4:var q=o.stateNode.containerInfo,te=Vu(a);Uu(a,te,q);break;default:throw Error(i(161))}}catch(de){tt(a,a.return,de)}a.flags&=-3}r&4096&&(a.flags&=-4097)}function Ug(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var r=a;Ug(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),a=a.sibling}}function Ia(a,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)zg(a,r.alternate,r),r=r.sibling}function On(a){for(a=a.child;a!==null;){var r=a;switch(r.tag){case 0:case 11:case 14:case 15:Ha(4,r,r.return),On(r);break;case 1:Ws(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Mg(r,r.return,o),On(r);break;case 27:fo(r.stateNode);case 26:case 5:Ws(r,r.return),On(r);break;case 22:r.memoizedState===null&&On(r);break;case 30:On(r);break;default:On(r)}a=a.sibling}}function Ga(a,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,m=a,x=r,C=x.flags;switch(x.tag){case 0:case 11:case 15:Ga(m,x,o),ao(4,x);break;case 1:if(Ga(m,x,o),d=x,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(te){tt(d,d.return,te)}if(d=x,m=d.updateQueue,m!==null){var D=d.stateNode;try{var q=m.shared.hiddenCallbacks;if(q!==null)for(m.shared.hiddenCallbacks=null,m=0;m<q.length;m++)gp(q[m],D)}catch(te){tt(d,d.return,te)}}o&&C&64&&kg(x),no(x,x.return);break;case 27:Rg(x);case 26:case 5:Ga(m,x,o),o&&d===null&&C&4&&Og(x),no(x,x.return);break;case 12:Ga(m,x,o);break;case 13:Ga(m,x,o),o&&C&4&&$g(m,x);break;case 22:x.memoizedState===null&&Ga(m,x,o),no(x,x.return);break;case 30:break;default:Ga(m,x,o)}r=r.sibling}}function Hu(a,r){var o=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),a=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),a!==o&&(a!=null&&a.refCount++,o!=null&&Fi(o))}function Iu(a,r){a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Fi(a))}function Qs(a,r,o,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qg(a,r,o,d),r=r.sibling}function qg(a,r,o,d){var m=r.flags;switch(r.tag){case 0:case 11:case 15:Qs(a,r,o,d),m&2048&&ao(9,r);break;case 1:Qs(a,r,o,d);break;case 3:Qs(a,r,o,d),m&2048&&(a=null,r.alternate!==null&&(a=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==a&&(r.refCount++,a!=null&&Fi(a)));break;case 12:if(m&2048){Qs(a,r,o,d),a=r.stateNode;try{var x=r.memoizedProps,C=x.id,D=x.onPostCommit;typeof D=="function"&&D(C,r.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(q){tt(r,r.return,q)}}else Qs(a,r,o,d);break;case 13:Qs(a,r,o,d);break;case 23:break;case 22:x=r.stateNode,C=r.alternate,r.memoizedState!==null?x._visibility&2?Qs(a,r,o,d):ro(a,r):x._visibility&2?Qs(a,r,o,d):(x._visibility|=2,Er(a,r,o,d,(r.subtreeFlags&10256)!==0)),m&2048&&Hu(C,r);break;case 24:Qs(a,r,o,d),m&2048&&Iu(r.alternate,r);break;default:Qs(a,r,o,d)}}function Er(a,r,o,d,m){for(m=m&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var x=a,C=r,D=o,q=d,te=C.flags;switch(C.tag){case 0:case 11:case 15:Er(x,C,D,q,m),ao(8,C);break;case 23:break;case 22:var de=C.stateNode;C.memoizedState!==null?de._visibility&2?Er(x,C,D,q,m):ro(x,C):(de._visibility|=2,Er(x,C,D,q,m)),m&&te&2048&&Hu(C.alternate,C);break;case 24:Er(x,C,D,q,m),m&&te&2048&&Iu(C.alternate,C);break;default:Er(x,C,D,q,m)}r=r.sibling}}function ro(a,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=a,d=r,m=d.flags;switch(d.tag){case 22:ro(o,d),m&2048&&Hu(d.alternate,d);break;case 24:ro(o,d),m&2048&&Iu(d.alternate,d);break;default:ro(o,d)}r=r.sibling}}var io=8192;function Ar(a){if(a.subtreeFlags&io)for(a=a.child;a!==null;)Fg(a),a=a.sibling}function Fg(a){switch(a.tag){case 26:Ar(a),a.flags&io&&a.memoizedState!==null&&fN(Ps,a.memoizedState,a.memoizedProps);break;case 5:Ar(a);break;case 3:case 4:var r=Ps;Ps=lc(a.stateNode.containerInfo),Ar(a),Ps=r;break;case 22:a.memoizedState===null&&(r=a.alternate,r!==null&&r.memoizedState!==null?(r=io,io=16777216,Ar(a),io=r):Ar(a));break;default:Ar(a)}}function Hg(a){var r=a.alternate;if(r!==null&&(a=r.child,a!==null)){r.child=null;do r=a.sibling,a.sibling=null,a=r;while(a!==null)}}function oo(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var d=r[o];Rt=d,Gg(d,a)}Hg(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ig(a),a=a.sibling}function Ig(a){switch(a.tag){case 0:case 11:case 15:oo(a),a.flags&2048&&Ha(9,a,a.return);break;case 3:oo(a);break;case 12:oo(a);break;case 22:var r=a.stateNode;a.memoizedState!==null&&r._visibility&2&&(a.return===null||a.return.tag!==13)?(r._visibility&=-3,Wl(a)):oo(a);break;default:oo(a)}}function Wl(a){var r=a.deletions;if((a.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var d=r[o];Rt=d,Gg(d,a)}Hg(a)}for(a=a.child;a!==null;){switch(r=a,r.tag){case 0:case 11:case 15:Ha(8,r,r.return),Wl(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Wl(r));break;default:Wl(r)}a=a.sibling}}function Gg(a,r){for(;Rt!==null;){var o=Rt;switch(o.tag){case 0:case 11:case 15:Ha(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var d=o.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Fi(o.memoizedState.cache)}if(d=o.child,d!==null)d.return=o,Rt=d;else e:for(o=a;Rt!==null;){d=Rt;var m=d.sibling,x=d.return;if(Lg(d),d===o){Rt=null;break e}if(m!==null){m.return=x,Rt=m;break e}Rt=x}}}var k_={getCacheForType:function(a){var r=Gt(Ct),o=r.data.get(a);return o===void 0&&(o=a(),r.data.set(a,o)),o}},M_=typeof WeakMap=="function"?WeakMap:Map,Ke=0,st=null,qe=null,Ge=0,We=0,gs=null,Ya=!1,kr=!1,Gu=!1,_a=0,ht=0,Xa=0,Dn=0,Yu=0,As=0,Mr=0,lo=null,is=null,Xu=!1,Ku=0,Ql=1/0,Zl=null,Ka=null,$t=0,Wa=null,Or=null,Dr=0,Wu=0,Qu=null,Yg=null,co=0,Zu=null;function xs(){if((Ke&2)!==0&&Ge!==0)return Ge&-Ge;if(O.T!==null){var a=vr;return a!==0?a:rh()}return c0()}function Xg(){As===0&&(As=(Ge&536870912)===0||Xe?Ni():536870912);var a=Es.current;return a!==null&&(a.flags|=32),As}function ys(a,r,o){(a===st&&(We===2||We===9)||a.cancelPendingCommit!==null)&&(Rr(a,0),Qa(a,Ge,As,!1)),tr(a,o),((Ke&2)===0||a!==st)&&(a===st&&((Ke&2)===0&&(Dn|=o),ht===4&&Qa(a,Ge,As,!1)),Zs(a))}function Kg(a,r,o){if((Ke&6)!==0)throw Error(i(327));var d=!o&&(r&124)===0&&(r&a.expiredLanes)===0||Ys(a,r),m=d?R_(a,r):th(a,r,!0),x=d;do{if(m===0){kr&&!d&&Qa(a,r,0,!1);break}else{if(o=a.current.alternate,x&&!O_(o)){m=th(a,r,!1),x=!1;continue}if(m===2){if(x=r,a.errorRecoveryDisabledLanes&x)var C=0;else C=a.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var D=a;m=lo;var q=D.current.memoizedState.isDehydrated;if(q&&(Rr(D,C).flags|=256),C=th(D,C,!1),C!==2){if(Gu&&!q){D.errorRecoveryDisabledLanes|=x,Dn|=x,m=4;break e}x=is,is=m,x!==null&&(is===null?is=x:is.push.apply(is,x))}m=C}if(x=!1,m!==2)continue}}if(m===1){Rr(a,0),Qa(a,r,0,!0);break}e:{switch(d=a,x=m,x){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Qa(d,r,As,!Ya);break e;case 2:is=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(m=Ku+300-Tt(),10<m)){if(Qa(d,r,As,!Ya),Gs(d,0,!0)!==0)break e;d.timeoutHandle=Nx(Wg.bind(null,d,o,is,Zl,Xu,r,As,Dn,Mr,Ya,x,2,-0,0),m);break e}Wg(d,o,is,Zl,Xu,r,As,Dn,Mr,Ya,x,0,-0,0)}}break}while(!0);Zs(a)}function Wg(a,r,o,d,m,x,C,D,q,te,de,he,ae,re){if(a.timeoutHandle=-1,he=r.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(xo={stylesheets:null,count:0,unsuspend:mN},Fg(r),he=pN(),he!==null)){a.cancelPendingCommit=he(ax.bind(null,a,r,x,o,d,m,C,D,q,de,1,ae,re)),Qa(a,x,C,!te);return}ax(a,r,x,o,d,m,C,D,q)}function O_(a){for(var r=a;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var d=0;d<o.length;d++){var m=o[d],x=m.getSnapshot;m=m.value;try{if(!hs(x(),m))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===a)break;for(;r.sibling===null;){if(r.return===null||r.return===a)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qa(a,r,o,d){r&=~Yu,r&=~Dn,a.suspendedLanes|=r,a.pingedLanes&=~r,d&&(a.warmLanes|=r),d=a.expirationTimes;for(var m=r;0<m;){var x=31-ne(m),C=1<<x;d[x]=-1,m&=~C}o!==0&&o0(a,o,r)}function Jl(){return(Ke&6)===0?(uo(0),!1):!0}function Ju(){if(qe!==null){if(We===0)var a=qe.return;else a=qe,pa=Cn=null,gu(a),Tr=null,eo=0,a=qe;for(;a!==null;)Ag(a.alternate,a),a=a.return;qe=null}}function Rr(a,r){var o=a.timeoutHandle;o!==-1&&(a.timeoutHandle=-1,W_(o)),o=a.cancelPendingCommit,o!==null&&(a.cancelPendingCommit=null,o()),Ju(),st=a,qe=o=ha(a.current,null),Ge=r,We=0,gs=null,Ya=!1,kr=Ys(a,r),Gu=!1,Mr=As=Yu=Dn=Xa=ht=0,is=lo=null,Xu=!1,(r&8)!==0&&(r|=r&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=r;0<d;){var m=31-ne(d),x=1<<m;r|=a[m],d&=~x}return _a=r,jl(),o}function Qg(a,r){$e=null,O.H=Vl,r===Ii||r===kl?(r=fp(),We=3):r===up?(r=fp(),We=4):We=r===pg?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,gs=r,qe===null&&(ht=1,Il(a,Ns(r,a.current)))}function Zg(){var a=O.H;return O.H=Vl,a===null?Vl:a}function Jg(){var a=O.A;return O.A=k_,a}function eh(){ht=4,Ya||(Ge&4194048)!==Ge&&Es.current!==null||(kr=!0),(Xa&134217727)===0&&(Dn&134217727)===0||st===null||Qa(st,Ge,As,!1)}function th(a,r,o){var d=Ke;Ke|=2;var m=Zg(),x=Jg();(st!==a||Ge!==r)&&(Zl=null,Rr(a,r)),r=!1;var C=ht;e:do try{if(We!==0&&qe!==null){var D=qe,q=gs;switch(We){case 8:Ju(),C=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(r=!0);var te=We;if(We=0,gs=null,Pr(a,D,q,te),o&&kr){C=0;break e}break;default:te=We,We=0,gs=null,Pr(a,D,q,te)}}D_(),C=ht;break}catch(de){Qg(a,de)}while(!0);return r&&a.shellSuspendCounter++,pa=Cn=null,Ke=d,O.H=m,O.A=x,qe===null&&(st=null,Ge=0,jl()),C}function D_(){for(;qe!==null;)ex(qe)}function R_(a,r){var o=Ke;Ke|=2;var d=Zg(),m=Jg();st!==a||Ge!==r?(Zl=null,Ql=Tt()+500,Rr(a,r)):kr=Ys(a,r);e:do try{if(We!==0&&qe!==null){r=qe;var x=gs;t:switch(We){case 1:We=0,gs=null,Pr(a,r,x,1);break;case 2:case 9:if(hp(x)){We=0,gs=null,tx(r);break}r=function(){We!==2&&We!==9||st!==a||(We=7),Zs(a)},x.then(r,r);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:hp(x)?(We=0,gs=null,tx(r)):(We=0,gs=null,Pr(a,r,x,7));break;case 5:var C=null;switch(qe.tag){case 26:C=qe.memoizedState;case 5:case 27:var D=qe;if(!C||zx(C)){We=0,gs=null;var q=D.sibling;if(q!==null)qe=q;else{var te=D.return;te!==null?(qe=te,ec(te)):qe=null}break t}}We=0,gs=null,Pr(a,r,x,5);break;case 6:We=0,gs=null,Pr(a,r,x,6);break;case 8:Ju(),ht=6;break e;default:throw Error(i(462))}}P_();break}catch(de){Qg(a,de)}while(!0);return pa=Cn=null,O.H=d,O.A=m,Ke=o,qe!==null?0:(st=null,Ge=0,jl(),ht)}function P_(){for(;qe!==null&&!Ra();)ex(qe)}function ex(a){var r=Cg(a.alternate,a,_a);a.memoizedProps=a.pendingProps,r===null?ec(a):qe=r}function tx(a){var r=a,o=r.alternate;switch(r.tag){case 15:case 0:r=jg(o,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=jg(o,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:gu(r);default:Ag(o,r),r=qe=sp(r,_a),r=Cg(o,r,_a)}a.memoizedProps=a.pendingProps,r===null?ec(a):qe=r}function Pr(a,r,o,d){pa=Cn=null,gu(r),Tr=null,eo=0;var m=r.return;try{if(N_(a,m,r,o,Ge)){ht=1,Il(a,Ns(o,a.current)),qe=null;return}}catch(x){if(m!==null)throw qe=m,x;ht=1,Il(a,Ns(o,a.current)),qe=null;return}r.flags&32768?(Xe||d===1?a=!0:kr||(Ge&536870912)!==0?a=!1:(Ya=a=!0,(d===2||d===9||d===3||d===6)&&(d=Es.current,d!==null&&d.tag===13&&(d.flags|=16384))),sx(r,a)):ec(r)}function ec(a){var r=a;do{if((r.flags&32768)!==0){sx(r,Ya);return}a=r.return;var o=T_(r.alternate,r,_a);if(o!==null){qe=o;return}if(r=r.sibling,r!==null){qe=r;return}qe=r=a}while(r!==null);ht===0&&(ht=5)}function sx(a,r){do{var o=C_(a.alternate,a);if(o!==null){o.flags&=32767,qe=o;return}if(o=a.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(a=a.sibling,a!==null)){qe=a;return}qe=a=o}while(a!==null);ht=6,qe=null}function ax(a,r,o,d,m,x,C,D,q){a.cancelPendingCommit=null;do tc();while($t!==0);if((Ke&6)!==0)throw Error(i(327));if(r!==null){if(r===a.current)throw Error(i(177));if(x=r.lanes|r.childLanes,x|=Id,Ci(a,o,x,C,D,q),a===st&&(qe=st=null,Ge=0),Or=r,Wa=a,Dr=o,Wu=x,Qu=m,Yg=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,$_(ee,function(){return lx(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=O.T,O.T=null,m=P.p,P.p=2,C=Ke,Ke|=4;try{E_(a,r,o)}finally{Ke=C,P.p=m,O.T=d}}$t=1,nx(),rx(),ix()}}function nx(){if($t===1){$t=0;var a=Wa,r=Or,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=O.T,O.T=null;var d=P.p;P.p=2;var m=Ke;Ke|=4;try{Vg(r,a);var x=mh,C=G0(a.containerInfo),D=x.focusedElem,q=x.selectionRange;if(C!==D&&D&&D.ownerDocument&&I0(D.ownerDocument.documentElement,D)){if(q!==null&&Vd(D)){var te=q.start,de=q.end;if(de===void 0&&(de=te),"selectionStart"in D)D.selectionStart=te,D.selectionEnd=Math.min(de,D.value.length);else{var he=D.ownerDocument||document,ae=he&&he.defaultView||window;if(ae.getSelection){var re=ae.getSelection(),Me=D.textContent.length,Ae=Math.min(q.start,Me),et=q.end===void 0?Ae:Math.min(q.end,Me);!re.extend&&Ae>et&&(C=et,et=Ae,Ae=C);var X=H0(D,Ae),G=H0(D,et);if(X&&G&&(re.rangeCount!==1||re.anchorNode!==X.node||re.anchorOffset!==X.offset||re.focusNode!==G.node||re.focusOffset!==G.offset)){var J=he.createRange();J.setStart(X.node,X.offset),re.removeAllRanges(),Ae>et?(re.addRange(J),re.extend(G.node,G.offset)):(J.setEnd(G.node,G.offset),re.addRange(J))}}}}for(he=[],re=D;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<he.length;D++){var ue=he[D];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}mc=!!hh,mh=hh=null}finally{Ke=m,P.p=d,O.T=o}}a.current=r,$t=2}}function rx(){if($t===2){$t=0;var a=Wa,r=Or,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=O.T,O.T=null;var d=P.p;P.p=2;var m=Ke;Ke|=4;try{zg(a,r.alternate,r)}finally{Ke=m,P.p=d,O.T=o}}$t=3}}function ix(){if($t===4||$t===3){$t=0,la();var a=Wa,r=Or,o=Dr,d=Yg;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?$t=5:($t=0,Or=Wa=null,ox(a,a.pendingLanes));var m=a.pendingLanes;if(m===0&&(Ka=null),bd(o),r=r.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(xe,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=O.T,m=P.p,P.p=2,O.T=null;try{for(var x=a.onRecoverableError,C=0;C<d.length;C++){var D=d[C];x(D.value,{componentStack:D.stack})}}finally{O.T=r,P.p=m}}(Dr&3)!==0&&tc(),Zs(a),m=a.pendingLanes,(o&4194090)!==0&&(m&42)!==0?a===Zu?co++:(co=0,Zu=a):co=0,uo(0)}}function ox(a,r){(a.pooledCacheLanes&=r)===0&&(r=a.pooledCache,r!=null&&(a.pooledCache=null,Fi(r)))}function tc(a){return nx(),rx(),ix(),lx()}function lx(){if($t!==5)return!1;var a=Wa,r=Wu;Wu=0;var o=bd(Dr),d=O.T,m=P.p;try{P.p=32>o?32:o,O.T=null,o=Qu,Qu=null;var x=Wa,C=Dr;if($t=0,Or=Wa=null,Dr=0,(Ke&6)!==0)throw Error(i(331));var D=Ke;if(Ke|=4,Ig(x.current),qg(x,x.current,C,o),Ke=D,uo(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(xe,x)}catch{}return!0}finally{P.p=m,O.T=d,ox(a,r)}}function cx(a,r,o){r=Ns(o,r),r=ku(a.stateNode,r,2),a=Va(a,r,2),a!==null&&(tr(a,2),Zs(a))}function tt(a,r,o){if(a.tag===3)cx(a,a,o);else for(;r!==null;){if(r.tag===3){cx(r,a,o);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ka===null||!Ka.has(d))){a=Ns(o,a),o=mg(2),d=Va(r,o,2),d!==null&&(fg(o,d,r,a),tr(d,2),Zs(d));break}}r=r.return}}function sh(a,r,o){var d=a.pingCache;if(d===null){d=a.pingCache=new M_;var m=new Set;d.set(r,m)}else m=d.get(r),m===void 0&&(m=new Set,d.set(r,m));m.has(o)||(Gu=!0,m.add(o),a=z_.bind(null,a,r,o),r.then(a,a))}function z_(a,r,o){var d=a.pingCache;d!==null&&d.delete(r),a.pingedLanes|=a.suspendedLanes&o,a.warmLanes&=~o,st===a&&(Ge&o)===o&&(ht===4||ht===3&&(Ge&62914560)===Ge&&300>Tt()-Ku?(Ke&2)===0&&Rr(a,0):Yu|=o,Mr===Ge&&(Mr=0)),Zs(a)}function dx(a,r){r===0&&(r=Si()),a=gr(a,r),a!==null&&(tr(a,r),Zs(a))}function L_(a){var r=a.memoizedState,o=0;r!==null&&(o=r.retryLane),dx(a,o)}function B_(a,r){var o=0;switch(a.tag){case 13:var d=a.stateNode,m=a.memoizedState;m!==null&&(o=m.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(r),dx(a,o)}function $_(a,r){return St(a,r)}var sc=null,zr=null,ah=!1,ac=!1,nh=!1,Rn=0;function Zs(a){a!==zr&&a.next===null&&(zr===null?sc=zr=a:zr=zr.next=a),ac=!0,ah||(ah=!0,U_())}function uo(a,r){if(!nh&&ac){nh=!0;do for(var o=!1,d=sc;d!==null;){if(a!==0){var m=d.pendingLanes;if(m===0)var x=0;else{var C=d.suspendedLanes,D=d.pingedLanes;x=(1<<31-ne(42|a)+1)-1,x&=m&~(C&~D),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(o=!0,fx(d,x))}else x=Ge,x=Gs(d,d===st?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||Ys(d,x)||(o=!0,fx(d,x));d=d.next}while(o);nh=!1}}function V_(){ux()}function ux(){ac=ah=!1;var a=0;Rn!==0&&(K_()&&(a=Rn),Rn=0);for(var r=Tt(),o=null,d=sc;d!==null;){var m=d.next,x=hx(d,r);x===0?(d.next=null,o===null?sc=m:o.next=m,m===null&&(zr=o)):(o=d,(a!==0||(x&3)!==0)&&(ac=!0)),d=m}uo(a)}function hx(a,r){for(var o=a.suspendedLanes,d=a.pingedLanes,m=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var C=31-ne(x),D=1<<C,q=m[C];q===-1?((D&o)===0||(D&d)!==0)&&(m[C]=xn(D,r)):q<=r&&(a.expiredLanes|=D),x&=~D}if(r=st,o=Ge,o=Gs(a,a===r?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,o===0||a===r&&(We===2||We===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&ds(d),a.callbackNode=null,a.callbackPriority=0;if((o&3)===0||Ys(a,o)){if(r=o&-o,r===a.callbackPriority)return r;switch(d!==null&&ds(d),bd(o)){case 2:case 8:o=H;break;case 32:o=ee;break;case 268435456:o=be;break;default:o=ee}return d=mx.bind(null,a),o=St(o,d),a.callbackPriority=r,a.callbackNode=o,r}return d!==null&&d!==null&&ds(d),a.callbackPriority=2,a.callbackNode=null,2}function mx(a,r){if($t!==0&&$t!==5)return a.callbackNode=null,a.callbackPriority=0,null;var o=a.callbackNode;if(tc()&&a.callbackNode!==o)return null;var d=Ge;return d=Gs(a,a===st?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(Kg(a,d,r),hx(a,Tt()),a.callbackNode!=null&&a.callbackNode===o?mx.bind(null,a):null)}function fx(a,r){if(tc())return null;Kg(a,r,!0)}function U_(){Q_(function(){(Ke&6)!==0?St(ca,V_):ux()})}function rh(){return Rn===0&&(Rn=Ni()),Rn}function px(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:fl(""+a)}function gx(a,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,a.id&&o.setAttribute("form",a.id),r.parentNode.insertBefore(o,r),a=new FormData(a),o.parentNode.removeChild(o),a}function q_(a,r,o,d,m){if(r==="submit"&&o&&o.stateNode===m){var x=px((m[ss]||null).action),C=d.submitter;C&&(r=(r=C[ss]||null)?px(r.formAction):C.getAttribute("formAction"),r!==null&&(x=r,C=null));var D=new yl("action","action",null,d,m);a.push({event:D,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Rn!==0){var q=C?gx(m,C):new FormData(m);Su(o,{pending:!0,data:q,method:m.method,action:x},null,q)}}else typeof x=="function"&&(D.preventDefault(),q=C?gx(m,C):new FormData(m),Su(o,{pending:!0,data:q,method:m.method,action:x},x,q))},currentTarget:m}]})}}for(var ih=0;ih<Hd.length;ih++){var oh=Hd[ih],F_=oh.toLowerCase(),H_=oh[0].toUpperCase()+oh.slice(1);Rs(F_,"on"+H_)}Rs(K0,"onAnimationEnd"),Rs(W0,"onAnimationIteration"),Rs(Q0,"onAnimationStart"),Rs("dblclick","onDoubleClick"),Rs("focusin","onFocus"),Rs("focusout","onBlur"),Rs(o_,"onTransitionRun"),Rs(l_,"onTransitionStart"),Rs(c_,"onTransitionCancel"),Rs(Z0,"onTransitionEnd"),ir("onMouseEnter",["mouseout","mouseover"]),ir("onMouseLeave",["mouseout","mouseover"]),ir("onPointerEnter",["pointerout","pointerover"]),ir("onPointerLeave",["pointerout","pointerover"]),yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ho));function xx(a,r){r=(r&4)!==0;for(var o=0;o<a.length;o++){var d=a[o],m=d.event;d=d.listeners;e:{var x=void 0;if(r)for(var C=d.length-1;0<=C;C--){var D=d[C],q=D.instance,te=D.currentTarget;if(D=D.listener,q!==x&&m.isPropagationStopped())break e;x=D,m.currentTarget=te;try{x(m)}catch(de){Hl(de)}m.currentTarget=null,x=q}else for(C=0;C<d.length;C++){if(D=d[C],q=D.instance,te=D.currentTarget,D=D.listener,q!==x&&m.isPropagationStopped())break e;x=D,m.currentTarget=te;try{x(m)}catch(de){Hl(de)}m.currentTarget=null,x=q}}}}function Fe(a,r){var o=r[vd];o===void 0&&(o=r[vd]=new Set);var d=a+"__bubble";o.has(d)||(yx(r,a,2,!1),o.add(d))}function lh(a,r,o){var d=0;r&&(d|=4),yx(o,a,d,r)}var nc="_reactListening"+Math.random().toString(36).slice(2);function ch(a){if(!a[nc]){a[nc]=!0,u0.forEach(function(o){o!=="selectionchange"&&(I_.has(o)||lh(o,!1,a),lh(o,!0,a))});var r=a.nodeType===9?a:a.ownerDocument;r===null||r[nc]||(r[nc]=!0,lh("selectionchange",!1,r))}}function yx(a,r,o,d){switch(qx(r)){case 2:var m=yN;break;case 8:m=bN;break;default:m=_h}o=m.bind(null,r,o,a),m=void 0,!Md||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),d?m!==void 0?a.addEventListener(r,o,{capture:!0,passive:m}):a.addEventListener(r,o,!0):m!==void 0?a.addEventListener(r,o,{passive:m}):a.addEventListener(r,o,!1)}function dh(a,r,o,d,m){var x=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var D=d.stateNode.containerInfo;if(D===m)break;if(C===4)for(C=d.return;C!==null;){var q=C.tag;if((q===3||q===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;D!==null;){if(C=ar(D),C===null)return;if(q=C.tag,q===5||q===6||q===26||q===27){d=x=C;continue e}D=D.parentNode}}d=d.return}S0(function(){var te=x,de=Ad(o),he=[];e:{var ae=J0.get(a);if(ae!==void 0){var re=yl,Me=a;switch(a){case"keypress":if(gl(o)===0)break e;case"keydown":case"keyup":re=$1;break;case"focusin":Me="focus",re=Pd;break;case"focusout":Me="blur",re=Pd;break;case"beforeblur":case"afterblur":re=Pd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=E0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=C1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=q1;break;case K0:case W0:case Q0:re=k1;break;case Z0:re=H1;break;case"scroll":case"scrollend":re=S1;break;case"wheel":re=G1;break;case"copy":case"cut":case"paste":re=O1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=k0;break;case"toggle":case"beforetoggle":re=X1}var Ae=(r&4)!==0,et=!Ae&&(a==="scroll"||a==="scrollend"),X=Ae?ae!==null?ae+"Capture":null:ae;Ae=[];for(var G=te,J;G!==null;){var ue=G;if(J=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||J===null||X===null||(ue=ki(G,X),ue!=null&&Ae.push(mo(G,ue,J))),et)break;G=G.return}0<Ae.length&&(ae=new re(ae,Me,null,o,de),he.push({event:ae,listeners:Ae}))}}if((r&7)===0){e:{if(ae=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",ae&&o!==Ed&&(Me=o.relatedTarget||o.fromElement)&&(ar(Me)||Me[sr]))break e;if((re||ae)&&(ae=de.window===de?de:(ae=de.ownerDocument)?ae.defaultView||ae.parentWindow:window,re?(Me=o.relatedTarget||o.toElement,re=te,Me=Me?ar(Me):null,Me!==null&&(et=c(Me),Ae=Me.tag,Me!==et||Ae!==5&&Ae!==27&&Ae!==6)&&(Me=null)):(re=null,Me=te),re!==Me)){if(Ae=E0,ue="onMouseLeave",X="onMouseEnter",G="mouse",(a==="pointerout"||a==="pointerover")&&(Ae=k0,ue="onPointerLeave",X="onPointerEnter",G="pointer"),et=re==null?ae:Ai(re),J=Me==null?ae:Ai(Me),ae=new Ae(ue,G+"leave",re,o,de),ae.target=et,ae.relatedTarget=J,ue=null,ar(de)===te&&(Ae=new Ae(X,G+"enter",Me,o,de),Ae.target=J,Ae.relatedTarget=et,ue=Ae),et=ue,re&&Me)t:{for(Ae=re,X=Me,G=0,J=Ae;J;J=Lr(J))G++;for(J=0,ue=X;ue;ue=Lr(ue))J++;for(;0<G-J;)Ae=Lr(Ae),G--;for(;0<J-G;)X=Lr(X),J--;for(;G--;){if(Ae===X||X!==null&&Ae===X.alternate)break t;Ae=Lr(Ae),X=Lr(X)}Ae=null}else Ae=null;re!==null&&bx(he,ae,re,Ae,!1),Me!==null&&et!==null&&bx(he,et,Me,Ae,!0)}}e:{if(ae=te?Ai(te):window,re=ae.nodeName&&ae.nodeName.toLowerCase(),re==="select"||re==="input"&&ae.type==="file")var we=B0;else if(z0(ae))if($0)we=n_;else{we=s_;var Ue=t_}else re=ae.nodeName,!re||re.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?te&&Cd(te.elementType)&&(we=B0):we=a_;if(we&&(we=we(a,te))){L0(he,we,o,de);break e}Ue&&Ue(a,ae,te),a==="focusout"&&te&&ae.type==="number"&&te.memoizedProps.value!=null&&Td(ae,"number",ae.value)}switch(Ue=te?Ai(te):window,a){case"focusin":(z0(Ue)||Ue.contentEditable==="true")&&(mr=Ue,Ud=te,Bi=null);break;case"focusout":Bi=Ud=mr=null;break;case"mousedown":qd=!0;break;case"contextmenu":case"mouseup":case"dragend":qd=!1,Y0(he,o,de);break;case"selectionchange":if(i_)break;case"keydown":case"keyup":Y0(he,o,de)}var Te;if(Ld)e:{switch(a){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else hr?R0(a,o)&&(ke="onCompositionEnd"):a==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(M0&&o.locale!=="ko"&&(hr||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&hr&&(Te=T0()):(za=de,Od="value"in za?za.value:za.textContent,hr=!0)),Ue=rc(te,ke),0<Ue.length&&(ke=new A0(ke,a,null,o,de),he.push({event:ke,listeners:Ue}),Te?ke.data=Te:(Te=P0(o),Te!==null&&(ke.data=Te)))),(Te=W1?Q1(a,o):Z1(a,o))&&(ke=rc(te,"onBeforeInput"),0<ke.length&&(Ue=new A0("onBeforeInput","beforeinput",null,o,de),he.push({event:Ue,listeners:ke}),Ue.data=Te)),q_(he,a,te,o,de)}xx(he,r)})}function mo(a,r,o){return{instance:a,listener:r,currentTarget:o}}function rc(a,r){for(var o=r+"Capture",d=[];a!==null;){var m=a,x=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||x===null||(m=ki(a,o),m!=null&&d.unshift(mo(a,m,x)),m=ki(a,r),m!=null&&d.push(mo(a,m,x))),a.tag===3)return d;a=a.return}return[]}function Lr(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function bx(a,r,o,d,m){for(var x=r._reactName,C=[];o!==null&&o!==d;){var D=o,q=D.alternate,te=D.stateNode;if(D=D.tag,q!==null&&q===d)break;D!==5&&D!==26&&D!==27||te===null||(q=te,m?(te=ki(o,x),te!=null&&C.unshift(mo(o,te,q))):m||(te=ki(o,x),te!=null&&C.push(mo(o,te,q)))),o=o.return}C.length!==0&&a.push({event:r,listeners:C})}var G_=/\r\n?/g,Y_=/\u0000|\uFFFD/g;function vx(a){return(typeof a=="string"?a:""+a).replace(G_,`
`).replace(Y_,"")}function jx(a,r){return r=vx(r),vx(a)===r}function ic(){}function Je(a,r,o,d,m,x){switch(o){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||cr(a,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&cr(a,""+d);break;case"className":ul(a,"class",d);break;case"tabIndex":ul(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ul(a,o,d);break;case"style":_0(a,d,x);break;case"data":if(r!=="object"){ul(a,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||o!=="href")){a.removeAttribute(o);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(o);break}d=fl(""+d),a.setAttribute(o,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(o==="formAction"?(r!=="input"&&Je(a,r,"name",m.name,m,null),Je(a,r,"formEncType",m.formEncType,m,null),Je(a,r,"formMethod",m.formMethod,m,null),Je(a,r,"formTarget",m.formTarget,m,null)):(Je(a,r,"encType",m.encType,m,null),Je(a,r,"method",m.method,m,null),Je(a,r,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(o);break}d=fl(""+d),a.setAttribute(o,d);break;case"onClick":d!=null&&(a.onclick=ic);break;case"onScroll":d!=null&&Fe("scroll",a);break;case"onScrollEnd":d!=null&&Fe("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(o=d.__html,o!=null){if(m.children!=null)throw Error(i(60));a.innerHTML=o}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}o=fl(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(o,""+d):a.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(o,""):a.removeAttribute(o);break;case"capture":case"download":d===!0?a.setAttribute(o,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(o,d):a.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(o,d):a.removeAttribute(o);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(o):a.setAttribute(o,d);break;case"popover":Fe("beforetoggle",a),Fe("toggle",a),dl(a,"popover",d);break;case"xlinkActuate":da(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":da(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":da(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":da(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":da(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":da(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":da(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":da(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":da(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":dl(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_1.get(o)||o,dl(a,o,d))}}function uh(a,r,o,d,m,x){switch(o){case"style":_0(a,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(o=d.__html,o!=null){if(m.children!=null)throw Error(i(60));a.innerHTML=o}}break;case"children":typeof d=="string"?cr(a,d):(typeof d=="number"||typeof d=="bigint")&&cr(a,""+d);break;case"onScroll":d!=null&&Fe("scroll",a);break;case"onScrollEnd":d!=null&&Fe("scrollend",a);break;case"onClick":d!=null&&(a.onclick=ic);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!h0.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),r=o.slice(2,m?o.length-7:void 0),x=a[ss]||null,x=x!=null?x[o]:null,typeof x=="function"&&a.removeEventListener(r,x,m),typeof d=="function")){typeof x!="function"&&x!==null&&(o in a?a[o]=null:a.hasAttribute(o)&&a.removeAttribute(o)),a.addEventListener(r,d,m);break e}o in a?a[o]=d:d===!0?a.setAttribute(o,""):dl(a,o,d)}}}function Vt(a,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",a),Fe("load",a);var d=!1,m=!1,x;for(x in o)if(o.hasOwnProperty(x)){var C=o[x];if(C!=null)switch(x){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Je(a,r,x,C,o,null)}}m&&Je(a,r,"srcSet",o.srcSet,o,null),d&&Je(a,r,"src",o.src,o,null);return;case"input":Fe("invalid",a);var D=x=C=m=null,q=null,te=null;for(d in o)if(o.hasOwnProperty(d)){var de=o[d];if(de!=null)switch(d){case"name":m=de;break;case"type":C=de;break;case"checked":q=de;break;case"defaultChecked":te=de;break;case"value":x=de;break;case"defaultValue":D=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,r));break;default:Je(a,r,d,de,o,null)}}b0(a,x,D,q,te,C,m,!1),hl(a);return;case"select":Fe("invalid",a),d=C=x=null;for(m in o)if(o.hasOwnProperty(m)&&(D=o[m],D!=null))switch(m){case"value":x=D;break;case"defaultValue":C=D;break;case"multiple":d=D;default:Je(a,r,m,D,o,null)}r=x,o=C,a.multiple=!!d,r!=null?lr(a,!!d,r,!1):o!=null&&lr(a,!!d,o,!0);return;case"textarea":Fe("invalid",a),x=m=d=null;for(C in o)if(o.hasOwnProperty(C)&&(D=o[C],D!=null))switch(C){case"value":d=D;break;case"defaultValue":m=D;break;case"children":x=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:Je(a,r,C,D,o,null)}j0(a,d,m,x),hl(a);return;case"option":for(q in o)if(o.hasOwnProperty(q)&&(d=o[q],d!=null))switch(q){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Je(a,r,q,d,o,null)}return;case"dialog":Fe("beforetoggle",a),Fe("toggle",a),Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":Fe("load",a);break;case"video":case"audio":for(d=0;d<ho.length;d++)Fe(ho[d],a);break;case"image":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"embed":case"source":case"link":Fe("error",a),Fe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in o)if(o.hasOwnProperty(te)&&(d=o[te],d!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Je(a,r,te,d,o,null)}return;default:if(Cd(r)){for(de in o)o.hasOwnProperty(de)&&(d=o[de],d!==void 0&&uh(a,r,de,d,o,void 0));return}}for(D in o)o.hasOwnProperty(D)&&(d=o[D],d!=null&&Je(a,r,D,d,o,null))}function X_(a,r,o,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,x=null,C=null,D=null,q=null,te=null,de=null;for(re in o){var he=o[re];if(o.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":q=he;default:d.hasOwnProperty(re)||Je(a,r,re,null,d,he)}}for(var ae in d){var re=d[ae];if(he=o[ae],d.hasOwnProperty(ae)&&(re!=null||he!=null))switch(ae){case"type":x=re;break;case"name":m=re;break;case"checked":te=re;break;case"defaultChecked":de=re;break;case"value":C=re;break;case"defaultValue":D=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,r));break;default:re!==he&&Je(a,r,ae,re,d,he)}}Sd(a,C,D,q,te,de,x,m);return;case"select":re=C=D=ae=null;for(x in o)if(q=o[x],o.hasOwnProperty(x)&&q!=null)switch(x){case"value":break;case"multiple":re=q;default:d.hasOwnProperty(x)||Je(a,r,x,null,d,q)}for(m in d)if(x=d[m],q=o[m],d.hasOwnProperty(m)&&(x!=null||q!=null))switch(m){case"value":ae=x;break;case"defaultValue":D=x;break;case"multiple":C=x;default:x!==q&&Je(a,r,m,x,d,q)}r=D,o=C,d=re,ae!=null?lr(a,!!o,ae,!1):!!d!=!!o&&(r!=null?lr(a,!!o,r,!0):lr(a,!!o,o?[]:"",!1));return;case"textarea":re=ae=null;for(D in o)if(m=o[D],o.hasOwnProperty(D)&&m!=null&&!d.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Je(a,r,D,null,d,m)}for(C in d)if(m=d[C],x=o[C],d.hasOwnProperty(C)&&(m!=null||x!=null))switch(C){case"value":ae=m;break;case"defaultValue":re=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==x&&Je(a,r,C,m,d,x)}v0(a,ae,re);return;case"option":for(var Me in o)if(ae=o[Me],o.hasOwnProperty(Me)&&ae!=null&&!d.hasOwnProperty(Me))switch(Me){case"selected":a.selected=!1;break;default:Je(a,r,Me,null,d,ae)}for(q in d)if(ae=d[q],re=o[q],d.hasOwnProperty(q)&&ae!==re&&(ae!=null||re!=null))switch(q){case"selected":a.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Je(a,r,q,ae,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)ae=o[Ae],o.hasOwnProperty(Ae)&&ae!=null&&!d.hasOwnProperty(Ae)&&Je(a,r,Ae,null,d,ae);for(te in d)if(ae=d[te],re=o[te],d.hasOwnProperty(te)&&ae!==re&&(ae!=null||re!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,r));break;default:Je(a,r,te,ae,d,re)}return;default:if(Cd(r)){for(var et in o)ae=o[et],o.hasOwnProperty(et)&&ae!==void 0&&!d.hasOwnProperty(et)&&uh(a,r,et,void 0,d,ae);for(de in d)ae=d[de],re=o[de],!d.hasOwnProperty(de)||ae===re||ae===void 0&&re===void 0||uh(a,r,de,ae,d,re);return}}for(var X in o)ae=o[X],o.hasOwnProperty(X)&&ae!=null&&!d.hasOwnProperty(X)&&Je(a,r,X,null,d,ae);for(he in d)ae=d[he],re=o[he],!d.hasOwnProperty(he)||ae===re||ae==null&&re==null||Je(a,r,he,ae,d,re)}var hh=null,mh=null;function oc(a){return a.nodeType===9?a:a.ownerDocument}function wx(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _x(a,r){if(a===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&r==="foreignObject"?0:a}function fh(a,r){return a==="textarea"||a==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ph=null;function K_(){var a=window.event;return a&&a.type==="popstate"?a===ph?!1:(ph=a,!0):(ph=null,!1)}var Nx=typeof setTimeout=="function"?setTimeout:void 0,W_=typeof clearTimeout=="function"?clearTimeout:void 0,Sx=typeof Promise=="function"?Promise:void 0,Q_=typeof queueMicrotask=="function"?queueMicrotask:typeof Sx<"u"?function(a){return Sx.resolve(null).then(a).catch(Z_)}:Nx;function Z_(a){setTimeout(function(){throw a})}function Za(a){return a==="head"}function Tx(a,r){var o=r,d=0,m=0;do{var x=o.nextSibling;if(a.removeChild(o),x&&x.nodeType===8)if(o=x.data,o==="/$"){if(0<d&&8>d){o=d;var C=a.ownerDocument;if(o&1&&fo(C.documentElement),o&2&&fo(C.body),o&4)for(o=C.head,fo(o),C=o.firstChild;C;){var D=C.nextSibling,q=C.nodeName;C[Ei]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&C.rel.toLowerCase()==="stylesheet"||o.removeChild(C),C=D}}if(m===0){a.removeChild(x),wo(r);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:d=o.charCodeAt(0)-48;else d=0;o=x}while(o);wo(r)}function gh(a){var r=a.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":gh(o),jd(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}a.removeChild(o)}}function J_(a,r,o,d){for(;a.nodeType===1;){var m=o;if(a.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Ei])switch(r){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==m.rel||a.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||a.getAttribute("title")!==(m.title==null?null:m.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(m.src==null?null:m.src)||a.getAttribute("type")!==(m.type==null?null:m.type)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(r==="input"&&a.type==="hidden"){var x=m.name==null?null:""+m.name;if(m.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=zs(a.nextSibling),a===null)break}return null}function eN(a,r,o){if(r==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=zs(a.nextSibling),a===null))return null;return a}function xh(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function tN(a,r){var o=a.ownerDocument;if(a.data!=="$?"||o.readyState==="complete")r();else{var d=function(){r(),o.removeEventListener("DOMContentLoaded",d)};o.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function zs(a){for(;a!=null;a=a.nextSibling){var r=a.nodeType;if(r===1||r===3)break;if(r===8){if(r=a.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return a}var yh=null;function Cx(a){a=a.previousSibling;for(var r=0;a;){if(a.nodeType===8){var o=a.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return a;r--}else o==="/$"&&r++}a=a.previousSibling}return null}function Ex(a,r,o){switch(r=oc(o),a){case"html":if(a=r.documentElement,!a)throw Error(i(452));return a;case"head":if(a=r.head,!a)throw Error(i(453));return a;case"body":if(a=r.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function fo(a){for(var r=a.attributes;r.length;)a.removeAttributeNode(r[0]);jd(a)}var ks=new Map,Ax=new Set;function lc(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Na=P.d;P.d={f:sN,r:aN,D:nN,C:rN,L:iN,m:oN,X:cN,S:lN,M:dN};function sN(){var a=Na.f(),r=Jl();return a||r}function aN(a){var r=nr(a);r!==null&&r.tag===5&&r.type==="form"?Kp(r):Na.r(a)}var Br=typeof document>"u"?null:document;function kx(a,r,o){var d=Br;if(d&&typeof r=="string"&&r){var m=_s(r);m='link[rel="'+a+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Ax.has(m)||(Ax.add(m),a={rel:a,crossOrigin:o,href:r},d.querySelector(m)===null&&(r=d.createElement("link"),Vt(r,"link",a),Ot(r),d.head.appendChild(r)))}}function nN(a){Na.D(a),kx("dns-prefetch",a,null)}function rN(a,r){Na.C(a,r),kx("preconnect",a,r)}function iN(a,r,o){Na.L(a,r,o);var d=Br;if(d&&a&&r){var m='link[rel="preload"][as="'+_s(r)+'"]';r==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+_s(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+_s(o.imageSizes)+'"]')):m+='[href="'+_s(a)+'"]';var x=m;switch(r){case"style":x=$r(a);break;case"script":x=Vr(a)}ks.has(x)||(a=g({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:a,as:r},o),ks.set(x,a),d.querySelector(m)!==null||r==="style"&&d.querySelector(po(x))||r==="script"&&d.querySelector(go(x))||(r=d.createElement("link"),Vt(r,"link",a),Ot(r),d.head.appendChild(r)))}}function oN(a,r){Na.m(a,r);var o=Br;if(o&&a){var d=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+_s(d)+'"][href="'+_s(a)+'"]',x=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Vr(a)}if(!ks.has(x)&&(a=g({rel:"modulepreload",href:a},r),ks.set(x,a),o.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(go(x)))return}d=o.createElement("link"),Vt(d,"link",a),Ot(d),o.head.appendChild(d)}}}function lN(a,r,o){Na.S(a,r,o);var d=Br;if(d&&a){var m=rr(d).hoistableStyles,x=$r(a);r=r||"default";var C=m.get(x);if(!C){var D={loading:0,preload:null};if(C=d.querySelector(po(x)))D.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":r},o),(o=ks.get(x))&&bh(a,o);var q=C=d.createElement("link");Ot(q),Vt(q,"link",a),q._p=new Promise(function(te,de){q.onload=te,q.onerror=de}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,cc(C,r,d)}C={type:"stylesheet",instance:C,count:1,state:D},m.set(x,C)}}}function cN(a,r){Na.X(a,r);var o=Br;if(o&&a){var d=rr(o).hoistableScripts,m=Vr(a),x=d.get(m);x||(x=o.querySelector(go(m)),x||(a=g({src:a,async:!0},r),(r=ks.get(m))&&vh(a,r),x=o.createElement("script"),Ot(x),Vt(x,"link",a),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function dN(a,r){Na.M(a,r);var o=Br;if(o&&a){var d=rr(o).hoistableScripts,m=Vr(a),x=d.get(m);x||(x=o.querySelector(go(m)),x||(a=g({src:a,async:!0,type:"module"},r),(r=ks.get(m))&&vh(a,r),x=o.createElement("script"),Ot(x),Vt(x,"link",a),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function Mx(a,r,o,d){var m=(m=ge.current)?lc(m):null;if(!m)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=$r(o.href),o=rr(m).hoistableStyles,d=o.get(r),d||(d={type:"style",instance:null,count:0,state:null},o.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){a=$r(o.href);var x=rr(m).hoistableStyles,C=x.get(a);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,C),(x=m.querySelector(po(a)))&&!x._p&&(C.instance=x,C.state.loading=5),ks.has(a)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ks.set(a,o),x||uN(m,a,o,C.state))),r&&d===null)throw Error(i(528,""));return C}if(r&&d!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Vr(o),o=rr(m).hoistableScripts,d=o.get(r),d||(d={type:"script",instance:null,count:0,state:null},o.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function $r(a){return'href="'+_s(a)+'"'}function po(a){return'link[rel="stylesheet"]['+a+"]"}function Ox(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function uN(a,r,o,d){a.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=a.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Vt(r,"link",o),Ot(r),a.head.appendChild(r))}function Vr(a){return'[src="'+_s(a)+'"]'}function go(a){return"script[async]"+a}function Dx(a,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var d=a.querySelector('style[data-href~="'+_s(o.href)+'"]');if(d)return r.instance=d,Ot(d),d;var m=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Ot(d),Vt(d,"style",m),cc(d,o.precedence,a),r.instance=d;case"stylesheet":m=$r(o.href);var x=a.querySelector(po(m));if(x)return r.state.loading|=4,r.instance=x,Ot(x),x;d=Ox(o),(m=ks.get(m))&&bh(d,m),x=(a.ownerDocument||a).createElement("link"),Ot(x);var C=x;return C._p=new Promise(function(D,q){C.onload=D,C.onerror=q}),Vt(x,"link",d),r.state.loading|=4,cc(x,o.precedence,a),r.instance=x;case"script":return x=Vr(o.src),(m=a.querySelector(go(x)))?(r.instance=m,Ot(m),m):(d=o,(m=ks.get(x))&&(d=g({},o),vh(d,m)),a=a.ownerDocument||a,m=a.createElement("script"),Ot(m),Vt(m,"link",d),a.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,cc(d,o.precedence,a));return r.instance}function cc(a,r,o){for(var d=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,x=m,C=0;C<d.length;C++){var D=d[C];if(D.dataset.precedence===r)x=D;else if(x!==m)break}x?x.parentNode.insertBefore(a,x.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(a,r.firstChild))}function bh(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.title==null&&(a.title=r.title)}function vh(a,r){a.crossOrigin==null&&(a.crossOrigin=r.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=r.referrerPolicy),a.integrity==null&&(a.integrity=r.integrity)}var dc=null;function Rx(a,r,o){if(dc===null){var d=new Map,m=dc=new Map;m.set(o,d)}else m=dc,d=m.get(o),d||(d=new Map,m.set(o,d));if(d.has(a))return d;for(d.set(a,null),o=o.getElementsByTagName(a),m=0;m<o.length;m++){var x=o[m];if(!(x[Ei]||x[It]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(r)||"";C=a+C;var D=d.get(C);D?D.push(x):d.set(C,[x])}}return d}function Px(a,r,o){a=a.ownerDocument||a,a.head.insertBefore(o,r==="title"?a.querySelector("head > title"):null)}function hN(a,r,o){if(o===1||r.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return a=r.disabled,typeof r.precedence=="string"&&a==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function zx(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var xo=null;function mN(){}function fN(a,r,o){if(xo===null)throw Error(i(475));var d=xo;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=$r(o.href),x=a.querySelector(po(m));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=uc.bind(d),a.then(d,d)),r.state.loading|=4,r.instance=x,Ot(x);return}x=a.ownerDocument||a,o=Ox(o),(m=ks.get(m))&&bh(o,m),x=x.createElement("link"),Ot(x);var C=x;C._p=new Promise(function(D,q){C.onload=D,C.onerror=q}),Vt(x,"link",o),r.instance=x}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(d.count++,r=uc.bind(d),a.addEventListener("load",r),a.addEventListener("error",r))}}function pN(){if(xo===null)throw Error(i(475));var a=xo;return a.stylesheets&&a.count===0&&jh(a,a.stylesheets),0<a.count?function(r){var o=setTimeout(function(){if(a.stylesheets&&jh(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=r,function(){a.unsuspend=null,clearTimeout(o)}}:null}function uc(){if(this.count--,this.count===0){if(this.stylesheets)jh(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var hc=null;function jh(a,r){a.stylesheets=null,a.unsuspend!==null&&(a.count++,hc=new Map,r.forEach(gN,a),hc=null,uc.call(a))}function gN(a,r){if(!(r.state.loading&4)){var o=hc.get(a);if(o)var d=o.get(null);else{o=new Map,hc.set(a,o);for(var m=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<m.length;x++){var C=m[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(o.set(C.dataset.precedence,C),d=C)}d&&o.set(null,d)}m=r.instance,C=m.getAttribute("data-precedence"),x=o.get(C)||d,x===d&&o.set(null,m),o.set(C,m),this.count++,d=uc.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),x?x.parentNode.insertBefore(m,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(m,a.firstChild)),r.state.loading|=4}}var yo={$$typeof:k,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function xN(a,r,o,d,m,x,C,D){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Lx(a,r,o,d,m,x,C,D,q,te,de,he){return a=new xN(a,r,o,C,D,q,te,he),r=1,x===!0&&(r|=24),x=ms(3,null,null,r),a.current=x,x.stateNode=a,r=su(),r.refCount++,a.pooledCache=r,r.refCount++,x.memoizedState={element:d,isDehydrated:o,cache:r},iu(x),a}function Bx(a){return a?(a=xr,a):xr}function $x(a,r,o,d,m,x){m=Bx(m),d.context===null?d.context=m:d.pendingContext=m,d=$a(r),d.payload={element:o},x=x===void 0?null:x,x!==null&&(d.callback=x),o=Va(a,d,r),o!==null&&(ys(o,a,r),Yi(o,a,r))}function Vx(a,r){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var o=a.retryLane;a.retryLane=o!==0&&o<r?o:r}}function wh(a,r){Vx(a,r),(a=a.alternate)&&Vx(a,r)}function Ux(a){if(a.tag===13){var r=gr(a,67108864);r!==null&&ys(r,a,67108864),wh(a,67108864)}}var mc=!0;function yN(a,r,o,d){var m=O.T;O.T=null;var x=P.p;try{P.p=2,_h(a,r,o,d)}finally{P.p=x,O.T=m}}function bN(a,r,o,d){var m=O.T;O.T=null;var x=P.p;try{P.p=8,_h(a,r,o,d)}finally{P.p=x,O.T=m}}function _h(a,r,o,d){if(mc){var m=Nh(d);if(m===null)dh(a,r,d,fc,o),Fx(a,d);else if(jN(m,a,r,o,d))d.stopPropagation();else if(Fx(a,d),r&4&&-1<vN.indexOf(a)){for(;m!==null;){var x=nr(m);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=js(x.pendingLanes);if(C!==0){var D=x;for(D.pendingLanes|=2,D.entangledLanes|=2;C;){var q=1<<31-ne(C);D.entanglements[1]|=q,C&=~q}Zs(x),(Ke&6)===0&&(Ql=Tt()+500,uo(0))}}break;case 13:D=gr(x,2),D!==null&&ys(D,x,2),Jl(),wh(x,2)}if(x=Nh(d),x===null&&dh(a,r,d,fc,o),x===m)break;m=x}m!==null&&d.stopPropagation()}else dh(a,r,d,null,o)}}function Nh(a){return a=Ad(a),Sh(a)}var fc=null;function Sh(a){if(fc=null,a=ar(a),a!==null){var r=c(a);if(r===null)a=null;else{var o=r.tag;if(o===13){if(a=u(r),a!==null)return a;a=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;a=null}else r!==a&&(a=null)}}return fc=a,null}function qx(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case ca:return 2;case H:return 8;case ee:case ce:return 32;case be:return 268435456;default:return 32}default:return 32}}var Th=!1,Ja=null,en=null,tn=null,bo=new Map,vo=new Map,sn=[],vN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fx(a,r){switch(a){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":en=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":bo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(r.pointerId)}}function jo(a,r,o,d,m,x){return a===null||a.nativeEvent!==x?(a={blockedOn:r,domEventName:o,eventSystemFlags:d,nativeEvent:x,targetContainers:[m]},r!==null&&(r=nr(r),r!==null&&Ux(r)),a):(a.eventSystemFlags|=d,r=a.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),a)}function jN(a,r,o,d,m){switch(r){case"focusin":return Ja=jo(Ja,a,r,o,d,m),!0;case"dragenter":return en=jo(en,a,r,o,d,m),!0;case"mouseover":return tn=jo(tn,a,r,o,d,m),!0;case"pointerover":var x=m.pointerId;return bo.set(x,jo(bo.get(x)||null,a,r,o,d,m)),!0;case"gotpointercapture":return x=m.pointerId,vo.set(x,jo(vo.get(x)||null,a,r,o,d,m)),!0}return!1}function Hx(a){var r=ar(a.target);if(r!==null){var o=c(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){a.blockedOn=r,f1(a.priority,function(){if(o.tag===13){var d=xs();d=yd(d);var m=gr(o,d);m!==null&&ys(m,o,d),wh(o,d)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){a.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}a.blockedOn=null}function pc(a){if(a.blockedOn!==null)return!1;for(var r=a.targetContainers;0<r.length;){var o=Nh(a.nativeEvent);if(o===null){o=a.nativeEvent;var d=new o.constructor(o.type,o);Ed=d,o.target.dispatchEvent(d),Ed=null}else return r=nr(o),r!==null&&Ux(r),a.blockedOn=o,!1;r.shift()}return!0}function Ix(a,r,o){pc(a)&&o.delete(r)}function wN(){Th=!1,Ja!==null&&pc(Ja)&&(Ja=null),en!==null&&pc(en)&&(en=null),tn!==null&&pc(tn)&&(tn=null),bo.forEach(Ix),vo.forEach(Ix)}function gc(a,r){a.blockedOn===r&&(a.blockedOn=null,Th||(Th=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wN)))}var xc=null;function Gx(a){xc!==a&&(xc=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){xc===a&&(xc=null);for(var r=0;r<a.length;r+=3){var o=a[r],d=a[r+1],m=a[r+2];if(typeof d!="function"){if(Sh(d||o)===null)continue;break}var x=nr(o);x!==null&&(a.splice(r,3),r-=3,Su(x,{pending:!0,data:m,method:o.method,action:d},d,m))}}))}function wo(a){function r(q){return gc(q,a)}Ja!==null&&gc(Ja,a),en!==null&&gc(en,a),tn!==null&&gc(tn,a),bo.forEach(r),vo.forEach(r);for(var o=0;o<sn.length;o++){var d=sn[o];d.blockedOn===a&&(d.blockedOn=null)}for(;0<sn.length&&(o=sn[0],o.blockedOn===null);)Hx(o),o.blockedOn===null&&sn.shift();if(o=(a.ownerDocument||a).$$reactFormReplay,o!=null)for(d=0;d<o.length;d+=3){var m=o[d],x=o[d+1],C=m[ss]||null;if(typeof x=="function")C||Gx(o);else if(C){var D=null;if(x&&x.hasAttribute("formAction")){if(m=x,C=x[ss]||null)D=C.formAction;else if(Sh(m)!==null)continue}else D=C.action;typeof D=="function"?o[d+1]=D:(o.splice(d,3),d-=3),Gx(o)}}}function Ch(a){this._internalRoot=a}yc.prototype.render=Ch.prototype.render=function(a){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,d=xs();$x(o,d,a,r,null,null)},yc.prototype.unmount=Ch.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var r=a.containerInfo;$x(a.current,2,null,a,null,null),Jl(),r[sr]=null}};function yc(a){this._internalRoot=a}yc.prototype.unstable_scheduleHydration=function(a){if(a){var r=c0();a={blockedOn:null,target:a,priority:r};for(var o=0;o<sn.length&&r!==0&&r<sn[o].priority;o++);sn.splice(o,0,a),o===0&&Hx(a)}};var Yx=t.version;if(Yx!=="19.1.0")throw Error(i(527,Yx,"19.1.0"));P.findDOMNode=function(a){var r=a._reactInternals;if(r===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=f(r),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var _N={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{xe=bc.inject(_N),Ee=bc}catch{}}return No.createRoot=function(a,r){if(!l(a))throw Error(i(299));var o=!1,d="",m=cg,x=dg,C=ug,D=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(D=r.unstable_transitionCallbacks)),r=Lx(a,1,!1,null,null,o,d,m,x,C,D,null),a[sr]=r.current,ch(a),new Ch(r)},No.hydrateRoot=function(a,r,o){if(!l(a))throw Error(i(299));var d=!1,m="",x=cg,C=dg,D=ug,q=null,te=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(q=o.unstable_transitionCallbacks),o.formState!==void 0&&(te=o.formState)),r=Lx(a,1,!0,r,o??null,d,m,x,C,D,q,te),r.context=Bx(null),o=r.current,d=xs(),d=yd(d),m=$a(d),m.callback=null,Va(o,m,d),o=d,r.current.lanes=o,tr(r,o),Zs(r),a[sr]=r.current,ch(a),new yc(r)},No.version="19.1.0",No}var ay;function RN(){if(ay)return kh.exports;ay=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kh.exports=DN(),kh.exports}var PN=RN();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ny="popstate";function zN(e={}){function t(i,l){let{pathname:c,search:u,hash:h}=i.location;return hm("",{pathname:c,search:u,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:qo(l)}return BN(t,n,null,e)}function lt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function LN(){return Math.random().toString(36).substring(2,10)}function ry(e,t){return{usr:e.state,key:e.key,idx:t}}function hm(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?pi(t):t,state:n,key:t&&t.key||i||LN()}}function qo({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function pi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function BN(e,t,n,i={}){let{window:l=document.defaultView,v5Compat:c=!1}=i,u=l.history,h="POP",f=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function y(){h="POP";let T=g(),R=T==null?null:T-p;p=T,f&&f({action:h,location:N.location,delta:R})}function b(T,R){h="PUSH";let S=hm(N.location,T,R);p=g()+1;let k=ry(S,p),E=N.createHref(S);try{u.pushState(k,"",E)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;l.location.assign(E)}c&&f&&f({action:h,location:N.location,delta:1})}function w(T,R){h="REPLACE";let S=hm(N.location,T,R);p=g();let k=ry(S,p),E=N.createHref(S);u.replaceState(k,"",E),c&&f&&f({action:h,location:N.location,delta:0})}function _(T){return $N(T)}let N={get action(){return h},get location(){return e(l,u)},listen(T){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(ny,y),f=T,()=>{l.removeEventListener(ny,y),f=null}},createHref(T){return t(l,T)},createURL:_,encodeLocation(T){let R=_(T);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:b,replace:w,go(T){return u.go(T)}};return N}function $N(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),lt(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:qo(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function bv(e,t,n="/"){return VN(e,t,n,!1)}function VN(e,t,n,i){let l=typeof t=="string"?pi(t):t,c=ka(l.pathname||"/",n);if(c==null)return null;let u=vv(e);UN(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=ZN(c);h=WN(u[f],p,i)}return h}function vv(e,t=[],n=[],i="",l=!1){let c=(u,h,f=l,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&f)return;lt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let y=Aa([i,g.relativePath]),b=n.concat(g);u.children&&u.children.length>0&&(lt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),vv(u.children,t,b,y,f)),!(u.path==null&&!u.index)&&t.push({path:y,score:XN(y,u.index),routesMeta:b})};return e.forEach((u,h)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))c(u,h);else for(let p of jv(u.path))c(u,h,!0,p)}),t}function jv(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let u=jv(i.join("/")),h=[];return h.push(...u.map(f=>f===""?c:[c,f].join("/"))),l&&h.push(...u),h.map(f=>e.startsWith("/")&&f===""?"/":f)}function UN(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:KN(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var qN=/^:[\w-]+$/,FN=3,HN=2,IN=1,GN=10,YN=-2,iy=e=>e==="*";function XN(e,t){let n=e.split("/"),i=n.length;return n.some(iy)&&(i+=YN),t&&(i+=HN),n.filter(l=>!iy(l)).reduce((l,c)=>l+(qN.test(c)?FN:c===""?IN:GN),i)}function KN(e,t){return e.length===t.length&&e.slice(0,-1).every((i,l)=>i===t[l])?e[e.length-1]-t[t.length-1]:0}function WN(e,t,n=!1){let{routesMeta:i}=e,l={},c="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],p=h===i.length-1,g=c==="/"?t:t.slice(c.length)||"/",y=Bc({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),b=f.route;if(!y&&p&&n&&!i[i.length-1].route.index&&(y=Bc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!y)return null;Object.assign(l,y.params),u.push({params:l,pathname:Aa([c,y.pathname]),pathnameBase:s2(Aa([c,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(c=Aa([c,y.pathnameBase]))}return u}function Bc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=QN(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:y},b)=>{if(g==="*"){let _=h[b]||"";u=c.slice(0,c.length-_.length).replace(/(.)\/+$/,"$1")}const w=h[b];return y&&!w?p[g]=void 0:p[g]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:u,pattern:e}}function QN(e,t=!1,n=!0){qs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),i]}function ZN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ka(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function JN(e,t="/"){let{pathname:n,search:i="",hash:l=""}=typeof e=="string"?pi(e):e;return{pathname:n?n.startsWith("/")?n:e2(n,t):t,search:a2(i),hash:n2(l)}}function e2(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Rh(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function t2(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ef(e){let t=t2(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function tf(e,t,n,i=!1){let l;typeof e=="string"?l=pi(e):(l={...e},lt(!l.pathname||!l.pathname.includes("?"),Rh("?","pathname","search",l)),lt(!l.pathname||!l.pathname.includes("#"),Rh("#","pathname","hash",l)),lt(!l.search||!l.search.includes("#"),Rh("#","search","hash",l)));let c=e===""||l.pathname==="",u=c?"/":l.pathname,h;if(u==null)h=n;else{let y=t.length-1;if(!i&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),y-=1;l.pathname=b.join("/")}h=y>=0?t[y]:"/"}let f=JN(l,h),p=u&&u!=="/"&&u.endsWith("/"),g=(c||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}var Aa=e=>e.join("/").replace(/\/\/+/g,"/"),s2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),a2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,n2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function r2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var wv=["POST","PUT","PATCH","DELETE"];new Set(wv);var i2=["GET",...wv];new Set(i2);var gi=v.createContext(null);gi.displayName="DataRouter";var rd=v.createContext(null);rd.displayName="DataRouterState";v.createContext(!1);var _v=v.createContext({isTransitioning:!1});_v.displayName="ViewTransition";var o2=v.createContext(new Map);o2.displayName="Fetchers";var l2=v.createContext(null);l2.displayName="Await";var Hs=v.createContext(null);Hs.displayName="Navigation";var Zo=v.createContext(null);Zo.displayName="Location";var Is=v.createContext({outlet:null,matches:[],isDataRoute:!1});Is.displayName="Route";var sf=v.createContext(null);sf.displayName="RouteError";function c2(e,{relative:t}={}){lt(xi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=v.useContext(Hs),{hash:l,pathname:c,search:u}=Jo(e,{relative:t}),h=c;return n!=="/"&&(h=c==="/"?n:Aa([n,c])),i.createHref({pathname:h,search:u,hash:l})}function xi(){return v.useContext(Zo)!=null}function fn(){return lt(xi(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Zo).location}var Nv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sv(e){v.useContext(Hs).static||v.useLayoutEffect(e)}function Wn(){let{isDataRoute:e}=v.useContext(Is);return e?N2():d2()}function d2(){lt(xi(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(gi),{basename:t,navigator:n}=v.useContext(Hs),{matches:i}=v.useContext(Is),{pathname:l}=fn(),c=JSON.stringify(ef(i)),u=v.useRef(!1);return Sv(()=>{u.current=!0}),v.useCallback((f,p={})=>{if(qs(u.current,Nv),!u.current)return;if(typeof f=="number"){n.go(f);return}let g=tf(f,JSON.parse(c),l,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Aa([t,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[t,n,c,l,e])}var u2=v.createContext(null);function h2(e){let t=v.useContext(Is).outlet;return t&&v.createElement(u2.Provider,{value:e},t)}function Jo(e,{relative:t}={}){let{matches:n}=v.useContext(Is),{pathname:i}=fn(),l=JSON.stringify(ef(n));return v.useMemo(()=>tf(e,JSON.parse(l),i,t==="path"),[e,l,i,t])}function m2(e,t){return Tv(e,t)}function Tv(e,t,n,i,l){var S;lt(xi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=v.useContext(Hs),{matches:u}=v.useContext(Is),h=u[u.length-1],f=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let k=y&&y.path||"";Cv(p,!y||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let b=fn(),w;if(t){let k=typeof t=="string"?pi(t):t;lt(g==="/"||((S=k.pathname)==null?void 0:S.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${k.pathname}" was given in the \`location\` prop.`),w=k}else w=b;let _=w.pathname||"/",N=_;if(g!=="/"){let k=g.replace(/^\//,"").split("/");N="/"+_.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=bv(e,{pathname:N});qs(y||T!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),qs(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=y2(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},f,k.params),pathname:Aa([g,c.encodeLocation?c.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?g:Aa([g,c.encodeLocation?c.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),u,n,i,l);return t&&R?v.createElement(Zo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},R):R}function f2(){let e=_2(),t=r2(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:c},"ErrorBoundary")," or"," ",v.createElement("code",{style:c},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),n?v.createElement("pre",{style:l},n):null,u)}var p2=v.createElement(f2,null),g2=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(Is.Provider,{value:this.props.routeContext},v.createElement(sf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function x2({routeContext:e,match:t,children:n}){let i=v.useContext(gi);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(Is.Provider,{value:e},n)}function y2(e,t=[],n=null,i=null,l=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let c=e,u=n==null?void 0:n.errors;if(u!=null){let p=c.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);lt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,f=-1;if(n)for(let p=0;p<c.length;p++){let g=c[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:y,errors:b}=n,w=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||w){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((p,g,y)=>{let b,w=!1,_=null,N=null;n&&(b=u&&g.route.id?u[g.route.id]:void 0,_=g.route.errorElement||p2,h&&(f<0&&y===0?(Cv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):f===y&&(w=!0,N=g.route.hydrateFallbackElement||null)));let T=t.concat(c.slice(0,y+1)),R=()=>{let S;return b?S=_:w?S=N:g.route.Component?S=v.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=p,v.createElement(x2,{match:g,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:S})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?v.createElement(g2,{location:n.location,revalidation:n.revalidation,component:_,error:b,children:R(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:i}):R()},null)}function af(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b2(e){let t=v.useContext(gi);return lt(t,af(e)),t}function v2(e){let t=v.useContext(rd);return lt(t,af(e)),t}function j2(e){let t=v.useContext(Is);return lt(t,af(e)),t}function nf(e){let t=j2(e),n=t.matches[t.matches.length-1];return lt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function w2(){return nf("useRouteId")}function _2(){var i;let e=v.useContext(sf),t=v2("useRouteError"),n=nf("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function N2(){let{router:e}=b2("useNavigate"),t=nf("useNavigate"),n=v.useRef(!1);return Sv(()=>{n.current=!0}),v.useCallback(async(l,c={})=>{qs(n.current,Nv),n.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...c}))},[e,t])}var oy={};function Cv(e,t,n){!t&&!oy[e]&&(oy[e]=!0,qs(!1,n))}v.memo(S2);function S2({routes:e,future:t,state:n,unstable_onError:i}){return Tv(e,void 0,n,i,t)}function rf({to:e,replace:t,state:n,relative:i}){lt(xi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=v.useContext(Hs);qs(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=v.useContext(Is),{pathname:u}=fn(),h=Wn(),f=tf(e,ef(c),u,i==="path"),p=JSON.stringify(f);return v.useEffect(()=>{h(JSON.parse(p),{replace:t,state:n,relative:i})},[h,p,i,t,n]),null}function T2(e){return h2(e.context)}function yt(e){lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function C2({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:l,static:c=!1}){lt(!xi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),h=v.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);typeof n=="string"&&(n=pi(n));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:b="default"}=n,w=v.useMemo(()=>{let _=ka(f,u);return _==null?null:{location:{pathname:_,search:p,hash:g,state:y,key:b},navigationType:i}},[u,f,p,g,y,b,i]);return qs(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:v.createElement(Hs.Provider,{value:h},v.createElement(Zo.Provider,{children:t,value:w}))}function Ev({children:e,location:t}){return m2(mm(e),t)}function mm(e,t=[]){let n=[];return v.Children.forEach(e,(i,l)=>{if(!v.isValidElement(i))return;let c=[...t,l];if(i.type===v.Fragment){n.push.apply(n,mm(i.props.children,c));return}lt(i.type===yt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=mm(i.props.children,c)),n.push(u)}),n}var kc="get",Mc="application/x-www-form-urlencoded";function id(e){return e!=null&&typeof e.tagName=="string"}function E2(e){return id(e)&&e.tagName.toLowerCase()==="button"}function A2(e){return id(e)&&e.tagName.toLowerCase()==="form"}function k2(e){return id(e)&&e.tagName.toLowerCase()==="input"}function M2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function O2(e,t){return e.button===0&&(!t||t==="_self")&&!M2(e)}var vc=null;function D2(){if(vc===null)try{new FormData(document.createElement("form"),0),vc=!1}catch{vc=!0}return vc}var R2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ph(e){return e!=null&&!R2.has(e)?(qs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mc}"`),null):e}function P2(e,t){let n,i,l,c,u;if(A2(e)){let h=e.getAttribute("action");i=h?ka(h,t):null,n=e.getAttribute("method")||kc,l=Ph(e.getAttribute("enctype"))||Mc,c=new FormData(e)}else if(E2(e)||k2(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||h.getAttribute("action");if(i=f?ka(f,t):null,n=e.getAttribute("formmethod")||h.getAttribute("method")||kc,l=Ph(e.getAttribute("formenctype"))||Ph(h.getAttribute("enctype"))||Mc,c=new FormData(h,e),!D2()){let{name:p,type:g,value:y}=e;if(g==="image"){let b=p?`${p}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else p&&c.append(p,y)}}else{if(id(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=kc,i=null,l=Mc,u=e}return c&&l==="text/plain"&&(u=c,c=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function of(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function z2(e,t,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${n}`:t&&ka(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function L2(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function B2(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function $2(e,t,n){let i=await Promise.all(e.map(async l=>{let c=t.routes[l.route.id];if(c){let u=await L2(c,n);return u.links?u.links():[]}return[]}));return F2(i.flat(1).filter(B2).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function ly(e,t,n,i,l,c){let u=(f,p)=>n[p]?f.route.id!==n[p].route.id:!0,h=(f,p)=>{var g;return n[p].pathname!==f.pathname||((g=n[p].route.path)==null?void 0:g.endsWith("*"))&&n[p].params["*"]!==f.params["*"]};return c==="assets"?t.filter((f,p)=>u(f,p)||h(f,p)):c==="data"?t.filter((f,p)=>{var y;let g=i.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(u(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function V2(e,t,{includeHydrateFallback:n}={}){return U2(e.map(i=>{let l=t.routes[i.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function U2(e){return[...new Set(e)]}function q2(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function F2(e,t){let n=new Set;return new Set(t),e.reduce((i,l)=>{let c=JSON.stringify(q2(l));return n.has(c)||(n.add(c),i.push({key:c,link:l})),i},[])}function Av(){let e=v.useContext(gi);return of(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function H2(){let e=v.useContext(rd);return of(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var lf=v.createContext(void 0);lf.displayName="FrameworkContext";function kv(){let e=v.useContext(lf);return of(e,"You must render this element inside a <HydratedRouter> element"),e}function I2(e,t){let n=v.useContext(lf),[i,l]=v.useState(!1),[c,u]=v.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=t,b=v.useRef(null);v.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let N=R=>{R.forEach(S=>{u(S.isIntersecting)})},T=new IntersectionObserver(N,{threshold:.5});return b.current&&T.observe(b.current),()=>{T.disconnect()}}},[e]),v.useEffect(()=>{if(i){let N=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(N)}}},[i]);let w=()=>{l(!0)},_=()=>{l(!1),u(!1)};return n?e!=="intent"?[c,b,{}]:[c,b,{onFocus:So(h,w),onBlur:So(f,_),onMouseEnter:So(p,w),onMouseLeave:So(g,_),onTouchStart:So(y,w)}]:[!1,b,{}]}function So(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function G2({page:e,...t}){let{router:n}=Av(),i=v.useMemo(()=>bv(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?v.createElement(X2,{page:e,matches:i,...t}):null}function Y2(e){let{manifest:t,routeModules:n}=kv(),[i,l]=v.useState([]);return v.useEffect(()=>{let c=!1;return $2(e,t,n).then(u=>{c||l(u)}),()=>{c=!0}},[e,t,n]),i}function X2({page:e,matches:t,...n}){let i=fn(),{manifest:l,routeModules:c}=kv(),{basename:u}=Av(),{loaderData:h,matches:f}=H2(),p=v.useMemo(()=>ly(e,t,f,l,i,"data"),[e,t,f,l,i]),g=v.useMemo(()=>ly(e,t,f,l,i,"assets"),[e,t,f,l,i]),y=v.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let _=new Set,N=!1;if(t.forEach(R=>{var k;let S=l.routes[R.route.id];!S||!S.hasLoader||(!p.some(E=>E.route.id===R.route.id)&&R.route.id in h&&((k=c[R.route.id])!=null&&k.shouldRevalidate)||S.hasClientLoader?N=!0:_.add(R.route.id))}),_.size===0)return[];let T=z2(e,u,"data");return N&&_.size>0&&T.searchParams.set("_routes",t.filter(R=>_.has(R.route.id)).map(R=>R.route.id).join(",")),[T.pathname+T.search]},[u,h,i,l,p,t,e,c]),b=v.useMemo(()=>V2(g,l),[g,l]),w=Y2(g);return v.createElement(v.Fragment,null,y.map(_=>v.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),b.map(_=>v.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),w.map(({key:_,link:N})=>v.createElement("link",{key:_,nonce:n.nonce,...N})))}function K2(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Mv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Mv&&(window.__reactRouterVersion="7.8.2")}catch{}function W2({basename:e,children:t,window:n}){let i=v.useRef();i.current==null&&(i.current=zN({window:n,v5Compat:!0}));let l=i.current,[c,u]=v.useState({action:l.action,location:l.location}),h=v.useCallback(f=>{v.startTransition(()=>u(f))},[u]);return v.useLayoutEffect(()=>l.listen(h),[l,h]),v.createElement(C2,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l})}var Ov=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dn=v.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:l,reloadDocument:c,replace:u,state:h,target:f,to:p,preventScrollReset:g,viewTransition:y,...b},w){let{basename:_}=v.useContext(Hs),N=typeof p=="string"&&Ov.test(p),T,R=!1;if(typeof p=="string"&&N&&(T=p,Mv))try{let I=new URL(window.location.href),V=p.startsWith("//")?new URL(I.protocol+p):new URL(p),Q=ka(V.pathname,_);V.origin===I.origin&&Q!=null?p=Q+V.search+V.hash:R=!0}catch{qs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=c2(p,{relative:l}),[k,E,j]=I2(i,b),M=J2(p,{replace:u,state:h,target:f,preventScrollReset:g,relative:l,viewTransition:y});function z(I){t&&t(I),I.defaultPrevented||M(I)}let U=v.createElement("a",{...b,...j,href:T||S,onClick:R||c?t:z,ref:K2(w,E),target:f,"data-discover":!N&&n==="render"?"true":void 0});return k&&!N?v.createElement(v.Fragment,null,U,v.createElement(G2,{page:S})):U});dn.displayName="Link";var Dv=v.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:l=!1,style:c,to:u,viewTransition:h,children:f,...p},g){let y=Jo(u,{relative:p.relative}),b=fn(),w=v.useContext(rd),{navigator:_,basename:N}=v.useContext(Hs),T=w!=null&&nS(y)&&h===!0,R=_.encodeLocation?_.encodeLocation(y).pathname:y.pathname,S=b.pathname,k=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(S=S.toLowerCase(),k=k?k.toLowerCase():null,R=R.toLowerCase()),k&&N&&(k=ka(k,N)||k);const E=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let j=S===R||!l&&S.startsWith(R)&&S.charAt(E)==="/",M=k!=null&&(k===R||!l&&k.startsWith(R)&&k.charAt(R.length)==="/"),z={isActive:j,isPending:M,isTransitioning:T},U=j?t:void 0,I;typeof i=="function"?I=i(z):I=[i,j?"active":null,M?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let V=typeof c=="function"?c(z):c;return v.createElement(dn,{...p,"aria-current":U,className:I,ref:g,style:V,to:u,viewTransition:h},typeof f=="function"?f(z):f)});Dv.displayName="NavLink";var Q2=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:l,state:c,method:u=kc,action:h,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:y,...b},w)=>{let _=sS(),N=aS(h,{relative:p}),T=u.toLowerCase()==="get"?"get":"post",R=typeof h=="string"&&Ov.test(h),S=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let E=k.nativeEvent.submitter,j=(E==null?void 0:E.getAttribute("formmethod"))||u;_(E||k.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:l,state:c,relative:p,preventScrollReset:g,viewTransition:y})};return v.createElement("form",{ref:w,method:T,action:N,onSubmit:i?f:S,...b,"data-discover":!R&&e==="render"?"true":void 0})});Q2.displayName="Form";function Z2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rv(e){let t=v.useContext(gi);return lt(t,Z2(e)),t}function J2(e,{target:t,replace:n,state:i,preventScrollReset:l,relative:c,viewTransition:u}={}){let h=Wn(),f=fn(),p=Jo(e,{relative:c});return v.useCallback(g=>{if(O2(g,t)){g.preventDefault();let y=n!==void 0?n:qo(f)===qo(p);h(e,{replace:y,state:i,preventScrollReset:l,relative:c,viewTransition:u})}},[f,h,p,n,i,t,e,l,c,u])}var eS=0,tS=()=>`__${String(++eS)}__`;function sS(){let{router:e}=Rv("useSubmit"),{basename:t}=v.useContext(Hs),n=w2();return v.useCallback(async(i,l={})=>{let{action:c,method:u,encType:h,formData:f,body:p}=P2(i,t);if(l.navigate===!1){let g=l.fetcherKey||tS();await e.fetch(g,n,l.action||c,{preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||u,formEncType:l.encType||h,flushSync:l.flushSync})}else await e.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||u,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,n])}function aS(e,{relative:t}={}){let{basename:n}=v.useContext(Hs),i=v.useContext(Is);lt(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),c={...Jo(e||".",{relative:t})},u=fn();if(e==null){c.search=u.search;let h=new URLSearchParams(c.search),f=h.getAll("index");if(f.some(g=>g==="")){h.delete("index"),f.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();c.search=g?`?${g}`:""}}return(!e||e===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Aa([n,c.pathname])),qo(c)}function nS(e,{relative:t}={}){let n=v.useContext(_v);lt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Rv("useViewTransitionState"),l=Jo(e,{relative:t});if(!n.isTransitioning)return!1;let c=ka(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=ka(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Bc(l.pathname,u)!=null||Bc(l.pathname,c)!=null}const rS="modulepreload",iS=function(e){return"/"+e},cy={},el=function(t,n,i){let l=Promise.resolve();if(n&&n.length>0){let u=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));l=u(n.map(p=>{if(p=iS(p),p in cy)return;cy[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":rS,g||(b.as="script"),b.crossOrigin="",b.href=p,f&&b.setAttribute("nonce",f),document.head.appendChild(b),g)return new Promise((w,_)=>{b.addEventListener("load",w),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return l.then(u=>{for(const h of u||[])h.status==="rejected"&&c(h.reason);return t().catch(c)})},oS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>el(async()=>{const{default:i}=await Promise.resolve().then(()=>yi);return{default:i}},[]).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class cf extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class lS extends cf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class dy extends cf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class uy extends cf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var fm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(fm||(fm={}));var cS=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(e,t||[])).next())})};class dS{constructor(t,{headers:n={},customFetch:i,region:l=fm.Any}={}){this.url=t,this.headers=n,this.region=l,this.fetch=oS(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var i;return cS(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:u}=n;let h={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${t}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)));const y=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:g}).catch(N=>{throw new lS(N)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new dy(y);if(!y.ok)throw new uy(y);let w=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield y.json():w==="application/octet-stream"?_=yield y.blob():w==="text/event-stream"?_=y:w==="multipart/form-data"?_=yield y.formData():_=yield y.text(),{data:_,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof uy||l instanceof dy?l.context:void 0}}})}}var zt={},Ur={},qr={},Fr={},Hr={},Ir={},uS=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},di=uS();const hS=di.fetch,Pv=di.fetch.bind(di),zv=di.Headers,mS=di.Request,fS=di.Response,yi=Object.freeze(Object.defineProperty({__proto__:null,Headers:zv,Request:mS,Response:fS,default:Pv,fetch:hS},Symbol.toStringTag,{value:"Module"})),pS=SN(yi);var jc={},hy;function Lv(){if(hy)return jc;hy=1,Object.defineProperty(jc,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return jc.default=e,jc}var my;function Bv(){if(my)return Ir;my=1;var e=Ir&&Ir.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ir,"__esModule",{value:!0});const t=e(pS),n=e(Lv());class i{constructor(c){var u,h;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(h=c.isMaybeSingle)!==null&&h!==void 0?h:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let f=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,y,b,w;let _=null,N=null,T=null,R=p.status,S=p.statusText;if(p.ok){if(this.method!=="HEAD"){const M=await p.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?N=M:N=JSON.parse(M))}const E=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),j=(b=p.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");E&&j&&j.length>1&&(T=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(_={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,T=null,R=406,S="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const E=await p.text();try{_=JSON.parse(E),Array.isArray(_)&&p.status===404&&(N=[],_=null,R=200,S="OK")}catch{p.status===404&&E===""?(R=204,S="No Content"):_={message:E}}if(_&&this.isMaybeSingle&&(!((w=_==null?void 0:_.details)===null||w===void 0)&&w.includes("0 rows"))&&(_=null,R=200,S="OK"),_&&this.shouldThrowOnError)throw new n.default(_)}return{error:_,data:N,count:T,status:R,statusText:S}});return this.shouldThrowOnError||(f=f.catch(p=>{var g,y,b;return{error:{message:`${(g=p==null?void 0:p.name)!==null&&g!==void 0?g:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(y=p==null?void 0:p.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(b=p==null?void 0:p.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),f.then(c,u)}returns(){return this}overrideTypes(){return this}}return Ir.default=i,Ir}var fy;function $v(){if(fy)return Hr;fy=1;var e=Hr&&Hr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Hr,"__esModule",{value:!0});const t=e(Bv());class n extends t.default{select(l){let c=!1;const u=(l??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:u,foreignTable:h,referencedTable:f=h}={}){const p=f?`${f}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${l}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:u=c}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${l}`),this}range(l,c,{foreignTable:u,referencedTable:h=u}={}){const f=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(f,`${l}`),this.url.searchParams.set(p,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:u=!1,buffers:h=!1,wal:f=!1,format:p="text"}={}){var g;const y=[l?"analyze":null,c?"verbose":null,u?"settings":null,h?"buffers":null,f?"wal":null].filter(Boolean).join("|"),b=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${b}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Hr.default=n,Hr}var py;function df(){if(py)return Fr;py=1;var e=Fr&&Fr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Fr,"__esModule",{value:!0});const t=e($v());class n extends t.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const u=Array.from(new Set(c)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${u})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:u,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(l,`${f}fts${p}.${c}`),this}match(l){return Object.entries(l).forEach(([c,u])=>{this.url.searchParams.append(c,`eq.${u}`)}),this}not(l,c,u){return this.url.searchParams.append(l,`not.${c}.${u}`),this}or(l,{foreignTable:c,referencedTable:u=c}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,c,u){return this.url.searchParams.append(l,`${c}.${u}`),this}}return Fr.default=n,Fr}var gy;function Vv(){if(gy)return qr;gy=1;var e=qr&&qr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qr,"__esModule",{value:!0});const t=e(df());class n{constructor(l,{headers:c={},schema:u,fetch:h}){this.url=l,this.headers=new Headers(c),this.schema=u,this.fetch=h}select(l,{head:c=!1,count:u}={}){const h=c?"HEAD":"GET";let f=!1;const p=(l??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",p),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:u=!0}={}){var h;const f="POST";if(c&&this.headers.append("Prefer",`count=${c}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const p=l.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:u=!1,count:h,defaultToNull:f=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),h&&this.headers.append("Prefer",`count=${h}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(y.length>0){const b=[...new Set(y)].map(w=>`"${w}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(l,{count:c}={}){var u;const h="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:l}={}){var c;const u="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return qr.default=n,qr}var xy;function gS(){if(xy)return Ur;xy=1;var e=Ur&&Ur.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ur,"__esModule",{value:!0});const t=e(Vv()),n=e(df());class i{constructor(c,{headers:u={},schema:h,fetch:f}={}){this.url=c,this.headers=new Headers(u),this.schemaName=h,this.fetch=f}from(c){const u=new URL(`${this.url}/${c}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new i(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:h=!1,get:f=!1,count:p}={}){var g;let y;const b=new URL(`${this.url}/rpc/${c}`);let w;h||f?(y=h?"HEAD":"GET",Object.entries(u).filter(([N,T])=>T!==void 0).map(([N,T])=>[N,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([N,T])=>{b.searchParams.append(N,T)})):(y="POST",w=u);const _=new Headers(this.headers);return p&&_.set("Prefer",`count=${p}`),new n.default({method:y,url:b,headers:_,schema:this.schemaName,body:w,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Ur.default=i,Ur}var yy;function xS(){if(yy)return zt;yy=1;var e=zt&&zt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(zt,"__esModule",{value:!0}),zt.PostgrestError=zt.PostgrestBuilder=zt.PostgrestTransformBuilder=zt.PostgrestFilterBuilder=zt.PostgrestQueryBuilder=zt.PostgrestClient=void 0;const t=e(gS());zt.PostgrestClient=t.default;const n=e(Vv());zt.PostgrestQueryBuilder=n.default;const i=e(df());zt.PostgrestFilterBuilder=i.default;const l=e($v());zt.PostgrestTransformBuilder=l.default;const c=e(Bv());zt.PostgrestBuilder=c.default;const u=e(Lv());return zt.PostgrestError=u.default,zt.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:u.default},zt}var yS=xS();const bS=yv(yS),{PostgrestClient:vS,PostgrestQueryBuilder:XO,PostgrestFilterBuilder:KO,PostgrestTransformBuilder:WO,PostgrestBuilder:QO,PostgrestError:ZO}=bS;class jS{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const wS="2.15.4",_S=`realtime-js/${wS}`,NS="1.0.0",pm=1e4,SS=1e3,TS=100;var Oo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Oo||(Oo={}));var At;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(At||(At={}));var $s;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($s||($s={}));var gm;(function(e){e.websocket="websocket"})(gm||(gm={}));var Un;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Un||(Un={}));class CS{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const l=n.getUint8(1),c=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=i.decode(t.slice(u,u+l));u=u+l;const f=i.decode(t.slice(u,u+c));u=u+c;const p=JSON.parse(i.decode(t.slice(u,t.byteLength)));return{ref:null,topic:h,event:f,payload:p}}}let Uv=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var at;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(at||(at={}));const by=(e,t,n={})=>{var i;const l=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((c,u)=>(c[u]=ES(u,e,t,l),c),{})},ES=(e,t,n,i)=>{const l=t.find(h=>h.name===e),c=l==null?void 0:l.type,u=n[e];return c&&!i.includes(c)?qv(c,u):xm(u)},qv=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return OS(t,n)}switch(e){case at.bool:return AS(t);case at.float4:case at.float8:case at.int2:case at.int4:case at.int8:case at.numeric:case at.oid:return kS(t);case at.json:case at.jsonb:return MS(t);case at.timestamp:return DS(t);case at.abstime:case at.date:case at.daterange:case at.int4range:case at.int8range:case at.money:case at.reltime:case at.text:case at.time:case at.timestamptz:case at.timetz:case at.tsrange:case at.tstzrange:return xm(t);default:return xm(t)}},xm=e=>e,AS=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},kS=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},MS=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},OS=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let c;const u=e.slice(1,n);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(h=>qv(t,h))}return e},DS=e=>typeof e=="string"?e.replace(" ","T"):e,Fv=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class zh{constructor(t,n,i={},l=pm){this.channel=t,this.event=n,this.payload=i,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var vy;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(vy||(vy={}));class Do{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},l=>{const{onJoin:c,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Do.syncState(this.state,l,c,u),this.pendingDiffs.forEach(f=>{this.state=Do.syncDiff(this.state,f,c,u)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},l=>{const{onJoin:c,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Do.syncDiff(this.state,l,c,u),h())}),this.onJoin((l,c,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:u})}),this.onLeave((l,c,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,l){const c=this.cloneDeep(t),u=this.transformState(n),h={},f={};return this.map(c,(p,g)=>{u[p]||(f[p]=g)}),this.map(u,(p,g)=>{const y=c[p];if(y){const b=g.map(T=>T.presence_ref),w=y.map(T=>T.presence_ref),_=g.filter(T=>w.indexOf(T.presence_ref)<0),N=y.filter(T=>b.indexOf(T.presence_ref)<0);_.length>0&&(h[p]=_),N.length>0&&(f[p]=N)}else h[p]=g}),this.syncDiff(c,{joins:h,leaves:f},i,l)}static syncDiff(t,n,i,l){const{joins:c,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),l||(l=()=>{}),this.map(c,(h,f)=>{var p;const g=(p=t[h])!==null&&p!==void 0?p:[];if(t[h]=this.cloneDeep(f),g.length>0){const y=t[h].map(w=>w.presence_ref),b=g.filter(w=>y.indexOf(w.presence_ref)<0);t[h].unshift(...b)}i(h,g,f)}),this.map(u,(h,f)=>{let p=t[h];if(!p)return;const g=f.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),t[h]=p,l(h,p,f),p.length===0&&delete t[h]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const l=t[i];return"metas"in l?n[i]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):n[i]=l,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jy;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(jy||(jy={}));var Ro;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ro||(Ro={}));var Ca;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ca||(Ca={}));class uf{constructor(t,n={config:{}},i){this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=At.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new zh(this,$s.join,this.params,this.timeout),this.rejoinTimer=new Uv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=At.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=At.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this._on($s.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Do(this),this.broadcastEndpointURL=Fv(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var i,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==At.closed){const{config:{broadcast:u,presence:h,private:f}}=this.params,p=(l=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(w=>w.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[Ro.PRESENCE]&&this.bindings[Ro.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,y={},b={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:g}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(w=>t==null?void 0:t(Ca.CHANNEL_ERROR,w)),this._onClose(()=>t==null?void 0:t(Ca.CLOSED)),this.updateJoinPayload(Object.assign({config:b},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var _;if(this.socket.setAuth(),w===void 0){t==null||t(Ca.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,T=(_=N==null?void 0:N.length)!==null&&_!==void 0?_:0,R=[];for(let S=0;S<T;S++){const k=N[S],{filter:{event:E,schema:j,table:M,filter:z}}=k,U=w&&w[S];if(U&&U.event===E&&U.schema===j&&U.table===M&&U.filter===z)R.push(Object.assign(Object.assign({},k),{id:U.id}));else{this.unsubscribe(),this.state=At.errored,t==null||t(Ca.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,t&&t(Ca.SUBSCRIBED);return}}).receive("error",w=>{this.state=At.errored,t==null||t(Ca.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ca.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===At.joined&&t===Ro.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async send(t,n={}){var i,l;if(!this._canPush()&&t.type==="broadcast"){const{event:c,payload:u}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((l=p.body)===null||l===void 0?void 0:l.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,h,f;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=At.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($s.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(l=>{i=new zh(this,$s.leave,{},t),i.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=At.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const l=new AbortController,c=setTimeout(()=>l.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(c),u}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new zh(this,t,n,i);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>TS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var l,c;const u=t.toLocaleLowerCase(),{close:h,error:f,leave:p,join:g}=$s;if(i&&[h,f,p,g].indexOf(u)>=0&&i!==this._joinRef())return;let b=this._onMessage(u,n,i);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var _,N,T;return((_=w.filter)===null||_===void 0?void 0:_.event)==="*"||((T=(N=w.filter)===null||N===void 0?void 0:N.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===u}).map(w=>w.callback(b,i)):(c=this.bindings[u])===null||c===void 0||c.filter(w=>{var _,N,T,R,S,k;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const E=w.id,j=(_=w.filter)===null||_===void 0?void 0:_.event;return E&&((N=n.ids)===null||N===void 0?void 0:N.includes(E))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((T=n.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const E=(S=(R=w==null?void 0:w.filter)===null||R===void 0?void 0:R.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return E==="*"||E===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof b=="object"&&"ids"in b){const _=b.data,{schema:N,table:T,commit_timestamp:R,type:S,errors:k}=_;b=Object.assign(Object.assign({},{schema:N,table:T,commit_timestamp:R,eventType:S,new:{},old:{},errors:k}),this._getPayloadRecords(_))}w.callback(b,i)})}_isClosed(){return this.state===At.closed}_isJoined(){return this.state===At.joined}_isJoining(){return this.state===At.joining}_isLeaving(){return this.state===At.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const l=t.toLocaleLowerCase(),c={type:l,filter:n,callback:i};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&uf.isEqual(l.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($s.close,{},t)}_onError(t){this._on($s.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=At.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=by(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=by(t.columns,t.old_record)),n}}const Lh=()=>{},wc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RS=[1e3,2e3,5e3,1e4],PS=1e4,zS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LS{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pm,this.transport=null,this.heartbeatIntervalMs=wc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lh,this.ref=0,this.reconnectTimer=null,this.logger=Lh,this.conn=null,this.sendBuffer=[],this.serializer=new CS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...u)=>el(async()=>{const{default:h}=await Promise.resolve().then(()=>yi);return{default:h}},void 0).then(({default:h})=>h(...u)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...u)=>c(...u)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${gm.websocket}`,this.httpEndpoint=Fv(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jS.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:NS}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Oo.connecting:return Un.Connecting;case Oo.open:return Un.Open;case Oo.closing:return Un.Closing;default:return Un.Closed}}isConnected(){return this.connectionState()===Un.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,l=this.getChannels().find(c=>c.topic===i);if(l)return l;{const c=new uf(`realtime:${t}`,n,this);return this.channels.push(c),c}}push(t){const{topic:n,event:i,payload:l,ref:c}=t,u=()=>{this.encode(t,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${n} ${i} (${c})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(SS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},wc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:l,payload:c,ref:u}=n,h=u?`(${u})`:"",f=c.status||"";this.log("receive",`${f} ${i} ${l} ${h}`.trim(),c),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(l,c,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger($s.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${t}${i}${l}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([zS],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const l={access_token:n,version:_S};n&&i.updateJoinPayload(l),i.joinedOnce&&i._isJoined()&&i._push($s.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Uv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,l,c,u,h,f,p,g;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:pm,this.heartbeatIntervalMs=(l=t==null?void 0:t.heartbeatIntervalMs)!==null&&l!==void 0?l:wc.HEARTBEAT_INTERVAL,this.worker=(c=t==null?void 0:t.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=t==null?void 0:t.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=t==null?void 0:t.heartbeatCallback)!==null&&h!==void 0?h:Lh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:y=>RS[y-1]||PS,this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(y,b)=>b(JSON.stringify(y)),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class hf extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Mt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class BS extends hf{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ym extends hf{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var $S=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(e,t||[])).next())})};const Hv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>el(async()=>{const{default:i}=await Promise.resolve().then(()=>yi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},VS=()=>$S(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield el(()=>Promise.resolve().then(()=>yi),void 0)).Response:Response}),bm=e=>{if(Array.isArray(e))return e.map(n=>bm(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const l=n.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));t[l]=bm(i)}),t},US=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Qn=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(e,t||[])).next())})};const Bh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),qS=(e,t,n)=>Qn(void 0,void 0,void 0,function*(){const i=yield VS();e instanceof i&&!(n!=null&&n.noResolveJson)?e.json().then(l=>{const c=e.status||500,u=(l==null?void 0:l.statusCode)||c+"";t(new BS(Bh(l),c,u))}).catch(l=>{t(new ym(Bh(l),l))}):t(new ym(Bh(e),e))}),FS=(e,t,n,i)=>{const l={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!i?l:(US(i)?(l.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(i)):l.body=i,t!=null&&t.duplex&&(l.duplex=t.duplex),Object.assign(Object.assign({},l),n))};function tl(e,t,n,i,l,c){return Qn(this,void 0,void 0,function*(){return new Promise((u,h)=>{e(n,FS(t,i,l,c)).then(f=>{if(!f.ok)throw f;return i!=null&&i.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>qS(f,h,i))})})}function $c(e,t,n,i){return Qn(this,void 0,void 0,function*(){return tl(e,"GET",t,n,i)})}function Js(e,t,n,i,l){return Qn(this,void 0,void 0,function*(){return tl(e,"POST",t,i,l,n)})}function vm(e,t,n,i,l){return Qn(this,void 0,void 0,function*(){return tl(e,"PUT",t,i,l,n)})}function HS(e,t,n,i){return Qn(this,void 0,void 0,function*(){return tl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Iv(e,t,n,i,l){return Qn(this,void 0,void 0,function*(){return tl(e,"DELETE",t,i,l,n)})}var Zt=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(e,t||[])).next())})};const IS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class GS{constructor(t,n={},i,l){this.url=t,this.headers=n,this.bucketId=i,this.fetch=Hv(l)}uploadOrUpdate(t,n,i,l){return Zt(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},wy),l);let h=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),f&&c.append("metadata",this.encodeMetadata(f)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",u.cacheControl),f&&c.append("metadata",this.encodeMetadata(f))):(c=i,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),l!=null&&l.headers&&(h=Object.assign(Object.assign({},h),l.headers));const p=this._removeEmptyFolders(n),g=this._getFinalPath(p),y=yield(t=="PUT"?vm:Js)(this.fetch,`${this.url}/object/${g}`,c,Object.assign({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(c){if(Mt(c))return{data:null,error:c};throw c}})}upload(t,n,i){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,l){return Zt(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let f;const p=Object.assign({upsert:wy.upsert},l),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",p.cacheControl)):(f=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const y=yield vm(this.fetch,h.toString(),f,{headers:g});return{data:{path:c,fullPath:y.Key},error:null}}catch(f){if(Mt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,n){return Zt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const l=Object.assign({},this.headers);n!=null&&n.upsert&&(l["x-upsert"]="true");const c=yield Js(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:l}),u=new URL(this.url+c.url),h=u.searchParams.get("token");if(!h)throw new hf("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:h},error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}update(t,n,i){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return Zt(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(Mt(l))return{data:null,error:l};throw l}})}copy(t,n,i){return Zt(this,void 0,void 0,function*(){try{return{data:{path:(yield Js(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(Mt(l))return{data:null,error:l};throw l}})}createSignedUrl(t,n,i){return Zt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(t),c=yield Js(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(l){if(Mt(l))return{data:null,error:l};throw l}})}createSignedUrls(t,n,i){return Zt(this,void 0,void 0,function*(){try{const l=yield Js(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:l.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(l){if(Mt(l))return{data:null,error:l};throw l}})}download(t,n){return Zt(this,void 0,void 0,function*(){const l=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=c?`?${c}`:"";try{const h=this._getFinalPath(t);return{data:yield(yield $c(this.fetch,`${this.url}/${l}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Mt(h))return{data:null,error:h};throw h}})}info(t){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield $c(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:bm(i),error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}exists(t){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield HS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Mt(i)&&i instanceof ym){const l=i.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),l=[],c=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";c!==""&&l.push(c);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&l.push(f);let p=l.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${p}`)}}}remove(t){return Zt(this,void 0,void 0,function*(){try{return{data:yield Iv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}list(t,n,i){return Zt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},IS),n),{prefix:t||""});return{data:yield Js(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},i),error:null}}catch(l){if(Mt(l))return{data:null,error:l};throw l}})}listV2(t,n){return Zt(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield Js(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const YS="2.11.0",XS={"X-Client-Info":`storage-js/${YS}`};var Gr=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(e,t||[])).next())})};class KS{constructor(t,n={},i,l){const c=new URL(t);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},XS),n),this.fetch=Hv(i)}listBuckets(){return Gr(this,void 0,void 0,function*(){try{return{data:yield $c(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Mt(t))return{data:null,error:t};throw t}})}getBucket(t){return Gr(this,void 0,void 0,function*(){try{return{data:yield $c(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Gr(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Gr(this,void 0,void 0,function*(){try{return{data:yield vm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Gr(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Gr(this,void 0,void 0,function*(){try{return{data:yield Iv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}}class WS extends KS{constructor(t,n={},i,l){super(t,n,i,l)}from(t){return new GS(this.url,this.headers,t,this.fetch)}}const QS="2.56.1";let ko="";typeof Deno<"u"?ko="deno":typeof document<"u"?ko="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ko="react-native":ko="node";const ZS={"X-Client-Info":`supabase-js-${ko}/${QS}`},JS={headers:ZS},eT={schema:"public"},tT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sT={};var aT=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(e,t||[])).next())})};const nT=e=>{let t;return e?t=e:typeof fetch>"u"?t=Pv:t=fetch,(...n)=>t(...n)},rT=()=>typeof Headers>"u"?zv:Headers,iT=(e,t,n)=>{const i=nT(n),l=rT();return(c,u)=>aT(void 0,void 0,void 0,function*(){var h;const f=(h=yield t())!==null&&h!==void 0?h:e;let p=new l(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),i(c,Object.assign(Object.assign({},u),{headers:p}))})};var oT=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(e,t||[])).next())})};function lT(e){return e.endsWith("/")?e:e+"/"}function cT(e,t){var n,i;const{db:l,auth:c,realtime:u,global:h}=e,{db:f,auth:p,realtime:g,global:y}=t,b={db:Object.assign(Object.assign({},f),l),auth:Object.assign(Object.assign({},p),c),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},y),h),{headers:Object.assign(Object.assign({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(i=h==null?void 0:h.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>oT(this,void 0,void 0,function*(){return""})};return e.accessToken?b.accessToken=e.accessToken:delete b.accessToken,b}const Gv="2.71.1",ti=30*1e3,jm=3,$h=jm*ti,dT="http://localhost:9999",uT="supabase.auth.token",hT={"X-Client-Info":`gotrue-js/${Gv}`},wm="X-Supabase-Api-Version",Yv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fT=10*60*1e3;class mf extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Pe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class pT extends mf{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function gT(e){return Pe(e)&&e.name==="AuthApiError"}class Xv extends mf{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class pn extends mf{constructor(t,n,i,l){super(t,i,l),this.name=n,this.status=i}}class ln extends pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xT(e){return Pe(e)&&e.name==="AuthSessionMissingError"}class _c extends pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nc extends pn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Sc extends pn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yT(e){return Pe(e)&&e.name==="AuthImplicitGrantRedirectError"}class _y extends pn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _m extends pn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Vh(e){return Pe(e)&&e.name==="AuthRetryableFetchError"}class Ny extends pn{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Nm extends pn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sy=` 	
\r=`.split(""),bT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Sy.length;t+=1)e[Sy[t].charCodeAt(0)]=-2;for(let t=0;t<Vc.length;t+=1)e[Vc[t].charCodeAt(0)]=t;return e})();function Ty(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Vc[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Vc[i]),t.queuedBits-=6}}function Kv(e,t,n){const i=bT[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Cy(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=u=>{wT(u,i,n)};for(let u=0;u<e.length;u+=1)Kv(e.charCodeAt(u),l,c);return t.join("")}function vT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function jT(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const l=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}vT(i,t)}}function wT(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function _T(e){const t=[],n={queue:0,queuedBits:0},i=l=>{t.push(l)};for(let l=0;l<e.length;l+=1)Kv(e.charCodeAt(l),n,i);return new Uint8Array(t)}function NT(e){const t=[];return jT(e,n=>t.push(n)),new Uint8Array(t)}function ST(e){const t=[],n={queue:0,queuedBits:0},i=l=>{t.push(l)};return e.forEach(l=>Ty(l,n,i)),Ty(null,n,i),t.join("")}function TT(e){return Math.round(Date.now()/1e3)+e}function CT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ls=()=>typeof window<"u"&&typeof document<"u",Pn={tested:!1,writable:!1},Wv=()=>{if(!Ls())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pn.tested)return Pn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Pn.tested=!0,Pn.writable=!0}catch{Pn.tested=!0,Pn.writable=!1}return Pn.writable};function ET(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,c)=>{t[c]=l})}catch{}return n.searchParams.forEach((i,l)=>{t[l]=i}),t}const Qv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>el(async()=>{const{default:i}=await Promise.resolve().then(()=>yi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},AT=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",si=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},zn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},nn=async(e,t)=>{await e.removeItem(t)};class od{constructor(){this.promise=new od.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}od.promiseConstructor=Promise;function Uh(e){const t=e.split(".");if(t.length!==3)throw new Nm("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!mT.test(t[i]))throw new Nm("JWT not in base64url format");return{header:JSON.parse(Cy(t[0])),payload:JSON.parse(Cy(t[1])),signature:_T(t[2]),raw:{header:t[0],payload:t[1]}}}async function kT(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function MT(e,t){return new Promise((i,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await e(c);if(!t(c,null,u)){i(u);return}}catch(u){if(!t(c,u)){l(u);return}}})()})}function OT(e){return("0"+e.toString(16)).substr(-2)}function DT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let l="";for(let c=0;c<56;c++)l+=n.charAt(Math.floor(Math.random()*i));return l}return crypto.getRandomValues(t),Array.from(t,OT).join("")}async function RT(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(i);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function PT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await RT(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yr(e,t,n=!1){const i=DT();let l=i;n&&(l+="/PASSWORD_RECOVERY"),await si(e,`${t}-code-verifier`,l);const c=await PT(i);return[c,i===c?"plain":"s256"]}const zT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function LT(e){const t=e.headers.get(wm);if(!t||!t.match(zT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function BT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function $T(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const VT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xr(e){if(!VT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qh(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ey(e){return JSON.parse(JSON.stringify(e))}var UT=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(n[i[l]]=e[i[l]]);return n};const Bn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),qT=[502,503,504];async function Ay(e){var t;if(!AT(e))throw new _m(Bn(e),0);if(qT.includes(e.status))throw new _m(Bn(e),e.status);let n;try{n=await e.json()}catch(c){throw new Xv(Bn(c),c)}let i;const l=LT(e);if(l&&l.getTime()>=Yv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Ny(Bn(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new ln}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new Ny(Bn(n),e.status,n.weak_password.reasons);throw new pT(Bn(n),e.status||500,i)}const FT=(e,t,n,i)=>{const l={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),l.body=JSON.stringify(i),Object.assign(Object.assign({},l),n))};async function He(e,t,n,i){var l;const c=Object.assign({},i==null?void 0:i.headers);c[wm]||(c[wm]=Yv["2024-01-01"].name),i!=null&&i.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(l=i==null?void 0:i.query)!==null&&l!==void 0?l:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await HT(e,t,n+h,{headers:c,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(f):{data:Object.assign({},f),error:null}}async function HT(e,t,n,i,l,c){const u=FT(t,i,l,c);let h;try{h=await e(n,Object.assign({},u))}catch(f){throw console.error(f),new _m(Bn(f),0)}if(h.ok||await Ay(h),i!=null&&i.noResolveJson)return h;try{return await h.json()}catch(f){await Ay(f)}}function Ta(e){var t;let n=null;XT(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=TT(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function ky(e){const t=Ta(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function un(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function IT(e){return{data:e,error:null}}function GT(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:l,verification_type:c}=e,u=UT(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:t,email_otp:n,hashed_token:i,redirect_to:l,verification_type:c},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function YT(e){return e}function XT(e){return e.access_token&&e.refresh_token&&e.expires_in}const Fh=["global","local","others"];var KT=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(n[i[l]]=e[i[l]]);return n};class WT{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=Qv(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Fh[0]){if(Fh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fh.join(", ")}`);try{return await He(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Pe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await He(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:un})}catch(i){if(Pe(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=KT(t,["options"]),l=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(l.new_email=i==null?void 0:i.newEmail,delete l.newEmail),await He(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:GT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Pe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await He(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:un})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,l,c,u,h,f;try{const p={nextPage:null,lastPage:0,total:0},g=await He(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(c=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:YT});if(g.error)throw g.error;const y=await g.json(),b=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(f=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return w.length>0&&(w.forEach(_=>{const N=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(_.split(";")[1].split("=")[1]);p[`${T}Page`]=N}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Pe(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Xr(t);try{return await He(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:un})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Xr(t);try{return await He(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:un})}catch(i){if(Pe(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Xr(t);try{return await He(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:un})}catch(i){if(Pe(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Xr(t.userId);try{const{data:n,error:i}=await He(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:i}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Xr(t.userId),Xr(t.id);try{return{data:await He(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}}function My(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function QT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Kr={debug:!!(globalThis&&Wv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ZT extends Zv{}async function JT(e,t,n){Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async l=>{if(l){Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,l.name);try{return await n()}finally{Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,l.name)}}else{if(t===0)throw Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ZT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Kr.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}QT();const eC={url:dT,storageKey:uT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Oy(e,t,n){return await n()}const Wr={};class Fo{constructor(t){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fo.nextInstanceID,Fo.nextInstanceID+=1,this.instanceID>0&&Ls()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},eC),t);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new WT({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Qv(l.fetch),this.lock=l.lock||Oy,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Ls()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=JT:this.lock=Oy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Wv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=My(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=My(this.memoryStorage)),Ls()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Wr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Wr[this.storageKey]=Object.assign(Object.assign({},Wr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Wr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Wr[this.storageKey]=Object.assign(Object.assign({},Wr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gv}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=ET(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Ls()&&this.detectSessionInUrl&&i!=="none"){const{data:l,error:c}=await this._getSessionFromURL(n,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),yT(c)){const f=(t=c.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:h}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Pe(n)?{error:n}:{error:new Xv("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,l;try{const c=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(l=t==null?void 0:t.options)===null||l===void 0?void 0:l.captchaToken}},xform:Ta}),{data:u,error:h}=c;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(c){if(Pe(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(t){var n,i,l;try{let c;if("email"in t){const{email:g,password:y,options:b}=t;let w=null,_=null;this.flowType==="pkce"&&([w,_]=await Yr(this.storage,this.storageKey)),c=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:g,password:y,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:w,code_challenge_method:_},xform:Ta})}else if("phone"in t){const{phone:g,password:y,options:b}=t;c=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(i=b==null?void 0:b.data)!==null&&i!==void 0?i:{},channel:(l=b==null?void 0:b.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Ta})}else throw new Nc("You must provide either an email or phone number and a password");const{data:u,error:h}=c;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(c){if(Pe(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(t){try{let n;if("email"in t){const{email:c,password:u,options:h}=t;n=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ky})}else if("phone"in t){const{phone:c,password:u,options:h}=t;n=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ky})}else throw new Nc("You must provide either an email or phone number and a password");const{data:i,error:l}=n;return l?{data:{user:null,session:null},error:l}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new _c}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:l})}catch(n){if(Pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,l,c;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=t.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,i,l,c,u,h,f,p,g,y,b,w;let _,N;if("message"in t)_=t.message,N=t.signature;else{const{chain:T,wallet:R,statement:S,options:k}=t;let E;if(Ls())if(typeof R=="object")E=R;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))E=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=R}const j=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const M=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),S?{statement:S}:null));let z;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")z=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)z=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)_=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),N=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${j.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(l=(i=k==null?void 0:k.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((p=k==null?void 0:k.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((y=(g=k==null?void 0:k.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...k.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const M=await E.signMessage(new TextEncoder().encode(_),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=M}}try{const{data:T,error:R}=await He(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:ST(N)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Ta});if(R)throw R;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new _c}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:R})}catch(T){if(Pe(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(t){const n=await zn(this.storage,`${this.storageKey}-code-verifier`),[i,l]=(n??"").split("/");try{const{data:c,error:u}=await He(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Ta});if(await nn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new _c}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:u})}catch(c){if(Pe(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(t){try{const{options:n,provider:i,token:l,access_token:c,nonce:u}=t,h=await He(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:l,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ta}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new _c}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(n){if(Pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,l,c,u;try{if("email"in t){const{email:h,options:f}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Yr(this.storage,this.storageKey));const{error:y}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(i=f==null?void 0:f.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in t){const{phone:h,options:f}=t,{data:p,error:g}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(l=f==null?void 0:f.data)!==null&&l!==void 0?l:{},create_user:(c=f==null?void 0:f.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:g}}throw new Nc("You must provide either an email or phone number.")}catch(h){if(Pe(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(t){var n,i;try{let l,c;"options"in t&&(l=(n=t.options)===null||n===void 0?void 0:n.redirectTo,c=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:h}=await He(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Ta});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,p=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(l){if(Pe(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(t){var n,i,l;try{let c=null,u=null;return this.flowType==="pkce"&&([c,u]=await Yr(this.storage,this.storageKey)),await He(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((l=t==null?void 0:t.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:IT})}catch(c){if(Pe(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new ln;const{error:l}=await He(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(t){if(Pe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:l,options:c}=t,{error:u}=await He(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:i,type:l,options:c}=t,{data:u,error:h}=await He(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Nc("You must provide either an email or phone number and a type")}catch(n){if(Pe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await zn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<$h:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await zn(this.userStorage,this.storageKey+"-user");u!=null&&u.user?t.user=u.user:t.user=qh()}if(this.storage.isServer&&t.user){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,p,g)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,g))})}return{data:{session:t},error:null}}const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:un}):await this._useSession(async n=>{var i,l,c;const{data:u,error:h}=n;if(h)throw h;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ln}:await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:un})})}catch(n){if(Pe(n))return xT(n)&&(await this._removeSession(),await nn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:l,error:c}=i;if(c)throw c;if(!l.session)throw new ln;const u=l.session;let h=null,f=null;this.flowType==="pkce"&&t.email!=null&&([h,f]=await Yr(this.storage,this.storageKey));const{data:p,error:g}=await He(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:un});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(Pe(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ln;const n=Date.now()/1e3;let i=n,l=!0,c=null;const{payload:u}=Uh(t.access_token);if(u.exp&&(i=u.exp,l=i<=n),l){const{session:h,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};c=h}else{const{data:h,error:f}=await this._getUser(t.access_token);if(f)throw f;c={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(n){if(Pe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:u,error:h}=n;if(h)throw h;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new ln;const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Pe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Ls())throw new Sc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _y("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new _y("No code detected.");const{data:S,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:l,access_token:c,refresh_token:u,expires_in:h,expires_at:f,token_type:p}=t;if(!c||!h||!u||!p)throw new Sc("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(h);let b=g+y;f&&(b=parseInt(f));const w=b-g;w*1e3<=ti&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${y}s`);const _=b-y;g-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,b,g):g-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,b,g);const{data:N,error:T}=await this._getUser(c);if(T)throw T;const R={provider_token:i,provider_refresh_token:l,access_token:c,expires_in:y,expires_at:b,refresh_token:u,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:t.type},error:null}}catch(i){if(Pe(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await zn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:l,error:c}=n;if(c)return{error:c};const u=(i=l.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:h}=await this.admin.signOut(u,t);if(h&&!(gT(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return t!=="others"&&(await this._removeSession(),await nn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=CT(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,l;try{const{data:{session:c},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}})}async resetPasswordForEmail(t,n={}){let i=null,l=null;this.flowType==="pkce"&&([i,l]=await Yr(this.storage,this.storageKey,!0));try{return await He(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(c){if(Pe(c))return{data:null,error:c};throw c}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:i,error:l}=await this._useSession(async c=>{var u,h,f,p,g;const{data:y,error:b}=c;if(b)throw b;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=t.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await He(this.fetch,"GET",w,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return Ls()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Pe(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,l;const{data:c,error:u}=n;if(u)throw u;return await He(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await MT(async l=>(l>0&&await kT(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await He(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ta})),(l,c)=>{const u=200*Math.pow(2,l);return c&&Vh(c)&&Date.now()+u-i<ti})}catch(i){if(this._debug(n,"error",i),Pe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),Ls()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const l=await zn(this.storage,this.storageKey);if(l&&this.userStorage){let u=await zn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await si(this.userStorage,this.storageKey+"-user",u)),l.user=(t=u==null?void 0:u.user)!==null&&t!==void 0?t:qh()}else if(l&&!l.user&&!l.user){const u=await zn(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(l.user=u.user,await nn(this.storage,this.storageKey+"-user"),await si(this.storage,this.storageKey,l)):l.user=qh()}if(this._debug(i,"session from storage",l),!this._isValidSession(l)){this._debug(i,"session is not valid"),l!==null&&await this._removeSession();return}const c=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$h;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${$h}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),Vh(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(l.access_token);!h&&(u!=null&&u.user)?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(i,"error",l),console.error(l);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new ln;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new od;const{data:c,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!c.session)throw new ln;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const h={session:c.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(c){if(this._debug(l,"error",c),Pe(c)){const u={session:null,error:c};return Vh(c)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,n,i=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(t,n)}catch(f){c.push(f)}});if(await Promise.all(u),c.length>0){for(let h=0;h<c.length;h+=1)console.error(c[h]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await si(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const c=Ey(l);await si(this.storage,this.storageKey,c)}else{const l=Ey(n);await si(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await nn(this.storage,this.storageKey),await nn(this.storage,this.storageKey+"-code-verifier"),await nn(this.storage,this.storageKey+"-user"),this.userStorage&&await nn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ls()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ti);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((i.expires_at*1e3-t)/ti);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${ti}ms, refresh threshold is ${jm} ticks`),l<=jm&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Zv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ls()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const l=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&l.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&l.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,u]=await Yr(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(h.toString())}if(i!=null&&i.queryParams){const c=new URLSearchParams(i.queryParams);l.push(c.toString())}return i!=null&&i.skipBrowserRedirect&&l.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:l,error:c}=n;return c?{data:null,error:c}:await He(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,l;const{data:c,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:f,error:p}=await He(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((l=f==null?void 0:f.totp)===null||l===void 0)&&l.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:l,error:c}=n;if(c)return{data:null,error:c};const{data:u,error:h}=await He(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:l,error:c}=n;return c?{data:null,error:c}:await He(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(t==null?void 0:t.factors)||[],l=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),c=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,i;const{data:{session:l},error:c}=t;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Uh(l.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((i=(n=l.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(h=>h.kid===t);if(i)return i;const l=Date.now();if(i=this.jwks.keys.find(h=>h.kid===t),i&&this.jwks_cached_at+fT>l)return i;const{data:c,error:u}=await He(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,i=c.keys.find(h=>h.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:w,error:_}=await this.getSession();if(_||!w.session)return{data:null,error:_};i=w.session.access_token}const{header:l,payload:c,signature:u,raw:{header:h,payload:f}}=Uh(i);n!=null&&n.allowExpired||BT(c.exp);const p=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:w}=await this.getUser(i);if(w)throw w;return{data:{claims:c,header:l,signature:u},error:null}}const g=$T(l.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,u,NT(`${h}.${f}`)))throw new Nm("Invalid JWT signature");return{data:{claims:c,header:l,signature:u},error:null}}catch(i){if(Pe(i))return{data:null,error:i};throw i}}}Fo.nextInstanceID=0;const tC=Fo;class sC extends tC{constructor(t){super(t)}}var aC=function(e,t,n,i){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(g){try{p(i.next(g))}catch(y){u(y)}}function f(g){try{p(i.throw(g))}catch(y){u(y)}}function p(g){g.done?c(g.value):l(g.value).then(h,f)}p((i=i.apply(e,t||[])).next())})};class nC{constructor(t,n,i){var l,c,u;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=lT(t),f=new URL(h);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,g={db:eT,realtime:sT,auth:Object.assign(Object.assign({},tT),{storageKey:p}),global:JS},y=cT(i??{},g);this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=y.global.headers)!==null&&c!==void 0?c:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=y.auth)!==null&&u!==void 0?u:{},this.headers,y.global.fetch),this.fetch=iT(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new vS(new URL("rest/v1",f).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new WS(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new dS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i={}){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return aC(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:l,storageKey:c,flowType:u,lock:h,debug:f},p,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sC({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),p),storageKey:c,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:l,flowType:u,lock:h,debug:f,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new LS(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rC=(e,t,n)=>new nC(e,t,n);function iC(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}iC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jv="https://wznycskqsavpmejwpksp.supabase.co",oC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind6bnljc2txc2F2cG1landwa3NwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2MzA2NjUsImV4cCI6MjA3MjIwNjY2NX0.uYXbBwQDo1pLeBrmtZnBR2M3a3_TsYDa637pcKSVC_8",Uc=Jv.includes(".supabase.co");Uc||(console.warn(" Supabase credentials not configured. Using mock mode for development."),console.info(" To use real Supabase:"),console.info("1. Update .env.local with your Supabase credentials"),console.info("2. Get credentials from: https://supabase.com/dashboard"));const lC="https://mock.supabase.co",cC="mock-anon-key",le=rC(Uc?Jv:lC,Uc?oC:cC),To=Uc,ej=v.createContext(void 0),Kt=()=>{const e=v.useContext(ej);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},dC=({children:e})=>{const[t,n]=v.useState(null),[i,l]=v.useState(null),[c,u]=v.useState(!0);v.useEffect(()=>{if(!To){u(!1);return}le.auth.getSession().then(({data:{session:y}})=>{l(y),u(!1)}).catch(y=>{console.warn("Erro ao verificar sesso, usando modo mock:",y),u(!1)});const{data:g}=le.auth.onAuthStateChange((y,b)=>{l(b)});return()=>{g.subscription.unsubscribe()}},[]),v.useEffect(()=>{To&&(i?(console.log("AuthContext: Sesso encontrada, buscando perfil:",i.user.id),le.from("profiles").select("*").eq("id",i.user.id).single().then(({data:g,error:y})=>{if(console.log("AuthContext: Resultado da busca de perfil:",{profile:g,error:y}),y||!g)console.error("Perfil no encontrado ou erro na busca, deslogando.",y),le.auth.signOut();else{const b={id:g.id,name:g.name||i.user.email||"Usurio",email:i.user.email,role:g.role,avatar:g.avatar_url||`https://api.dicebear.com/8.x/initials/svg?seed=${g.name||i.user.email}`};console.log("AuthContext: Usurio da aplicao criado:",b),n(b)}})):n(null))},[i]);const h=async(g,y)=>{if(!To)return console.info(" Usando autenticao mock para desenvolvimento"),g==="demo@clubmanager.com"&&y==="demo123456"?(n({id:"demo-user-id",name:"Usurio Demonstrao",email:"demo@clubmanager.com",role:"admin",avatar:"https://api.dicebear.com/8.x/initials/svg?seed=Demo"}),{success:!0,error:null}):{success:!1,error:"Credenciais invlidas. Use: demo@clubmanager.com / demo123456"};try{const{error:b}=await le.auth.signInWithPassword({email:g,password:y});return{success:!b,error:(b==null?void 0:b.message)||null}}catch(b){return console.error("Erro de conexo com Supabase:",b),{success:!1,error:"Erro de conexo. Verifique a configurao do Supabase."}}},f=async()=>h("demo@clubmanager.com","demo123456"),p=async()=>{if(!To){n(null);return}await le.auth.signOut()};return s.jsxs(ej.Provider,{value:{user:t,login:h,loginAsDemo:f,logout:p,isLoading:c},children:[!To&&s.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500 text-black px-4 py-2 text-sm z-50",children:[" ",s.jsx("strong",{children:"Modo Desenvolvimento:"})," Supabase no configurado. Use: demo@clubmanager.com / demo123456"]}),c?s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),s.jsx("p",{className:"mt-4 text-white font-semibold",children:"Carregando Sesso..."})]})}):e]})},Hh=e=>({id:e.id,name:e.name,categoryId:e.category_id||void 0,currentStock:e.current_stock,minStock:e.min_stock,unit:e.unit,lastUpdated:new Date(e.last_updated||e.created_at),supplier:e.supplier||void 0,cost:e.cost||0,availableForSale:e.available_for_sale||!1,image_url:e.image_url||void 0}),uC=e=>({id:e.id,name:e.name,description:e.description||void 0,color:e.color||"#6B7280",icon:e.icon||void 0,isActive:e.is_active||!0,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at||e.created_at)}),Ih=e=>({id:e.id,name:e.name,email:e.email,phone:e.phone||"",avatar:e.avatar_url||`https://api.dicebear.com/8.x/initials/svg?seed=${e.name}`,status:e.status,joinDate:new Date(e.join_date),membershipType:e.membership_type||"basic"}),Gh=e=>{const t=e.item_type==="direct",n=e.inventory_items;return{id:e.id,name:t&&(n!=null&&n.name)?n.name:e.name,description:e.description||"",price:e.price,category:e.category,image_url:t&&(n!=null&&n.image_url)?n.image_url:e.image_url||void 0,available:e.available,preparation_time:e.preparation_time||void 0,item_type:e.item_type||"prepared",direct_inventory_item_id:e.direct_inventory_item_id||void 0}},Dy=e=>({id:e.id,tableNumber:e.table_number||void 0,items:e.order_items.map(t=>({id:t.id.toString(),menuItemId:t.menu_item_id,quantity:t.quantity,price:t.price,notes:t.notes||void 0})),status:e.status,total:e.total,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at||e.created_at),employeeId:e.employee_id||"",notes:e.notes||void 0}),tj=v.createContext(void 0),ft=()=>{const e=v.useContext(tj);if(e===void 0)throw new Error("useApp must be used within an AppProvider");return e},hC=({children:e})=>{const[t,n]=v.useState([]),[i,l]=v.useState([]),[c,u]=v.useState([]),[h,f]=v.useState([]),[p,g]=v.useState([]),[y,b]=v.useState([]);v.useEffect(()=>{(async()=>{const[$,Y,A,F]=await Promise.all([le.from("menu_items").select(`
          *,
          inventory_items!left(name, image_url)
        `).order("name"),le.from("inventory_items").select("*").order("name"),le.from("inventory_categories").select("*").eq("is_active",!0).order("name"),le.from("members").select("*").order("name")]);$.data&&n($.data.map(Gh)),Y.data&&u(Y.data.map(Hh)),A.data&&f(A.data.map(uC)),F.data&&g(F.data.map(Ih))})()},[]),v.useEffect(()=>{const P=async A=>{var W,se;const{data:F,error:B}=await le.from("orders").select("*, order_items(*)").order("created_at",{ascending:!1});if(B)console.error("Error fetching orders after realtime event:",B);else if(F){const fe=F.map(Dy);l(fe),A.eventType!=="INSERT"&&z(`Pedido #${(se=(W=A.new)==null?void 0:W.id)==null?void 0:se.slice(0,4)} atualizado para ${A.new.status}`)}},$=le.channel("realtime-orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},P).subscribe();return(async()=>{const{data:A,error:F}=await le.from("orders").select("*, order_items(*)").order("created_at",{ascending:!1});F?console.error("Error fetching initial orders:",F):A&&l(A.map(Dy))})(),()=>{le.removeChannel($)}},[]);const w=async P=>{console.log("=== addMenuItem INICIADO ==="),console.log("Dados recebidos:",P);const $={name:P.name,description:P.description||null,price:P.price,category:P.category,available:P.available,preparation_time:P.preparation_time||null,item_type:P.item_type||"prepared",direct_inventory_item_id:P.direct_inventory_item_id||null,image_url:P.image_url||null};console.log("Dados formatados para Supabase:",$);const{data:Y,error:A}=await le.from("menu_items").insert($).select().single();if(console.log("Resposta do Supabase:"),console.log("- Data:",Y),console.log("- Error:",A),A)throw console.error("=== ERRO NO SUPABASE ==="),console.error("Cdigo do erro:",A.code),console.error("Mensagem do erro:",A.message),console.error("Detalhes do erro:",A.details),console.error("Hint do erro:",A.hint),A;Y&&(console.log("Item inserido com sucesso, atualizando estado..."),n(F=>[Gh(Y),...F].sort((B,W)=>B.name.localeCompare(W.name))),z(`Novo prato "${Y.name}" adicionado ao cardpio!`),console.log("Estado atualizado com sucesso!")),console.log("=== addMenuItem FINALIZADO ===")},_=async P=>{const $={name:P.name,description:P.description,price:P.price,category:P.category,available:P.available,preparation_time:P.preparation_time,item_type:P.item_type||"prepared",direct_inventory_item_id:P.direct_inventory_item_id||null,image_url:P.image_url||null},{data:Y,error:A}=await le.from("menu_items").update($).eq("id",P.id).select().single();if(A){console.error(A);return}Y&&(n(F=>F.map(B=>B.id===Y.id?Gh(Y):B).sort((B,W)=>B.name.localeCompare(W.name))),z(`Prato "${Y.name}" atualizado!`))},N=async P=>{const{error:$}=await le.from("menu_items").delete().eq("id",P);if($){console.error($);return}n(Y=>Y.filter(A=>A.id!==P)),z("Prato removido do cardpio!")},T=async P=>{const{items:$,tableNumber:Y,employeeId:A,notes:F,status:B}=P,W=$.reduce((Ne,Be)=>Ne+Be.price*Be.quantity,0),se={table_number:Y,employee_id:A,notes:F,status:B,total:W},{data:fe,error:ge}=await le.from("orders").insert(se).select().single();if(ge||!fe){console.error("Error creating order:",ge);return}const oe=$.map(Ne=>({order_id:fe.id,menu_item_id:Ne.menuItemId,quantity:Ne.quantity,price:Ne.price,notes:Ne.notes})),{error:me}=await le.from("order_items").insert(oe);me?console.error("Error creating order items:",me):z(`Novo pedido #${fe.id.slice(0,4)} criado!`)},R=async(P,$)=>{try{if(console.log("updateOrderStatus chamado:",{orderId:P,status:$}),P.startsWith("balcao-")){const Y=P.replace("balcao-","");console.log("Atualizando pedido de balco:",Y);let A;switch($){case"pending":A="paid";break;case"preparing":A="preparing";break;case"ready":A="ready";break;default:A=$}const{error:F}=await le.from("balcao_orders").update({status:A,preparation_started_at:$==="preparing"?new Date().toISOString():void 0,preparation_completed_at:$==="ready"?new Date().toISOString():void 0}).eq("id",Y);if(F)throw F;console.log("Pedido de balco atualizado com sucesso")}else{let Y,A;if(P.startsWith("comanda-")){const B=P.replace("comanda-",""),W=B.match(/^([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})-(.+)$/i);W?(Y=W[1],A=W[2]):(Y=B,A="")}else{const B=P.split("-");Y=B.slice(0,5).join("-"),A=B.slice(5).join("-")}if(console.log("Decomposio do ID:",{orderId:P,realComandaId:Y,timeKey:A}),!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(Y))throw console.error("ID da comanda invlido:",Y),new Error(`ID da comanda invlido: ${Y}`);if(A){const B=A.split("-");console.log("Partes do timeKey:",B);const[W,se,fe,ge,oe]=B.map(Number);if(console.log("Valores parseados:",{year:W,month:se,day:fe,hour:ge,minute:oe}),isNaN(W)||isNaN(se)||isNaN(fe)||isNaN(ge)||isNaN(oe))throw console.error(" Valores de data invlidos:",{year:W,month:se,day:fe,hour:ge,minute:oe}),new Error(`Valores de data invlidos no timeKey: ${A}`);const{data:me,error:Ne}=await le.from("comanda_items").select("*").eq("comanda_id",Y).in("status",["pending","preparing","ready"]);if(Ne)throw console.error("Erro na busca dos itens da comanda:",Ne),Ne;const Be=(me==null?void 0:me.filter(je=>{const De=new Date(je.added_at),St=`${De.getFullYear()}-${De.getMonth()}-${De.getDate()}-${De.getHours()}-${De.getMinutes()}`;return A===St}))||[];if(console.log("Itens encontrados para atualizar:",Be.length),Be.length>0){const je=Be.map(St=>St.id);console.log("Atualizando itens:",je,"para status:",$);const{error:De}=await le.from("comanda_items").update({status:$}).in("id",je);if(De)throw De;console.log("Atualizao realizada com sucesso")}else console.log("Nenhum item encontrado para atualizar")}else{const{data:B,error:W}=await le.from("comanda_items").select("*").eq("comanda_id",Y).in("status",["pending","preparing","ready"]).order("added_at",{ascending:!1});if(W)throw console.error("Erro na busca dos itens da comanda:",W),W;if(B&&B.length>0){const se=B.map(ge=>ge.id);console.log("Atualizando todos os itens pendentes:",se,"para status:",$);const{error:fe}=await le.from("comanda_items").update({status:$}).in("id",se);if(fe)throw fe;console.log("Atualizao realizada com sucesso")}else console.log("Nenhum item encontrado para atualizar")}}await pe(),await ie()}catch(Y){console.error("Erro ao atualizar status do pedido:",Y)}},S=async P=>{const $={name:P.name,category_id:P.categoryId,current_stock:P.currentStock,min_stock:P.minStock,unit:P.unit,cost:P.cost,supplier:P.supplier,available_for_sale:P.availableForSale||!1,image_url:P.image_url||null},{data:Y,error:A}=await le.from("inventory_items").insert($).select().single();if(A){console.error(A);return}Y&&u(F=>[Hh(Y),...F].sort((B,W)=>B.name.localeCompare(W.name)))},k=async P=>{const $={name:P.name,category_id:P.categoryId,current_stock:P.currentStock,min_stock:P.minStock,unit:P.unit,cost:P.cost,supplier:P.supplier,available_for_sale:P.availableForSale||!1,image_url:P.image_url||null,last_updated:new Date().toISOString()},{data:Y,error:A}=await le.from("inventory_items").update($).eq("id",P.id).select().single();if(A){console.error(A);return}Y&&u(F=>F.map(B=>B.id===Y.id?Hh(Y):B).sort((B,W)=>B.name.localeCompare(W.name)))},E=async P=>{const{error:$}=await le.from("inventory_items").delete().eq("id",P);if($){console.error($);return}u(Y=>Y.filter(A=>A.id!==P))},j=async P=>{const $={name:P.name,email:P.email,phone:P.phone,avatar_url:P.avatar,status:P.status,membership_type:P.membershipType},{data:Y,error:A}=await le.from("members").insert($).select().single();if(A){console.error(A);return}Y&&g(F=>[Ih(Y),...F].sort((B,W)=>B.name.localeCompare(W.name)))},M=async P=>{const $={name:P.name,email:P.email,phone:P.phone,avatar_url:P.avatar,status:P.status,membership_type:P.membershipType},{data:Y,error:A}=await le.from("members").update($).eq("id",P.id).select().single();if(A){console.error(A);return}Y&&g(F=>F.map(B=>B.id===Y.id?Ih(Y):B).sort((B,W)=>B.name.localeCompare(W.name)))},z=P=>{b($=>[P,...$].slice(0,10))},U=()=>b([]),[I,V]=v.useState([]),[Q,K]=v.useState([]),ie=async()=>{try{const{data:P,error:$}=await le.from("comanda_items").select(`
          *,
          comanda:comandas(
            id,
            table_id,
            customer_name,
            opened_at,
            status,
            table:bar_tables(number)
          ),
          menu_item:menu_items(
            *,
            inventory_items!left(name, image_url)
          )
        `).in("status",["pending","preparing","ready"]).order("added_at",{ascending:!0});if($)throw $;const{data:Y,error:A}=await le.from("balcao_order_items").select(`
          *,
          balcao_order:balcao_orders!inner(
            id,
            order_number,
            customer_name,
            status,
            created_at
          ),
          menu_item:menu_items(
            *,
            inventory_items!left(name, image_url)
          )
        `).in("balcao_order.status",["paid","preparing","ready"]).order("created_at",{ascending:!0});if(A)throw A;const F=new Map;P==null||P.forEach(B=>{var me,Ne,Be,je,De,St,ds;const W=(me=B.comanda)==null?void 0:me.id;if(!W)return;const se=new Date(B.added_at),fe=`${se.getUTCFullYear()}-${se.getUTCMonth()}-${se.getUTCDate()}-${se.getUTCHours()}-${se.getUTCMinutes()}`,ge=`comanda-${W}-${fe}`;F.has(ge)||F.set(ge,{id:ge,tableNumber:(Be=(Ne=B.comanda)==null?void 0:Ne.table)==null?void 0:Be.number,items:[],status:B.status,total:0,createdAt:new Date(B.added_at),updatedAt:new Date(B.created_at),employeeId:"",notes:`Mesa ${(De=(je=B.comanda)==null?void 0:je.table)==null?void 0:De.number} - ${((St=B.comanda)==null?void 0:St.customer_name)||"Cliente"}`});const oe=F.get(ge);oe.items.push({id:B.id,menuItemId:B.menu_item_id,quantity:B.quantity,price:B.price,notes:B.notes,menuItem:B.menu_item?{id:B.menu_item.id,name:B.menu_item.item_type==="direct"&&((ds=B.menu_item.inventory_items)!=null&&ds.name)?B.menu_item.inventory_items.name:B.menu_item.name,category:B.menu_item.category,preparationTime:B.menu_item.preparation_time,item_type:B.menu_item.item_type}:void 0}),oe.total+=B.price*B.quantity}),Y==null||Y.forEach(B=>{var ge,oe;const W=(ge=B.balcao_order)==null?void 0:ge.id;if(!W)return;const se=`balcao-${W}`;F.has(se)||F.set(se,{id:se,tableNumber:"Balco",items:[],status:B.balcao_order.status==="paid"?"pending":B.balcao_order.status==="preparing"?"preparing":"ready",total:0,createdAt:new Date(B.balcao_order.created_at),updatedAt:new Date(B.created_at),employeeId:"",notes:`Pedido Balco #${B.balcao_order.order_number}${B.balcao_order.customer_name?` - ${B.balcao_order.customer_name}`:""}`});const fe=F.get(se);fe.items.push({id:B.id,menuItemId:B.menu_item_id,quantity:B.quantity,price:B.unit_price,notes:B.notes,menuItem:B.menu_item?{id:B.menu_item.id,name:B.menu_item.item_type==="direct"&&((oe=B.menu_item.inventory_items)!=null&&oe.name)?B.menu_item.inventory_items.name:B.menu_item.name,category:B.menu_item.category,preparationTime:B.menu_item.preparation_time,item_type:B.menu_item.item_type}:void 0}),fe.total+=B.unit_price*B.quantity}),K(Array.from(F.values()))}catch(P){console.error("Erro ao buscar pedidos do bar:",P)}},pe=async()=>{try{const{data:P,error:$}=await le.from("comanda_items").select(`
          *,
          comanda:comandas(
            id,
            table_id,
            customer_name,
            opened_at,
            status,
            table:bar_tables(number)
          ),
          menu_item:menu_items!inner(*)
        `).in("status",["pending","preparing"]).neq("menu_item.item_type","direct").order("added_at",{ascending:!0});if($)throw $;const{data:Y,error:A}=await le.from("balcao_order_items").select(`
          *,
          balcao_order:balcao_orders!inner(
            id,
            order_number,
            customer_name,
            status,
            created_at
          ),
          menu_item:menu_items!inner(*)
        `).in("balcao_order.status",["paid","preparing"]).neq("menu_item.item_type","direct").order("created_at",{ascending:!0});if(A)throw A;const F=new Map;P==null||P.forEach(B=>{var me,Ne,Be,je,De,St;const W=(me=B.comanda)==null?void 0:me.id;if(!W)return;const se=new Date(B.added_at),fe=`${se.getUTCFullYear()}-${se.getUTCMonth()}-${se.getUTCDate()}-${se.getUTCHours()}-${se.getUTCMinutes()}`,ge=`comanda-${W}-${fe}`;F.has(ge)||F.set(ge,{id:ge,tableNumber:(Be=(Ne=B.comanda)==null?void 0:Ne.table)==null?void 0:Be.number,items:[],status:B.status,total:0,createdAt:new Date(B.added_at),updatedAt:new Date(B.created_at),employeeId:"",notes:`Mesa ${(De=(je=B.comanda)==null?void 0:je.table)==null?void 0:De.number} - ${((St=B.comanda)==null?void 0:St.customer_name)||"Cliente"}`});const oe=F.get(ge);oe.items.push({id:B.id,menuItemId:B.menu_item_id,quantity:B.quantity,price:B.price,notes:B.notes,menuItem:B.menu_item?{id:B.menu_item.id,name:B.menu_item.name,category:B.menu_item.category,preparationTime:B.menu_item.preparation_time}:void 0}),oe.total+=B.price*B.quantity}),Y==null||Y.forEach(B=>{var ge;const W=(ge=B.balcao_order)==null?void 0:ge.id;if(!W)return;const se=`balcao-${W}`;F.has(se)||F.set(se,{id:se,tableNumber:"Balco",items:[],status:B.balcao_order.status==="paid"?"pending":"preparing",total:0,createdAt:new Date(B.balcao_order.created_at),updatedAt:new Date(B.created_at),employeeId:"",notes:`Pedido Balco #${B.balcao_order.order_number}${B.balcao_order.customer_name?` - ${B.balcao_order.customer_name}`:""}`});const fe=F.get(se);fe.items.push({id:B.id,menuItemId:B.menu_item_id,quantity:B.quantity,price:B.unit_price,notes:B.notes,menuItem:B.menu_item?{id:B.menu_item.id,name:B.menu_item.name,category:B.menu_item.category,preparationTime:B.menu_item.preparation_time}:void 0}),fe.total+=B.unit_price*B.quantity}),V(Array.from(F.values()))}catch(P){console.error("Erro ao buscar pedidos da cozinha:",P)}};v.useEffect(()=>{pe(),ie();const P=le.channel("kitchen-orders-realtime").on("postgres_changes",{event:"*",schema:"public",table:"comanda_items"},$=>{console.log(" SUBSCRIPTION ATIVADA - comanda_items:",$),console.log("Event Type:",$.eventType),console.log("New data:",$.new),console.log("Old data:",$.old),setTimeout(()=>{console.log(" Recarregando pedidos da cozinha e bar..."),pe(),ie()},100),$.eventType==="INSERT"?console.log(" Novo item inserido na comanda"):$.eventType==="UPDATE"?console.log(" Item da comanda atualizado"):$.eventType==="DELETE"&&console.log(" Item da comanda removido")}).on("postgres_changes",{event:"*",schema:"public",table:"comandas"},$=>{console.log(" SUBSCRIPTION ATIVADA - comandas:",$),setTimeout(()=>{console.log(" Recarregando pedidos da cozinha e bar (comandas)..."),pe(),ie()},100)}).on("postgres_changes",{event:"*",schema:"public",table:"balcao_orders"},$=>{var Y,A;console.log(" SUBSCRIPTION ATIVADA - balcao_orders:",$),console.log("Event Type:",$.eventType),console.log("New data:",$.new),console.log("Old data:",$.old),$.eventType==="UPDATE"&&((Y=$.old)==null?void 0:Y.status)==="pending_payment"&&((A=$.new)==null?void 0:A.status)==="paid"&&(console.log(" PEDIDO PAGO DETECTADO! Forando atualizao imediata..."),pe(),ie()),setTimeout(()=>{console.log(" Recarregando pedidos da cozinha e bar (balco)..."),pe(),ie()},1e3)}).on("postgres_changes",{event:"*",schema:"public",table:"balcao_order_items"},$=>{console.log(" SUBSCRIPTION ATIVADA - balcao_order_items:",$),console.log("Event Type:",$.eventType),setTimeout(()=>{console.log(" Recarregando pedidos da cozinha e bar (itens balco)..."),pe(),ie()},500)}).subscribe($=>{console.log(" Status da subscription kitchen-orders:",$),$==="SUBSCRIBED"?console.log(" Subscription ativa e funcionando!"):$==="CHANNEL_ERROR"&&console.error(" Erro na subscription!")});return()=>{console.log(" Desconectando subscription kitchen-orders"),P.unsubscribe()}},[]);const L=I.filter(P=>P.items.length>0),O=Q.filter(P=>P.items.length>0);return s.jsx(tj.Provider,{value:{menuItems:t,addMenuItem:w,updateMenuItem:_,removeMenuItem:N,orders:i,addOrder:T,updateOrderStatus:R,kitchenOrders:L,barOrders:O,refreshKitchenOrders:pe,refreshBarOrders:ie,inventory:c,inventoryCategories:h,addInventoryItem:S,updateInventoryItem:k,removeInventoryItem:E,members:p,addMember:j,updateMember:M,notifications:y,addNotification:z,clearNotifications:U},children:e})},ff=v.createContext({});function pf(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const gf=typeof window<"u",sj=gf?v.useLayoutEffect:v.useEffect,ld=v.createContext(null);function xf(e,t){e.indexOf(t)===-1&&e.push(t)}function yf(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ma=(e,t,n)=>n>t?t:n<e?e:n;let bf=()=>{};const Oa={},aj=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function nj(e){return typeof e=="object"&&e!==null}const rj=e=>/^0[^.\s]+$/u.test(e);function vf(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ds=e=>e,mC=(e,t)=>n=>t(e(n)),sl=(...e)=>e.reduce(mC),Ho=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class jf{constructor(){this.subscriptions=[]}add(t){return xf(this.subscriptions,t),()=>yf(this.subscriptions,t)}notify(t,n,i){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,n,i);else for(let c=0;c<l;c++){const u=this.subscriptions[c];u&&u(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const aa=e=>e*1e3,na=e=>e/1e3;function ij(e,t){return t?e*(1e3/t):0}const oj=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,fC=1e-7,pC=12;function gC(e,t,n,i,l){let c,u,h=0;do u=t+(n-t)/2,c=oj(u,i,l)-e,c>0?n=u:t=u;while(Math.abs(c)>fC&&++h<pC);return u}function al(e,t,n,i){if(e===t&&n===i)return Ds;const l=c=>gC(c,0,1,e,n);return c=>c===0||c===1?c:oj(l(c),t,i)}const lj=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,cj=e=>t=>1-e(1-t),dj=al(.33,1.53,.69,.99),wf=cj(dj),uj=lj(wf),hj=e=>(e*=2)<1?.5*wf(e):.5*(2-Math.pow(2,-10*(e-1))),_f=e=>1-Math.sin(Math.acos(e)),mj=cj(_f),fj=lj(_f),xC=al(.42,0,1,1),yC=al(0,0,.58,1),pj=al(.42,0,.58,1),bC=e=>Array.isArray(e)&&typeof e[0]!="number",gj=e=>Array.isArray(e)&&typeof e[0]=="number",vC={linear:Ds,easeIn:xC,easeInOut:pj,easeOut:yC,circIn:_f,circInOut:fj,circOut:mj,backIn:wf,backInOut:uj,backOut:dj,anticipate:hj},jC=e=>typeof e=="string",Ry=e=>{if(gj(e)){bf(e.length===4);const[t,n,i,l]=e;return al(t,n,i,l)}else if(jC(e))return vC[e];return e},Tc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function wC(e,t){let n=new Set,i=new Set,l=!1,c=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(g){u.has(g)&&(p.schedule(g),e()),g(h)}const p={schedule:(g,y=!1,b=!1)=>{const _=b&&l?n:i;return y&&u.add(g),_.has(g)||_.add(g),g},cancel:g=>{i.delete(g),u.delete(g)},process:g=>{if(h=g,l){c=!0;return}l=!0,[n,i]=[i,n],n.forEach(f),n.clear(),l=!1,c&&(c=!1,p.process(g))}};return p}const _C=40;function xj(e,t){let n=!1,i=!0;const l={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,u=Tc.reduce((k,E)=>(k[E]=wC(c),k),{}),{setup:h,read:f,resolveKeyframes:p,preUpdate:g,update:y,preRender:b,render:w,postRender:_}=u,N=()=>{const k=Oa.useManualTiming?l.timestamp:performance.now();n=!1,Oa.useManualTiming||(l.delta=i?1e3/60:Math.max(Math.min(k-l.timestamp,_C),1)),l.timestamp=k,l.isProcessing=!0,h.process(l),f.process(l),p.process(l),g.process(l),y.process(l),b.process(l),w.process(l),_.process(l),l.isProcessing=!1,n&&t&&(i=!1,e(N))},T=()=>{n=!0,i=!0,l.isProcessing||e(N)};return{schedule:Tc.reduce((k,E)=>{const j=u[E];return k[E]=(M,z=!1,U=!1)=>(n||T(),j.schedule(M,z,U)),k},{}),cancel:k=>{for(let E=0;E<Tc.length;E++)u[Tc[E]].cancel(k)},state:l,steps:u}}const{schedule:ot,cancel:hn,state:Ut,steps:Yh}=xj(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ds,!0);let Oc;function NC(){Oc=void 0}const ls={now:()=>(Oc===void 0&&ls.set(Ut.isProcessing||Oa.useManualTiming?Ut.timestamp:performance.now()),Oc),set:e=>{Oc=e,queueMicrotask(NC)}},yj=e=>t=>typeof t=="string"&&t.startsWith(e),Nf=yj("--"),SC=yj("var(--"),Sf=e=>SC(e)?TC.test(e.split("/*")[0].trim()):!1,TC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Io={...bi,transform:e=>Ma(0,1,e)},Cc={...bi,default:1},Po=e=>Math.round(e*1e5)/1e5,Tf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CC(e){return e==null}const EC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cf=(e,t)=>n=>!!(typeof n=="string"&&EC.test(n)&&n.startsWith(e)||t&&!CC(n)&&Object.prototype.hasOwnProperty.call(n,t)),bj=(e,t,n)=>i=>{if(typeof i!="string")return i;const[l,c,u,h]=i.match(Tf);return{[e]:parseFloat(l),[t]:parseFloat(c),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},AC=e=>Ma(0,255,e),Xh={...bi,transform:e=>Math.round(AC(e))},qn={test:Cf("rgb","red"),parse:bj("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+Xh.transform(e)+", "+Xh.transform(t)+", "+Xh.transform(n)+", "+Po(Io.transform(i))+")"};function kC(e){let t="",n="",i="",l="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),l=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),l=e.substring(4,5),t+=t,n+=n,i+=i,l+=l),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:l?parseInt(l,16)/255:1}}const Sm={test:Cf("#"),parse:kC,transform:qn.transform},nl=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),cn=nl("deg"),ra=nl("%"),Oe=nl("px"),MC=nl("vh"),OC=nl("vw"),Py={...ra,parse:e=>ra.parse(e)/100,transform:e=>ra.transform(e*100)},ai={test:Cf("hsl","hue"),parse:bj("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+ra.transform(Po(t))+", "+ra.transform(Po(n))+", "+Po(Io.transform(i))+")"},Nt={test:e=>qn.test(e)||Sm.test(e)||ai.test(e),parse:e=>qn.test(e)?qn.parse(e):ai.test(e)?ai.parse(e):Sm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?qn.transform(e):ai.transform(e),getAnimatableNone:e=>{const t=Nt.parse(e);return t.alpha=0,Nt.transform(t)}},DC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function RC(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Tf))==null?void 0:t.length)||0)+(((n=e.match(DC))==null?void 0:n.length)||0)>0}const vj="number",jj="color",PC="var",zC="var(",zy="${}",LC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Go(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},l=[];let c=0;const h=t.replace(LC,f=>(Nt.test(f)?(i.color.push(c),l.push(jj),n.push(Nt.parse(f))):f.startsWith(zC)?(i.var.push(c),l.push(PC),n.push(f)):(i.number.push(c),l.push(vj),n.push(parseFloat(f))),++c,zy)).split(zy);return{values:n,split:h,indexes:i,types:l}}function wj(e){return Go(e).values}function _j(e){const{split:t,types:n}=Go(e),i=t.length;return l=>{let c="";for(let u=0;u<i;u++)if(c+=t[u],l[u]!==void 0){const h=n[u];h===vj?c+=Po(l[u]):h===jj?c+=Nt.transform(l[u]):c+=l[u]}return c}}const BC=e=>typeof e=="number"?0:Nt.test(e)?Nt.getAnimatableNone(e):e;function $C(e){const t=wj(e);return _j(e)(t.map(BC))}const mn={test:RC,parse:wj,createTransformer:_j,getAnimatableNone:$C};function Kh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function VC({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let l=0,c=0,u=0;if(!t)l=c=u=n;else{const h=n<.5?n*(1+t):n+t-n*t,f=2*n-h;l=Kh(f,h,e+1/3),c=Kh(f,h,e),u=Kh(f,h,e-1/3)}return{red:Math.round(l*255),green:Math.round(c*255),blue:Math.round(u*255),alpha:i}}function qc(e,t){return n=>n>0?t:e}const dt=(e,t,n)=>e+(t-e)*n,Wh=(e,t,n)=>{const i=e*e,l=n*(t*t-i)+i;return l<0?0:Math.sqrt(l)},UC=[Sm,qn,ai],qC=e=>UC.find(t=>t.test(e));function Ly(e){const t=qC(e);if(!t)return!1;let n=t.parse(e);return t===ai&&(n=VC(n)),n}const By=(e,t)=>{const n=Ly(e),i=Ly(t);if(!n||!i)return qc(e,t);const l={...n};return c=>(l.red=Wh(n.red,i.red,c),l.green=Wh(n.green,i.green,c),l.blue=Wh(n.blue,i.blue,c),l.alpha=dt(n.alpha,i.alpha,c),qn.transform(l))},Tm=new Set(["none","hidden"]);function FC(e,t){return Tm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function HC(e,t){return n=>dt(e,t,n)}function Ef(e){return typeof e=="number"?HC:typeof e=="string"?Sf(e)?qc:Nt.test(e)?By:YC:Array.isArray(e)?Nj:typeof e=="object"?Nt.test(e)?By:IC:qc}function Nj(e,t){const n=[...e],i=n.length,l=e.map((c,u)=>Ef(c)(c,t[u]));return c=>{for(let u=0;u<i;u++)n[u]=l[u](c);return n}}function IC(e,t){const n={...e,...t},i={};for(const l in n)e[l]!==void 0&&t[l]!==void 0&&(i[l]=Ef(e[l])(e[l],t[l]));return l=>{for(const c in i)n[c]=i[c](l);return n}}function GC(e,t){const n=[],i={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const c=t.types[l],u=e.indexes[c][i[c]],h=e.values[u]??0;n[l]=h,i[c]++}return n}const YC=(e,t)=>{const n=mn.createTransformer(t),i=Go(e),l=Go(t);return i.indexes.var.length===l.indexes.var.length&&i.indexes.color.length===l.indexes.color.length&&i.indexes.number.length>=l.indexes.number.length?Tm.has(e)&&!l.values.length||Tm.has(t)&&!i.values.length?FC(e,t):sl(Nj(GC(i,l),l.values),n):qc(e,t)};function Sj(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?dt(e,t,n):Ef(e)(e,t)}const XC=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>ot.update(t,n),stop:()=>hn(t),now:()=>Ut.isProcessing?Ut.timestamp:ls.now()}},Tj=(e,t,n=10)=>{let i="";const l=Math.max(Math.round(t/n),2);for(let c=0;c<l;c++)i+=Math.round(e(c/(l-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Fc=2e4;function Af(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Fc;)t+=n,i=e.next(t);return t>=Fc?1/0:t}function KC(e,t=100,n){const i=n({...e,keyframes:[0,t]}),l=Math.min(Af(i),Fc);return{type:"keyframes",ease:c=>i.next(l*c).value/t,duration:na(l)}}const WC=5;function Cj(e,t,n){const i=Math.max(t-WC,0);return ij(n-e(i),t-i)}const mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qh=.001;function QC({duration:e=mt.duration,bounce:t=mt.bounce,velocity:n=mt.velocity,mass:i=mt.mass}){let l,c,u=1-t;u=Ma(mt.minDamping,mt.maxDamping,u),e=Ma(mt.minDuration,mt.maxDuration,na(e)),u<1?(l=p=>{const g=p*u,y=g*e,b=g-n,w=Cm(p,u),_=Math.exp(-y);return Qh-b/w*_},c=p=>{const y=p*u*e,b=y*n+n,w=Math.pow(u,2)*Math.pow(p,2)*e,_=Math.exp(-y),N=Cm(Math.pow(p,2),u);return(-l(p)+Qh>0?-1:1)*((b-w)*_)/N}):(l=p=>{const g=Math.exp(-p*e),y=(p-n)*e+1;return-Qh+g*y},c=p=>{const g=Math.exp(-p*e),y=(n-p)*(e*e);return g*y});const h=5/e,f=JC(l,c,h);if(e=aa(e),isNaN(f))return{stiffness:mt.stiffness,damping:mt.damping,duration:e};{const p=Math.pow(f,2)*i;return{stiffness:p,damping:u*2*Math.sqrt(i*p),duration:e}}}const ZC=12;function JC(e,t,n){let i=n;for(let l=1;l<ZC;l++)i=i-e(i)/t(i);return i}function Cm(e,t){return e*Math.sqrt(1-t*t)}const e4=["duration","bounce"],t4=["stiffness","damping","mass"];function $y(e,t){return t.some(n=>e[n]!==void 0)}function s4(e){let t={velocity:mt.velocity,stiffness:mt.stiffness,damping:mt.damping,mass:mt.mass,isResolvedFromDuration:!1,...e};if(!$y(e,t4)&&$y(e,e4))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),l=i*i,c=2*Ma(.05,1,1-(e.bounce||0))*Math.sqrt(l);t={...t,mass:mt.mass,stiffness:l,damping:c}}else{const n=QC(e);t={...t,...n,mass:mt.mass},t.isResolvedFromDuration=!0}return t}function Hc(e=mt.visualDuration,t=mt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:l}=n;const c=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:c},{stiffness:f,damping:p,mass:g,duration:y,velocity:b,isResolvedFromDuration:w}=s4({...n,velocity:-na(n.velocity||0)}),_=b||0,N=p/(2*Math.sqrt(f*g)),T=u-c,R=na(Math.sqrt(f/g)),S=Math.abs(T)<5;i||(i=S?mt.restSpeed.granular:mt.restSpeed.default),l||(l=S?mt.restDelta.granular:mt.restDelta.default);let k;if(N<1){const j=Cm(R,N);k=M=>{const z=Math.exp(-N*R*M);return u-z*((_+N*R*T)/j*Math.sin(j*M)+T*Math.cos(j*M))}}else if(N===1)k=j=>u-Math.exp(-R*j)*(T+(_+R*T)*j);else{const j=R*Math.sqrt(N*N-1);k=M=>{const z=Math.exp(-N*R*M),U=Math.min(j*M,300);return u-z*((_+N*R*T)*Math.sinh(U)+j*T*Math.cosh(U))/j}}const E={calculatedDuration:w&&y||null,next:j=>{const M=k(j);if(w)h.done=j>=y;else{let z=j===0?_:0;N<1&&(z=j===0?aa(_):Cj(k,j,M));const U=Math.abs(z)<=i,I=Math.abs(u-M)<=l;h.done=U&&I}return h.value=h.done?u:M,h},toString:()=>{const j=Math.min(Af(E),Fc),M=Tj(z=>E.next(j*z).value,j,30);return j+"ms "+M},toTransition:()=>{}};return E}Hc.applyToOptions=e=>{const t=KC(e,100,Hc);return e.ease=t.ease,e.duration=aa(t.duration),e.type="keyframes",e};function Em({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:l=10,bounceStiffness:c=500,modifyTarget:u,min:h,max:f,restDelta:p=.5,restSpeed:g}){const y=e[0],b={done:!1,value:y},w=U=>h!==void 0&&U<h||f!==void 0&&U>f,_=U=>h===void 0?f:f===void 0||Math.abs(h-U)<Math.abs(f-U)?h:f;let N=n*t;const T=y+N,R=u===void 0?T:u(T);R!==T&&(N=R-y);const S=U=>-N*Math.exp(-U/i),k=U=>R+S(U),E=U=>{const I=S(U),V=k(U);b.done=Math.abs(I)<=p,b.value=b.done?R:V};let j,M;const z=U=>{w(b.value)&&(j=U,M=Hc({keyframes:[b.value,_(b.value)],velocity:Cj(k,U,b.value),damping:l,stiffness:c,restDelta:p,restSpeed:g}))};return z(0),{calculatedDuration:null,next:U=>{let I=!1;return!M&&j===void 0&&(I=!0,E(U),z(U)),j!==void 0&&U>=j?M.next(U-j):(!I&&E(U),b)}}}function a4(e,t,n){const i=[],l=n||Oa.mix||Sj,c=e.length-1;for(let u=0;u<c;u++){let h=l(e[u],e[u+1]);if(t){const f=Array.isArray(t)?t[u]||Ds:t;h=sl(f,h)}i.push(h)}return i}function n4(e,t,{clamp:n=!0,ease:i,mixer:l}={}){const c=e.length;if(bf(c===t.length),c===1)return()=>t[0];if(c===2&&t[0]===t[1])return()=>t[1];const u=e[0]===e[1];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const h=a4(t,i,l),f=h.length,p=g=>{if(u&&g<e[0])return t[0];let y=0;if(f>1)for(;y<e.length-2&&!(g<e[y+1]);y++);const b=Ho(e[y],e[y+1],g);return h[y](b)};return n?g=>p(Ma(e[0],e[c-1],g)):p}function r4(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const l=Ho(0,t,i);e.push(dt(n,1,l))}}function i4(e){const t=[0];return r4(t,e.length-1),t}function o4(e,t){return e.map(n=>n*t)}function l4(e,t){return e.map(()=>t||pj).splice(0,e.length-1)}function zo({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const l=bC(i)?i.map(Ry):Ry(i),c={done:!1,value:t[0]},u=o4(n&&n.length===t.length?n:i4(t),e),h=n4(u,t,{ease:Array.isArray(l)?l:l4(t,l)});return{calculatedDuration:e,next:f=>(c.value=h(f),c.done=f>=e,c)}}const c4=e=>e!==null;function kf(e,{repeat:t,repeatType:n="loop"},i,l=1){const c=e.filter(c4),h=l<0||t&&n!=="loop"&&t%2===1?0:c.length-1;return!h||i===void 0?c[h]:i}const d4={decay:Em,inertia:Em,tween:zo,keyframes:zo,spring:Hc};function Ej(e){typeof e.type=="string"&&(e.type=d4[e.type])}class Mf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const u4=e=>e/100;class Of extends Mf{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,l;const{motionValue:n}=this.options;n&&n.updatedAt!==ls.now()&&this.tick(ls.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(l=(i=this.options).onStop)==null||l.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Ej(t);const{type:n=zo,repeat:i=0,repeatDelay:l=0,repeatType:c,velocity:u=0}=t;let{keyframes:h}=t;const f=n||zo;f!==zo&&typeof h[0]!="number"&&(this.mixKeyframes=sl(u4,Sj(h[0],h[1])),h=[0,100]);const p=f({...t,keyframes:h});c==="mirror"&&(this.mirroredGenerator=f({...t,keyframes:[...h].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=Af(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+l,this.totalDuration=this.resolvedDuration*(i+1)-l,this.generator=p}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:l,mixKeyframes:c,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:g,repeat:y,repeatType:b,repeatDelay:w,type:_,onUpdate:N,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const R=this.currentTime-p*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?R<0:R>l;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let k=this.currentTime,E=i;if(y){const U=Math.min(this.currentTime,l)/h;let I=Math.floor(U),V=U%1;!V&&U>=1&&(V=1),V===1&&I--,I=Math.min(I,y+1),!!(I%2)&&(b==="reverse"?(V=1-V,w&&(V-=w/h)):b==="mirror"&&(E=u)),k=Ma(0,1,V)*h}const j=S?{done:!1,value:g[0]}:E.next(k);c&&(j.value=c(j.value));let{done:M}=j;!S&&f!==null&&(M=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return z&&_!==Em&&(j.value=kf(g,this.options,T,this.speed)),N&&N(j.value),z&&this.finish(),j}then(t,n){return this.finished.then(t,n)}get duration(){return na(this.calculatedDuration)}get time(){return na(this.currentTime)}set time(t){var n;t=aa(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ls.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=na(this.currentTime))}play(){var l,c;if(this.isStopped)return;const{driver:t=XC,startTime:n}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),(c=(l=this.options).onPlay)==null||c.call(l);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ls.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function h4(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Fn=e=>e*180/Math.PI,Am=e=>{const t=Fn(Math.atan2(e[1],e[0]));return km(t)},m4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Am,rotateZ:Am,skewX:e=>Fn(Math.atan(e[1])),skewY:e=>Fn(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},km=e=>(e=e%360,e<0&&(e+=360),e),Vy=Am,Uy=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),qy=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),f4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Uy,scaleY:qy,scale:e=>(Uy(e)+qy(e))/2,rotateX:e=>km(Fn(Math.atan2(e[6],e[5]))),rotateY:e=>km(Fn(Math.atan2(-e[2],e[0]))),rotateZ:Vy,rotate:Vy,skewX:e=>Fn(Math.atan(e[4])),skewY:e=>Fn(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Mm(e){return e.includes("scale")?1:0}function Om(e,t){if(!e||e==="none")return Mm(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,l;if(n)i=f4,l=n;else{const h=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=m4,l=h}if(!l)return Mm(t);const c=i[t],u=l[1].split(",").map(g4);return typeof c=="function"?c(u):u[c]}const p4=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Om(n,t)};function g4(e){return parseFloat(e.trim())}const vi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ji=new Set(vi),Fy=e=>e===bi||e===Oe,x4=new Set(["x","y","z"]),y4=vi.filter(e=>!x4.has(e));function b4(e){const t=[];return y4.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const In={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Om(t,"x"),y:(e,{transform:t})=>Om(t,"y")};In.translateX=In.x;In.translateY=In.y;const Gn=new Set;let Dm=!1,Rm=!1,Pm=!1;function Aj(){if(Rm){const e=Array.from(Gn).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const l=b4(i);l.length&&(n.set(i,l),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const l=n.get(i);l&&l.forEach(([c,u])=>{var h;(h=i.getValue(c))==null||h.set(u)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Rm=!1,Dm=!1,Gn.forEach(e=>e.complete(Pm)),Gn.clear()}function kj(){Gn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Rm=!0)})}function v4(){Pm=!0,kj(),Aj(),Pm=!1}class Df{constructor(t,n,i,l,c,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=l,this.element=c,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Gn.add(this),Dm||(Dm=!0,ot.read(kj),ot.resolveKeyframes(Aj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:l}=this;if(t[0]===null){const c=l==null?void 0:l.get(),u=t[t.length-1];if(c!==void 0)t[0]=c;else if(i&&n){const h=i.readValue(n,u);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=u),l&&c===void 0&&l.set(t[0])}h4(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Gn.delete(this)}cancel(){this.state==="scheduled"&&(Gn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const j4=e=>e.startsWith("--");function w4(e,t,n){j4(t)?e.style.setProperty(t,n):e.style[t]=n}const _4=vf(()=>window.ScrollTimeline!==void 0),N4={};function S4(e,t){const n=vf(e);return()=>N4[t]??n()}const Mj=S4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Mo=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,Hy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mo([0,.65,.55,1]),circOut:Mo([.55,0,1,.45]),backIn:Mo([.31,.01,.66,-.59]),backOut:Mo([.33,1.53,.69,.99])};function Oj(e,t){if(e)return typeof e=="function"?Mj()?Tj(e,t):"ease-out":gj(e)?Mo(e):Array.isArray(e)?e.map(n=>Oj(n,t)||Hy.easeOut):Hy[e]}function T4(e,t,n,{delay:i=0,duration:l=300,repeat:c=0,repeatType:u="loop",ease:h="easeOut",times:f}={},p=void 0){const g={[t]:n};f&&(g.offset=f);const y=Oj(h,l);Array.isArray(y)&&(g.easing=y);const b={delay:i,duration:l,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:c+1,direction:u==="reverse"?"alternate":"normal"};return p&&(b.pseudoElement=p),e.animate(g,b)}function Dj(e){return typeof e=="function"&&"applyToOptions"in e}function C4({type:e,...t}){return Dj(e)&&Mj()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class E4 extends Mf{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:l,pseudoElement:c,allowFlatten:u=!1,finalKeyframe:h,onComplete:f}=t;this.isPseudoElement=!!c,this.allowFlatten=u,this.options=t,bf(typeof t.type!="string");const p=C4(t);this.animation=T4(n,i,l,p,c),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const g=kf(l,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):w4(n,i,g),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return na(Number(t))}get time(){return na(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=aa(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&_4()?(this.animation.timeline=t,Ds):n(this)}}const Rj={anticipate:hj,backInOut:uj,circInOut:fj};function A4(e){return e in Rj}function k4(e){typeof e.ease=="string"&&A4(e.ease)&&(e.ease=Rj[e.ease])}const Iy=10;class M4 extends E4{constructor(t){k4(t),Ej(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:l,element:c,...u}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const h=new Of({...u,autoplay:!1}),f=aa(this.finishedTime??this.time);n.setWithVelocity(h.sample(f-Iy).value,h.sample(f).value,Iy),h.stop()}}const Gy=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mn.test(e)||e==="0")&&!e.startsWith("url("));function O4(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function D4(e,t,n,i){const l=e[0];if(l===null)return!1;if(t==="display"||t==="visibility")return!0;const c=e[e.length-1],u=Gy(l,t),h=Gy(c,t);return!u||!h?!1:O4(e)||(n==="spring"||Dj(n))&&i}function zm(e){e.duration=0,e.type}const R4=new Set(["opacity","clipPath","filter","transform"]),P4=vf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function z4(e){var g;const{motionValue:t,name:n,repeatDelay:i,repeatType:l,damping:c,type:u}=e;if(!(((g=t==null?void 0:t.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=t.owner.getProps();return P4()&&n&&R4.has(n)&&(n!=="transform"||!p)&&!f&&!i&&l!=="mirror"&&c!==0&&u!=="inertia"}const L4=40;class B4 extends Mf{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",keyframes:h,name:f,motionValue:p,element:g,...y}){var _;super(),this.stop=()=>{var N,T;this._animation&&(this._animation.stop(),(N=this.stopTimeline)==null||N.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=ls.now();const b={autoplay:t,delay:n,type:i,repeat:l,repeatDelay:c,repeatType:u,name:f,motionValue:p,element:g,...y},w=(g==null?void 0:g.KeyframeResolver)||Df;this.keyframeResolver=new w(h,(N,T,R)=>this.onKeyframesResolved(N,T,b,!R),f,p,g),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(t,n,i,l){this.keyframeResolver=void 0;const{name:c,type:u,velocity:h,delay:f,isHandoff:p,onUpdate:g}=i;this.resolvedAt=ls.now(),D4(t,c,u,h)||((Oa.instantAnimations||!f)&&(g==null||g(kf(t,i,n))),t[0]=t[t.length-1],zm(i),i.repeat=0);const b={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>L4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},w=!p&&z4(b)?new M4({...b,element:b.motionValue.owner.current}):new Of(b);w.finished.then(()=>this.notifyFinished()).catch(Ds),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),v4()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const $4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function V4(e){const t=$4.exec(e);if(!t)return[,];const[,n,i,l]=t;return[`--${n??i}`,l]}function Pj(e,t,n=1){const[i,l]=V4(e);if(!i)return;const c=window.getComputedStyle(t).getPropertyValue(i);if(c){const u=c.trim();return aj(u)?parseFloat(u):u}return Sf(l)?Pj(l,t,n+1):l}function Rf(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const zj=new Set(["width","height","top","left","right","bottom",...vi]),U4={test:e=>e==="auto",parse:e=>e},Lj=e=>t=>t.test(e),Bj=[bi,Oe,ra,cn,OC,MC,U4],Yy=e=>Bj.find(Lj(e));function q4(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||rj(e):!0}const F4=new Set(["brightness","contrast","saturate","opacity"]);function H4(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Tf)||[];if(!i)return e;const l=n.replace(i,"");let c=F4.has(t)?1:0;return i!==n&&(c*=100),t+"("+c+l+")"}const I4=/\b([a-z-]*)\(.*?\)/gu,Lm={...mn,getAnimatableNone:e=>{const t=e.match(I4);return t?t.map(H4).join(" "):e}},Xy={...bi,transform:Math.round},G4={rotate:cn,rotateX:cn,rotateY:cn,rotateZ:cn,scale:Cc,scaleX:Cc,scaleY:Cc,scaleZ:Cc,skew:cn,skewX:cn,skewY:cn,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:Io,originX:Py,originY:Py,originZ:Oe},Pf={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe,...G4,zIndex:Xy,fillOpacity:Io,strokeOpacity:Io,numOctaves:Xy},Y4={...Pf,color:Nt,backgroundColor:Nt,outlineColor:Nt,fill:Nt,stroke:Nt,borderColor:Nt,borderTopColor:Nt,borderRightColor:Nt,borderBottomColor:Nt,borderLeftColor:Nt,filter:Lm,WebkitFilter:Lm},$j=e=>Y4[e];function Vj(e,t){let n=$j(e);return n!==Lm&&(n=mn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const X4=new Set(["auto","none","0"]);function K4(e,t,n){let i=0,l;for(;i<e.length&&!l;){const c=e[i];typeof c=="string"&&!X4.has(c)&&Go(c).values.length&&(l=e[i]),i++}if(l&&n)for(const c of t)e[c]=Vj(n,l)}class W4 extends Df{constructor(t,n,i,l,c){super(t,n,i,l,c,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<t.length;f++){let p=t[f];if(typeof p=="string"&&(p=p.trim(),Sf(p))){const g=Pj(p,n.current);g!==void 0&&(t[f]=g),f===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!zj.has(i)||t.length!==2)return;const[l,c]=t,u=Yy(l),h=Yy(c);if(u!==h)if(Fy(u)&&Fy(h))for(let f=0;f<t.length;f++){const p=t[f];typeof p=="string"&&(t[f]=parseFloat(p))}else In[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let l=0;l<t.length;l++)(t[l]===null||q4(t[l]))&&i.push(l);i.length&&K4(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=In[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const l=n[n.length-1];l!==void 0&&t.getValue(i,l).jump(l,!1)}measureEndState(){var h;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const l=t.getValue(n);l&&l.jump(this.measuredOrigin,!1);const c=i.length-1,u=i[c];i[c]=In[n](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([f,p])=>{t.getValue(f).set(p)}),this.resolveNoneKeyframes()}}function Q4(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const l=(n==null?void 0:n[e])??i.querySelectorAll(e);return l?Array.from(l):[]}return Array.from(e)}const Uj=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function qj(e){return nj(e)&&"offsetHeight"in e}const Ky=30,Z4=e=>!isNaN(parseFloat(e));class J4{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var c;const l=ls.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ls.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Z4(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new jf);const i=this.events[t].add(n);return t==="change"?()=>{i(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ls.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Ky)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ky);return ij(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ui(e,t){return new J4(e,t)}const{schedule:zf}=xj(queueMicrotask,!1),Bs={x:!1,y:!1};function Fj(){return Bs.x||Bs.y}function eE(e){return e==="x"||e==="y"?Bs[e]?null:(Bs[e]=!0,()=>{Bs[e]=!1}):Bs.x||Bs.y?null:(Bs.x=Bs.y=!0,()=>{Bs.x=Bs.y=!1})}function Hj(e,t){const n=Q4(e),i=new AbortController,l={passive:!0,...t,signal:i.signal};return[n,l,()=>i.abort()]}function Wy(e){return!(e.pointerType==="touch"||Fj())}function tE(e,t,n={}){const[i,l,c]=Hj(e,n),u=h=>{if(!Wy(h))return;const{target:f}=h,p=t(f,h);if(typeof p!="function"||!f)return;const g=y=>{Wy(y)&&(p(y),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,l)};return i.forEach(h=>{h.addEventListener("pointerenter",u,l)}),c}const Ij=(e,t)=>t?e===t?!0:Ij(e,t.parentElement):!1,Lf=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,sE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aE(e){return sE.has(e.tagName)||e.tabIndex!==-1}const Dc=new WeakSet;function Qy(e){return t=>{t.key==="Enter"&&e(t)}}function Zh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const nE=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=Qy(()=>{if(Dc.has(n))return;Zh(n,"down");const l=Qy(()=>{Zh(n,"up")}),c=()=>Zh(n,"cancel");n.addEventListener("keyup",l,t),n.addEventListener("blur",c,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function Zy(e){return Lf(e)&&!Fj()}function rE(e,t,n={}){const[i,l,c]=Hj(e,n),u=h=>{const f=h.currentTarget;if(!Zy(h))return;Dc.add(f);const p=t(f,h),g=(w,_)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",b),Dc.has(f)&&Dc.delete(f),Zy(w)&&typeof p=="function"&&p(w,{success:_})},y=w=>{g(w,f===window||f===document||n.useGlobalTarget||Ij(f,w.target))},b=w=>{g(w,!1)};window.addEventListener("pointerup",y,l),window.addEventListener("pointercancel",b,l)};return i.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,l),qj(h)&&(h.addEventListener("focus",p=>nE(p,l)),!aE(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),c}function Gj(e){return nj(e)&&"ownerSVGElement"in e}function iE(e){return Gj(e)&&e.tagName==="svg"}const Xt=e=>!!(e&&e.getVelocity),oE=[...Bj,Nt,mn],lE=e=>oE.find(Lj(e)),Bf=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class cE extends v.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,l=qj(i)&&i.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=l-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dE({children:e,isPresent:t,anchorX:n,root:i}){const l=v.useId(),c=v.useRef(null),u=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=v.useContext(Bf);return v.useInsertionEffect(()=>{const{width:f,height:p,top:g,left:y,right:b}=u.current;if(t||!c.current||!f||!p)return;const w=n==="left"?`left: ${y}`:`right: ${b}`;c.current.dataset.motionPopId=l;const _=document.createElement("style");h&&(_.nonce=h);const N=i??document.head;return N.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${p}px !important;
            ${w}px !important;
            top: ${g}px !important;
          }
        `),()=>{N.contains(_)&&N.removeChild(_)}},[t]),s.jsx(cE,{isPresent:t,childRef:c,sizeRef:u,children:v.cloneElement(e,{ref:c})})}const uE=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:l,presenceAffectsLayout:c,mode:u,anchorX:h,root:f})=>{const p=pf(hE),g=v.useId();let y=!0,b=v.useMemo(()=>(y=!1,{id:g,initial:t,isPresent:n,custom:l,onExitComplete:w=>{p.set(w,!0);for(const _ of p.values())if(!_)return;i&&i()},register:w=>(p.set(w,!1),()=>p.delete(w))}),[n,p,i]);return c&&y&&(b={...b}),v.useMemo(()=>{p.forEach((w,_)=>p.set(_,!1))},[n]),v.useEffect(()=>{!n&&!p.size&&i&&i()},[n]),u==="popLayout"&&(e=s.jsx(dE,{isPresent:n,anchorX:h,root:f,children:e})),s.jsx(ld.Provider,{value:b,children:e})};function hE(){return new Map}function Yj(e=!0){const t=v.useContext(ld);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:l}=t,c=v.useId();v.useEffect(()=>{if(e)return l(c)},[e]);const u=v.useCallback(()=>e&&i&&i(c),[c,i,e]);return!n&&i?[!1,u]:[!0]}const Ec=e=>e.key||"";function Jy(e){const t=[];return v.Children.forEach(e,n=>{v.isValidElement(n)&&t.push(n)}),t}const Zn=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:c="sync",propagate:u=!1,anchorX:h="left",root:f})=>{const[p,g]=Yj(u),y=v.useMemo(()=>Jy(e),[e]),b=u&&!p?[]:y.map(Ec),w=v.useRef(!0),_=v.useRef(y),N=pf(()=>new Map),[T,R]=v.useState(y),[S,k]=v.useState(y);sj(()=>{w.current=!1,_.current=y;for(let M=0;M<S.length;M++){const z=Ec(S[M]);b.includes(z)?N.delete(z):N.get(z)!==!0&&N.set(z,!1)}},[S,b.length,b.join("-")]);const E=[];if(y!==T){let M=[...y];for(let z=0;z<S.length;z++){const U=S[z],I=Ec(U);b.includes(I)||(M.splice(z,0,U),E.push(U))}return c==="wait"&&E.length&&(M=E),k(Jy(M)),R(y),null}const{forceRender:j}=v.useContext(ff);return s.jsx(s.Fragment,{children:S.map(M=>{const z=Ec(M),U=u&&!p?!1:y===S||b.includes(z),I=()=>{if(N.has(z))N.set(z,!0);else return;let V=!0;N.forEach(Q=>{Q||(V=!1)}),V&&(j==null||j(),k(_.current),u&&(g==null||g()),i&&i())};return s.jsx(uE,{isPresent:U,initial:!w.current||n?void 0:!1,custom:t,presenceAffectsLayout:l,mode:c,root:f,onExitComplete:U?void 0:I,anchorX:h,children:M},z)})})},Xj=v.createContext({strict:!1}),eb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hi={};for(const e in eb)hi[e]={isEnabled:t=>eb[e].some(n=>!!t[n])};function mE(e){for(const t in e)hi[t]={...hi[t],...e[t]}}const fE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ic(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||fE.has(e)}let Kj=e=>!Ic(e);function pE(e){typeof e=="function"&&(Kj=t=>t.startsWith("on")?!Ic(t):e(t))}try{pE(require("@emotion/is-prop-valid").default)}catch{}function gE(e,t,n){const i={};for(const l in e)l==="values"&&typeof e.values=="object"||(Kj(l)||n===!0&&Ic(l)||!t&&!Ic(l)||e.draggable&&l.startsWith("onDrag"))&&(i[l]=e[l]);return i}const cd=v.createContext({});function dd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Yo(e){return typeof e=="string"||Array.isArray(e)}const $f=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Vf=["initial",...$f];function ud(e){return dd(e.animate)||Vf.some(t=>Yo(e[t]))}function Wj(e){return!!(ud(e)||e.variants)}function xE(e,t){if(ud(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Yo(n)?n:void 0,animate:Yo(i)?i:void 0}}return e.inherit!==!1?t:{}}function yE(e){const{initial:t,animate:n}=xE(e,v.useContext(cd));return v.useMemo(()=>({initial:t,animate:n}),[tb(t),tb(n)])}function tb(e){return Array.isArray(e)?e.join(" "):e}const Xo={};function bE(e){for(const t in e)Xo[t]=e[t],Nf(t)&&(Xo[t].isCSSVariable=!0)}function Qj(e,{layout:t,layoutId:n}){return ji.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Xo[e]||e==="opacity")}const vE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jE=vi.length;function wE(e,t,n){let i="",l=!0;for(let c=0;c<jE;c++){const u=vi[c],h=e[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const p=Uj(h,Pf[u]);if(!f){l=!1;const g=vE[u]||u;i+=`${g}(${p}) `}n&&(t[u]=p)}}return i=i.trim(),n?i=n(t,l?"":i):l&&(i="none"),i}function Uf(e,t,n){const{style:i,vars:l,transformOrigin:c}=e;let u=!1,h=!1;for(const f in t){const p=t[f];if(ji.has(f)){u=!0;continue}else if(Nf(f)){l[f]=p;continue}else{const g=Uj(p,Pf[f]);f.startsWith("origin")?(h=!0,c[f]=g):i[f]=g}}if(t.transform||(u||n?i.transform=wE(t,e.transform,n):i.transform&&(i.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:g=0}=c;i.transformOrigin=`${f} ${p} ${g}`}}const qf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Zj(e,t,n){for(const i in t)!Xt(t[i])&&!Qj(i,n)&&(e[i]=t[i])}function _E({transformTemplate:e},t){return v.useMemo(()=>{const n=qf();return Uf(n,t,e),Object.assign({},n.vars,n.style)},[t])}function NE(e,t){const n=e.style||{},i={};return Zj(i,n,e),Object.assign(i,_E(e,t)),i}function SE(e,t){const n={},i=NE(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const TE={offset:"stroke-dashoffset",array:"stroke-dasharray"},CE={offset:"strokeDashoffset",array:"strokeDasharray"};function EE(e,t,n=1,i=0,l=!0){e.pathLength=1;const c=l?TE:CE;e[c.offset]=Oe.transform(-i);const u=Oe.transform(t),h=Oe.transform(n);e[c.array]=`${u} ${h}`}function Jj(e,{attrX:t,attrY:n,attrScale:i,pathLength:l,pathSpacing:c=1,pathOffset:u=0,...h},f,p,g){if(Uf(e,h,p),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:y,style:b}=e;y.transform&&(b.transform=y.transform,delete y.transform),(b.transform||y.transformOrigin)&&(b.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),b.transform&&(b.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),t!==void 0&&(y.x=t),n!==void 0&&(y.y=n),i!==void 0&&(y.scale=i),l!==void 0&&EE(y,l,c,u,!1)}const ew=()=>({...qf(),attrs:{}}),tw=e=>typeof e=="string"&&e.toLowerCase()==="svg";function AE(e,t,n,i){const l=v.useMemo(()=>{const c=ew();return Jj(c,t,tw(i),e.transformTemplate,e.style),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};Zj(c,e.style,e),l.style={...c,...l.style}}return l}const kE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ff(e){return typeof e!="string"||e.includes("-")?!1:!!(kE.indexOf(e)>-1||/[A-Z]/u.test(e))}function ME(e,t,n,{latestValues:i},l,c=!1){const h=(Ff(e)?AE:SE)(t,i,l,e),f=gE(t,typeof e=="string",c),p=e!==v.Fragment?{...f,...h,ref:n}:{},{children:g}=t,y=v.useMemo(()=>Xt(g)?g.get():g,[g]);return v.createElement(e,{...p,children:y})}function sb(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function Hf(e,t,n,i){if(typeof t=="function"){const[l,c]=sb(i);t=t(n!==void 0?n:e.custom,l,c)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[l,c]=sb(i);t=t(n!==void 0?n:e.custom,l,c)}return t}function Rc(e){return Xt(e)?e.get():e}function OE({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,l){return{latestValues:DE(n,i,l,e),renderState:t()}}function DE(e,t,n,i){const l={},c=i(e,{});for(const b in c)l[b]=Rc(c[b]);let{initial:u,animate:h}=e;const f=ud(e),p=Wj(e);t&&p&&!f&&e.inherit!==!1&&(u===void 0&&(u=t.initial),h===void 0&&(h=t.animate));let g=n?n.initial===!1:!1;g=g||u===!1;const y=g?h:u;if(y&&typeof y!="boolean"&&!dd(y)){const b=Array.isArray(y)?y:[y];for(let w=0;w<b.length;w++){const _=Hf(e,b[w]);if(_){const{transitionEnd:N,transition:T,...R}=_;for(const S in R){let k=R[S];if(Array.isArray(k)){const E=g?k.length-1:0;k=k[E]}k!==null&&(l[S]=k)}for(const S in N)l[S]=N[S]}}}return l}const sw=e=>(t,n)=>{const i=v.useContext(cd),l=v.useContext(ld),c=()=>OE(e,t,i,l);return n?c():pf(c)};function If(e,t,n){var c;const{style:i}=e,l={};for(const u in i)(Xt(i[u])||t.style&&Xt(t.style[u])||Qj(u,e)||((c=n==null?void 0:n.getValue(u))==null?void 0:c.liveStyle)!==void 0)&&(l[u]=i[u]);return l}const RE=sw({scrapeMotionValuesFromProps:If,createRenderState:qf});function aw(e,t,n){const i=If(e,t,n);for(const l in e)if(Xt(e[l])||Xt(t[l])){const c=vi.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;i[c]=e[l]}return i}const PE=sw({scrapeMotionValuesFromProps:aw,createRenderState:ew}),zE=Symbol.for("motionComponentSymbol");function ni(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function LE(e,t,n){return v.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):ni(n)&&(n.current=i))},[t])}const Gf=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BE="framerAppearId",nw="data-"+Gf(BE),rw=v.createContext({});function $E(e,t,n,i,l){var N,T;const{visualElement:c}=v.useContext(cd),u=v.useContext(Xj),h=v.useContext(ld),f=v.useContext(Bf).reducedMotion,p=v.useRef(null);i=i||u.renderer,!p.current&&i&&(p.current=i(e,{visualState:t,parent:c,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=p.current,y=v.useContext(rw);g&&!g.projection&&l&&(g.type==="html"||g.type==="svg")&&VE(p.current,n,l,y);const b=v.useRef(!1);v.useInsertionEffect(()=>{g&&b.current&&g.update(n,h)});const w=n[nw],_=v.useRef(!!w&&!((N=window.MotionHandoffIsComplete)!=null&&N.call(window,w))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,w)));return sj(()=>{g&&(b.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),_.current&&g.animationState&&g.animationState.animateChanges())}),v.useEffect(()=>{g&&(!_.current&&g.animationState&&g.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)==null||R.call(window,w)}),_.current=!1),g.enteringChildren=void 0)}),g}function VE(e,t,n,i){const{layoutId:l,layout:c,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p,layoutCrossfade:g}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:iw(e.parent)),e.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||h&&ni(h),visualElement:e,animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:f,layoutRoot:p})}function iw(e){if(e)return e.options.allowProjection!==!1?e.projection:iw(e.parent)}function Jh(e,{forwardMotionProps:t=!1}={},n,i){n&&mE(n);const l=Ff(e)?PE:RE;function c(h,f){let p;const g={...v.useContext(Bf),...h,layoutId:UE(h)},{isStatic:y}=g,b=yE(h),w=l(h,y);if(!y&&gf){qE();const _=FE(g);p=_.MeasureLayout,b.visualElement=$E(e,w,g,i,_.ProjectionNode)}return s.jsxs(cd.Provider,{value:b,children:[p&&b.visualElement?s.jsx(p,{visualElement:b.visualElement,...g}):null,ME(e,h,LE(w,b.visualElement,f),w,y,t)]})}c.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const u=v.forwardRef(c);return u[zE]=e,u}function UE({layoutId:e}){const t=v.useContext(ff).id;return t&&e!==void 0?t+"-"+e:e}function qE(e,t){v.useContext(Xj).strict}function FE(e){const{drag:t,layout:n}=hi;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function HE(e,t){if(typeof Proxy>"u")return Jh;const n=new Map,i=(c,u)=>Jh(c,u,e,t),l=(c,u)=>i(c,u);return new Proxy(l,{get:(c,u)=>u==="create"?i:(n.has(u)||n.set(u,Jh(u,void 0,e,t)),n.get(u))})}function ow({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function IE({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function GE(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function em(e){return e===void 0||e===1}function Bm({scale:e,scaleX:t,scaleY:n}){return!em(e)||!em(t)||!em(n)}function $n(e){return Bm(e)||lw(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function lw(e){return ab(e.x)||ab(e.y)}function ab(e){return e&&e!=="0%"}function Gc(e,t,n){const i=e-n,l=t*i;return n+l}function nb(e,t,n,i,l){return l!==void 0&&(e=Gc(e,l,i)),Gc(e,n,i)+t}function $m(e,t=0,n=1,i,l){e.min=nb(e.min,t,n,i,l),e.max=nb(e.max,t,n,i,l)}function cw(e,{x:t,y:n}){$m(e.x,t.translate,t.scale,t.originPoint),$m(e.y,n.translate,n.scale,n.originPoint)}const rb=.999999999999,ib=1.0000000000001;function YE(e,t,n,i=!1){const l=n.length;if(!l)return;t.x=t.y=1;let c,u;for(let h=0;h<l;h++){c=n[h],u=c.projectionDelta;const{visualElement:f}=c.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ii(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,cw(e,u)),i&&$n(c.latestValues)&&ii(e,c.latestValues))}t.x<ib&&t.x>rb&&(t.x=1),t.y<ib&&t.y>rb&&(t.y=1)}function ri(e,t){e.min=e.min+t,e.max=e.max+t}function ob(e,t,n,i,l=.5){const c=dt(e.min,e.max,l);$m(e,t,n,c,i)}function ii(e,t){ob(e.x,t.x,t.scaleX,t.scale,t.originX),ob(e.y,t.y,t.scaleY,t.scale,t.originY)}function dw(e,t){return ow(GE(e.getBoundingClientRect(),t))}function XE(e,t,n){const i=dw(e,n),{scroll:l}=t;return l&&(ri(i.x,l.offset.x),ri(i.y,l.offset.y)),i}const lb=()=>({translate:0,scale:1,origin:0,originPoint:0}),oi=()=>({x:lb(),y:lb()}),cb=()=>({min:0,max:0}),xt=()=>({x:cb(),y:cb()}),Vm={current:null},uw={current:!1};function KE(){if(uw.current=!0,!!gf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Vm.current=e.matches;e.addEventListener("change",t),t()}else Vm.current=!1}const WE=new WeakMap;function QE(e,t,n){for(const i in t){const l=t[i],c=n[i];if(Xt(l))e.addValue(i,l);else if(Xt(c))e.addValue(i,ui(l,{owner:e}));else if(c!==l)if(e.hasValue(i)){const u=e.getValue(i);u.liveStyle===!0?u.jump(l):u.hasAnimated||u.set(l)}else{const u=e.getStaticValue(i);e.addValue(i,ui(u!==void 0?u:l,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const db=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZE{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:l,blockInitialAnimation:c,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Df,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=ls.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,ot.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=h,this.blockInitialAnimation=!!c,this.isControllingVariants=ud(n),this.isVariantNode=Wj(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in y){const w=y[b];f[b]!==void 0&&Xt(w)&&w.set(f[b])}}mount(t){var n;this.current=t,WE.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,l)=>this.bindToMotionValue(l,i)),uw.current||KE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Vm.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),hn(this.notifyUpdate),hn(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=ji.has(t);i&&this.onBindTransform&&this.onBindTransform();const l=n.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&ot.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{l(),c&&c(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in hi){const n=hi[t];if(!n)continue;const{isEnabled:i,Feature:l}=n;if(!this.features[t]&&l&&i(this.props)&&(this.features[t]=new l(this)),this.features[t]){const c=this.features[t];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<db.length;i++){const l=db[i];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const c="on"+l,u=t[c];u&&(this.propEventSubscriptions[l]=this.on(l,u))}this.prevMotionValues=QE(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=ui(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(aj(i)||rj(i))?i=parseFloat(i):!lE(i)&&mn.test(n)&&(i=Vj(t,n)),this.setBaseTarget(t,Xt(i)?i.get():i)),Xt(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var c;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const u=Hf(this.props,n,(c=this.presenceContext)==null?void 0:c.custom);u&&(i=u[t])}if(n&&i!==void 0)return i;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!Xt(l)?l:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new jf),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){zf.render(this.render)}}class hw extends ZE{constructor(){super(...arguments),this.KeyframeResolver=W4}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Xt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function mw(e,{style:t,vars:n},i,l){const c=e.style;let u;for(u in t)c[u]=t[u];l==null||l.applyProjectionStyles(c,i);for(u in n)c.setProperty(u,n[u])}function JE(e){return window.getComputedStyle(e)}class e6 extends hw{constructor(){super(...arguments),this.type="html",this.renderInstance=mw}readValueFromInstance(t,n){var i;if(ji.has(n))return(i=this.projection)!=null&&i.isProjecting?Mm(n):p4(t,n);{const l=JE(t),c=(Nf(n)?l.getPropertyValue(n):l[n])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(t,{transformPagePoint:n}){return dw(t,n)}build(t,n,i){Uf(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return If(t,n,i)}}const fw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function t6(e,t,n,i){mw(e,t,void 0,i);for(const l in t.attrs)e.setAttribute(fw.has(l)?l:Gf(l),t.attrs[l])}class s6 extends hw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ji.has(n)){const i=$j(n);return i&&i.default||0}return n=fw.has(n)?n:Gf(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return aw(t,n,i)}build(t,n,i){Jj(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,l){t6(t,n,i,l)}mount(t){this.isSVGTag=tw(t.tagName),super.mount(t)}}const a6=(e,t)=>Ff(e)?new s6(t):new e6(t,{allowProjection:e!==v.Fragment});function li(e,t,n){const i=e.getProps();return Hf(i,t,n!==void 0?n:i.custom,e)}const Um=e=>Array.isArray(e);function n6(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ui(n))}function r6(e){return Um(e)?e[e.length-1]||0:e}function i6(e,t){const n=li(e,t);let{transitionEnd:i={},transition:l={},...c}=n||{};c={...c,...i};for(const u in c){const h=r6(c[u]);n6(e,u,h)}}function o6(e){return!!(Xt(e)&&e.add)}function qm(e,t){const n=e.getValue("willChange");if(o6(n))return n.add(t);if(!n&&Oa.WillChange){const i=new Oa.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function pw(e){return e.props[nw]}const l6=e=>e!==null;function c6(e,{repeat:t,repeatType:n="loop"},i){const l=e.filter(l6),c=t&&n!=="loop"&&t%2===1?0:l.length-1;return l[c]}const d6={type:"spring",stiffness:500,damping:25,restSpeed:10},u6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),h6={type:"keyframes",duration:.8},m6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},f6=(e,{keyframes:t})=>t.length>2?h6:ji.has(e)?e.startsWith("scale")?u6(t[1]):d6:m6;function p6({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:l,repeat:c,repeatType:u,repeatDelay:h,from:f,elapsed:p,...g}){return!!Object.keys(g).length}const Yf=(e,t,n,i={},l,c)=>u=>{const h=Rf(i,e)||{},f=h.delay||i.delay||0;let{elapsed:p=0}=i;p=p-aa(f);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-p,onUpdate:b=>{t.set(b),h.onUpdate&&h.onUpdate(b)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:e,motionValue:t,element:c?void 0:l};p6(h)||Object.assign(g,f6(e,g)),g.duration&&(g.duration=aa(g.duration)),g.repeatDelay&&(g.repeatDelay=aa(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(zm(g),g.delay===0&&(y=!0)),(Oa.instantAnimations||Oa.skipAnimations)&&(y=!0,zm(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,y&&!c&&t.get()!==void 0){const b=c6(g.keyframes,h);if(b!==void 0){ot.update(()=>{g.onUpdate(b),g.onComplete()});return}}return h.isSync?new Of(g):new B4(g)};function g6({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function gw(e,t,{delay:n=0,transitionOverride:i,type:l}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:u,...h}=t;i&&(c=i);const f=[],p=l&&e.animationState&&e.animationState.getState()[l];for(const g in h){const y=e.getValue(g,e.latestValues[g]??null),b=h[g];if(b===void 0||p&&g6(p,g))continue;const w={delay:n,...Rf(c||{},g)},_=y.get();if(_!==void 0&&!y.isAnimating&&!Array.isArray(b)&&b===_&&!w.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const R=pw(e);if(R){const S=window.MotionHandoffAnimation(R,g,ot);S!==null&&(w.startTime=S,N=!0)}}qm(e,g),y.start(Yf(g,y,b,e.shouldReduceMotion&&zj.has(g)?{type:!1}:w,e,N));const T=y.animation;T&&f.push(T)}return u&&Promise.all(f).then(()=>{ot.update(()=>{u&&i6(e,u)})}),f}function xw(e,t,n,i=0,l=1){const c=Array.from(e).sort((p,g)=>p.sortNodePosition(g)).indexOf(t),u=e.size,h=(u-1)*i;return typeof n=="function"?n(c,u):l===1?c*i:h-c*i}function Fm(e,t,n={}){var f;const i=li(e,t,n.type==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(l=n.transitionOverride);const c=i?()=>Promise.all(gw(e,i,n)):()=>Promise.resolve(),u=e.variantChildren&&e.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:b}=l;return x6(e,t,p,g,y,b,n)}:()=>Promise.resolve(),{when:h}=l;if(h){const[p,g]=h==="beforeChildren"?[c,u]:[u,c];return p().then(()=>g())}else return Promise.all([c(),u(n.delay)])}function x6(e,t,n=0,i=0,l=0,c=1,u){const h=[];for(const f of e.variantChildren)f.notify("AnimationStart",t),h.push(Fm(f,t,{...u,delay:n+(typeof i=="function"?0:i)+xw(e.variantChildren,f,i,l,c)}).then(()=>f.notify("AnimationComplete",t)));return Promise.all(h)}function y6(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const l=t.map(c=>Fm(e,c,n));i=Promise.all(l)}else if(typeof t=="string")i=Fm(e,t,n);else{const l=typeof t=="function"?li(e,t,n.custom):t;i=Promise.all(gw(e,l,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function yw(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const b6=Vf.length;function bw(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?bw(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<b6;n++){const i=Vf[n],l=e.props[i];(Yo(l)||l===!1)&&(t[i]=l)}return t}const v6=[...$f].reverse(),j6=$f.length;function w6(e){return t=>Promise.all(t.map(({animation:n,options:i})=>y6(e,n,i)))}function _6(e){let t=w6(e),n=ub(),i=!0;const l=f=>(p,g)=>{var b;const y=li(e,g,f==="exit"?(b=e.presenceContext)==null?void 0:b.custom:void 0);if(y){const{transition:w,transitionEnd:_,...N}=y;p={...p,...N,..._}}return p};function c(f){t=f(e)}function u(f){const{props:p}=e,g=bw(e.parent)||{},y=[],b=new Set;let w={},_=1/0;for(let T=0;T<j6;T++){const R=v6[T],S=n[R],k=p[R]!==void 0?p[R]:g[R],E=Yo(k),j=R===f?S.isActive:null;j===!1&&(_=T);let M=k===g[R]&&k!==p[R]&&E;if(M&&i&&e.manuallyAnimateOnMount&&(M=!1),S.protectedKeys={...w},!S.isActive&&j===null||!k&&!S.prevProp||dd(k)||typeof k=="boolean")continue;const z=N6(S.prevProp,k);let U=z||R===f&&S.isActive&&!M&&E||T>_&&E,I=!1;const V=Array.isArray(k)?k:[k];let Q=V.reduce(l(R),{});j===!1&&(Q={});const{prevResolvedValues:K={}}=S,ie={...K,...Q},pe=P=>{U=!0,b.has(P)&&(I=!0,b.delete(P)),S.needsAnimating[P]=!0;const $=e.getValue(P);$&&($.liveStyle=!1)};for(const P in ie){const $=Q[P],Y=K[P];if(w.hasOwnProperty(P))continue;let A=!1;Um($)&&Um(Y)?A=!yw($,Y):A=$!==Y,A?$!=null?pe(P):b.add(P):$!==void 0&&b.has(P)?pe(P):S.protectedKeys[P]=!0}S.prevProp=k,S.prevResolvedValues=Q,S.isActive&&(w={...w,...Q}),i&&e.blockInitialAnimation&&(U=!1);const L=M&&z;U&&(!L||I)&&y.push(...V.map(P=>{const $={type:R};if(typeof P=="string"&&i&&!L&&e.manuallyAnimateOnMount&&e.parent){const{parent:Y}=e,A=li(Y,P);if(Y.enteringChildren&&A){const{delayChildren:F}=A.transition||{};$.delay=xw(Y.enteringChildren,e,F)}}return{animation:P,options:$}}))}if(b.size){const T={};if(typeof p.initial!="boolean"){const R=li(e,Array.isArray(p.initial)?p.initial[0]:p.initial);R&&R.transition&&(T.transition=R.transition)}b.forEach(R=>{const S=e.getBaseTarget(R),k=e.getValue(R);k&&(k.liveStyle=!0),T[R]=S??null}),y.push({animation:T})}let N=!!y.length;return i&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(N=!1),i=!1,N?t(y):Promise.resolve()}function h(f,p){var y;if(n[f].isActive===p)return Promise.resolve();(y=e.variantChildren)==null||y.forEach(b=>{var w;return(w=b.animationState)==null?void 0:w.setActive(f,p)}),n[f].isActive=p;const g=u(f);for(const b in n)n[b].protectedKeys={};return g}return{animateChanges:u,setActive:h,setAnimateFunction:c,getState:()=>n,reset:()=>{n=ub(),i=!0}}}function N6(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!yw(t,e):!1}function Ln(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ub(){return{animate:Ln(!0),whileInView:Ln(),whileHover:Ln(),whileTap:Ln(),whileDrag:Ln(),whileFocus:Ln(),exit:Ln()}}class gn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class S6 extends gn{constructor(t){super(t),t.animationState||(t.animationState=_6(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();dd(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let T6=0;class C6 extends gn{constructor(){super(...arguments),this.id=T6++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const l=this.node.animationState.setActive("exit",!t);n&&!t&&l.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const E6={animation:{Feature:S6},exit:{Feature:C6}};function Ko(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function rl(e){return{point:{x:e.pageX,y:e.pageY}}}const A6=e=>t=>Lf(t)&&e(t,rl(t));function Lo(e,t,n,i){return Ko(e,t,A6(n),i)}const vw=1e-4,k6=1-vw,M6=1+vw,jw=.01,O6=0-jw,D6=0+jw;function es(e){return e.max-e.min}function R6(e,t,n){return Math.abs(e-t)<=n}function hb(e,t,n,i=.5){e.origin=i,e.originPoint=dt(t.min,t.max,e.origin),e.scale=es(n)/es(t),e.translate=dt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=k6&&e.scale<=M6||isNaN(e.scale))&&(e.scale=1),(e.translate>=O6&&e.translate<=D6||isNaN(e.translate))&&(e.translate=0)}function Bo(e,t,n,i){hb(e.x,t.x,n.x,i?i.originX:void 0),hb(e.y,t.y,n.y,i?i.originY:void 0)}function mb(e,t,n){e.min=n.min+t.min,e.max=e.min+es(t)}function P6(e,t,n){mb(e.x,t.x,n.x),mb(e.y,t.y,n.y)}function fb(e,t,n){e.min=t.min-n.min,e.max=e.min+es(t)}function $o(e,t,n){fb(e.x,t.x,n.x),fb(e.y,t.y,n.y)}function Os(e){return[e("x"),e("y")]}const ww=({current:e})=>e?e.ownerDocument.defaultView:null,pb=(e,t)=>Math.abs(e-t);function z6(e,t){const n=pb(e.x,t.x),i=pb(e.y,t.y);return Math.sqrt(n**2+i**2)}class _w{constructor(t,n,{transformPagePoint:i,contextWindow:l=window,dragSnapToOrigin:c=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=sm(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,_=z6(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!_)return;const{point:N}=b,{timestamp:T}=Ut;this.history.push({...N,timestamp:T});const{onStart:R,onMove:S}=this.handlers;w||(R&&R(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,b)},this.handlePointerMove=(b,w)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=tm(w,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(b,w)=>{this.end();const{onEnd:_,onSessionEnd:N,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=sm(b.type==="pointercancel"?this.lastMoveEventInfo:tm(w,this.transformPagePoint),this.history);this.startEvent&&_&&_(b,R),N&&N(b,R)},!Lf(t))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=u,this.contextWindow=l||window;const h=rl(t),f=tm(h,this.transformPagePoint),{point:p}=f,{timestamp:g}=Ut;this.history=[{...p,timestamp:g}];const{onSessionStart:y}=n;y&&y(t,sm(f,this.history)),this.removeListeners=sl(Lo(this.contextWindow,"pointermove",this.handlePointerMove),Lo(this.contextWindow,"pointerup",this.handlePointerUp),Lo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),hn(this.updatePoint)}}function tm(e,t){return t?{point:t(e.point)}:e}function gb(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sm({point:e},t){return{point:e,delta:gb(e,Nw(t)),offset:gb(e,L6(t)),velocity:B6(t,.1)}}function L6(e){return e[0]}function Nw(e){return e[e.length-1]}function B6(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const l=Nw(e);for(;n>=0&&(i=e[n],!(l.timestamp-i.timestamp>aa(t)));)n--;if(!i)return{x:0,y:0};const c=na(l.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const u={x:(l.x-i.x)/c,y:(l.y-i.y)/c};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function $6(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?dt(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?dt(n,e,i.max):Math.min(e,n)),e}function xb(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function V6(e,{top:t,left:n,bottom:i,right:l}){return{x:xb(e.x,n,l),y:xb(e.y,t,i)}}function yb(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function U6(e,t){return{x:yb(e.x,t.x),y:yb(e.y,t.y)}}function q6(e,t){let n=.5;const i=es(e),l=es(t);return l>i?n=Ho(t.min,t.max-i,e.min):i>l&&(n=Ho(e.min,e.max-l,t.min)),Ma(0,1,n)}function F6(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Hm=.35;function H6(e=Hm){return e===!1?e=0:e===!0&&(e=Hm),{x:bb(e,"left","right"),y:bb(e,"top","bottom")}}function bb(e,t,n){return{min:vb(e,t),max:vb(e,n)}}function vb(e,t){return typeof e=="number"?e:e[t]||0}const I6=new WeakMap;class G6{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const c=y=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rl(y).point)},u=(y,b)=>{const{drag:w,dragPropagation:_,onDragStart:N}=this.getProps();if(w&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eE(w),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Os(R=>{let S=this.getAxisMotionValue(R).get()||0;if(ra.test(S)){const{projection:k}=this.visualElement;if(k&&k.layout){const E=k.layout.layoutBox[R];E&&(S=es(E)*(parseFloat(S)/100))}}this.originPoint[R]=S}),N&&ot.postRender(()=>N(y,b)),qm(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},h=(y,b)=>{this.latestPointerEvent=y,this.latestPanInfo=b;const{dragPropagation:w,dragDirectionLock:_,onDirectionLock:N,onDrag:T}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:R}=b;if(_&&this.currentDirection===null){this.currentDirection=Y6(R),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",b.point,R),this.updateAxis("y",b.point,R),this.visualElement.render(),T&&T(y,b)},f=(y,b)=>{this.latestPointerEvent=y,this.latestPanInfo=b,this.stop(y,b),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Os(y=>{var b;return this.getAnimationState(y)==="paused"&&((b=this.getAxisMotionValue(y).animation)==null?void 0:b.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new _w(t,{onSessionStart:c,onStart:u,onMove:h,onSessionEnd:f,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:ww(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,l=n||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!l||!i)return;const{velocity:u}=l;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&ot.postRender(()=>h(i,l))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:l}=this.getProps();if(!i||!Ac(t,l,this.currentDirection))return;const c=this.getAxisMotionValue(t);let u=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(u=$6(u,this.constraints[t],this.elastic[t])),c.set(u)}resolveConstraints(){var c;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(c=this.visualElement.projection)==null?void 0:c.layout,l=this.constraints;t&&ni(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=V6(i.layoutBox,t):this.constraints=!1,this.elastic=H6(n),l!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Os(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=F6(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ni(t))return!1;const i=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const c=XE(i,l.root,this.visualElement.getTransformPagePoint());let u=U6(l.layout.layoutBox,c);if(n){const h=n(IE(u));this.hasMutatedConstraints=!!h,h&&(u=ow(h))}return u}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:l,dragTransition:c,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=Os(g=>{if(!Ac(g,n,this.currentDirection))return;let y=f&&f[g]||{};u&&(y={min:0,max:0});const b=l?200:1e6,w=l?40:1e7,_={type:"inertia",velocity:i?t[g]:0,bounceStiffness:b,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...c,...y};return this.startAxisValueAnimation(g,_)});return Promise.all(p).then(h)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return qm(this.visualElement,t),i.start(Yf(t,i,0,n,this.visualElement,!1))}stopAnimation(){Os(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Os(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),l=i[n];return l||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Os(n=>{const{drag:i}=this.getProps();if(!Ac(n,i,this.currentDirection))return;const{projection:l}=this.visualElement,c=this.getAxisMotionValue(n);if(l&&l.layout){const{min:u,max:h}=l.layout.layoutBox[n];c.set(t[n]-dt(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ni(n)||!i||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Os(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();l[u]=q6({min:f,max:f},this.constraints[u])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Os(u=>{if(!Ac(u,t,null))return;const h=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];h.set(dt(f,p,l[u]))})}addListeners(){if(!this.visualElement.current)return;I6.set(this.visualElement,this);const t=this.visualElement.current,n=Lo(t,"pointerdown",f=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();ni(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,c=l.addEventListener("measure",i);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),ot.read(i);const u=Ko(window,"resize",()=>this.scalePositionWithinConstraints()),h=l.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(Os(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())});return()=>{u(),n(),c(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:l=!1,dragConstraints:c=!1,dragElastic:u=Hm,dragMomentum:h=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:l,dragConstraints:c,dragElastic:u,dragMomentum:h}}}function Ac(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Y6(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class X6 extends gn{constructor(t){super(t),this.removeGroupControls=Ds,this.removeListeners=Ds,this.controls=new G6(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ds}unmount(){this.removeGroupControls(),this.removeListeners()}}const jb=e=>(t,n)=>{e&&ot.postRender(()=>e(t,n))};class K6 extends gn{constructor(){super(...arguments),this.removePointerDownListener=Ds}onPointerDown(t){this.session=new _w(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ww(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:l}=this.node.getProps();return{onSessionStart:jb(t),onStart:jb(n),onMove:i,onEnd:(c,u)=>{delete this.session,l&&ot.postRender(()=>l(c,u))}}}mount(){this.removePointerDownListener=Lo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Pc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wb(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Co={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Oe.test(e))e=parseFloat(e);else return e;const n=wb(e,t.target.x),i=wb(e,t.target.y);return`${n}% ${i}%`}},W6={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,l=mn.parse(e);if(l.length>5)return i;const c=mn.createTransformer(e),u=typeof l[0]!="number"?1:0,h=n.x.scale*t.x,f=n.y.scale*t.y;l[0+u]/=h,l[1+u]/=f;const p=dt(h,f,.5);return typeof l[2+u]=="number"&&(l[2+u]/=p),typeof l[3+u]=="number"&&(l[3+u]/=p),c(l)}};let am=!1;class Q6 extends v.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:l}=this.props,{projection:c}=t;bE(Z6),c&&(n.group&&n.group.add(c),i&&i.register&&l&&i.register(c),am&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),Pc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:l,isPresent:c}=this.props,{projection:u}=i;return u&&(u.isPresent=c,am=!0,l||t.layoutDependency!==n||n===void 0||t.isPresent!==c?u.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?u.promote():u.relegate()||ot.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),zf.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:l}=t;am=!0,l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),i&&i.deregister&&i.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Sw(e){const[t,n]=Yj(),i=v.useContext(ff);return s.jsx(Q6,{...e,layoutGroup:i,switchLayoutGroup:v.useContext(rw),isPresent:t,safeToRemove:n})}const Z6={borderRadius:{...Co,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Co,borderTopRightRadius:Co,borderBottomLeftRadius:Co,borderBottomRightRadius:Co,boxShadow:W6};function J6(e,t,n){const i=Xt(e)?e:ui(e);return i.start(Yf("",i,t,n)),i.animation}const e3=(e,t)=>e.depth-t.depth;class t3{constructor(){this.children=[],this.isDirty=!1}add(t){xf(this.children,t),this.isDirty=!0}remove(t){yf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(e3),this.isDirty=!1,this.children.forEach(t)}}function s3(e,t){const n=ls.now(),i=({timestamp:l})=>{const c=l-n;c>=t&&(hn(i),e(c-t))};return ot.setup(i,!0),()=>hn(i)}const Tw=["TopLeft","TopRight","BottomLeft","BottomRight"],a3=Tw.length,_b=e=>typeof e=="string"?parseFloat(e):e,Nb=e=>typeof e=="number"||Oe.test(e);function n3(e,t,n,i,l,c){l?(e.opacity=dt(0,n.opacity??1,r3(i)),e.opacityExit=dt(t.opacity??1,0,i3(i))):c&&(e.opacity=dt(t.opacity??1,n.opacity??1,i));for(let u=0;u<a3;u++){const h=`border${Tw[u]}Radius`;let f=Sb(t,h),p=Sb(n,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||Nb(f)===Nb(p)?(e[h]=Math.max(dt(_b(f),_b(p),i),0),(ra.test(p)||ra.test(f))&&(e[h]+="%")):e[h]=p}(t.rotate||n.rotate)&&(e.rotate=dt(t.rotate||0,n.rotate||0,i))}function Sb(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const r3=Cw(0,.5,mj),i3=Cw(.5,.95,Ds);function Cw(e,t,n){return i=>i<e?0:i>t?1:n(Ho(e,t,i))}function Tb(e,t){e.min=t.min,e.max=t.max}function Ms(e,t){Tb(e.x,t.x),Tb(e.y,t.y)}function Cb(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Eb(e,t,n,i,l){return e-=t,e=Gc(e,1/n,i),l!==void 0&&(e=Gc(e,1/l,i)),e}function o3(e,t=0,n=1,i=.5,l,c=e,u=e){if(ra.test(t)&&(t=parseFloat(t),t=dt(u.min,u.max,t/100)-u.min),typeof t!="number")return;let h=dt(c.min,c.max,i);e===c&&(h-=t),e.min=Eb(e.min,t,n,h,l),e.max=Eb(e.max,t,n,h,l)}function Ab(e,t,[n,i,l],c,u){o3(e,t[n],t[i],t[l],t.scale,c,u)}const l3=["x","scaleX","originX"],c3=["y","scaleY","originY"];function kb(e,t,n,i){Ab(e.x,t,l3,n?n.x:void 0,i?i.x:void 0),Ab(e.y,t,c3,n?n.y:void 0,i?i.y:void 0)}function Mb(e){return e.translate===0&&e.scale===1}function Ew(e){return Mb(e.x)&&Mb(e.y)}function Ob(e,t){return e.min===t.min&&e.max===t.max}function d3(e,t){return Ob(e.x,t.x)&&Ob(e.y,t.y)}function Db(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Aw(e,t){return Db(e.x,t.x)&&Db(e.y,t.y)}function Rb(e){return es(e.x)/es(e.y)}function Pb(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class u3{constructor(){this.members=[]}add(t){xf(this.members,t),t.scheduleRender()}remove(t){if(yf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(l=>t===l);if(n===0)return!1;let i;for(let l=n;l>=0;l--){const c=this.members[l];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function h3(e,t,n){let i="";const l=e.x.translate/t.x,c=e.y.translate/t.y,u=(n==null?void 0:n.z)||0;if((l||c||u)&&(i=`translate3d(${l}px, ${c}px, ${u}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:y,rotateY:b,skewX:w,skewY:_}=n;p&&(i=`perspective(${p}px) ${i}`),g&&(i+=`rotate(${g}deg) `),y&&(i+=`rotateX(${y}deg) `),b&&(i+=`rotateY(${b}deg) `),w&&(i+=`skewX(${w}deg) `),_&&(i+=`skewY(${_}deg) `)}const h=e.x.scale*t.x,f=e.y.scale*t.y;return(h!==1||f!==1)&&(i+=`scale(${h}, ${f})`),i||"none"}const nm=["","X","Y","Z"],m3=1e3;let f3=0;function rm(e,t,n,i){const{latestValues:l}=t;l[e]&&(n[e]=l[e],t.setStaticValue(e,0),i&&(i[e]=0))}function kw(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=pw(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:l,layoutId:c}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ot,!(l||c))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&kw(i)}function Mw({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:l}){return class{constructor(u={},h=t==null?void 0:t()){this.id=f3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(x3),this.nodes.forEach(j3),this.nodes.forEach(w3),this.nodes.forEach(y3)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new t3)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new jf),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=Gj(u)&&!iE(u),this.instance=u;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),e){let g,y=0;const b=()=>this.root.updateBlockedByResize=!1;ot.read(()=>{y=window.innerWidth}),e(u,()=>{const w=window.innerWidth;w!==y&&(y=w,this.root.updateBlockedByResize=!0,g&&g(),g=s3(b,250),Pc.hasAnimatedSinceResize&&(Pc.hasAnimatedSinceResize=!1,this.nodes.forEach(Bb)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:b,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||p.getDefaultTransition()||C3,{onLayoutAnimationStart:N,onLayoutAnimationComplete:T}=p.getProps(),R=!this.targetLayout||!Aw(this.targetLayout,w),S=!y&&b;if(this.options.layoutRoot||this.resumeFrom||S||y&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Rf(_,"layout"),onPlay:N,onComplete:T};(p.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(g,S)}else y||Bb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),hn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_3),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Lb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(v3),this.nodes.forEach(p3),this.nodes.forEach(g3)):this.nodes.forEach(Lb),this.clearAllSnapshots();const h=ls.now();Ut.delta=Ma(0,1e3/60,h-Ut.timestamp),Ut.timestamp=h,Ut.isProcessing=!0,Yh.update.process(Ut),Yh.preRender.process(Ut),Yh.render.process(Ut),Ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(b3),this.sharedNodes.forEach(N3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!es(this.snapshot.measuredBox.x)&&!es(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!l)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!Ew(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;u&&this.instance&&(h||$n(this.latestValues)||g)&&(l(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),E3(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:u}=this.options;if(!u)return xt();const h=u.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(A3))){const{scroll:g}=this.root;g&&(ri(h.x,g.offset.x),ri(h.y,g.offset.y))}return h}removeElementScroll(u){var f;const h=xt();if(Ms(h,u),(f=this.scroll)!=null&&f.wasRoot)return h;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:y,options:b}=g;g!==this.root&&y&&b.layoutScroll&&(y.wasRoot&&Ms(h,u),ri(h.x,y.offset.x),ri(h.y,y.offset.y))}return h}applyTransform(u,h=!1){const f=xt();Ms(f,u);for(let p=0;p<this.path.length;p++){const g=this.path[p];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&ii(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),$n(g.latestValues)&&ii(f,g.latestValues)}return $n(this.latestValues)&&ii(f,this.latestValues),f}removeTransform(u){const h=xt();Ms(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!$n(p.latestValues))continue;Bm(p.latestValues)&&p.updateSnapshot();const g=xt(),y=p.measurePageBox();Ms(g,y),kb(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return $n(this.latestValues)&&kb(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var b;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Ut.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),$o(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ms(this.target,this.layout.layoutBox),cw(this.target,this.targetDelta)):Ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),$o(this.relativeTargetOrigin,this.target,w.target),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Bm(this.parent.latestValues)||lw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Ut.timestamp&&(f=!1),f)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Ms(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,b=this.treeScale.y;YE(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=xt());const{target:w}=u;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Cb(this.prevProjectionDelta.x,this.projectionDelta.x),Cb(this.prevProjectionDelta.y,this.projectionDelta.y)),Bo(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==b||!Pb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=oi(),this.projectionDelta=oi(),this.projectionDeltaWithTransform=oi()}setAnimationOrigin(u,h=!1){const f=this.snapshot,p=f?f.latestValues:{},g={...this.latestValues},y=oi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const b=xt(),w=f?f.source:void 0,_=this.layout?this.layout.source:void 0,N=w!==_,T=this.getStack(),R=!T||T.members.length<=1,S=!!(N&&!R&&this.options.crossfade===!0&&!this.path.some(T3));this.animationProgress=0;let k;this.mixTargetDelta=E=>{const j=E/1e3;$b(y.x,u.x,j),$b(y.y,u.y,j),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($o(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),S3(this.relativeTarget,this.relativeTargetOrigin,b,j),k&&d3(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=xt()),Ms(k,this.relativeTarget)),N&&(this.animationValues=g,n3(g,p,this.latestValues,j,S,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var h,f,p;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(p=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||p.stop(),this.pendingAnimation&&(hn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{Pc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ui(0)),this.currentAnimation=J6(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),u.onUpdate&&u.onUpdate(g)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(m3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:g}=u;if(!(!h||!f||!p)){if(this!==u&&this.layout&&p&&Ow(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||xt();const y=es(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const b=es(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+b}Ms(h,f),ii(h,g),Bo(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new u3),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var h;const{layoutId:u}=this.options;return u?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:u}=this.options;return u?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&rm("z",u,p,this.animationValues);for(let g=0;g<nm.length;g++)rm(`rotate${nm[g]}`,u,p,this.animationValues),rm(`skew${nm[g]}`,u,p,this.animationValues);u.render();for(const g in p)u.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Rc(h==null?void 0:h.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Rc(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!$n(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=h3(this.projectionDeltaWithTransform,this.treeScale,g);f&&(y=f(g,y)),u.transform=y;const{x:b,y:w}=this.projectionDelta;u.transformOrigin=`${b.origin*100}% ${w.origin*100}% 0`,p.animationValues?u.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const _ in Xo){if(g[_]===void 0)continue;const{correct:N,applyTo:T,isCSSVariable:R}=Xo[_],S=y==="none"?g[_]:N(g[_],p);if(T){const k=T.length;for(let E=0;E<k;E++)u[T[E]]=S}else R?this.options.visualElement.renderState.vars[_]=S:u[_]=S}this.options.layoutId&&(u.pointerEvents=p===this?Rc(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(zb),this.root.sharedNodes.clear()}}}function p3(e){e.updateLayout()}function g3(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:l}=e.layout,{animationType:c}=e.options,u=t.source!==e.layout.source;c==="size"?Os(y=>{const b=u?t.measuredBox[y]:t.layoutBox[y],w=es(b);b.min=i[y].min,b.max=b.min+w}):Ow(c,t.layoutBox,i)&&Os(y=>{const b=u?t.measuredBox[y]:t.layoutBox[y],w=es(i[y]);b.max=b.min+w,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[y].max=e.relativeTarget[y].min+w)});const h=oi();Bo(h,i,t.layoutBox);const f=oi();u?Bo(f,e.applyTransform(l,!0),t.measuredBox):Bo(f,i,t.layoutBox);const p=!Ew(h);let g=!1;if(!e.resumeFrom){const y=e.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:w}=y;if(b&&w){const _=xt();$o(_,t.layoutBox,b.layoutBox);const N=xt();$o(N,i,w.layoutBox),Aw(_,N)||(g=!0),y.options.layoutRoot&&(e.relativeTarget=N,e.relativeTargetOrigin=_,e.relativeParent=y)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function x3(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function y3(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function b3(e){e.clearSnapshot()}function zb(e){e.clearMeasurements()}function Lb(e){e.isLayoutDirty=!1}function v3(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Bb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function j3(e){e.resolveTargetDelta()}function w3(e){e.calcProjection()}function _3(e){e.resetSkewAndRotation()}function N3(e){e.removeLeadSnapshot()}function $b(e,t,n){e.translate=dt(t.translate,0,n),e.scale=dt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Vb(e,t,n,i){e.min=dt(t.min,n.min,i),e.max=dt(t.max,n.max,i)}function S3(e,t,n,i){Vb(e.x,t.x,n.x,i),Vb(e.y,t.y,n.y,i)}function T3(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const C3={duration:.45,ease:[.4,0,.1,1]},Ub=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),qb=Ub("applewebkit/")&&!Ub("chrome/")?Math.round:Ds;function Fb(e){e.min=qb(e.min),e.max=qb(e.max)}function E3(e){Fb(e.x),Fb(e.y)}function Ow(e,t,n){return e==="position"||e==="preserve-aspect"&&!R6(Rb(t),Rb(n),.2)}function A3(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const k3=Mw({attachResizeListener:(e,t)=>Ko(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),im={current:void 0},Dw=Mw({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!im.current){const e=new k3({});e.mount(window),e.setOptions({layoutScroll:!0}),im.current=e}return im.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),M3={pan:{Feature:K6},drag:{Feature:X6,ProjectionNode:Dw,MeasureLayout:Sw}};function Hb(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const l="onHover"+n,c=i[l];c&&ot.postRender(()=>c(t,rl(t)))}class O3 extends gn{mount(){const{current:t}=this.node;t&&(this.unmount=tE(t,(n,i)=>(Hb(this.node,i,"Start"),l=>Hb(this.node,l,"End"))))}unmount(){}}class D3 extends gn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sl(Ko(this.node.current,"focus",()=>this.onFocus()),Ko(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ib(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const l="onTap"+(n==="End"?"":n),c=i[l];c&&ot.postRender(()=>c(t,rl(t)))}class R3 extends gn{mount(){const{current:t}=this.node;t&&(this.unmount=rE(t,(n,i)=>(Ib(this.node,i,"Start"),(l,{success:c})=>Ib(this.node,l,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Im=new WeakMap,om=new WeakMap,P3=e=>{const t=Im.get(e.target);t&&t(e)},z3=e=>{e.forEach(P3)};function L3({root:e,...t}){const n=e||document;om.has(n)||om.set(n,{});const i=om.get(n),l=JSON.stringify(t);return i[l]||(i[l]=new IntersectionObserver(z3,{root:e,...t})),i[l]}function B3(e,t,n){const i=L3(t);return Im.set(e,n),i.observe(e),()=>{Im.delete(e),i.unobserve(e)}}const $3={some:0,all:1};class V3 extends gn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:l="some",once:c}=t,u={root:n?n.current:void 0,rootMargin:i,threshold:typeof l=="number"?l:$3[l]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,c&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),b=p?g:y;b&&b(f)};return B3(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(U3(t,n))&&this.startObserver()}unmount(){}}function U3({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const q3={inView:{Feature:V3},tap:{Feature:R3},focus:{Feature:D3},hover:{Feature:O3}},F3={layout:{ProjectionNode:Dw,MeasureLayout:Sw}},H3={...E6,...q3,...M3,...F3},_e=HE(H3,a6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G3=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),Gb=e=>{const t=G3(e);return t.charAt(0).toUpperCase()+t.slice(1)},Rw=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),Y3=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:u,...h},f)=>v.createElement("svg",{ref:f,...X3,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:Rw("lucide",l),...!c&&!Y3(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,g])=>v.createElement(p,g)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(e,t)=>{const n=v.forwardRef(({className:i,...l},c)=>v.createElement(K3,{ref:c,iconNode:t,className:Rw(`lucide-${I3(Gb(e))}`,`lucide-${e}`,i),...l}));return n.displayName=Gb(e),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xf=Se("arrow-left",W3);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Yc=Se("arrow-right-left",Q3);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Yb=Se("arrow-right",Z3);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],eA=Se("arrow-up-down",J3);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],sA=Se("arrow-up",tA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],nA=Se("banknote",aA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],iA=Se("bell-ring",rA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Kf=Se("bell",oA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],cA=Se("building-2",lA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],uA=Se("building",dA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Jn=Se("calendar",hA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Pw=Se("chart-column",mA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Gm=Se("chef-hat",fA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xc=Se("circle-alert",pA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Kc=Se("circle-check-big",gA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Xb=Se("circle-x",xA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Lt=Se("clock",yA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],vA=Se("coffee",bA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],wA=Se("copy",jA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],wi=Se("credit-card",_A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],qt=Se("dollar-sign",NA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zw=Se("download",SA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Lw=Se("eye-off",TA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_i=Se("eye",CA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Bw=Se("file-text",EA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$w=Se("funnel",AA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],MA=Se("layout-dashboard",kA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],DA=Se("lock",OA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],PA=Se("log-out",RA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Vw=Se("mail",zA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],il=Se("map-pin",LA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M5 12h14",key:"1ays0h"}]],mi=Se("minus",BA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],VA=Se("move",$A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Xn=Se("package",UA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Wc=Se("phone",qA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vs=Se("plus",FA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],IA=Se("receipt",HA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Uw=Se("rotate-ccw",GA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Qc=Se("save",YA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Da=Se("search",XA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],WA=Se("send",KA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qw=Se("settings",QA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],JA=Se("share-2",ZA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],Ym=Se("shopping-bag",ek);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Wo=Se("shopping-cart",tk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Fw=Se("smartphone",sk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ol=Se("square-pen",ak);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Xm=Se("star",nk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Kb=Se("timer",rk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],hd=Se("trash-2",ik);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Wb=Se("trending-down",ok);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],fi=Se("trending-up",lk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Fs=Se("triangle-alert",ck);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Hw=Se("user-check",dk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hk=Se("user-plus",uk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Kn=Se("user",mk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ia=Se("users",fk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],Km=Se("wine",pk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rt=Se("x",gk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zc=Se("zap",xk),yk=()=>{const[e,t]=v.useState(""),[n,i]=v.useState(""),[l,c]=v.useState(!1),[u,h]=v.useState(""),{login:f,loginAsDemo:p,isLoading:g}=Kt(),y=async w=>{if(w.preventDefault(),h(""),!e||!n){h("Por favor, preencha todos os campos");return}await f(e,n)||h("Erro ao fazer login. Tente novamente.")},b=()=>{p()};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ia,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ClubManager Pro"}),s.jsx("p",{className:"text-gray-600",children:"Sistema de Gesto de Clubes"})]}),s.jsxs(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:b,className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-lg font-semibold text-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 flex items-center justify-center space-x-2 mb-6 shadow-lg",children:[s.jsx(Zc,{className:"w-5 h-5"}),s.jsx("span",{children:" Entrar como Demo"})]}),s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"ou faa login tradicional"})})]}),s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Vw,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"email",value:e,onChange:w=>t(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Digite seu email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx(DA,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:l?"text":"password",value:n,onChange:w=>i(w.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Digite sua senha"}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?s.jsx(Lw,{size:20}):s.jsx(_i,{size:20})})]})]}),u&&s.jsx(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-lg border border-red-200",children:u}),s.jsx(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Entrando..."})]}):"Entrar"})]}),s.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-blue-100",children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2 text-center",children:" Acesso Demo Rpido"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[" ",s.jsx("strong",{children:"Mdulo Bar:"})," Pedidos, comandas e vendas"]}),s.jsxs("p",{children:[" ",s.jsx("strong",{children:"Mdulo Cozinha:"})," Gesto de cardpio e pedidos"]}),s.jsxs("p",{children:[" ",s.jsx("strong",{children:"Dashboard:"})," Mtricas e relatrios"]}),s.jsxs("p",{children:[" ",s.jsx("strong",{children:"Estoque:"})," Controle de inventrio"]})]}),s.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:s.jsxs("p",{className:"text-xs text-gray-500 text-center",children:[" ",s.jsx("strong",{children:"Dica:"})," Use o boto verde acima para acesso instantneo!"]})})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("p",{className:"text-xs text-gray-500",children:"ClubManager Pro v1.0 - Sistema Demonstrao"})})]})})},bk=()=>{const{user:e,logout:t}=Kt(),n=[{name:"Dashboard",icon:MA,path:"/"},{name:"Bar",icon:Km,path:"/bar"},{name:"Atendimento Bar",icon:vA,path:"/bar/attendance"},{name:"Gesto de Caixa",icon:qt,path:"/cash"},{name:"Clientes",icon:ia,path:"/bar-customers"},{name:"Funcionrios",icon:Hw,path:"/bar-employees"},{name:"Cozinha",icon:Gm,path:"/kitchen"},{name:"Estoque",icon:Xn,path:"/inventory"},{name:"Membros",icon:ia,path:"/members"},{name:"Configuraes",icon:qw,path:"/settings"}],i=(e==null?void 0:e.email)==="demo@clubmanager.com";return s.jsxs(_e.aside,{initial:{x:-280},animate:{x:0},transition:{duration:.3},className:"bg-slate-900 text-white w-64 h-full p-4 flex flex-col overflow-y-auto scrollbar-hide",style:{overscrollBehavior:"contain"},children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-blue-400",children:"ClubManager"}),s.jsx("p",{className:"text-slate-400 text-sm",children:"Sistema de Gesto"}),i&&s.jsxs("div",{className:"mt-2 flex items-center space-x-1 text-xs text-green-400",children:[s.jsx(Zc,{size:12}),s.jsx("span",{children:"Modo Demo"})]})]}),e&&s.jsxs("div",{className:`mb-6 p-3 rounded-lg ${i?"bg-green-800 border border-green-600":"bg-slate-800"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("img",{src:e.avatar||`https://api.dicebear.com/8.x/initials/svg?seed=${e.name}`,alt:e.name,className:"w-10 h-10 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:e.name}),s.jsx("p",{className:"text-slate-400 text-xs capitalize",children:e.role}),e.department&&s.jsx("p",{className:"text-slate-300 text-xs",children:e.department})]})]}),i&&s.jsx("div",{className:"mt-2 text-xs text-green-300",children:" Explorando funcionalidades"})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto scrollbar-hide",children:s.jsx("ul",{className:"space-y-2",children:n.map(l=>s.jsx("li",{children:s.jsxs(Dv,{to:l.path,className:({isActive:c})=>`flex items-center space-x-3 p-3 rounded-lg transition-colors ${c?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"}`,children:[s.jsx(l.icon,{size:20}),s.jsx("span",{children:l.name})]})},l.name))})}),i&&s.jsxs("div",{className:"mb-4 p-3 bg-blue-900 rounded-lg border border-blue-700",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-200 mb-2",children:" Teste Agora:"}),s.jsxs("ul",{className:"text-xs text-blue-300 space-y-1",children:[s.jsx("li",{children:" Criar pedidos no Bar"}),s.jsx("li",{children:" Sistema de Atendimento"}),s.jsx("li",{children:" Gerenciar cozinha"}),s.jsx("li",{children:" Ver mtricas em tempo real"}),s.jsx("li",{children:" Controlar estoque"})]})]}),s.jsxs("button",{onClick:t,className:"flex items-center space-x-3 p-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-colors mt-4",children:[s.jsx(PA,{size:20}),s.jsx("span",{children:i?"Sair do Demo":"Sair"})]})]})},vk=()=>{const{notifications:e,clearNotifications:t}=ft(),[n,i]=Ie.useState(!1);return s.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Da,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>i(!n),className:"relative p-2 text-gray-600 hover:text-gray-800 transition-colors",children:[s.jsx(Kf,{size:20}),e.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:e.length})]}),s.jsx(Zn,{children:n&&s.jsxs(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"font-semibold text-gray-800",children:"Notificaes"}),e.length>0&&s.jsx("button",{onClick:t,className:"text-sm text-blue-600 hover:text-blue-800",children:"Limpar todas"})]}),s.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.length===0?s.jsx("p",{className:"p-4 text-gray-500 text-center",children:"Nenhuma notificao"}):e.map((l,c)=>s.jsx("div",{className:"p-3 border-b border-gray-100 last:border-b-0",children:s.jsx("p",{className:"text-sm text-gray-700",children:l})},c))})]})})]})]})]})})},jk=()=>s.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[s.jsx(bk,{}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(vk,{}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6",style:{overscrollBehavior:"none"},children:s.jsx(T2,{})})]})]}),Iw=6048e5,wk=864e5,Qb=Symbol.for("constructDateFrom");function oa(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Qb in e?e[Qb](t):e instanceof Date?new e.constructor(t):new Date(t)}function cs(e,t){return oa(t||e,e)}function _k(e,t,n){const i=cs(e,n==null?void 0:n.in);if(isNaN(t))return oa(e,NaN);const l=i.getDate(),c=oa(e,i.getTime());c.setMonth(i.getMonth()+t+1,0);const u=c.getDate();return l>=u?c:(i.setFullYear(c.getFullYear(),c.getMonth(),l),i)}let Nk={};function md(){return Nk}function Qo(e,t){var h,f,p,g;const n=md(),i=(t==null?void 0:t.weekStartsOn)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??n.weekStartsOn??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,l=cs(e,t==null?void 0:t.in),c=l.getDay(),u=(c<i?7:0)+c-i;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function Jc(e,t){return Qo(e,{...t,weekStartsOn:1})}function Gw(e,t){const n=cs(e,t==null?void 0:t.in),i=n.getFullYear(),l=oa(n,0);l.setFullYear(i+1,0,4),l.setHours(0,0,0,0);const c=Jc(l),u=oa(n,0);u.setFullYear(i,0,4),u.setHours(0,0,0,0);const h=Jc(u);return n.getTime()>=c.getTime()?i+1:n.getTime()>=h.getTime()?i:i-1}function Zb(e){const t=cs(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Sk(e,...t){const n=oa.bind(null,t.find(i=>typeof i=="object"));return t.map(n)}function Jb(e,t){const n=cs(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Tk(e,t,n){const[i,l]=Sk(n==null?void 0:n.in,e,t),c=Jb(i),u=Jb(l),h=+c-Zb(c),f=+u-Zb(u);return Math.round((h-f)/wk)}function Ck(e,t){const n=Gw(e,t),i=oa(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Jc(i)}function Ek(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ak(e){return!(!Ek(e)&&typeof e!="number"||isNaN(+cs(e)))}function kk(e,t){const n=cs(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Mk={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ok=(e,t,n)=>{let i;const l=Mk[e];return typeof l=="string"?i=l:t===1?i=l.one:i=l.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function ci(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Dk={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rk={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pk={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zk={date:ci({formats:Dk,defaultWidth:"full"}),time:ci({formats:Rk,defaultWidth:"full"}),dateTime:ci({formats:Pk,defaultWidth:"full"})},Lk={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Bk=(e,t,n,i)=>Lk[e];function ea(e){return(t,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let l;if(i==="formatting"&&e.formattingValues){const u=e.defaultFormattingWidth||e.defaultWidth,h=n!=null&&n.width?String(n.width):u;l=e.formattingValues[h]||e.formattingValues[u]}else{const u=e.defaultWidth,h=n!=null&&n.width?String(n.width):e.defaultWidth;l=e.values[h]||e.values[u]}const c=e.argumentCallback?e.argumentCallback(t):t;return l[c]}}const $k={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vk={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Uk={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qk={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Fk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Hk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ik=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Gk={ordinalNumber:Ik,era:ea({values:$k,defaultWidth:"wide"}),quarter:ea({values:Vk,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ea({values:Uk,defaultWidth:"wide"}),day:ea({values:qk,defaultWidth:"wide"}),dayPeriod:ea({values:Fk,defaultWidth:"wide",formattingValues:Hk,defaultFormattingWidth:"wide"})};function ta(e){return(t,n={})=>{const i=n.width,l=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],c=t.match(l);if(!c)return null;const u=c[0],h=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],f=Array.isArray(h)?Xk(h,y=>y.test(u)):Yk(h,y=>y.test(u));let p;p=e.valueCallback?e.valueCallback(f):f,p=n.valueCallback?n.valueCallback(p):p;const g=t.slice(u.length);return{value:p,rest:g}}}function Yk(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Xk(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Yw(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const l=i[0],c=t.match(e.parsePattern);if(!c)return null;let u=e.valueCallback?e.valueCallback(c[0]):c[0];u=n.valueCallback?n.valueCallback(u):u;const h=t.slice(l.length);return{value:u,rest:h}}}const Kk=/^(\d+)(th|st|nd|rd)?/i,Wk=/\d+/i,Qk={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Zk={any:[/^b/i,/^(a|c)/i]},Jk={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eM={any:[/1/i,/2/i,/3/i,/4/i]},tM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},aM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oM={ordinalNumber:Yw({matchPattern:Kk,parsePattern:Wk,valueCallback:e=>parseInt(e,10)}),era:ta({matchPatterns:Qk,defaultMatchWidth:"wide",parsePatterns:Zk,defaultParseWidth:"any"}),quarter:ta({matchPatterns:Jk,defaultMatchWidth:"wide",parsePatterns:eM,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ta({matchPatterns:tM,defaultMatchWidth:"wide",parsePatterns:sM,defaultParseWidth:"any"}),day:ta({matchPatterns:aM,defaultMatchWidth:"wide",parsePatterns:nM,defaultParseWidth:"any"}),dayPeriod:ta({matchPatterns:rM,defaultMatchWidth:"any",parsePatterns:iM,defaultParseWidth:"any"})},lM={code:"en-US",formatDistance:Ok,formatLong:zk,formatRelative:Bk,localize:Gk,match:oM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cM(e,t){const n=cs(e,t==null?void 0:t.in);return Tk(n,kk(n))+1}function dM(e,t){const n=cs(e,t==null?void 0:t.in),i=+Jc(n)-+Ck(n);return Math.round(i/Iw)+1}function Xw(e,t){var g,y,b,w;const n=cs(e,t==null?void 0:t.in),i=n.getFullYear(),l=md(),c=(t==null?void 0:t.firstWeekContainsDate)??((y=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??l.firstWeekContainsDate??((w=(b=l.locale)==null?void 0:b.options)==null?void 0:w.firstWeekContainsDate)??1,u=oa((t==null?void 0:t.in)||e,0);u.setFullYear(i+1,0,c),u.setHours(0,0,0,0);const h=Qo(u,t),f=oa((t==null?void 0:t.in)||e,0);f.setFullYear(i,0,c),f.setHours(0,0,0,0);const p=Qo(f,t);return+n>=+h?i+1:+n>=+p?i:i-1}function uM(e,t){var h,f,p,g;const n=md(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,l=Xw(e,t),c=oa((t==null?void 0:t.in)||e,0);return c.setFullYear(l,0,i),c.setHours(0,0,0,0),Qo(c,t)}function hM(e,t){const n=cs(e,t==null?void 0:t.in),i=+Qo(n,t)-+uM(n,t);return Math.round(i/Iw)+1}function Qe(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const rn={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return Qe(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Qe(n+1,2)},d(e,t){return Qe(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Qe(e.getHours()%12||12,t.length)},H(e,t){return Qe(e.getHours(),t.length)},m(e,t){return Qe(e.getMinutes(),t.length)},s(e,t){return Qe(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),l=Math.trunc(i*Math.pow(10,n-3));return Qe(l,t.length)}},Qr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ev={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),l=i>0?i:1-i;return n.ordinalNumber(l,{unit:"year"})}return rn.y(e,t)},Y:function(e,t,n,i){const l=Xw(e,i),c=l>0?l:1-l;if(t==="YY"){const u=c%100;return Qe(u,2)}return t==="Yo"?n.ordinalNumber(c,{unit:"year"}):Qe(c,t.length)},R:function(e,t){const n=Gw(e);return Qe(n,t.length)},u:function(e,t){const n=e.getFullYear();return Qe(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Qe(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Qe(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return rn.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Qe(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const l=hM(e,i);return t==="wo"?n.ordinalNumber(l,{unit:"week"}):Qe(l,t.length)},I:function(e,t,n){const i=dM(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):Qe(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):rn.d(e,t)},D:function(e,t,n){const i=cM(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Qe(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const l=e.getDay(),c=(l-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return Qe(c,2);case"eo":return n.ordinalNumber(c,{unit:"day"});case"eee":return n.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(l,{width:"short",context:"formatting"});case"eeee":default:return n.day(l,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const l=e.getDay(),c=(l-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return Qe(c,t.length);case"co":return n.ordinalNumber(c,{unit:"day"});case"ccc":return n.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(l,{width:"narrow",context:"standalone"});case"cccccc":return n.day(l,{width:"short",context:"standalone"});case"cccc":default:return n.day(l,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),l=i===0?7:i;switch(t){case"i":return String(l);case"ii":return Qe(l,t.length);case"io":return n.ordinalNumber(l,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const l=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let l;switch(i===12?l=Qr.noon:i===0?l=Qr.midnight:l=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let l;switch(i>=17?l=Qr.evening:i>=12?l=Qr.afternoon:i>=4?l=Qr.morning:l=Qr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return rn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):rn.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Qe(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):Qe(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):rn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):rn.s(e,t)},S:function(e,t){return rn.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return sv(i);case"XXXX":case"XX":return Vn(i);case"XXXXX":case"XXX":default:return Vn(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return sv(i);case"xxxx":case"xx":return Vn(i);case"xxxxx":case"xxx":default:return Vn(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+tv(i,":");case"OOOO":default:return"GMT"+Vn(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+tv(i,":");case"zzzz":default:return"GMT"+Vn(i,":")}},t:function(e,t,n){const i=Math.trunc(+e/1e3);return Qe(i,t.length)},T:function(e,t,n){return Qe(+e,t.length)}};function tv(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),l=Math.trunc(i/60),c=i%60;return c===0?n+String(l):n+String(l)+t+Qe(c,2)}function sv(e,t){return e%60===0?(e>0?"-":"+")+Qe(Math.abs(e)/60,2):Vn(e,t)}function Vn(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),l=Qe(Math.trunc(i/60),2),c=Qe(i%60,2);return n+l+t+c}const av=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Kw=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},mM=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],l=n[2];if(!l)return av(e,t);let c;switch(i){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",av(i,t)).replace("{{time}}",Kw(l,t))},fM={p:Kw,P:mM},pM=/^D+$/,gM=/^Y+$/,xM=["D","DD","YY","YYYY"];function yM(e){return pM.test(e)}function bM(e){return gM.test(e)}function vM(e,t,n){const i=jM(e,t,n);if(console.warn(i),xM.includes(e))throw new RangeError(i)}function jM(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const wM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_M=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NM=/^'([^]*?)'?$/,SM=/''/g,TM=/[a-zA-Z]/;function Ft(e,t,n){var g,y,b,w,_,N,T,R;const i=md(),l=(n==null?void 0:n.locale)??i.locale??lM,c=(n==null?void 0:n.firstWeekContainsDate)??((y=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((w=(b=i.locale)==null?void 0:b.options)==null?void 0:w.firstWeekContainsDate)??1,u=(n==null?void 0:n.weekStartsOn)??((N=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:N.weekStartsOn)??i.weekStartsOn??((R=(T=i.locale)==null?void 0:T.options)==null?void 0:R.weekStartsOn)??0,h=cs(e,n==null?void 0:n.in);if(!Ak(h))throw new RangeError("Invalid time value");let f=t.match(_M).map(S=>{const k=S[0];if(k==="p"||k==="P"){const E=fM[k];return E(S,l.formatLong)}return S}).join("").match(wM).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const k=S[0];if(k==="'")return{isToken:!1,value:CM(S)};if(ev[k])return{isToken:!0,value:S};if(k.match(TM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:S}});l.localize.preprocessor&&(f=l.localize.preprocessor(h,f));const p={firstWeekContainsDate:c,weekStartsOn:u,locale:l};return f.map(S=>{if(!S.isToken)return S.value;const k=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&bM(k)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&yM(k))&&vM(k,t,String(e));const E=ev[k[0]];return E(h,k,l.localize,p)}).join("")}function CM(e){const t=e.match(NM);return t?t[1].replace(SM,"'"):e}function EM(e,t){return+cs(e)>+cs(t)}function AM(e,t,n){return _k(e,-1,n)}const kM={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},MM=(e,t,n)=>{let i;const l=kM[e];return typeof l=="string"?i=l:t===1?i=l.one:i=l.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"em "+i:"h "+i:i},OM={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},DM={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},RM={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PM={date:ci({formats:OM,defaultWidth:"full"}),time:ci({formats:DM,defaultWidth:"full"}),dateTime:ci({formats:RM,defaultWidth:"full"})},zM={lastWeek:e=>{const t=e.getDay();return"'"+(t===0||t===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},LM=(e,t,n,i)=>{const l=zM[e];return typeof l=="function"?l(t):l},BM={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},$M={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},VM={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},UM={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},qM={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},FM={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},HM=(e,t)=>{const n=Number(e);return(t==null?void 0:t.unit)==="week"?n+"":n+""},IM={ordinalNumber:HM,era:ea({values:BM,defaultWidth:"wide"}),quarter:ea({values:$M,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ea({values:VM,defaultWidth:"wide"}),day:ea({values:UM,defaultWidth:"wide"}),dayPeriod:ea({values:qM,defaultWidth:"wide",formattingValues:FM,defaultFormattingWidth:"wide"})},GM=/^(\d+)[o]?/i,YM=/\d+/i,XM={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},KM={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},WM={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},QM={any:[/1/i,/2/i,/3/i,/4/i]},ZM={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},JM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},e5={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},t5={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},s5={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},a5={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},n5={ordinalNumber:Yw({matchPattern:GM,parsePattern:YM,valueCallback:e=>parseInt(e,10)}),era:ta({matchPatterns:XM,defaultMatchWidth:"wide",parsePatterns:KM,defaultParseWidth:"any"}),quarter:ta({matchPatterns:WM,defaultMatchWidth:"wide",parsePatterns:QM,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ta({matchPatterns:ZM,defaultMatchWidth:"wide",parsePatterns:JM,defaultParseWidth:"any"}),day:ta({matchPatterns:e5,defaultMatchWidth:"wide",parsePatterns:t5,defaultParseWidth:"any"}),dayPeriod:ta({matchPatterns:s5,defaultMatchWidth:"any",parsePatterns:a5,defaultParseWidth:"any"})},ts={code:"pt-BR",formatDistance:MM,formatLong:PM,formatRelative:LM,localize:IM,match:n5,options:{weekStartsOn:0,firstWeekContainsDate:1}},r5=()=>{const e=Wn(),{orders:t,inventory:n,notifications:i}=ft(),{user:l}=Kt(),c=t.filter(y=>y.status==="delivered"&&Ft(y.updatedAt,"yyyy-MM-dd")===Ft(new Date,"yyyy-MM-dd")),u=c.reduce((y,b)=>y+b.total,0),h=t.filter(y=>y.status==="pending").length,f=n.filter(y=>y.currentStock<=y.minStock).length,p=(l==null?void 0:l.email)==="demo@clubmanager.com",g=[{title:"Faturamento Hoje",value:`R$ ${u.toFixed(2)}`,icon:qt,color:"text-green-600",bgColor:"bg-green-100"},{title:"Pedidos Pendentes",value:h,icon:Lt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Vendas Hoje",value:c.length,icon:Wo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Estoque Baixo",value:f,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:["Dashboard Executivo",p&&s.jsx("span",{className:"ml-3 text-lg text-green-600 font-normal",children:" Modo Demo Ativo"})]}),s.jsx("p",{className:"text-gray-600",children:"Viso geral das operaes do clube"})]}),p&&s.jsxs(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-gradient-to-r from-green-500 to-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[s.jsx(Zc,{size:16}),s.jsx("span",{className:"text-sm font-medium",children:"Teste todas as funcionalidades!"})]})]})}),p&&s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-gradient-to-r from-blue-50 to-green-50 border border-blue-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"p-3 bg-blue-600 rounded-full",children:s.jsx(Zc,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:" Bem-vindo ao ClubManager Demo!"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Explore todos os mdulos e funcionalidades do sistema. Voc pode criar pedidos, gerenciar a cozinha, controlar estoque e muito mais!"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(dn,{to:"/bar",className:"flex items-center justify-between p-3 bg-white rounded-lg border border-blue-200 hover:border-blue-400 transition-colors group",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Km,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:"Testar Mdulo Bar"})]}),s.jsx(Yb,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors"})]}),s.jsxs(dn,{to:"/kitchen",className:"flex items-center justify-between p-3 bg-white rounded-lg border border-green-200 hover:border-green-400 transition-colors group",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gm,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:"Testar Mdulo Cozinha"})]}),s.jsx(Yb,{className:"w-4 h-4 text-gray-400 group-hover:text-green-600 transition-colors"})]})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((y,b)=>{const w=y.title==="Estoque Baixo";return s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:b*.1},className:`bg-white rounded-lg shadow-md p-6 ${w?"cursor-pointer hover:shadow-lg transition-shadow":""}`,onClick:w?()=>e("/inventory/estoque-baixo"):void 0,whileHover:w?{scale:1.02}:{},whileTap:w?{scale:.98}:{},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:y.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:y.value})]}),s.jsx("div",{className:`p-3 rounded-full ${y.bgColor}`,children:s.jsx(y.icon,{className:`w-6 h-6 ${y.color}`})})]})},y.title)})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pedidos Recentes"}),s.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(y=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-800",children:["Mesa ",y.tableNumber||"N/A"]}),s.jsx("p",{className:"text-sm text-gray-600",children:Ft(y.createdAt,"HH:mm",{locale:ts})})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-medium text-gray-800",children:["R$ ",y.total.toFixed(2)]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${y.status==="pending"?"bg-yellow-100 text-yellow-800":y.status==="preparing"?"bg-blue-100 text-blue-800":y.status==="ready"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:y.status==="pending"?"Pendente":y.status==="preparing"?"Preparando":y.status==="ready"?"Pronto":"Entregue"})]})]},y.id)),t.length===0&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhum pedido ainda"}),p&&s.jsx(dn,{to:"/bar",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Criar primeiro pedido "})]})]})]}),s.jsxs(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Alertas de Estoque"}),s.jsxs("div",{className:"space-y-3",children:[n.filter(y=>y.currentStock<=y.minStock).slice(0,5).map(y=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-800",children:y.name}),s.jsx("p",{className:"text-sm text-gray-600",children:y.category})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-medium text-red-600",children:[y.currentStock," ",y.unit]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Mn: ",y.minStock]})]})]},y.id)),n.filter(y=>y.currentStock<=y.minStock).length===0&&s.jsx("p",{className:"text-gray-500 text-center py-4",children:"Todos os itens com estoque adequado"})]})]})]}),s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Mdulos Disponveis"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(dn,{to:"/bar",className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors cursor-pointer group",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Km,{className:"w-5 h-5 text-blue-600"}),s.jsx("h4",{className:"font-medium text-gray-800 group-hover:text-blue-600 transition-colors",children:"Mdulo Bar"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Gesto completa de pedidos, comandas e vendas do bar"})]}),s.jsxs(dn,{to:"/cash",className:"p-4 border border-gray-200 rounded-lg hover:border-green-300 transition-colors cursor-pointer group",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(qt,{className:"w-5 h-5 text-green-600"}),s.jsx("h4",{className:"font-medium text-gray-800 group-hover:text-green-600 transition-colors",children:"Gesto de Caixa"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Controle financeiro, fechamento de caixa e relatrios"})]}),s.jsxs(dn,{to:"/kitchen",className:"p-4 border border-gray-200 rounded-lg hover:border-orange-300 transition-colors cursor-pointer group",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Gm,{className:"w-5 h-5 text-orange-600"}),s.jsx("h4",{className:"font-medium text-gray-800 group-hover:text-orange-600 transition-colors",children:"Mdulo Cozinha"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Controle de cardpio, pedidos e gesto da cozinha"})]}),s.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Xn,{className:"w-5 h-5 text-gray-400"}),s.jsx("h4",{className:"font-medium text-gray-500",children:"Mdulos Futuros"})]}),s.jsx("p",{className:"text-sm text-gray-400",children:"Quadras, Piscina, Eventos, RH e mais"})]})]})]})]})},Ww=({onCustomerSelected:e,onClose:t})=>{const[n,i]=v.useState({phone:"",name:"",email:""}),[l,c]=v.useState(null),[u,h]=v.useState(!1),[f,p]=v.useState(!1),[g,y]=v.useState(null),b=async S=>{if(!(S.length<10)){p(!0),y(null);try{const{data:k,error:E}=await le.rpc("get_bar_customer_by_phone",{customer_phone:S});if(E)throw E;if(k&&k.length>0){const j=k[0];c(j),i({phone:j.phone,name:j.name,email:j.email||""})}else c(null),i(j=>({...j,name:"",email:""}))}catch(k){console.error("Erro ao buscar cliente:",k),y("Erro ao buscar cliente")}finally{p(!1)}}},w=S=>{const k=S.replace(/\D/g,"");return k.length<=11?k.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):S},_=S=>{const k=S.target.value,E=w(k);i(M=>({...M,phone:E}));const j=k.replace(/\D/g,"");j.length===11?b(j):c(null)},N=async()=>{h(!0),y(null);try{const S=n.phone.replace(/\D/g,""),{data:k,error:E}=await le.from("bar_customers").insert({phone:S,name:n.name,email:n.email||null,status:"active",is_vip:!1,loyalty_points:0,credit_limit:0,current_balance:0}).select().single();if(E)throw E;e(k)}catch(S){console.error("Erro ao criar cliente:",S),y("Erro ao criar cliente")}finally{h(!1)}},T=()=>{l&&e(l)},R=S=>{if(S.preventDefault(),!n.phone||!n.name){y("Telefone e nome so obrigatrios");return}l?T():N()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?"Cliente Encontrado":"Cadastro de Cliente"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:""})]}),g&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:g}),s.jsxs("form",{onSubmit:R,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:n.phone,onChange:_,placeholder:"(11) 99999-9999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:15,required:!0}),f&&s.jsx("div",{className:"absolute right-3 top-2.5",children:s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),s.jsx("input",{type:"text",value:n.name,onChange:S=>i(k=>({...k,name:S.target.value})),placeholder:"Nome completo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!!l})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (opcional)"}),s.jsx("input",{type:"email",value:n.email,onChange:S=>i(k=>({...k,email:S.target.value})),placeholder:"email@exemplo.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!!l})]}),l&&s.jsx("div",{className:"p-3 bg-green-100 border border-green-400 rounded",children:s.jsxs("p",{className:"text-green-700 text-sm",children:[s.jsx("strong",{children:"Cliente encontrado!"}),s.jsx("br",{}),"ltima visita: ",l.last_visit?new Date(l.last_visit).toLocaleDateString("pt-BR"):"Primeira visita",s.jsx("br",{}),"Pontos de fidelidade: ",l.loyalty_points,l.is_vip&&s.jsx("span",{className:"ml-2 text-yellow-600",children:" VIP"})]})}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:u||!n.phone||!n.name,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processando..."]}):l?"Selecionar Cliente":"Cadastrar Cliente"})]})]})]})})},i5=({isOpen:e,onClose:t,menuItems:n})=>{const{addOrder:i}=ft(),{user:l}=Kt(),[c,u]=v.useState([]),[h,f]=v.useState(""),[p,g]=v.useState(""),[y,b]=v.useState(!1),[w,_]=v.useState(null),[N,T]=v.useState(!1),R=z=>{if(c.find(I=>I.menuItemId===z.id))u(I=>I.map(V=>V.menuItemId===z.id?{...V,quantity:V.quantity+1}:V));else{const I={id:`item-${Date.now()}`,menuItemId:z.id,quantity:1,price:z.price};u(V=>[...V,I])}},S=z=>{u(U=>U.filter(I=>I.menuItemId!==z))},k=(z,U)=>{if(U<=0){S(z);return}u(I=>I.map(V=>V.menuItemId===z?{...V,quantity:U}:V))},E=c.reduce((z,U)=>z+U.price*U.quantity,0),j=z=>{_(z),T(!1)},M=async z=>{if(z.preventDefault(),!(c.length===0||y)){if(!w){alert("Por favor, selecione um cliente antes de finalizar o pedido.");return}b(!0);try{await i({tableNumber:h||void 0,items:c.map(({id:U,...I})=>I),status:"pending",employeeId:l.id,customerId:w.id,notes:p||void 0}),u([]),f(""),g(""),_(null),t()}catch(U){console.error("Falha ao criar o pedido:",U)}finally{b(!1)}}};return s.jsx(Zn,{children:e&&s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[s.jsxs(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Novo Pedido"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(rt,{size:24})})]}),s.jsxs("div",{className:"flex h-[70vh]",children:[s.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Cardpio"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(z=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-800",children:z.name}),s.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",z.price.toFixed(2)]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:z.description}),s.jsx("button",{onClick:()=>R(z),disabled:!z.available||y,className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:z.available?"Adicionar":"Indisponvel"})]},z.id))})]}),s.jsxs("div",{className:"w-1/3 bg-gray-50 p-6 border-l border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pedido"}),s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),w?s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800",children:w.name}),s.jsx("p",{className:"text-sm text-green-600",children:w.phone}),w.is_vip&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 mt-1",children:" VIP"})]}),s.jsx("button",{type:"button",onClick:()=>_(null),className:"text-green-600 hover:text-green-800",disabled:y,children:s.jsx(rt,{size:16})})]})}):s.jsxs("button",{type:"button",onClick:()=>T(!0),className:"w-full flex items-center justify-center px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors",disabled:y,children:[s.jsx(Kn,{size:20,className:"mr-2"}),"Selecionar Cliente"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero da Mesa"}),s.jsx("input",{type:"text",value:h,onChange:z=>f(z.target.value),placeholder:"Ex: 5",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:y})]}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:c.map(z=>{const U=n.find(I=>I.id===z.menuItemId);return s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-800",children:U==null?void 0:U.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["R$ ",z.price.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{type:"button",onClick:()=>k(z.menuItemId,z.quantity-1),className:"text-gray-400 hover:text-gray-600",disabled:y,children:s.jsx(mi,{size:16})}),s.jsx("span",{className:"w-8 text-center",children:z.quantity}),s.jsx("button",{type:"button",onClick:()=>k(z.menuItemId,z.quantity+1),className:"text-gray-400 hover:text-gray-600",disabled:y,children:s.jsx(vs,{size:16})})]})]},z.id)})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),s.jsx("textarea",{value:p,onChange:z=>g(z.target.value),placeholder:"Observaes especiais...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:y})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total:"}),s.jsxs("span",{className:"text-xl font-bold text-green-600",children:["R$ ",E.toFixed(2)]})]}),s.jsx("button",{type:"submit",disabled:c.length===0||y||!w,className:"w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed transition-colors",children:y?"Confirmando...":"Confirmar Pedido"})]})]})]})]})]}),N&&s.jsx(Ww,{onCustomerSelected:j,onClose:()=>T(!1)})]})})},o5=({order:e,menuItems:t,hasMultipleOrders:n=!1,orderNumber:i})=>{const{updateOrderStatus:l}=ft(),c=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"preparing":return"bg-blue-100 text-blue-800 border-blue-200";case"ready":return"bg-green-100 text-green-800 border-green-200";case"delivered":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=y=>{switch(y){case"pending":return"Pendente";case"preparing":return"Preparando";case"ready":return"Pronto";case"delivered":return"Entregue";case"cancelled":return"Cancelado";default:return y}},f=(y=>{switch(y){case"pending":return"preparing";case"preparing":return"ready";case"ready":return"delivered";default:return null}})(e.status),p=y=>y.id.startsWith("balcao-"),g=y=>y.id.startsWith("comanda-");return s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow ${n?"ring-2 ring-orange-300 ring-offset-2":""} ${p(e)?"border-green-400 bg-green-50 shadow-lg":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(il,{size:16,className:"text-gray-400"}),s.jsxs("span",{className:"font-medium text-gray-800",children:["Mesa ",e.tableNumber||"N/A"]}),i&&s.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",i]}),p(e)&&s.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:" PAGO"}),g(e)&&s.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"AGUARDA PAGTO"})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${c(e.status)}`,children:u(e.status)})]}),s.jsx("div",{className:"space-y-2 mb-4",children:e.items.map(y=>{const b=t.find(w=>w.id===y.menuItemId);return s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[y.quantity,"x ",b==null?void 0:b.name]}),s.jsxs("span",{className:"text-gray-800",children:["R$ ",(y.price*y.quantity).toFixed(2)]})]},y.id)})}),e.notes&&s.jsx("div",{className:"mb-4 p-2 bg-yellow-50 rounded border border-yellow-200",children:s.jsx("p",{className:"text-xs text-yellow-800",children:e.notes})}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Lt,{size:12}),s.jsx("span",{children:Ft(e.createdAt,"HH:mm",{locale:ts})})]}),s.jsxs("span",{className:"font-medium text-gray-800",children:["R$ ",e.total.toFixed(2)]})]}),s.jsxs("button",{onClick:()=>{console.log(" TESTE - Boto clicado!"),alert("Boto funcionando! Verifique o console."),console.log(" Dados do pedido:",{orderId:e.id,currentStatus:e.status,nextStatus:f,isComandaOrder:g(e),isBalcaoOrder:p(e)}),f&&l(e.id,f)},className:"w-full py-2 rounded-lg text-sm font-medium bg-red-600 text-white hover:bg-red-700 transition-colors",style:{zIndex:1e3},children:[" TESTE - ",f==="preparing"&&"Iniciar Preparo",f==="ready"&&"Marcar como Pronto",f==="delivered"&&"Marcar como Entregue",!f&&"Sem prximo status"]}),!1]})},l5=()=>{const{orders:e,barOrders:t,menuItems:n}=ft(),[i,l]=v.useState(!1),[c,u]=v.useState("all"),[h,f]=v.useState(""),[p,g]=v.useState("all"),y=n,w=(()=>{const S=new Map;return t.forEach(k=>{const E=k.tableNumber||"Balco";S.has(E)||S.set(E,[]),S.get(E).push(k)}),S})(),_=S=>(w.get(S)||[]).length>1,N=S=>S.id.slice(-4).toUpperCase(),T=t.filter(S=>{var M,z;const k=c==="all"||S.status===c,E=p==="all"||(S.tableNumber||"Balco")===p,j=((M=S.tableNumber)==null?void 0:M.toLowerCase().includes(h.toLowerCase()))||S.id.toLowerCase().includes(h.toLowerCase())||((z=S.notes)==null?void 0:z.toLowerCase().includes(h.toLowerCase()));return k&&E&&j}),R=t.filter(S=>S.status==="delivered").reduce((S,k)=>S+k.total,0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mdulo Bar"}),s.jsx("p",{className:"text-gray-600",children:"Gesto completa de pedidos e vendas"})]}),s.jsxs(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(vs,{size:20}),s.jsx("span",{children:"Novo Pedido"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Receita Total"}),s.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["R$ ",R.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Pedidos Hoje"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.length})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Pedidos Pendentes"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:t.filter(S=>S.status==="pending").length})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Pedidos"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[Array.from(w.entries()).filter(([S,k])=>k.length>1).length>0&&s.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:[Array.from(w.entries()).filter(([S,k])=>k.length>1).length," mesa(s) com mltiplos pedidos"]}),p!=="all"&&s.jsxs("button",{onClick:()=>g("all"),className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[s.jsxs("span",{children:["Filtro: ",p]}),s.jsx("span",{className:"text-blue-600",children:""})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Da,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:h,onChange:S=>f(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:c,onChange:S=>u(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todos os Status"}),s.jsx("option",{value:"pending",children:"Pendente"}),s.jsx("option",{value:"preparing",children:"Preparando"}),s.jsx("option",{value:"ready",children:"Pronto"}),s.jsx("option",{value:"delivered",children:"Entregue"})]})]})]}),Array.from(w.entries()).filter(([S,k])=>k.length>1).length>0&&s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:" Mesas com Mltiplos Pedidos:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(w.entries()).filter(([S,k])=>k.length>1).map(([S,k])=>s.jsxs("button",{onClick:()=>g(S),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors hover:shadow-md transform hover:scale-105 ${p===S?"bg-orange-400 text-white":"bg-orange-200 text-orange-800 hover:bg-orange-300"}`,title:`Filtrar pedidos da ${S}`,children:["Mesa ",S,": ",k.length," pedidos"]},S))})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(S=>s.jsx(o5,{order:S,menuItems:n,hasMultipleOrders:_(S.tableNumber||"Balco"),orderNumber:N(S)},S.id))}),T.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"Nenhum pedido encontrado"})})]}),i&&s.jsx(i5,{isOpen:i,onClose:()=>l(!1),menuItems:y})]})},c5=()=>{const[e,t]=v.useState([]),[n,i]=v.useState(!0),[l,c]=v.useState(""),[u,h]=v.useState("all"),[f,p]=v.useState(!1),[g,y]=v.useState(null),[b,w]=v.useState(!1),_=async()=>{i(!0);try{const{data:j,error:M}=await le.from("bar_customers").select("*").order("created_at",{ascending:!1});if(M)throw M;t(j||[])}catch(j){console.error("Erro ao carregar clientes:",j)}finally{i(!1)}};v.useEffect(()=>{_()},[]);const N=e.filter(j=>{const M=j.name.toLowerCase().includes(l.toLowerCase())||j.phone.includes(l)||j.email&&j.email.toLowerCase().includes(l.toLowerCase()),z=u==="all"||j.status===u;return M&&z}),T={total:e.length,active:e.filter(j=>j.status==="active").length,vip:e.filter(j=>j.is_vip).length,totalLoyaltyPoints:e.reduce((j,M)=>j+M.loyalty_points,0)},R=j=>{t(M=>[j,...M]),p(!1)},S=j=>{y(j),w(!0)},k=j=>{const M=j.replace(/\D/g,"");return M.length===11?`(${M.slice(0,2)}) ${M.slice(2,7)}-${M.slice(7)}`:j},E=j=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(j);return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Clientes do Bar"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie os clientes e suas informaes"})]}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(vs,{size:20}),s.jsx("span",{children:"Novo Cliente"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Clientes"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.total})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:s.jsx(Wc,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clientes Ativos"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:T.active})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:s.jsx(Jn,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clientes VIP"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:T.vip})]}),s.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:s.jsx(Xm,{className:"h-6 w-6 text-yellow-600"})})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pontos Totais"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:T.totalLoyaltyPoints.toLocaleString()})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:s.jsx(qt,{className:"h-6 w-6 text-purple-600"})})]})})]}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Buscar por nome, telefone ou email...",value:l,onChange:j=>c(j.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsx("div",{className:"flex space-x-4",children:s.jsxs("select",{value:u,onChange:j=>h(j.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todos os Status"}),s.jsx("option",{value:"active",children:"Ativo"}),s.jsx("option",{value:"inactive",children:"Inativo"}),s.jsx("option",{value:"blocked",children:"Bloqueado"})]})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:n?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando clientes..."})]}):N.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Wc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Nenhum cliente encontrado"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pontos"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltima Visita"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(j=>s.jsxs(_e.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600",children:j.name.charAt(0).toUpperCase()})})}),s.jsxs("div",{className:"ml-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name}),j.is_vip&&s.jsx(Xm,{className:"ml-2 h-4 w-4 text-yellow-500 fill-current"})]}),s.jsx("div",{className:"text-sm text-gray-500",children:j.cpf||"CPF no informado"})]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:k(j.phone)}),s.jsx("div",{className:"text-sm text-gray-500",children:j.email||"Email no informado"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j.status==="active"?"bg-green-100 text-green-800":j.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:j.status==="active"?"Ativo":j.status==="inactive"?"Inativo":"Bloqueado"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[j.loyalty_points.toLocaleString()," pts"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.last_visit?new Date(j.last_visit).toLocaleDateString("pt-BR"):"Nunca"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>S(j),className:"text-blue-600 hover:text-blue-900",children:s.jsx(_i,{size:16})}),s.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:s.jsx(ol,{size:16})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(hd,{size:16})})]})})]},j.id))})]})})}),f&&s.jsx(Ww,{onCustomerSelected:R,onClose:()=>p(!1)}),b&&g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Detalhes do Cliente"}),s.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:k(g.phone)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.email||"No informado"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CPF"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.cpf||"No informado"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),s.jsxs("p",{className:"mt-1",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g.status==="active"?"bg-green-100 text-green-800":g.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:g.status==="active"?"Ativo":g.status==="inactive"?"Inativo":"Bloqueado"}),g.is_vip&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:" VIP"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pontos de Fidelidade"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[g.loyalty_points.toLocaleString()," pontos"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Limite de Crdito"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:E(g.credit_limit)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Saldo Atual"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:E(g.current_balance)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ltima Visita"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.last_visit?new Date(g.last_visit).toLocaleDateString("pt-BR"):"Nunca"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cadastrado em"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(g.created_at).toLocaleDateString("pt-BR")})]})]}),g.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.notes})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Fechar"})})]})})]})},d5=()=>{const[e,t]=v.useState([]),[n,i]=v.useState(!0),[l,c]=v.useState(null),u=v.useCallback(async()=>{try{i(!0),c(null);const{data:_,error:N}=await le.from("bar_employees").select("*").order("created_at",{ascending:!1});if(N)throw console.error("Erro na consulta bar_employees:",N),new Error(`Erro ao consultar banco de dados: ${N.message}`);const T=(_||[]).map(R=>{const S=R.notes||"",k=S.match(/Nome: ([^,]+)/),E=S.match(/CPF: ([^,]+)/),j=S.match(/Email: ([^,]+)/),M=S.match(/Telefone: ([^,]+)/);return{id:R.id,employee_id:R.employee_id||"",bar_role:R.bar_role,shift_preference:R.shift_preference,specialties:R.specialties||[],commission_rate:R.commission_rate||0,status:R.is_active?"active":"inactive",start_date:R.start_date,end_date:R.end_date,notes:R.notes,created_at:R.created_at,updated_at:R.updated_at,employee:{id:R.id,name:k?k[1]:"Nome no informado",cpf:E?E[1]:void 0,email:j?j[1]:void 0,phone:M?M[1]:void 0,hire_date:R.start_date,status:R.is_active?"active":"inactive"}}});console.log("Funcionrios carregados:",T.length),t(T)}catch(_){console.error("Erro ao buscar funcionrios:",_),c(_ instanceof Error?_.message:"Erro ao buscar funcionrios")}finally{i(!1)}},[]),h=v.useCallback(async _=>{try{c(null);const{data:N,error:T}=await le.from("bar_employees").insert([{employee_id:null,bar_role:_.bar_role,shift_preference:_.shift_preference||"qualquer",specialties:_.specialties||[],commission_rate:_.commission_rate||0,is_active:!0,start_date:new Date().toISOString().split("T")[0],notes:`Nome: ${_.name}${_.cpf?`, CPF: ${_.cpf}`:""}${_.email?`, Email: ${_.email}`:""}${_.phone?`, Telefone: ${_.phone}`:""}${_.notes?`, Observaes: ${_.notes}`:""}`}]).select().single();if(T)throw T;return await u(),N.id}catch(N){console.error("Erro ao criar funcionrio:",N);const T=N instanceof Error?N.message:"Erro ao criar funcionrio";throw c(T),new Error(T)}},[u]),f=v.useCallback(async(_,N)=>{try{c(null);const{data:T,error:R}=await le.from("bar_employees").select("notes").eq("id",_).single();if(R)throw R;let S=(T==null?void 0:T.notes)||"";N.name!==void 0&&(S=S.replace(/Nome: [^,]+/,`Nome: ${N.name}`),S.includes("Nome:")||(S=`Nome: ${N.name}, ${S}`)),N.cpf!==void 0&&(S=S.replace(/CPF: [^,]+/,`CPF: ${N.cpf}`),!S.includes("CPF:")&&N.cpf&&(S+=`, CPF: ${N.cpf}`)),N.email!==void 0&&(S=S.replace(/Email: [^,]+/,`Email: ${N.email}`),!S.includes("Email:")&&N.email&&(S+=`, Email: ${N.email}`)),N.phone!==void 0&&(S=S.replace(/Telefone: [^,]+/,`Telefone: ${N.phone}`),!S.includes("Telefone:")&&N.phone&&(S+=`, Telefone: ${N.phone}`));const k={updated_at:new Date().toISOString()};N.bar_role!==void 0&&(k.bar_role=N.bar_role),N.shift_preference!==void 0&&(k.shift_preference=N.shift_preference),N.specialties!==void 0&&(k.specialties=N.specialties),N.commission_rate!==void 0&&(k.commission_rate=N.commission_rate),N.is_active!==void 0&&(k.is_active=N.is_active),N.notes!==void 0&&(S+=N.notes?`, Observaes: ${N.notes}`:""),k.notes=S;const{error:E}=await le.from("bar_employees").update(k).eq("id",_);if(E)throw E;await u()}catch(T){console.error("Erro ao atualizar funcionrio:",T);const R=T instanceof Error?T.message:"Erro ao atualizar funcionrio";throw c(R),new Error(R)}},[u]),p=v.useCallback(async _=>{try{await f(_,{is_active:!1})}catch(N){throw console.error("Erro ao desativar funcionrio:",N),N}},[f]),g=v.useCallback(async _=>{try{await f(_,{is_active:!0})}catch(N){throw console.error("Erro ao reativar funcionrio:",N),N}},[f]),y=v.useCallback(async _=>{try{const{data:N,error:T}=await le.from("bar_employees").select("*").eq("id",_).single();if(T)throw T;if(!N)return null;const R=N.notes||"",S=R.match(/Nome: ([^,]+)/),k=R.match(/CPF: ([^,]+)/),E=R.match(/Email: ([^,]+)/),j=R.match(/Telefone: ([^,]+)/);return{id:N.id,employee_id:N.employee_id||"",bar_role:N.bar_role,shift_preference:N.shift_preference,specialties:N.specialties||[],commission_rate:N.commission_rate||0,status:N.is_active?"active":"inactive",start_date:N.start_date||"",end_date:N.end_date||void 0,notes:N.notes||void 0,created_at:N.created_at||"",updated_at:N.updated_at||"",employee:{id:N.id,name:S?S[1]:"Nome no informado",cpf:k?k[1]:void 0,email:E?E[1]:void 0,phone:j?j[1]:void 0,hire_date:N.start_date||void 0,status:N.is_active?"active":"inactive"}}}catch(N){return console.error("Erro ao buscar funcionrio:",N),null}},[]),b=v.useCallback((_="",N="all",T="all")=>e.filter(R=>{var M,z,U;const S=R.employee;if(!S)return!1;const k=S.name.toLowerCase().includes(_.toLowerCase())||((M=S.phone)==null?void 0:M.includes(_))||((z=S.email)==null?void 0:z.toLowerCase().includes(_.toLowerCase()))||((U=S.cpf)==null?void 0:U.includes(_)),E=N==="all"||R.bar_role===N,j=T==="all"||R.status===T;return k&&E&&j}),[e]),w=v.useCallback(()=>({total:e.length,active:e.filter(_=>_.status==="active").length,inactive:e.filter(_=>_.status==="inactive").length,byRole:{atendente:e.filter(_=>_.bar_role==="atendente").length,garcom:e.filter(_=>_.bar_role==="garcom").length,cozinheiro:e.filter(_=>_.bar_role==="cozinheiro").length,barman:e.filter(_=>_.bar_role==="barman").length,gerente:e.filter(_=>_.bar_role==="gerente").length}}),[e]);return v.useEffect(()=>{u()},[u]),{employees:e,loading:n,error:l,createEmployee:h,updateEmployee:f,deactivateEmployee:p,reactivateEmployee:g,getEmployeeById:y,filterEmployees:b,getStats:w,refetch:u}},u5=()=>{var fe,ge;const{loading:e,error:t,createEmployee:n,updateEmployee:i,deactivateEmployee:l,reactivateEmployee:c,filterEmployees:u,getStats:h}=d5(),[f,p]=v.useState(""),[g,y]=v.useState("all"),[b,w]=v.useState("all"),[_,N]=v.useState(null),[T,R]=v.useState(!1),[S,k]=v.useState(!1),[E,j]=v.useState(!1),[M,z]=v.useState(!1),[U,I]=v.useState({name:"",cpf:"",email:"",phone:"",bar_role:"atendente",shift_preference:"qualquer",specialties:[],commission_rate:0,notes:""}),[V,Q]=v.useState({}),K=u(f,g,b),ie=h(),pe=async()=>{if(!U.name.trim()){alert("Por favor, informe o nome do funcionrio");return}z(!0);try{await n(U),k(!1),Y(),alert("Funcionrio cadastrado com sucesso!")}catch(oe){console.error("Erro ao criar funcionrio:",oe),alert("Erro ao cadastrar funcionrio. Tente novamente.")}finally{z(!1)}},L=oe=>{var me,Ne,Be,je;N(oe),Q({name:((me=oe.employee)==null?void 0:me.name)||"",cpf:((Ne=oe.employee)==null?void 0:Ne.cpf)||"",email:((Be=oe.employee)==null?void 0:Be.email)||"",phone:((je=oe.employee)==null?void 0:je.phone)||"",bar_role:oe.bar_role,shift_preference:oe.shift_preference,specialties:oe.specialties||[],commission_rate:oe.commission_rate,notes:oe.notes||""}),j(!0)},O=async()=>{if(_){z(!0);try{await i(_.id,V),j(!1),N(null),Q({}),alert("Funcionrio atualizado com sucesso!")}catch(oe){console.error("Erro ao atualizar funcionrio:",oe),alert("Erro ao atualizar funcionrio. Tente novamente.")}finally{z(!1)}}},P=async oe=>{var Ne;if(confirm(`Tem certeza que deseja desativar o funcionrio ${(Ne=oe.employee)==null?void 0:Ne.name}?`))try{await l(oe.id),alert("Funcionrio desativado com sucesso!")}catch(Be){console.error("Erro ao desativar funcionrio:",Be),alert("Erro ao desativar funcionrio. Tente novamente.")}},$=async oe=>{var Ne;if(confirm(`Tem certeza que deseja reativar o funcionrio ${(Ne=oe.employee)==null?void 0:Ne.name}?`))try{await c(oe.id),alert("Funcionrio reativado com sucesso!")}catch(Be){console.error("Erro ao reativar funcionrio:",Be),alert("Erro ao reativar funcionrio. Tente novamente.")}},Y=()=>{I({name:"",cpf:"",email:"",phone:"",bar_role:"atendente",shift_preference:"qualquer",specialties:[],commission_rate:0,notes:""})},A=oe=>{N(oe),R(!0)},F=oe=>{if(!oe)return"No informado";const me=oe.replace(/\D/g,"");return me.length===11?`(${me.slice(0,2)}) ${me.slice(2,7)}-${me.slice(7)}`:oe},B=oe=>{switch(oe){case"atendente":return"";case"garcom":return"";case"cozinheiro":return"";case"barman":return"";case"gerente":return"";default:return""}},W=oe=>{switch(oe){case"atendente":return"bg-blue-100 text-blue-800";case"garcom":return"bg-green-100 text-green-800";case"cozinheiro":return"bg-orange-100 text-orange-800";case"barman":return"bg-purple-100 text-purple-800";case"gerente":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},se=oe=>{switch(oe){case"atendente":return"Atendente";case"garcom":return"Garom";case"cozinheiro":return"Cozinheiro";case"barman":return"Barman";case"gerente":return"Gerente";default:return oe}};return s.jsxs("div",{className:"p-6 space-y-6",children:[t&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"text-red-600",children:s.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("p",{className:"text-red-800",children:t})]})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Funcionrios do Bar"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie a equipe do bar e suas funes"})]}),s.jsxs("button",{onClick:()=>k(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(vs,{size:20}),s.jsx("span",{children:"Novo Funcionrio"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ie.total}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:ie.active}),s.jsx("div",{className:"text-sm text-gray-600",children:"Ativos"})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[" ",ie.byRole.atendente]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Atendentes"})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-bold text-green-600",children:[" ",ie.byRole.garcom]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Garons"})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[" ",ie.byRole.cozinheiro]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Cozinheiros"})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-bold text-purple-600",children:[" ",ie.byRole.barman]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Barmans"})]})})]}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Buscar por nome, telefone ou email...",value:f,onChange:oe=>p(oe.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("select",{value:g,onChange:oe=>y(oe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todas as Funes"}),s.jsx("option",{value:"atendente",children:"Atendente"}),s.jsx("option",{value:"garcom",children:"Garom"}),s.jsx("option",{value:"cozinheiro",children:"Cozinheiro"}),s.jsx("option",{value:"barman",children:"Barman"}),s.jsx("option",{value:"gerente",children:"Gerente"})]}),s.jsxs("select",{value:b,onChange:oe=>w(oe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todos os Status"}),s.jsx("option",{value:"active",children:"Ativo"}),s.jsx("option",{value:"inactive",children:"Inativo"})]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando funcionrios..."})]}):K.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Kn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Nenhum funcionrio encontrado"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funo no Bar"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data de Contratao"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map(oe=>{const me=oe.employee;return me?s.jsxs(_e.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600",children:me.name.charAt(0).toUpperCase()})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:me.name}),s.jsx("div",{className:"text-sm text-gray-500",children:me.cpf||"CPF no informado"})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W(oe.bar_role)}`,children:[s.jsx("span",{className:"mr-1",children:B(oe.bar_role)}),se(oe.bar_role)]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:F(me.phone||null)}),s.jsx("div",{className:"text-sm text-gray-500",children:me.email||"Email no informado"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${oe.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:oe.status==="active"?"Ativo":"Inativo"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:me.hire_date?new Date(me.hire_date).toLocaleDateString("pt-BR"):"No informado"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>A(oe),className:"text-blue-600 hover:text-blue-900",children:s.jsx(_i,{size:16})}),s.jsx("button",{onClick:()=>L(oe),className:"text-gray-600 hover:text-gray-900",title:"Editar funcionrio",children:s.jsx(ol,{size:16})}),oe.status==="active"?s.jsx("button",{onClick:()=>P(oe),className:"text-red-600 hover:text-red-900",title:"Desativar funcionrio",children:s.jsx(hd,{size:16})}):s.jsx("button",{onClick:()=>$(oe),className:"text-green-600 hover:text-green-900",title:"Reativar funcionrio",children:s.jsx(Kn,{size:16})})]})})]},oe.id):null})})]})})}),T&&_&&_.employee&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Detalhes do Funcionrio"}),s.jsx("button",{onClick:()=>R(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.employee.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Funo no Bar"}),s.jsx("p",{className:"mt-1",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W(_.bar_role)}`,children:[s.jsx("span",{className:"mr-1",children:B(_.bar_role)}),se(_.bar_role)]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:F(((fe=_.employee)==null?void 0:fe.phone)||null)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.employee.email||"No informado"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CPF"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.employee.cpf||"No informado"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),s.jsx("p",{className:"mt-1",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.status==="active"?"Ativo":"Inativo"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Contratao"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.employee.hire_date?new Date(_.employee.hire_date).toLocaleDateString("pt-BR"):"No informado"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cadastrado no Bar em"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(_.created_at).toLocaleDateString("pt-BR")})]})]}),_.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.notes})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Fechar"})})]})}),S&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Novo Funcionrio"}),s.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),s.jsx("input",{type:"text",value:U.name,onChange:oe=>I(me=>({...me,name:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome completo",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF"}),s.jsx("input",{type:"text",value:U.cpf,onChange:oe=>I(me=>({...me,cpf:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"000.000.000-00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:U.email,onChange:oe=>I(me=>({...me,email:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@exemplo.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),s.jsx("input",{type:"text",value:U.phone,onChange:oe=>I(me=>({...me,phone:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"(11) 99999-9999"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funo *"}),s.jsxs("select",{value:U.bar_role,onChange:oe=>I(me=>({...me,bar_role:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"atendente",children:"Atendente"}),s.jsx("option",{value:"garcom",children:"Garom"}),s.jsx("option",{value:"cozinheiro",children:"Cozinheiro"}),s.jsx("option",{value:"barman",children:"Barman"}),s.jsx("option",{value:"gerente",children:"Gerente"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Turno Preferido"}),s.jsxs("select",{value:U.shift_preference,onChange:oe=>I(me=>({...me,shift_preference:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"qualquer",children:"Qualquer"}),s.jsx("option",{value:"manha",children:"Manh"}),s.jsx("option",{value:"tarde",children:"Tarde"}),s.jsx("option",{value:"noite",children:"Noite"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisso (%)"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:U.commission_rate,onChange:oe=>I(me=>({...me,commission_rate:parseFloat(oe.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),s.jsx("textarea",{value:U.notes,onChange:oe=>I(me=>({...me,notes:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Observaes adicionais (opcional)"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{k(!1),Y()},disabled:M,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{onClick:pe,disabled:M||!U.name.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:M?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Cadastrando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Qc,{size:16}),s.jsx("span",{children:"Cadastrar"})]})})]})]})}),E&&_&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Editar Funcionrio"}),s.jsx("button",{onClick:()=>{j(!1),N(null),Q({})},className:"text-gray-400 hover:text-gray-600",children:s.jsx(rt,{size:20})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),s.jsx("input",{type:"text",value:V.name||"",onChange:oe=>Q(me=>({...me,name:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome completo",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF"}),s.jsx("input",{type:"text",value:V.cpf||"",onChange:oe=>Q(me=>({...me,cpf:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"000.000.000-00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:V.email||"",onChange:oe=>Q(me=>({...me,email:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@exemplo.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),s.jsx("input",{type:"text",value:V.phone||"",onChange:oe=>Q(me=>({...me,phone:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"(11) 99999-9999"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funo *"}),s.jsxs("select",{value:V.bar_role||"atendente",onChange:oe=>Q(me=>({...me,bar_role:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"atendente",children:"Atendente"}),s.jsx("option",{value:"garcom",children:"Garom"}),s.jsx("option",{value:"cozinheiro",children:"Cozinheiro"}),s.jsx("option",{value:"barman",children:"Barman"}),s.jsx("option",{value:"gerente",children:"Gerente"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Turno Preferido"}),s.jsxs("select",{value:V.shift_preference||"qualquer",onChange:oe=>Q(me=>({...me,shift_preference:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"qualquer",children:"Qualquer"}),s.jsx("option",{value:"manha",children:"Manh"}),s.jsx("option",{value:"tarde",children:"Tarde"}),s.jsx("option",{value:"noite",children:"Noite"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisso (%)"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:V.commission_rate||0,onChange:oe=>Q(me=>({...me,commission_rate:parseFloat(oe.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:V.is_active!==void 0?V.is_active?"active":"inactive":"active",onChange:oe=>Q(me=>({...me,is_active:oe.target.value==="active"})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"active",children:"Ativo"}),s.jsx("option",{value:"inactive",children:"Inativo"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),s.jsx("textarea",{value:V.notes||"",onChange:oe=>Q(me=>({...me,notes:oe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Observaes adicionais (opcional)"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{j(!1),N(null),Q({})},disabled:M,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{onClick:O,disabled:M||!((ge=V.name)!=null&&ge.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:M?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Salvando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Qc,{size:16}),s.jsx("span",{children:"Salvar"})]})})]})]})})]})};var ll=e=>e.type==="checkbox",Hn=e=>e instanceof Date,Jt=e=>e==null;const Qw=e=>typeof e=="object";var vt=e=>!Jt(e)&&!Array.isArray(e)&&Qw(e)&&!Hn(e),Zw=e=>vt(e)&&e.target?ll(e.target)?e.target.checked:e.target.value:e,h5=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Jw=(e,t)=>e.has(h5(t)),m5=e=>{const t=e.constructor&&e.constructor.prototype;return vt(t)&&t.hasOwnProperty("isPrototypeOf")},Wf=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function kt(e){let t;const n=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Wf&&(e instanceof Blob||i))&&(n||vt(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!m5(e))t=e;else for(const l in e)e.hasOwnProperty(l)&&(t[l]=kt(e[l]));else return e;return t}var fd=e=>/^\w*$/.test(e),bt=e=>e===void 0,Qf=e=>Array.isArray(e)?e.filter(Boolean):[],Zf=e=>Qf(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ve=(e,t,n)=>{if(!t||!vt(e))return n;const i=(fd(t)?[t]:Zf(t)).reduce((l,c)=>Jt(l)?l:l[c],e);return bt(i)||i===e?bt(e[t])?n:e[t]:i},bs=e=>typeof e=="boolean",nt=(e,t,n)=>{let i=-1;const l=fd(t)?[t]:Zf(t),c=l.length,u=c-1;for(;++i<c;){const h=l[i];let f=n;if(i!==u){const p=e[h];f=vt(p)||Array.isArray(p)?p:isNaN(+l[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;e[h]=f,e=e[h]}};const ed={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Vs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Sa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},e1=Ie.createContext(null);e1.displayName="HookFormContext";const Jf=()=>Ie.useContext(e1);var t1=(e,t,n,i=!0)=>{const l={defaultValues:t._defaultValues};for(const c in e)Object.defineProperty(l,c,{get:()=>{const u=c;return t._proxyFormState[u]!==Vs.all&&(t._proxyFormState[u]=!i||Vs.all),n&&(n[u]=!0),e[u]}});return l};const e0=typeof window<"u"?Ie.useLayoutEffect:Ie.useEffect;function f5(e){const t=Jf(),{control:n=t.control,disabled:i,name:l,exact:c}=e||{},[u,h]=Ie.useState(n._formState),f=Ie.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return e0(()=>n._subscribe({name:l,formState:f.current,exact:c,callback:p=>{!i&&h({...n._formState,...p})}}),[l,i,c]),Ie.useEffect(()=>{f.current.isValid&&n._setValid(!0)},[n]),Ie.useMemo(()=>t1(u,n,f.current,!1),[u,n])}var sa=e=>typeof e=="string",s1=(e,t,n,i,l)=>sa(e)?(i&&t.watch.add(e),ve(n,e,l)):Array.isArray(e)?e.map(c=>(i&&t.watch.add(c),ve(n,c))):(i&&(t.watchAll=!0),n),Wm=e=>Jt(e)||!Qw(e);function Ea(e,t,n=new WeakSet){if(Wm(e)||Wm(t))return e===t;if(Hn(e)&&Hn(t))return e.getTime()===t.getTime();const i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const c of i){const u=e[c];if(!l.includes(c))return!1;if(c!=="ref"){const h=t[c];if(Hn(u)&&Hn(h)||vt(u)&&vt(h)||Array.isArray(u)&&Array.isArray(h)?!Ea(u,h,n):u!==h)return!1}}return!0}function p5(e){const t=Jf(),{control:n=t.control,name:i,defaultValue:l,disabled:c,exact:u,compute:h}=e||{},f=Ie.useRef(l),p=Ie.useRef(h),g=Ie.useRef(void 0);p.current=h;const y=Ie.useMemo(()=>n._getWatch(i,f.current),[n,i]),[b,w]=Ie.useState(p.current?p.current(y):y);return e0(()=>n._subscribe({name:i,formState:{values:!0},exact:u,callback:_=>{if(!c){const N=s1(i,n._names,_.values||n._formValues,!1,f.current);if(p.current){const T=p.current(N);Ea(T,g.current)||(w(T),g.current=T)}else w(N)}}}),[n,c,i,u]),Ie.useEffect(()=>n._removeUnmounted()),b}function g5(e){const t=Jf(),{name:n,disabled:i,control:l=t.control,shouldUnregister:c,defaultValue:u}=e,h=Jw(l._names.array,n),f=Ie.useMemo(()=>ve(l._formValues,n,ve(l._defaultValues,n,u)),[l,n,u]),p=p5({control:l,name:n,defaultValue:f,exact:!0}),g=f5({control:l,name:n,exact:!0}),y=Ie.useRef(e),b=Ie.useRef(l.register(n,{...e.rules,value:p,...bs(e.disabled)?{disabled:e.disabled}:{}}));y.current=e;const w=Ie.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ve(g.errors,n)},isDirty:{enumerable:!0,get:()=>!!ve(g.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ve(g.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ve(g.validatingFields,n)},error:{enumerable:!0,get:()=>ve(g.errors,n)}}),[g,n]),_=Ie.useCallback(S=>b.current.onChange({target:{value:Zw(S),name:n},type:ed.CHANGE}),[n]),N=Ie.useCallback(()=>b.current.onBlur({target:{value:ve(l._formValues,n),name:n},type:ed.BLUR}),[n,l._formValues]),T=Ie.useCallback(S=>{const k=ve(l._fields,n);k&&S&&(k._f.ref={focus:()=>S.focus&&S.focus(),select:()=>S.select&&S.select(),setCustomValidity:E=>S.setCustomValidity(E),reportValidity:()=>S.reportValidity()})},[l._fields,n]),R=Ie.useMemo(()=>({name:n,value:p,...bs(i)||g.disabled?{disabled:g.disabled||i}:{},onChange:_,onBlur:N,ref:T}),[n,i,g.disabled,_,N,T,p]);return Ie.useEffect(()=>{const S=l._options.shouldUnregister||c;l.register(n,{...y.current.rules,...bs(y.current.disabled)?{disabled:y.current.disabled}:{}});const k=(E,j)=>{const M=ve(l._fields,E);M&&M._f&&(M._f.mount=j)};if(k(n,!0),S){const E=kt(ve(l._options.defaultValues,n));nt(l._defaultValues,n,E),bt(ve(l._formValues,n))&&nt(l._formValues,n,E)}return!h&&l.register(n),()=>{(h?S&&!l._state.action:S)?l.unregister(n):k(n,!1)}},[n,l,h,c]),Ie.useEffect(()=>{l._setDisabledField({disabled:i,name:n})},[i,n,l]),Ie.useMemo(()=>({field:R,formState:g,fieldState:w}),[R,g,w])}const Yn=e=>e.render(g5(e));var x5=(e,t,n,i,l)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[i]:l||!0}}:{},Vo=e=>Array.isArray(e)?e:[e],nv=()=>{let e=[];return{get observers(){return e},next:l=>{for(const c of e)c.next&&c.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(c=>c!==l)}}),unsubscribe:()=>{e=[]}}},os=e=>vt(e)&&!Object.keys(e).length,t0=e=>e.type==="file",Us=e=>typeof e=="function",td=e=>{if(!Wf)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},a1=e=>e.type==="select-multiple",s0=e=>e.type==="radio",y5=e=>s0(e)||ll(e),lm=e=>td(e)&&e.isConnected;function b5(e,t){const n=t.slice(0,-1).length;let i=0;for(;i<n;)e=bt(e)?i++:e[t[i++]];return e}function v5(e){for(const t in e)if(e.hasOwnProperty(t)&&!bt(e[t]))return!1;return!0}function _t(e,t){const n=Array.isArray(t)?t:fd(t)?[t]:Zf(t),i=n.length===1?e:b5(e,n),l=n.length-1,c=n[l];return i&&delete i[c],l!==0&&(vt(i)&&os(i)||Array.isArray(i)&&v5(i))&&_t(e,n.slice(0,-1)),e}var n1=e=>{for(const t in e)if(Us(e[t]))return!0;return!1};function sd(e,t={}){const n=Array.isArray(e);if(vt(e)||n)for(const i in e)Array.isArray(e[i])||vt(e[i])&&!n1(e[i])?(t[i]=Array.isArray(e[i])?[]:{},sd(e[i],t[i])):Jt(e[i])||(t[i]=!0);return t}function r1(e,t,n){const i=Array.isArray(e);if(vt(e)||i)for(const l in e)Array.isArray(e[l])||vt(e[l])&&!n1(e[l])?bt(t)||Wm(n[l])?n[l]=Array.isArray(e[l])?sd(e[l],[]):{...sd(e[l])}:r1(e[l],Jt(t)?{}:t[l],n[l]):n[l]=!Ea(e[l],t[l]);return n}var Eo=(e,t)=>r1(e,t,sd(t));const rv={value:!1,isValid:!1},iv={value:!0,isValid:!0};var i1=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!bt(e[0].attributes.value)?bt(e[0].value)||e[0].value===""?iv:{value:e[0].value,isValid:!0}:iv:rv}return rv},o1=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:i})=>bt(e)?e:t?e===""?NaN:e&&+e:n&&sa(e)?new Date(e):i?i(e):e;const ov={isValid:!1,value:null};var l1=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,ov):ov;function lv(e){const t=e.ref;return t0(t)?t.files:s0(t)?l1(e.refs).value:a1(t)?[...t.selectedOptions].map(({value:n})=>n):ll(t)?i1(e.refs).value:o1(bt(t.value)?e.ref.value:t.value,e)}var j5=(e,t,n,i)=>{const l={};for(const c of e){const u=ve(t,c);u&&nt(l,c,u._f)}return{criteriaMode:n,names:[...e],fields:l,shouldUseNativeValidation:i}},ad=e=>e instanceof RegExp,Ao=e=>bt(e)?e:ad(e)?e.source:vt(e)?ad(e.value)?e.value.source:e.value:e,cv=e=>({isOnSubmit:!e||e===Vs.onSubmit,isOnBlur:e===Vs.onBlur,isOnChange:e===Vs.onChange,isOnAll:e===Vs.all,isOnTouch:e===Vs.onTouched});const dv="AsyncFunction";var w5=e=>!!e&&!!e.validate&&!!(Us(e.validate)&&e.validate.constructor.name===dv||vt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===dv)),_5=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),uv=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Uo=(e,t,n,i)=>{for(const l of n||Object.keys(e)){const c=ve(e,l);if(c){const{_f:u,...h}=c;if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],l)&&!i)return!0;if(u.ref&&t(u.ref,u.name)&&!i)return!0;if(Uo(h,t))break}else if(vt(h)&&Uo(h,t))break}}};function hv(e,t,n){const i=ve(e,n);if(i||fd(n))return{error:i,name:n};const l=n.split(".");for(;l.length;){const c=l.join("."),u=ve(t,c),h=ve(e,c);if(u&&!Array.isArray(u)&&n!==c)return{name:n};if(h&&h.type)return{name:c,error:h};if(h&&h.root&&h.root.type)return{name:`${c}.root`,error:h.root};l.pop()}return{name:n}}var N5=(e,t,n,i)=>{n(e);const{name:l,...c}=e;return os(c)||Object.keys(c).length>=Object.keys(t).length||Object.keys(c).find(u=>t[u]===(!i||Vs.all))},S5=(e,t,n)=>!e||!t||e===t||Vo(e).some(i=>i&&(n?i===t:i.startsWith(t)||t.startsWith(i))),T5=(e,t,n,i,l)=>l.isOnAll?!1:!n&&l.isOnTouch?!(t||e):(n?i.isOnBlur:l.isOnBlur)?!e:(n?i.isOnChange:l.isOnChange)?e:!0,C5=(e,t)=>!Qf(ve(e,t)).length&&_t(e,t),E5=(e,t,n)=>{const i=Vo(ve(e,n));return nt(i,"root",t[n]),nt(e,n,i),e},zc=e=>sa(e);function mv(e,t,n="validate"){if(zc(e)||Array.isArray(e)&&e.every(zc)||bs(e)&&!e)return{type:n,message:zc(e)?e:"",ref:t}}var Zr=e=>vt(e)&&!ad(e)?e:{value:e,message:""},fv=async(e,t,n,i,l,c)=>{const{ref:u,refs:h,required:f,maxLength:p,minLength:g,min:y,max:b,pattern:w,validate:_,name:N,valueAsNumber:T,mount:R}=e._f,S=ve(n,N);if(!R||t.has(N))return{};const k=h?h[0]:u,E=K=>{l&&k.reportValidity&&(k.setCustomValidity(bs(K)?"":K||""),k.reportValidity())},j={},M=s0(u),z=ll(u),U=M||z,I=(T||t0(u))&&bt(u.value)&&bt(S)||td(u)&&u.value===""||S===""||Array.isArray(S)&&!S.length,V=x5.bind(null,N,i,j),Q=(K,ie,pe,L=Sa.maxLength,O=Sa.minLength)=>{const P=K?ie:pe;j[N]={type:K?L:O,message:P,ref:u,...V(K?L:O,P)}};if(c?!Array.isArray(S)||!S.length:f&&(!U&&(I||Jt(S))||bs(S)&&!S||z&&!i1(h).isValid||M&&!l1(h).isValid)){const{value:K,message:ie}=zc(f)?{value:!!f,message:f}:Zr(f);if(K&&(j[N]={type:Sa.required,message:ie,ref:k,...V(Sa.required,ie)},!i))return E(ie),j}if(!I&&(!Jt(y)||!Jt(b))){let K,ie;const pe=Zr(b),L=Zr(y);if(!Jt(S)&&!isNaN(S)){const O=u.valueAsNumber||S&&+S;Jt(pe.value)||(K=O>pe.value),Jt(L.value)||(ie=O<L.value)}else{const O=u.valueAsDate||new Date(S),P=A=>new Date(new Date().toDateString()+" "+A),$=u.type=="time",Y=u.type=="week";sa(pe.value)&&S&&(K=$?P(S)>P(pe.value):Y?S>pe.value:O>new Date(pe.value)),sa(L.value)&&S&&(ie=$?P(S)<P(L.value):Y?S<L.value:O<new Date(L.value))}if((K||ie)&&(Q(!!K,pe.message,L.message,Sa.max,Sa.min),!i))return E(j[N].message),j}if((p||g)&&!I&&(sa(S)||c&&Array.isArray(S))){const K=Zr(p),ie=Zr(g),pe=!Jt(K.value)&&S.length>+K.value,L=!Jt(ie.value)&&S.length<+ie.value;if((pe||L)&&(Q(pe,K.message,ie.message),!i))return E(j[N].message),j}if(w&&!I&&sa(S)){const{value:K,message:ie}=Zr(w);if(ad(K)&&!S.match(K)&&(j[N]={type:Sa.pattern,message:ie,ref:u,...V(Sa.pattern,ie)},!i))return E(ie),j}if(_){if(Us(_)){const K=await _(S,n),ie=mv(K,k);if(ie&&(j[N]={...ie,...V(Sa.validate,ie.message)},!i))return E(ie.message),j}else if(vt(_)){let K={};for(const ie in _){if(!os(K)&&!i)break;const pe=mv(await _[ie](S,n),k,ie);pe&&(K={...pe,...V(ie,pe.message)},E(pe.message),i&&(j[N]=K))}if(!os(K)&&(j[N]={ref:k,...K},!i))return j}}return E(!0),j};const A5={mode:Vs.onSubmit,reValidateMode:Vs.onChange,shouldFocusError:!0};function k5(e={}){let t={...A5,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Us(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},l=vt(t.defaultValues)||vt(t.values)?kt(t.defaultValues||t.values)||{}:{},c=t.shouldUnregister?{}:kt(l),u={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,p=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...g};const b={array:nv(),state:nv()},w=t.criteriaMode===Vs.all,_=H=>ee=>{clearTimeout(p),p=setTimeout(H,ee)},N=async H=>{if(!t.disabled&&(g.isValid||y.isValid||H)){const ee=t.resolver?os((await z()).errors):await I(i,!0);ee!==n.isValid&&b.state.next({isValid:ee})}},T=(H,ee)=>{!t.disabled&&(g.isValidating||g.validatingFields||y.isValidating||y.validatingFields)&&((H||Array.from(h.mount)).forEach(ce=>{ce&&(ee?nt(n.validatingFields,ce,ee):_t(n.validatingFields,ce))}),b.state.next({validatingFields:n.validatingFields,isValidating:!os(n.validatingFields)}))},R=(H,ee=[],ce,be,ye=!0,Z=!0)=>{if(be&&ce&&!t.disabled){if(u.action=!0,Z&&Array.isArray(ve(i,H))){const xe=ce(ve(i,H),be.argA,be.argB);ye&&nt(i,H,xe)}if(Z&&Array.isArray(ve(n.errors,H))){const xe=ce(ve(n.errors,H),be.argA,be.argB);ye&&nt(n.errors,H,xe),C5(n.errors,H)}if((g.touchedFields||y.touchedFields)&&Z&&Array.isArray(ve(n.touchedFields,H))){const xe=ce(ve(n.touchedFields,H),be.argA,be.argB);ye&&nt(n.touchedFields,H,xe)}(g.dirtyFields||y.dirtyFields)&&(n.dirtyFields=Eo(l,c)),b.state.next({name:H,isDirty:Q(H,ee),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else nt(c,H,ee)},S=(H,ee)=>{nt(n.errors,H,ee),b.state.next({errors:n.errors})},k=H=>{n.errors=H,b.state.next({errors:n.errors,isValid:!1})},E=(H,ee,ce,be)=>{const ye=ve(i,H);if(ye){const Z=ve(c,H,bt(ce)?ve(l,H):ce);bt(Z)||be&&be.defaultChecked||ee?nt(c,H,ee?Z:lv(ye._f)):pe(H,Z),u.mount&&N()}},j=(H,ee,ce,be,ye)=>{let Z=!1,xe=!1;const Ee={name:H};if(!t.disabled){if(!ce||be){(g.isDirty||y.isDirty)&&(xe=n.isDirty,n.isDirty=Ee.isDirty=Q(),Z=xe!==Ee.isDirty);const ze=Ea(ve(l,H),ee);xe=!!ve(n.dirtyFields,H),ze?_t(n.dirtyFields,H):nt(n.dirtyFields,H,!0),Ee.dirtyFields=n.dirtyFields,Z=Z||(g.dirtyFields||y.dirtyFields)&&xe!==!ze}if(ce){const ze=ve(n.touchedFields,H);ze||(nt(n.touchedFields,H,ce),Ee.touchedFields=n.touchedFields,Z=Z||(g.touchedFields||y.touchedFields)&&ze!==ce)}Z&&ye&&b.state.next(Ee)}return Z?Ee:{}},M=(H,ee,ce,be)=>{const ye=ve(n.errors,H),Z=(g.isValid||y.isValid)&&bs(ee)&&n.isValid!==ee;if(t.delayError&&ce?(f=_(()=>S(H,ce)),f(t.delayError)):(clearTimeout(p),f=null,ce?nt(n.errors,H,ce):_t(n.errors,H)),(ce?!Ea(ye,ce):ye)||!os(be)||Z){const xe={...be,...Z&&bs(ee)?{isValid:ee}:{},errors:n.errors,name:H};n={...n,...xe},b.state.next(xe)}},z=async H=>{T(H,!0);const ee=await t.resolver(c,t.context,j5(H||h.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return T(H),ee},U=async H=>{const{errors:ee}=await z(H);if(H)for(const ce of H){const be=ve(ee,ce);be?nt(n.errors,ce,be):_t(n.errors,ce)}else n.errors=ee;return ee},I=async(H,ee,ce={valid:!0})=>{for(const be in H){const ye=H[be];if(ye){const{_f:Z,...xe}=ye;if(Z){const Ee=h.array.has(Z.name),ze=ye._f&&w5(ye._f);ze&&g.validatingFields&&T([be],!0);const ne=await fv(ye,h.disabled,c,w,t.shouldUseNativeValidation&&!ee,Ee);if(ze&&g.validatingFields&&T([be]),ne[Z.name]&&(ce.valid=!1,ee))break;!ee&&(ve(ne,Z.name)?Ee?E5(n.errors,ne,Z.name):nt(n.errors,Z.name,ne[Z.name]):_t(n.errors,Z.name))}!os(xe)&&await I(xe,ee,ce)}}return ce.valid},V=()=>{for(const H of h.unMount){const ee=ve(i,H);ee&&(ee._f.refs?ee._f.refs.every(ce=>!lm(ce)):!lm(ee._f.ref))&&oe(H)}h.unMount=new Set},Q=(H,ee)=>!t.disabled&&(H&&ee&&nt(c,H,ee),!Ea(A(),l)),K=(H,ee,ce)=>s1(H,h,{...u.mount?c:bt(ee)?l:sa(H)?{[H]:ee}:ee},ce,ee),ie=H=>Qf(ve(u.mount?c:l,H,t.shouldUnregister?ve(l,H,[]):[])),pe=(H,ee,ce={})=>{const be=ve(i,H);let ye=ee;if(be){const Z=be._f;Z&&(!Z.disabled&&nt(c,H,o1(ee,Z)),ye=td(Z.ref)&&Jt(ee)?"":ee,a1(Z.ref)?[...Z.ref.options].forEach(xe=>xe.selected=ye.includes(xe.value)):Z.refs?ll(Z.ref)?Z.refs.forEach(xe=>{(!xe.defaultChecked||!xe.disabled)&&(Array.isArray(ye)?xe.checked=!!ye.find(Ee=>Ee===xe.value):xe.checked=ye===xe.value||!!ye)}):Z.refs.forEach(xe=>xe.checked=xe.value===ye):t0(Z.ref)?Z.ref.value="":(Z.ref.value=ye,Z.ref.type||b.state.next({name:H,values:kt(c)})))}(ce.shouldDirty||ce.shouldTouch)&&j(H,ye,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&Y(H)},L=(H,ee,ce)=>{for(const be in ee){if(!ee.hasOwnProperty(be))return;const ye=ee[be],Z=H+"."+be,xe=ve(i,Z);(h.array.has(H)||vt(ye)||xe&&!xe._f)&&!Hn(ye)?L(Z,ye,ce):pe(Z,ye,ce)}},O=(H,ee,ce={})=>{const be=ve(i,H),ye=h.array.has(H),Z=kt(ee);nt(c,H,Z),ye?(b.array.next({name:H,values:kt(c)}),(g.isDirty||g.dirtyFields||y.isDirty||y.dirtyFields)&&ce.shouldDirty&&b.state.next({name:H,dirtyFields:Eo(l,c),isDirty:Q(H,Z)})):be&&!be._f&&!Jt(Z)?L(H,Z,ce):pe(H,Z,ce),uv(H,h)&&b.state.next({...n,name:H}),b.state.next({name:u.mount?H:void 0,values:kt(c)})},P=async H=>{u.mount=!0;const ee=H.target;let ce=ee.name,be=!0;const ye=ve(i,ce),Z=ze=>{be=Number.isNaN(ze)||Hn(ze)&&isNaN(ze.getTime())||Ea(ze,ve(c,ce,ze))},xe=cv(t.mode),Ee=cv(t.reValidateMode);if(ye){let ze,ne;const Re=ee.type?lv(ye._f):Zw(H),Ve=H.type===ed.BLUR||H.type===ed.FOCUS_OUT,Wt=!_5(ye._f)&&!t.resolver&&!ve(n.errors,ce)&&!ye._f.deps||T5(Ve,ve(n.touchedFields,ce),n.isSubmitted,Ee,xe),Ht=uv(ce,h,Ve);nt(c,ce,Re),Ve?(!ee||!ee.readOnly)&&(ye._f.onBlur&&ye._f.onBlur(H),f&&f(0)):ye._f.onChange&&ye._f.onChange(H);const us=j(ce,Re,Ve),js=!os(us)||Ht;if(!Ve&&b.state.next({name:ce,type:H.type,values:kt(c)}),Wt)return(g.isValid||y.isValid)&&(t.mode==="onBlur"?Ve&&N():Ve||N()),js&&b.state.next({name:ce,...Ht?{}:us});if(!Ve&&Ht&&b.state.next({...n}),t.resolver){const{errors:Gs}=await z([ce]);if(Z(Re),be){const Ys=hv(n.errors,i,ce),xn=hv(Gs,i,Ys.name||ce);ze=xn.error,ce=xn.name,ne=os(Gs)}}else T([ce],!0),ze=(await fv(ye,h.disabled,c,w,t.shouldUseNativeValidation))[ce],T([ce]),Z(Re),be&&(ze?ne=!1:(g.isValid||y.isValid)&&(ne=await I(i,!0)));be&&(ye._f.deps&&Y(ye._f.deps),M(ce,ne,ze,us))}},$=(H,ee)=>{if(ve(n.errors,ee)&&H.focus)return H.focus(),1},Y=async(H,ee={})=>{let ce,be;const ye=Vo(H);if(t.resolver){const Z=await U(bt(H)?H:ye);ce=os(Z),be=H?!ye.some(xe=>ve(Z,xe)):ce}else H?(be=(await Promise.all(ye.map(async Z=>{const xe=ve(i,Z);return await I(xe&&xe._f?{[Z]:xe}:xe)}))).every(Boolean),!(!be&&!n.isValid)&&N()):be=ce=await I(i);return b.state.next({...!sa(H)||(g.isValid||y.isValid)&&ce!==n.isValid?{}:{name:H},...t.resolver||!H?{isValid:ce}:{},errors:n.errors}),ee.shouldFocus&&!be&&Uo(i,$,H?ye:h.mount),be},A=H=>{const ee={...u.mount?c:l};return bt(H)?ee:sa(H)?ve(ee,H):H.map(ce=>ve(ee,ce))},F=(H,ee)=>({invalid:!!ve((ee||n).errors,H),isDirty:!!ve((ee||n).dirtyFields,H),error:ve((ee||n).errors,H),isValidating:!!ve(n.validatingFields,H),isTouched:!!ve((ee||n).touchedFields,H)}),B=H=>{H&&Vo(H).forEach(ee=>_t(n.errors,ee)),b.state.next({errors:H?n.errors:{}})},W=(H,ee,ce)=>{const be=(ve(i,H,{_f:{}})._f||{}).ref,ye=ve(n.errors,H)||{},{ref:Z,message:xe,type:Ee,...ze}=ye;nt(n.errors,H,{...ze,...ee,ref:be}),b.state.next({name:H,errors:n.errors,isValid:!1}),ce&&ce.shouldFocus&&be&&be.focus&&be.focus()},se=(H,ee)=>Us(H)?b.state.subscribe({next:ce=>"values"in ce&&H(K(void 0,ee),ce)}):K(H,ee,!0),fe=H=>b.state.subscribe({next:ee=>{S5(H.name,ee.name,H.exact)&&N5(ee,H.formState||g,Tt,H.reRenderRoot)&&H.callback({values:{...c},...n,...ee,defaultValues:l})}}).unsubscribe,ge=H=>(u.mount=!0,y={...y,...H.formState},fe({...H,formState:y})),oe=(H,ee={})=>{for(const ce of H?Vo(H):h.mount)h.mount.delete(ce),h.array.delete(ce),ee.keepValue||(_t(i,ce),_t(c,ce)),!ee.keepError&&_t(n.errors,ce),!ee.keepDirty&&_t(n.dirtyFields,ce),!ee.keepTouched&&_t(n.touchedFields,ce),!ee.keepIsValidating&&_t(n.validatingFields,ce),!t.shouldUnregister&&!ee.keepDefaultValue&&_t(l,ce);b.state.next({values:kt(c)}),b.state.next({...n,...ee.keepDirty?{isDirty:Q()}:{}}),!ee.keepIsValid&&N()},me=({disabled:H,name:ee})=>{(bs(H)&&u.mount||H||h.disabled.has(ee))&&(H?h.disabled.add(ee):h.disabled.delete(ee))},Ne=(H,ee={})=>{let ce=ve(i,H);const be=bs(ee.disabled)||bs(t.disabled);return nt(i,H,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:H}},name:H,mount:!0,...ee}}),h.mount.add(H),ce?me({disabled:bs(ee.disabled)?ee.disabled:t.disabled,name:H}):E(H,!0,ee.value),{...be?{disabled:ee.disabled||t.disabled}:{},...t.progressive?{required:!!ee.required,min:Ao(ee.min),max:Ao(ee.max),minLength:Ao(ee.minLength),maxLength:Ao(ee.maxLength),pattern:Ao(ee.pattern)}:{},name:H,onChange:P,onBlur:P,ref:ye=>{if(ye){Ne(H,ee),ce=ve(i,H);const Z=bt(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,xe=y5(Z),Ee=ce._f.refs||[];if(xe?Ee.find(ze=>ze===Z):Z===ce._f.ref)return;nt(i,H,{_f:{...ce._f,...xe?{refs:[...Ee.filter(lm),Z,...Array.isArray(ve(l,H))?[{}]:[]],ref:{type:Z.type,name:H}}:{ref:Z}}}),E(H,!1,void 0,Z)}else ce=ve(i,H,{}),ce._f&&(ce._f.mount=!1),(t.shouldUnregister||ee.shouldUnregister)&&!(Jw(h.array,H)&&u.action)&&h.unMount.add(H)}}},Be=()=>t.shouldFocusError&&Uo(i,$,h.mount),je=H=>{bs(H)&&(b.state.next({disabled:H}),Uo(i,(ee,ce)=>{const be=ve(i,ce);be&&(ee.disabled=be._f.disabled||H,Array.isArray(be._f.refs)&&be._f.refs.forEach(ye=>{ye.disabled=be._f.disabled||H}))},0,!1))},De=(H,ee)=>async ce=>{let be;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let ye=kt(c);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:Z,values:xe}=await z();n.errors=Z,ye=kt(xe)}else await I(i);if(h.disabled.size)for(const Z of h.disabled)_t(ye,Z);if(_t(n.errors,"root"),os(n.errors)){b.state.next({errors:{}});try{await H(ye,ce)}catch(Z){be=Z}}else ee&&await ee({...n.errors},ce),Be(),setTimeout(Be);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:os(n.errors)&&!be,submitCount:n.submitCount+1,errors:n.errors}),be)throw be},St=(H,ee={})=>{ve(i,H)&&(bt(ee.defaultValue)?O(H,kt(ve(l,H))):(O(H,ee.defaultValue),nt(l,H,kt(ee.defaultValue))),ee.keepTouched||_t(n.touchedFields,H),ee.keepDirty||(_t(n.dirtyFields,H),n.isDirty=ee.defaultValue?Q(H,kt(ve(l,H))):Q()),ee.keepError||(_t(n.errors,H),g.isValid&&N()),b.state.next({...n}))},ds=(H,ee={})=>{const ce=H?kt(H):l,be=kt(ce),ye=os(H),Z=ye?l:be;if(ee.keepDefaultValues||(l=ce),!ee.keepValues){if(ee.keepDirtyValues){const xe=new Set([...h.mount,...Object.keys(Eo(l,c))]);for(const Ee of Array.from(xe))ve(n.dirtyFields,Ee)?nt(Z,Ee,ve(c,Ee)):O(Ee,ve(Z,Ee))}else{if(Wf&&bt(H))for(const xe of h.mount){const Ee=ve(i,xe);if(Ee&&Ee._f){const ze=Array.isArray(Ee._f.refs)?Ee._f.refs[0]:Ee._f.ref;if(td(ze)){const ne=ze.closest("form");if(ne){ne.reset();break}}}}if(ee.keepFieldsRef)for(const xe of h.mount)O(xe,ve(Z,xe));else i={}}c=t.shouldUnregister?ee.keepDefaultValues?kt(l):{}:kt(Z),b.array.next({values:{...Z}}),b.state.next({values:{...Z}})}h={mount:ee.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!ee.keepIsValid||!!ee.keepDirtyValues,u.watch=!!t.shouldUnregister,b.state.next({submitCount:ee.keepSubmitCount?n.submitCount:0,isDirty:ye?!1:ee.keepDirty?n.isDirty:!!(ee.keepDefaultValues&&!Ea(H,l)),isSubmitted:ee.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ye?{}:ee.keepDirtyValues?ee.keepDefaultValues&&c?Eo(l,c):n.dirtyFields:ee.keepDefaultValues&&H?Eo(l,H):ee.keepDirty?n.dirtyFields:{},touchedFields:ee.keepTouched?n.touchedFields:{},errors:ee.keepErrors?n.errors:{},isSubmitSuccessful:ee.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},Ra=(H,ee)=>ds(Us(H)?H(c):H,ee),la=(H,ee={})=>{const ce=ve(i,H),be=ce&&ce._f;if(be){const ye=be.refs?be.refs[0]:be.ref;ye.focus&&(ye.focus(),ee.shouldSelect&&Us(ye.select)&&ye.select())}},Tt=H=>{n={...n,...H}},ca={control:{register:Ne,unregister:oe,getFieldState:F,handleSubmit:De,setError:W,_subscribe:fe,_runSchema:z,_focusError:Be,_getWatch:K,_getDirty:Q,_setValid:N,_setFieldArray:R,_setDisabledField:me,_setErrors:k,_getFieldArray:ie,_reset:ds,_resetDefaultValues:()=>Us(t.defaultValues)&&t.defaultValues().then(H=>{Ra(H,t.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:je,_subjects:b,_proxyFormState:g,get _fields(){return i},get _formValues(){return c},get _state(){return u},set _state(H){u=H},get _defaultValues(){return l},get _names(){return h},set _names(H){h=H},get _formState(){return n},get _options(){return t},set _options(H){t={...t,...H}}},subscribe:ge,trigger:Y,register:Ne,handleSubmit:De,watch:se,setValue:O,getValues:A,reset:Ra,resetField:St,clearErrors:B,unregister:oe,setError:W,setFocus:la,getFieldState:F};return{...ca,formControl:ca}}function a0(e={}){const t=Ie.useRef(void 0),n=Ie.useRef(void 0),[i,l]=Ie.useState({isDirty:!1,isValidating:!1,isLoading:Us(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Us(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:i},e.defaultValues&&!Us(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...h}=k5(e);t.current={...h,formState:i}}const c=t.current.control;return c._options=e,e0(()=>{const u=c._subscribe({formState:c._proxyFormState,callback:()=>l({...c._formState}),reRenderRoot:!0});return l(h=>({...h,isReady:!0})),c._formState.isReady=!0,u},[c]),Ie.useEffect(()=>c._disableForm(e.disabled),[c,e.disabled]),Ie.useEffect(()=>{e.mode&&(c._options.mode=e.mode),e.reValidateMode&&(c._options.reValidateMode=e.reValidateMode)},[c,e.mode,e.reValidateMode]),Ie.useEffect(()=>{e.errors&&(c._setErrors(e.errors),c._focusError())},[c,e.errors]),Ie.useEffect(()=>{e.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[c,e.shouldUnregister]),Ie.useEffect(()=>{if(c._proxyFormState.isDirty){const u=c._getDirty();u!==i.isDirty&&c._subjects.state.next({isDirty:u})}},[c,i.isDirty]),Ie.useEffect(()=>{e.values&&!Ea(e.values,n.current)?(c._reset(e.values,{keepFieldsRef:!0,...c._options.resetOptions}),n.current=e.values,l(u=>({...u}))):c._resetDefaultValues()},[c,e.values]),Ie.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),t.current.formState=t1(i,c),t.current}const M5=({isOpen:e,onClose:t,item:n})=>{const{addMenuItem:i,updateMenuItem:l}=ft(),{register:c,handleSubmit:u,control:h,reset:f,formState:{errors:p}}=a0(),[g,y]=v.useState(!1);v.useEffect(()=>{f(n?{name:n.name,description:n.description||"",price:n.price,category:n.category,preparationTime:n.preparation_time||0,available:n.available,image_url:n.image_url||""}:{name:"",description:"",price:"",category:"food",preparationTime:"",available:!0,image_url:""})},[n,f]);const b=async _=>{console.log("=== INCIO DO SUBMIT ==="),console.log("Dados recebidos do formulrio:",_),y(!0);try{const N={..._,description:_.description||"",preparationTime:_.preparationTime||void 0};console.log("Dados processados para envio:",N),n?(console.log("Modo: Edio de item existente"),await l({...n,...N})):(console.log("Modo: Criao de novo item"),await i(N)),console.log("Item salvo com sucesso!"),n||f({name:"",description:"",price:"",category:"food",preparationTime:"",available:!0,image_url:""}),t()}catch(N){console.error("=== ERRO DETALHADO ==="),console.error("Tipo do erro:",typeof N),console.error("Erro completo:",N),console.error("Stack trace:",N instanceof Error?N.stack:"N/A"),N&&typeof N=="object"&&"message"in N&&console.error("Mensagem do erro:",N.message),alert(`Erro ao salvar o prato: ${N instanceof Error?N.message:"Erro desconhecido"}`)}finally{y(!1),console.log("=== FIM DO SUBMIT ===")}},w=[{value:"food",label:"Pratos Principais"},{value:"snacks",label:"Petiscos"},{value:"drinks",label:"Bebidas"}];return s.jsx(Zn,{children:e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:s.jsxs(_e.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gray-50 rounded-t-xl",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n?"Editar Prato":"Novo Prato"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n?"Atualize as informaes do prato":"Adicione um novo prato ao cardpio"})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-200 p-2 rounded-lg transition-colors duration-200",disabled:g,title:"Fechar modal","aria-label":"Fechar modal",children:s.jsx(rt,{size:24})})]}),s.jsxs("form",{onSubmit:u(b),className:"p-6 space-y-6",children:[s.jsx(Jr,{label:"Nome do Prato",error:p.name,children:s.jsx("input",{...c("name",{required:"Nome  obrigatrio"}),className:"form-input",placeholder:"Digite o nome do prato",disabled:g})}),s.jsx(Jr,{label:"Descrio",error:p.description,children:s.jsx("textarea",{...c("description"),className:"form-input min-h-[80px] resize-none",placeholder:"Descreva o prato...",disabled:g})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Jr,{label:"Categoria",error:p.category,children:s.jsx(Yn,{name:"category",control:h,rules:{required:"Categoria  obrigatria"},render:({field:_})=>s.jsx("select",{..._,className:"form-select",disabled:g,children:w.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})})}),s.jsx(Jr,{label:"Preo (R$)",error:p.price,children:s.jsx("input",{type:"number",step:"0.01",...c("price",{required:"Preo  obrigatrio",valueAsNumber:!0,min:{value:.01,message:"Valor deve ser maior que 0"}}),className:"form-input",placeholder:"Digite o preo",disabled:g})})]}),s.jsxs(Jr,{label:"URL da Imagem (opcional)",error:p.image_url,children:[s.jsx("input",{...c("image_url"),className:"form-input",placeholder:"https://exemplo.com/imagem.jpg",disabled:g}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole aqui o link da imagem do prato. Recomendamos imagens com proporo 1:1 (quadrada)."})]}),s.jsx(Jr,{label:"Tempo de Preparo (min)",error:p.preparationTime,children:s.jsx("input",{type:"number",...c("preparationTime",{setValueAs:_=>_===""||_===null?void 0:Number(_),min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"Digite o tempo em minutos",disabled:g})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Yn,{name:"available",control:h,render:({field:_})=>s.jsx("input",{type:"checkbox",onChange:_.onChange,onBlur:_.onBlur,name:_.name,ref:_.ref,checked:_.value,className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2",disabled:g,title:"Marcar como disponvel","aria-label":"Marcar prato como disponvel para pedidos"})}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Prato disponvel para pedidos"})]}),s.jsxs("div",{className:"pt-6 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"btn-secondary",disabled:g,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn-primary flex items-center justify-center space-x-2",disabled:g,children:g?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Salvando..."})]}):s.jsx("span",{children:n?"Salvar Alteraes":"Adicionar Prato"})})]})]})]})})})},Jr=({label:e,children:t,error:n})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:e}),t,n&&s.jsxs("p",{className:"text-red-500 text-sm flex items-center space-x-1",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})}),s.jsx("span",{children:n.message})]})]}),O5=({menuItems:e})=>{const{removeMenuItem:t}=ft(),[n,i]=v.useState(""),[l,c]=v.useState(!1),[u,h]=v.useState(null),f=e.filter(w=>{const _=w.name.toLowerCase().includes(n.toLowerCase()),N=w.item_type!=="direct";return _&&N}),p=()=>{h(null),c(!0)},g=w=>{h(w),c(!0)},y=()=>{c(!1),h(null)},b=async w=>{window.confirm(`Tem certeza que deseja remover "${w.name}" do cardpio?`)&&await t(w.id)};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Gesto de Cardpio"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Gerencie apenas pratos que precisam de preparo na cozinha.",s.jsx("br",{}),s.jsx("span",{className:"text-blue-600 font-medium",children:'Produtos prontos do estoque aparecem automaticamente no balco quando marcados como "Disponvel para venda" no mdulo Estoque.'})]})]}),s.jsx("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:s.jsxs(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center space-x-2",children:[s.jsx(vs,{size:20}),s.jsx("span",{children:"Novo Prato"})]})})]}),s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6",children:s.jsx("input",{type:"text",placeholder:"Buscar pratos...",value:n,onChange:w=>i(w.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(w=>s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[w.image_url&&s.jsx("div",{className:"aspect-video w-full bg-gray-100 overflow-hidden",children:s.jsx("img",{src:w.image_url,alt:w.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",onError:_=>{_.currentTarget.style.display="none"}})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h3",{className:"font-semibold text-gray-800",children:w.name}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>g(w),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Editar prato","aria-label":"Editar prato",children:s.jsx(ol,{size:16})}),s.jsx("button",{onClick:()=>b(w),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Excluir prato","aria-label":"Excluir prato",children:s.jsx(hd,{size:16})})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:w.description}),s.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[s.jsx(Lt,{size:14}),s.jsxs("span",{children:[w.preparation_time||0,"min"]})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(qt,{size:14}),s.jsxs("span",{className:"font-semibold",children:["R$ ",w.price.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${w.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.available?"Disponvel":"Indisponvel"}),s.jsx("span",{className:"text-xs text-gray-500 capitalize",children:w.category==="Prato Principal"?"Prato Principal":w.category==="Petiscos"?"Petiscos":"Bebidas"})]})]})]},w.id))}),f.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"Nenhum prato encontrado"})}),s.jsx(M5,{isOpen:l,onClose:y,item:u})]})},D5=({orders:e,menuItems:t})=>{const{updateOrderStatus:n}=ft(),[i,l]=v.useState(new Set),[c,u]=v.useState("all"),f=(()=>{const S=new Map;return e.forEach(k=>{const E=k.tableNumber||"Balco";S.has(E)||S.set(E,[]),S.get(E).push(k)}),S})(),p=S=>S.items.reduce((k,E)=>{const j=t.find(z=>z.id===E.menuItemId)||E.menuItem,M=(j==null?void 0:j.preparation_time)||(j==null?void 0:j.preparationTime)||0;return k+M},0),g=S=>{const k=(new Date().getTime()-S.createdAt.getTime())/6e4;return k>20?"high":k>10?"medium":"low"},y=S=>{switch(S){case"high":return"border-red-400 bg-red-50";case"medium":return"border-yellow-400 bg-yellow-50";case"low":return"border-green-400 bg-green-50";default:return"border-gray-200 bg-white"}},b=S=>S.id.slice(-4).toUpperCase(),w=S=>S.id.startsWith("balcao-"),_=S=>S.id.startsWith("comanda-"),N=async(S,k)=>{console.log(" Cozinha - Atualizando status:",{orderId:S,newStatus:k,isComandaOrder:_({id:S})}),l(E=>new Set([...E,S]));try{await n(S,k),console.log(` Status do pedido ${S} atualizado para ${k}`)}catch(E){console.error(" Erro ao atualizar status:",E)}finally{setTimeout(()=>{l(E=>{const j=new Set(E);return j.delete(S),j})},1e3)}},T=S=>(f.get(S)||[]).length>1,R=e.filter(S=>c==="all"?!0:(S.tableNumber||"Balco")===c);return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Pedidos da Cozinha"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[Array.from(f.entries()).filter(([S,k])=>k.length>1).length>0&&s.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:[Array.from(f.entries()).filter(([S,k])=>k.length>1).length," mesa(s) com mltiplos pedidos"]}),c!=="all"&&s.jsxs("button",{onClick:()=>u("all"),className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[s.jsxs("span",{children:["Filtro: ",c]}),s.jsx("span",{className:"text-blue-600",children:""})]})]})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[R.length," de ",e.length," pedidos"]})]}),Array.from(f.entries()).filter(([S,k])=>k.length>1).length>0&&s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:" Mesas com Mltiplos Pedidos:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(f.entries()).filter(([S,k])=>k.length>1).map(([S,k])=>s.jsxs("button",{onClick:()=>u(S),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors hover:shadow-md transform hover:scale-105 ${c===S?"bg-orange-400 text-white":"bg-orange-200 text-orange-800 hover:bg-orange-300"}`,title:`Filtrar pedidos da ${S}`,children:["Mesa ",S,": ",k.length," pedidos"]},S))})]}),R.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:c!=="all"?`Nenhum pedido encontrado para ${c}`:"Nenhum pedido pendente na cozinha"})}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:R.map(S=>{const k=g(S),E=p(S),j=S.items.filter(z=>{const U=t.find(I=>I.id===z.menuItemId)||z.menuItem;return U&&U.item_type!=="direct"}),M=T(S.tableNumber||"Balco");return s.jsxs(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`border-2 rounded-lg p-4 ${y(k)} ${M?"ring-2 ring-orange-300 ring-offset-2":""} ${w(S)?"border-green-400 bg-green-50 shadow-lg":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(il,{size:16,className:"text-gray-500"}),s.jsxs("span",{className:"font-bold text-lg",children:["Mesa ",S.tableNumber||"N/A"]}),s.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",b(S)]}),w(S)&&s.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:" PAGO"}),_(S)&&s.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"AGUARDA PAGTO"})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[s.jsx(Lt,{size:14}),s.jsx("span",{children:Ft(S.createdAt,"HH:mm",{locale:ts})})]})]}),s.jsx("div",{className:"space-y-2 mb-4",children:j.map(z=>{const U=t.find(I=>I.id===z.menuItemId)||z.menuItem;return s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"font-medium",children:[z.quantity,"x ",(U==null?void 0:U.name)||"Item no encontrado"]}),s.jsxs("span",{className:"text-sm text-gray-600",children:[(U==null?void 0:U.preparation_time)||(U==null?void 0:U.preparationTime)||0,"min"]})]},z.id)})}),S.notes&&s.jsx("div",{className:"mb-4 p-2 bg-yellow-100 rounded border",children:s.jsx("p",{className:"text-sm text-yellow-800",children:S.notes})}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["Tempo estimado: ",E,"min"]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${k==="high"?"bg-red-200 text-red-800":k==="medium"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:k==="high"?"Urgente":k==="medium"?"Mdio":"Normal"})]}),s.jsxs("div",{className:"space-y-2",children:[S.status==="pending"&&s.jsx("button",{onClick:()=>N(S.id,"preparing"),disabled:i.has(S.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(S.id)?"bg-blue-300 text-blue-700 cursor-not-allowed animate-pulse scale-95":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(S.id)?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-700 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Iniciando..."})]}):"Iniciar Preparo"}),S.status==="preparing"&&s.jsx("button",{onClick:()=>N(S.id,"ready"),disabled:i.has(S.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(S.id)?"bg-green-300 text-green-700 cursor-not-allowed animate-pulse scale-95":"bg-green-600 text-white hover:bg-green-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(S.id)?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Finalizando..."})]}):"Marcar como Pronto"}),S.status==="ready"&&s.jsx("div",{className:"w-full py-2 rounded-lg font-medium bg-green-100 text-green-800 border-2 border-green-300 text-center animate-pulse",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:""})}),s.jsx("span",{children:"Pronto para Entrega"})]})})]})]},S.id)})})]})},R5=()=>{const{kitchenOrders:e,menuItems:t}=ft(),[n,i]=v.useState("orders"),l=e.filter(h=>h.status==="pending"||h.status==="preparing"),c=t.filter(h=>h.item_type!=="direct"),u=c.filter(h=>h.preparationTime).reduce((h,f)=>h+(f.preparationTime||0),0)/c.filter(h=>h.preparationTime).length||0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mdulo Cozinha"}),s.jsx("p",{className:"text-gray-600",children:"Gesto completa da cozinha e cardpio"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>i("orders"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="orders"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Pedidos"}),s.jsx("button",{onClick:()=>i("menu"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="menu"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cardpio"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Pedidos Pendentes"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:l.length})]}),s.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:s.jsx(Lt,{className:"w-6 h-6 text-orange-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Tempo Mdio"}),s.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[u.toFixed(0),"min"]})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:s.jsx(Lt,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Pratos Disponveis"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:c.filter(h=>h.available).length})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:s.jsx(Xc,{className:"w-6 h-6 text-green-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md",children:n==="orders"?s.jsx(D5,{orders:l,menuItems:c}):s.jsx(O5,{menuItems:c})})]})},P5=({isOpen:e,onClose:t,item:n})=>{const{addInventoryItem:i,updateInventoryItem:l,inventoryCategories:c}=ft(),{register:u,handleSubmit:h,control:f,reset:p,formState:{errors:g}}=a0(),[y,b]=v.useState(!1);v.useEffect(()=>{p(n?{name:n.name,categoryId:n.categoryId,currentStock:n.currentStock,minStock:n.minStock,unit:n.unit,cost:n.cost,supplier:n.supplier,availableForSale:n.availableForSale,image_url:n.image_url}:{name:"",categoryId:"",currentStock:void 0,minStock:void 0,unit:"unidades",cost:void 0,supplier:"",availableForSale:!1,image_url:""})},[n,p]);const w=async N=>{b(!0);try{n?await l({...n,...N}):await i(N),t()}catch(T){console.error("Falha ao salvar o item:",T)}finally{b(!1)}},_=["unidades","kg","litros","garrafas"];return s.jsx(Zn,{children:e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:s.jsxs(_e.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gray-50 rounded-t-xl",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n?"Editar Item":"Novo Item no Estoque"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n?"Atualize as informaes do item":"Adicione um novo item ao inventrio"})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-200 p-2 rounded-lg transition-colors duration-200",disabled:y,children:s.jsx(rt,{size:24})})]}),s.jsxs("form",{onSubmit:h(w),className:"p-6 space-y-6",children:[s.jsx(on,{label:"Nome do Item",error:g.name,children:s.jsx("input",{...u("name",{required:"Nome  obrigatrio"}),className:"form-input",placeholder:"Digite o nome do item",disabled:y})}),s.jsx(on,{label:"Categoria",error:g.categoryId,children:s.jsx(Yn,{name:"categoryId",control:f,rules:{required:"Categoria  obrigatria"},render:({field:N})=>s.jsxs("select",{...N,className:"form-select",disabled:y,children:[s.jsx("option",{value:"",children:"Selecione uma categoria"}),c.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(on,{label:"Estoque Atual",error:g.currentStock,children:s.jsx("input",{type:"number",...u("currentStock",{required:"Estoque atual  obrigatrio",valueAsNumber:!0,min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"0",disabled:y})}),s.jsx(on,{label:"Estoque Mnimo",error:g.minStock,children:s.jsx("input",{type:"number",...u("minStock",{required:"Estoque mnimo  obrigatrio",valueAsNumber:!0,min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"0",disabled:y})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(on,{label:"Unidade",error:g.unit,children:s.jsx(Yn,{name:"unit",control:f,rules:{required:"Unidade  obrigatria"},render:({field:N})=>s.jsx("select",{...N,className:"form-select",disabled:y,children:_.map(T=>s.jsx("option",{value:T,children:T},T))})})}),s.jsx(on,{label:"Custo por Unidade (R$)",error:g.cost,children:s.jsx("input",{type:"number",step:"0.01",...u("cost",{required:"Custo  obrigatrio",valueAsNumber:!0,min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"0,00",disabled:y})})]}),s.jsx(on,{label:"Fornecedor (Opcional)",error:g.supplier,children:s.jsx("input",{...u("supplier"),className:"form-input",placeholder:"Nome do fornecedor",disabled:y})}),s.jsxs(on,{label:"URL da Imagem (Opcional)",error:g.image_url,children:[s.jsx("input",{...u("image_url"),className:"form-input",placeholder:"https://exemplo.com/imagem.jpg",disabled:y}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole aqui o link de uma imagem para representar este item do estoque"})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx(Yn,{name:"availableForSale",control:f,render:({field:N})=>s.jsx("input",{type:"checkbox",checked:N.value||!1,onChange:T=>N.onChange(T.target.checked),onBlur:N.onBlur,name:N.name,ref:N.ref,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:y})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Disponvel para Venda"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Marque esta opo para que o produto aparea automaticamente no balco e comandas quando houver estoque"})]})]}),s.jsxs("div",{className:"pt-6 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"btn-secondary",disabled:y,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn-primary flex items-center justify-center space-x-2",disabled:y,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Salvando..."})]}):s.jsx("span",{children:n?"Salvar Alteraes":"Adicionar Item"})})]})]})]})})})},on=({label:e,children:t,error:n})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:e}),t,n&&s.jsxs("p",{className:"text-red-500 text-sm flex items-center space-x-1",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})}),s.jsx("span",{children:n.message})]})]}),z5=({item:e,categories:t,onEdit:n,onDelete:i})=>{const l=e.currentStock<=e.minStock,c=e.availableForSale||!1,u=t.find(h=>h.id===e.categoryId);return s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white border rounded-lg p-4 hover:shadow-lg transition-shadow relative ${l?"border-red-300":c?"border-green-300":"border-gray-200"}`,children:[e.image_url&&s.jsx("div",{className:"w-full h-32 mb-3 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center",children:s.jsx("img",{src:e.image_url,alt:e.name,className:"max-w-full max-h-full object-contain hover:scale-105 transition-transform duration-300",onError:h=>{h.currentTarget.style.display="none"}})}),s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"pr-4 flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800",children:e.name}),s.jsx("p",{className:"text-sm text-gray-500",children:(u==null?void 0:u.name)||"Sem categoria"})]}),s.jsxs("div",{className:"flex space-x-2 ml-2",children:[s.jsx("button",{onClick:()=>n(e),className:"text-gray-400 hover:text-blue-600 transition-colors p-1 rounded hover:bg-gray-100",title:"Editar item","aria-label":`Editar ${e.name}`,children:s.jsx(ol,{size:16})}),s.jsx("button",{onClick:()=>i(e.id),className:"text-gray-400 hover:text-red-600 transition-colors p-1 rounded hover:bg-gray-100",title:"Excluir item","aria-label":`Excluir ${e.name}`,children:s.jsx(hd,{size:16})})]})]}),s.jsx("div",{className:"mb-3",children:c?s.jsxs("div",{className:"flex items-center space-x-1 bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium w-fit",children:[s.jsx(Wo,{size:12}),s.jsx("span",{children:"Disponvel para venda"})]}):s.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs font-medium w-fit",children:[s.jsx(Xb,{size:12}),s.jsx("span",{children:"No disponvel para venda"})]})}),s.jsxs("div",{className:"flex justify-between items-baseline mb-3",children:[s.jsx("span",{className:"text-2xl font-bold text-gray-800",children:e.currentStock}),s.jsxs("span",{className:"text-sm text-gray-600",children:["/ ",e.minStock," ",e.unit]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full ${l?"bg-red-500":"bg-blue-500"}`,style:{width:`${Math.min(e.currentStock/(e.minStock*2)*100,100)}%`}})}),(l||!c)&&s.jsxs("div",{className:"flex flex-col space-y-1 mt-2",children:[l&&s.jsxs("div",{className:"flex items-center space-x-1 text-red-600 text-xs",children:[s.jsx(Fs,{size:14}),s.jsx("span",{children:"Estoque baixo"})]}),!c&&s.jsxs("div",{className:"flex items-center space-x-1 text-orange-600 text-xs",children:[s.jsx(Xb,{size:14}),s.jsx("span",{children:"Produto no liberado para venda no balco"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-3 flex justify-between",children:[s.jsxs("span",{children:["Custo: R$ ",e.cost.toFixed(2)]}),s.jsxs("span",{children:["Fornecedor: ",e.supplier||"N/A"]})]})]})},L5=()=>{const e=Wn(),{inventory:t,inventoryCategories:n,removeInventoryItem:i}=ft(),[l,c]=v.useState(!1),[u,h]=v.useState(null),[f,p]=v.useState(""),g=N=>{h(N),c(!0)},y=()=>{h(null),c(!0)},b=()=>{c(!1),h(null)},w=v.useMemo(()=>t.filter(N=>N.name.toLowerCase().includes(f.toLowerCase())),[t,f]),_=v.useMemo(()=>{const N=t.reduce((R,S)=>R+S.cost*S.currentStock,0),T=t.filter(R=>R.currentStock<=R.minStock).length;return{totalValue:N,lowStockCount:T,totalItems:t.length}},[t]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mdulo Estoque"}),s.jsx("p",{className:"text-gray-600",children:"Controle e gesto de inventrio"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 mt-4 sm:mt-0",children:[s.jsxs(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e("/inventory/atualizacao-massiva"),className:"bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center space-x-2",children:[s.jsx(Xn,{size:20}),s.jsx("span",{children:"Atualizao Massiva"})]}),s.jsxs(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx(vs,{size:20}),s.jsx("span",{children:"Novo Item"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(cm,{icon:qt,title:"Valor Total do Estoque",value:`R$ ${_.totalValue.toFixed(2)}`,color:"green"}),s.jsx(cm,{icon:Xn,title:"Itens Totais",value:_.totalItems,color:"blue"}),s.jsx(cm,{icon:Fs,title:"Itens com Estoque Baixo",value:_.lowStockCount,color:"orange",onClick:()=>e("/inventory/estoque-baixo"),clickable:!0})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Itens do Inventrio"}),s.jsxs("div",{className:"relative",children:[s.jsx(Da,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar itens...",value:f,onChange:N=>p(N.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(N=>s.jsx(z5,{item:N,categories:n,onEdit:g,onDelete:i},N.id))}),w.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"Nenhum item encontrado"})})]}),l&&s.jsx(P5,{isOpen:l,onClose:b,item:u})]})},cm=({icon:e,title:t,value:n,color:i,onClick:l,clickable:c=!1})=>{const u={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",orange:"bg-orange-100 text-orange-600"},h="bg-white rounded-lg shadow-md p-6",f=c?"cursor-pointer hover:shadow-lg transition-shadow":"";return s.jsx(_e.div,{className:`${h} ${f}`,onClick:l,whileHover:c?{scale:1.02}:{},whileTap:c?{scale:.98}:{},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:t}),s.jsx("p",{className:`text-3xl font-bold text-${i}-600`,children:n})]}),s.jsx("div",{className:`p-3 rounded-full ${u[i]}`,children:s.jsx(e,{className:"w-6 h-6"})})]})})},B5=({isOpen:e,onClose:t,itens:n,categorias:i})=>{const[l,c]=v.useState(""),[u,h]=v.useState(""),[f,p]=v.useState(""),[g,y]=v.useState("telefone"),b=M=>{const z=M.replace(/\D/g,"");return z.length<=2?z:z.length<=7?`(${z.slice(0,2)}) ${z.slice(2)}`:`(${z.slice(0,2)}) ${z.slice(2,7)}-${z.slice(7,11)}`},w=M=>{const z=M.replace(/\D/g,"");return z.length===11&&z.startsWith("11",0)||z.length===11},_=(M,z)=>Math.max(z*2-M,z),N=()=>{const M=new Date,z=M.toLocaleDateString("pt-BR"),U=M.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),I=n.reduce((Q,K)=>{var pe;const ie=((pe=i.find(L=>L.id===K.categoryId))==null?void 0:pe.name)||"Sem Categoria";return Q[ie]||(Q[ie]=[]),Q[ie].push(K),Q},{});let V=` *AABB - Lista de Compras*
`;return V+=` ${z} s ${U}

`,V+=` *ITENS PARA REPOSIO:*

`,Object.entries(I).forEach(([Q,K])=>{V+=` *${Q.toUpperCase()}*
`,K.forEach(ie=>{const pe=_(ie.currentStock,ie.minStock),L=ie.currentStock===0?" ESGOTADO":" BAIXO";V+=` ${ie.name}
`,V+=`  ${L} - Atual: ${ie.currentStock} ${ie.unit}
`,V+=`  Mnimo: ${ie.minStock} ${ie.unit}
`,V+=`  *Sugesto: ${pe} ${ie.unit}*
`,ie.supplier&&(V+=`  Fornecedor: ${ie.supplier}
`),ie.cost&&(V+=`  Custo: R$ ${ie.cost.toFixed(2)}
`),V+=`
`}),V+=`
`}),V+=` *Observaes:*
`,V+=`- Quantidades baseadas no estoque mnimo
`,V+=`- Verificar disponibilidade com fornecedores
`,V+=`- Priorizar itens esgotados

`,V+=` Solicitado pelo Sistema AABB
`,V+=` Contato: (11) 99999-9999

`,V+=`---
`,V+="Sistema AABB - Gesto de Estoque",V},T=M=>{const z=b(M.target.value);c(z),u&&h("")},R=()=>{if(!w(l)){h("Nmero de telefone invlido. Use o formato (XX) XXXXX-XXXX");return}const M=N();p(M),y("mensagem")},S=()=>{const z=`55${l.replace(/\D/g,"")}`,U=encodeURIComponent(f),I=`https://web.whatsapp.com/send?phone=${z}&text=${U}`;if(!window.open(I,"_blank")){const Q=`whatsapp://send?phone=${z}&text=${U}`;window.location.href=Q}t()},k=async()=>{try{await navigator.clipboard.writeText(f),alert("Mensagem copiada para a rea de transferncia!")}catch(M){console.error("Erro ao copiar mensagem:",M),alert("Erro ao copiar mensagem. Tente selecionar e copiar manualmente.")}},E=()=>{y("telefone"),p("")},j=()=>{c(""),h(""),p(""),y("telefone"),t()};return s.jsx(Zn,{children:e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs(_e.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:g==="telefone"?"Compartilhar no WhatsApp":"Confirmar Envio"}),s.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(rt,{size:20,className:"text-gray-500"})})]}),s.jsx("div",{className:"p-6",children:g==="telefone"?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Insira o nmero de telefone para enviar a lista de compras via WhatsApp."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nmero de Telefone"}),s.jsxs("div",{className:"relative",children:[s.jsx(Wc,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",value:l,onChange:T,placeholder:"(11) 99999-9999",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent ${u?"border-red-300":"border-gray-300"}`,maxLength:15})]}),u&&s.jsx("p",{className:"text-red-600 text-sm",children:u})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Resumo da Lista"}),s.jsxs("p",{className:"text-blue-700 text-sm",children:[n.length," ",n.length===1?"item":"itens"," com estoque baixo sero includos na mensagem."]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-gray-600 mb-4",children:["Mensagem que ser enviada para ",s.jsx("strong",{children:l}),":"]}),s.jsx("div",{className:"bg-gray-50 border rounded-lg p-4 max-h-96 overflow-y-auto",children:s.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono",children:f})})]}),s.jsx("div",{className:"flex space-x-3",children:s.jsxs("button",{onClick:k,className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2",children:[s.jsx(wA,{size:16}),s.jsx("span",{children:"Copiar Mensagem"})]})})]})}),s.jsx("div",{className:"flex justify-between p-6 border-t bg-gray-50",children:g==="telefone"?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:j,className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:R,disabled:!l,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:s.jsx("span",{children:"Gerar Mensagem"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:E,className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Voltar"}),s.jsxs("button",{onClick:S,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[s.jsx(WA,{size:16}),s.jsx("span",{children:"Enviar WhatsApp"})]})]})})]})})})},$5=()=>{const e=Wn(),{inventory:t,inventoryCategories:n}=ft(),[i,l]=v.useState(!1),c=v.useMemo(()=>t.filter(p=>p.currentStock<=p.minStock),[t]),u=v.useMemo(()=>{const p=c.reduce((g,y)=>{var w;const b=((w=n.find(_=>_.id===y.categoryId))==null?void 0:w.name)||"Sem Categoria";return g[b]||(g[b]=[]),g[b].push(y),g},{});return Object.entries(p).sort(([g],[y])=>g.localeCompare(y))},[c,n]),h=(p,g)=>Math.max(g*2-p,g),f=()=>{l(!0)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e("/inventory"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Xf,{size:20,className:"text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Itens com Estoque Baixo"}),s.jsxs("p",{className:"text-gray-600",children:[c.length," ",c.length===1?"item precisa":"itens precisam"," de reposio"]})]})]}),c.length>0&&s.jsxs(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center space-x-2",children:[s.jsx(JA,{size:20}),s.jsx("span",{children:"Compartilhar no WhatsApp"})]})]}),c.length===0?s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:s.jsx(Xn,{className:"w-8 h-8 text-green-600"})})}),s.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Parabns! Todos os itens esto com estoque adequado"}),s.jsx("p",{className:"text-green-600",children:"No h itens que precisam de reposio no momento."})]}):s.jsx("div",{className:"space-y-6",children:u.map(([p,g],y)=>s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[s.jsx(Fs,{className:"w-5 h-5 text-orange-500"}),s.jsx("span",{children:p}),s.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",g.length," itens)"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(b=>{const w=h(b.currentStock,b.minStock),_=b.currentStock===0;return s.jsxs("div",{className:`p-4 rounded-lg border-2 ${_?"border-red-300 bg-red-50":"border-orange-300 bg-orange-50"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800 text-sm",children:b.name}),_&&s.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full",children:"ESGOTADO"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Estoque Atual:"}),s.jsxs("span",{className:`font-medium ${_?"text-red-600":"text-orange-600"}`,children:[b.currentStock," ",b.unit]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Estoque Mnimo:"}),s.jsxs("span",{className:"font-medium text-gray-800",children:[b.minStock," ",b.unit]})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2",children:[s.jsx("span",{className:"text-gray-600",children:"Sugesto de Compra:"}),s.jsxs("span",{className:"font-bold text-blue-600",children:[w," ",b.unit]})]}),b.supplier&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Fornecedor:"}),s.jsx("span",{className:"font-medium text-gray-800 text-xs",children:b.supplier})]}),b.cost&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Custo Unit.:"}),s.jsxs("span",{className:"font-medium text-gray-800",children:["R$ ",b.cost.toFixed(2)]})]})]})]},b.id)})})]},p))}),s.jsx(B5,{isOpen:i,onClose:()=>l(!1),itens:c,categorias:n})]})},V5=()=>{const e=Wn(),{inventory:t,inventoryCategories:n,updateInventoryItem:i}=ft(),[l,c]=v.useState(""),[u,h]=v.useState(""),[f,p]=v.useState({}),[g,y]=v.useState(!1),b=v.useMemo(()=>t.filter(E=>{const j=E.name.toLowerCase().includes(l.toLowerCase()),M=!u||E.categoryId===u;return j&&M}),[t,l,u]),w=v.useMemo(()=>Object.values(f).filter(E=>E.selecionado),[f]),_=v.useMemo(()=>w.reduce((E,j)=>E+j.valorTotal,0),[w]),N=(E,j)=>{p(M=>{var z,U,I;return{...M,[E]:{...M[E],id:E,selecionado:j,quantidadeComprada:((z=M[E])==null?void 0:z.quantidadeComprada)||1,valorUnitario:((U=M[E])==null?void 0:U.valorUnitario)||0,valorTotal:((I=M[E])==null?void 0:I.valorTotal)||0}}})},T=(E,j)=>{j<0||p(M=>{const z=M[E]||{id:E,selecionado:!1,quantidadeComprada:0,valorUnitario:0,valorTotal:0},U=j*z.valorUnitario;return{...M,[E]:{...z,quantidadeComprada:j,valorTotal:U}}})},R=(E,j)=>{j<0||p(M=>{const z=M[E]||{id:E,selecionado:!1,quantidadeComprada:0,valorUnitario:0,valorTotal:0},U=z.quantidadeComprada*j;return{...M,[E]:{...z,valorUnitario:j,valorTotal:U}}})},S=async()=>{y(!0);try{const E=w.map(async j=>{const M=t.find(V=>V.id===j.id);if(!M)return;const z=M.currentStock+j.quantidadeComprada,U=j.valorUnitario>0?j.valorUnitario:M.cost,I={...M,currentStock:z,cost:U};await i(I)});await Promise.all(E),p({}),alert(`${w.length} itens atualizados com sucesso!`)}catch(E){console.error("Erro ao atualizar estoque:",E),alert("Erro ao atualizar estoque. Tente novamente.")}finally{y(!1)}},k=E=>f[E]||{id:E,selecionado:!1,quantidadeComprada:1,valorUnitario:0,valorTotal:0};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>e("/inventory"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Xf,{size:20,className:"text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Atualizao Massiva de Estoque"}),s.jsx("p",{className:"text-gray-600",children:"Selecione os itens comprados e atualize o estoque em lote"})]})]}),w.length>0&&s.jsxs(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:S,disabled:g,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[s.jsx(Qc,{size:20}),s.jsx("span",{children:g?"Salvando...":`Salvar ${w.length} Itens`})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Da,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar produtos...",value:l,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:u,onChange:E=>h(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Todas as categorias"}),n.map(E=>s.jsx("option",{value:E.id,children:E.name},E.id))]}),s.jsxs("button",{onClick:()=>{const E=b.filter(M=>M.currentStock<=M.minStock),j={...f};E.forEach(M=>{const z=Math.max(M.minStock*2-M.currentStock,M.minStock);j[M.id]={id:M.id,selecionado:!0,quantidadeComprada:z,valorUnitario:M.cost||0,valorTotal:z*(M.cost||0)}}),p(j)},className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2",children:[s.jsx(Xn,{size:16}),s.jsx("span",{children:"Selecionar Estoque Baixo"})]}),s.jsxs("button",{onClick:()=>p({}),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2",children:[s.jsx(rt,{size:16}),s.jsx("span",{children:"Limpar Seleo"})]})]})}),w.length>0&&s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.length}),s.jsx("p",{className:"text-blue-800 text-sm",children:"Itens Selecionados"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.reduce((E,j)=>E+j.quantidadeComprada,0)}),s.jsx("p",{className:"text-blue-800 text-sm",children:"Quantidade Total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["R$ ",_.toFixed(2)]}),s.jsx("p",{className:"text-blue-800 text-sm",children:"Valor Total"})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Produtos Disponveis (",b.length,")"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selecionar"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque Atual"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade Comprada"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Unitrio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Novo Estoque"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(E=>{const j=k(E.id),M=n.find(U=>U.id===E.categoryId),z=E.currentStock+(j.selecionado?j.quantidadeComprada:0);return s.jsxs("tr",{className:j.selecionado?"bg-blue-50":"",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:j.selecionado,onChange:U=>N(E.id,U.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),s.jsx("div",{className:"text-sm text-gray-500",children:M==null?void 0:M.name})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("span",{className:`text-sm font-medium ${E.currentStock<=E.minStock?"text-red-600":"text-gray-900"}`,children:[E.currentStock," ",E.unit]}),E.currentStock<=E.minStock&&s.jsx("div",{className:"text-xs text-red-500",children:"Estoque baixo"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.selecionado?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>T(E.id,j.quantidadeComprada-1),className:"p-1 hover:bg-gray-200 rounded",children:s.jsx(mi,{size:16})}),s.jsx("input",{type:"number",min:"0",value:j.quantidadeComprada,onChange:U=>T(E.id,parseInt(U.target.value)||0),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>T(E.id,j.quantidadeComprada+1),className:"p-1 hover:bg-gray-200 rounded",children:s.jsx(vs,{size:16})}),s.jsx("span",{className:"text-sm text-gray-500",children:E.unit})]}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.selecionado?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm",children:"R$"}),s.jsx("input",{type:"number",min:"0",step:"0.01",value:j.valorUnitario,onChange:U=>R(E.id,parseFloat(U.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"0,00"})]}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.selecionado?s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["R$ ",j.valorTotal.toFixed(2)]}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("span",{className:`text-sm font-medium ${j.selecionado?"text-green-600":"text-gray-500"}`,children:[z," ",E.unit]}),j.selecionado&&j.quantidadeComprada>0&&s.jsxs("div",{className:"text-xs text-green-500",children:["+",j.quantidadeComprada," ",E.unit]})]})]},E.id)})})]})}),b.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Xn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Nenhum produto encontrado"})]})]})]})},U5=({isOpen:e,onClose:t,member:n})=>{const{addMember:i,updateMember:l}=ft(),{register:c,handleSubmit:u,control:h,reset:f,formState:{errors:p}}=a0(),[g,y]=v.useState(!1);v.useEffect(()=>{f(n||{name:"",email:"",phone:"",avatar:`https://api.dicebear.com/8.x/initials/svg?seed=${name||"user"}`,status:"active",membershipType:"individual"})},[n,f]);const b=async N=>{y(!0);try{n?await l({...n,...N}):await i(N),t()}catch(T){console.error("Falha ao salvar o membro:",T)}finally{y(!1)}},w=["active","inactive","pending"],_=["individual","family","vip"];return s.jsx(Zn,{children:e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n?"Editar Membro":"Novo Membro"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(rt,{size:24})})]}),s.jsxs("form",{onSubmit:u(b),className:"p-6 space-y-4",children:[s.jsx(ei,{label:"Nome Completo",error:p.name,children:s.jsx("input",{...c("name",{required:"Nome  obrigatrio"}),className:"form-input",disabled:g})}),s.jsx(ei,{label:"Email",error:p.email,children:s.jsx("input",{type:"email",...c("email",{required:"Email  obrigatrio",pattern:{value:/^\S+@\S+$/i,message:"Email invlido"}}),className:"form-input",disabled:g})}),s.jsx(ei,{label:"Telefone",error:p.phone,children:s.jsx("input",{...c("phone",{required:"Telefone  obrigatrio"}),className:"form-input",disabled:g})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(ei,{label:"Status",error:p.status,children:s.jsx(Yn,{name:"status",control:h,render:({field:N})=>s.jsx("select",{...N,className:"form-input",disabled:g,children:w.map(T=>s.jsx("option",{value:T,className:"capitalize",children:T},T))})})}),s.jsx(ei,{label:"Tipo de Plano",error:p.membershipType,children:s.jsx(Yn,{name:"membershipType",control:h,render:({field:N})=>s.jsx("select",{...N,className:"form-input",disabled:g,children:_.map(T=>s.jsx("option",{value:T,className:"capitalize",children:T},T))})})})]}),s.jsx(ei,{label:"URL do Avatar",error:p.avatar,children:s.jsx("input",{...c("avatar"),className:"form-input",disabled:g})}),s.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",disabled:g,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-wait",disabled:g,children:g?"Salvando...":n?"Salvar Alteraes":"Adicionar Membro"})]})]})]})})})},ei=({label:e,children:t,error:n})=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),t,n&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.message})]}),q5=({member:e,onEdit:t})=>{const n={active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"},i={active:"Ativo",inactive:"Inativo",pending:"Pendente"};return s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-lg p-4 text-center hover:shadow-xl transition-shadow flex flex-col",children:[s.jsxs("div",{className:"relative self-center",children:[s.jsx("img",{src:e.avatar,alt:e.name,className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover"}),s.jsx("span",{className:`absolute bottom-1 right-1 block h-4 w-4 rounded-full border-2 border-white ${e.status==="active"?"bg-green-500":e.status==="inactive"?"bg-red-500":"bg-yellow-500"}`})]}),s.jsx("h3",{className:"font-bold text-lg text-gray-800",children:e.name}),s.jsx("p",{className:`text-xs font-medium px-2 py-0.5 rounded-full self-center my-2 ${n[e.status]}`,children:i[e.status]}),s.jsx("div",{className:"text-sm text-gray-600 capitalize mb-4",children:e.membershipType}),s.jsxs("div",{className:"text-left space-y-2 text-xs text-gray-500 border-t pt-3 mt-auto",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vw,{size:14}),s.jsx("span",{children:e.email})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wc,{size:14}),s.jsx("span",{children:e.phone})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Jn,{size:14}),s.jsxs("span",{children:["Membro desde ",Ft(e.joinDate,"MMM yyyy",{locale:ts})]})]})]}),s.jsxs("button",{onClick:()=>t(e),className:"mt-4 w-full bg-gray-100 text-gray-700 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2",children:[s.jsx(ol,{size:14}),s.jsx("span",{children:"Editar Perfil"})]})]})},F5=()=>{const{members:e}=ft(),[t,n]=v.useState(!1),[i,l]=v.useState(null),[c,u]=v.useState(""),[h,f]=v.useState("all"),p=_=>{l(_),n(!0)},g=()=>{l(null),n(!0)},y=()=>{n(!1),l(null)},b=v.useMemo(()=>e.filter(_=>{const N=_.name.toLowerCase().includes(c.toLowerCase()),T=h==="all"||_.status===h;return N&&T}),[e,c,h]),w=v.useMemo(()=>{const _=AM(new Date);return{total:e.length,active:e.filter(N=>N.status==="active").length,newThisMonth:e.filter(N=>EM(N.joinDate,_)).length}},[e]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mdulo Membros"}),s.jsx("p",{className:"text-gray-600",children:"Gesto completa de scios do clube"})]}),s.jsxs(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2 mt-4 sm:mt-0",children:[s.jsx(vs,{size:20}),s.jsx("span",{children:"Novo Membro"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(dm,{icon:ia,title:"Total de Membros",value:w.total,color:"blue"}),s.jsx(dm,{icon:Hw,title:"Membros Ativos",value:w.active,color:"green"}),s.jsx(dm,{icon:hk,title:"Novos (ltimo Ms)",value:w.newThisMonth,color:"purple"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 sm:mb-0",children:"Lista de Membros"}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Da,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar membros...",value:c,onChange:_=>u(_.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:h,onChange:_=>f(_.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todos os Status"}),s.jsx("option",{value:"active",children:"Ativo"}),s.jsx("option",{value:"inactive",children:"Inativo"}),s.jsx("option",{value:"pending",children:"Pendente"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:b.map(_=>s.jsx(q5,{member:_,onEdit:p},_.id))}),b.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"Nenhum membro encontrado"})})]}),t&&s.jsx(U5,{isOpen:t,onClose:y,member:i})]})},dm=({icon:e,title:t,value:n,color:i})=>{const l={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600"};return s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:t}),s.jsx("p",{className:`text-3xl font-bold text-${i}-600`,children:n})]}),s.jsx("div",{className:`p-3 rounded-full ${l[i]}`,children:s.jsx(e,{className:"w-6 h-6"})})]})})},H5=()=>{const[e,t]=v.useState(!0),n=v.useRef(null),i=v.useCallback(()=>(n.current||(n.current=new(window.AudioContext||window.webkitAudioContext)),n.current),[]),l=v.useCallback(()=>{if(e)try{const f=i(),p=(g,y,b=0)=>{setTimeout(()=>{const w=f.createOscillator(),_=f.createGain();w.connect(_),_.connect(f.destination),w.frequency.setValueAtTime(g,f.currentTime),w.type="sine",_.gain.setValueAtTime(0,f.currentTime),_.gain.linearRampToValueAtTime(.3,f.currentTime+.01),_.gain.exponentialRampToValueAtTime(.01,f.currentTime+y),w.start(f.currentTime),w.stop(f.currentTime+y)},b)};p(800,.2,0),p(1e3,.3,200)}catch(f){console.warn("Erro ao reproduzir som de notificao:",f);try{const p="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcCTSNzPLOdSUGMIMcaYOlhAAAaYOlhAAAaYOlhAAAaYOlhAAAAA==",g=new Audio(p);g.volume=.3,g.play().catch(()=>{console.log(" Pedido pronto!")})}catch{console.log(" Pedido pronto!")}}},[e,i]),c=v.useCallback(()=>{n.current&&(n.current.close(),n.current=null)},[]),u=v.useCallback(f=>{console.log("Volume definido para:",f)},[]),h=v.useCallback(()=>{t(f=>!f)},[]);return{play:l,stop:c,setVolume:u,isEnabled:e,toggle:h}},cl=()=>{const[e,t]=v.useState([]),[n,i]=v.useState(!0),[l,c]=v.useState(null),u=H5(),{refreshKitchenOrders:h,refreshBarOrders:f}=ft(),p=async()=>{try{i(!0);const{data:k,error:E}=await le.from("comandas").select(`
          *,
          table:bar_tables(*),
          customer:bar_customers(*),
          employee:profiles(*),
          items:comanda_items(
            *,
            menu_item:menu_items(*)
          )
        `).order("opened_at",{ascending:!1});if(E)throw E;t(k||[])}catch(k){c(k instanceof Error?k.message:"Erro ao carregar comandas")}finally{i(!1)}},g=async k=>{try{const{data:E,error:j}=await le.from("comandas").insert([k]).select(`
          *,
          table:bar_tables(*),
          customer:bar_customers(*),
          employee:profiles(*)
        `).single();if(j)throw j;return t(M=>[E,...M]),E}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao criar comanda")}},y=async(k,E)=>{try{const j={status:E};E==="closed"&&(j.closed_at=new Date().toISOString());const{error:M}=await le.from("comandas").update(j).eq("id",k);if(M)throw M;t(z=>z.map(U=>U.id===k?{...U,status:E,...j}:U))}catch(j){throw new Error(j instanceof Error?j.message:"Erro ao atualizar comanda")}},b=async(k,E)=>{try{const{data:j,error:M}=await le.from("comanda_items").insert([{comanda_id:k,...E}]).select(`
          *,
          menu_item:menu_items(*)
        `).single();if(M)throw M;return t(z=>z.map(U=>U.id===k?{...U,items:[...U.items||[],j]}:U)),console.log(" Atualizando pedidos da cozinha e bar aps adicionar item..."),await Promise.all([h(),f()]),j}catch(j){throw new Error(j instanceof Error?j.message:"Erro ao adicionar item  comanda")}},w=async(k,E)=>{try{const j={status:E};E==="ready"?j.prepared_at=new Date().toISOString():E==="delivered"&&(j.delivered_at=new Date().toISOString());const{error:M}=await le.from("comanda_items").update(j).eq("id",k);if(M)throw M;E==="ready"&&u.play(),t(z=>z.map(U=>{var I;return{...U,items:(I=U.items)==null?void 0:I.map(V=>V.id===k?{...V,status:E,...j}:V)}}))}catch(j){throw new Error(j instanceof Error?j.message:"Erro ao atualizar item")}},_=async k=>{try{const{data:E,error:j}=await le.from("comandas").select(`
          *,
          table:bar_tables(*),
          customer:bar_customers(*),
          employee:profiles(*),
          items:comanda_items(
            *,
            menu_item:menu_items(*)
          )
        `).eq("table_id",k).eq("status","open").single();if(j&&j.code!=="PGRST116")throw j;return E}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao buscar comanda da mesa")}},N=async k=>{try{const{error:E}=await le.from("comanda_items").delete().eq("id",k);if(E)throw E;t(j=>j.map(M=>{var z;return{...M,items:(z=M.items)==null?void 0:z.filter(U=>U.id!==k)}}))}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao remover item da comanda")}},T=async(k,E)=>{try{const{data:j,error:M}=await le.from("bill_splits").insert([{comanda_id:k,split_type:E.type,person_count:E.person_count,splits:E.splits,service_charge_percentage:E.service_charge_percentage,discount_amount:E.discount_amount}]).select().single();if(M)throw M;return j}catch(j){throw new Error(j instanceof Error?j.message:"Erro ao criar diviso de conta")}},R=async k=>{try{const{data:E,error:j}=await le.from("bill_splits").select("*").eq("comanda_id",k).single();if(j&&j.code!=="PGRST116")throw j;return E}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao buscar diviso de conta")}},S=async(k,E)=>{try{return await y(k,"closed"),console.log("Processando pagamentos mltiplos:",E),{success:!0,payments:E}}catch(j){throw new Error(j instanceof Error?j.message:"Erro ao processar pagamentos")}};return v.useEffect(()=>{p()},[]),{comandas:e,loading:n,error:l,refetch:p,createComanda:g,updateComandaStatus:y,addItemToComanda:b,updateItemStatus:w,getComandaByTable:_,removeItemFromComanda:N,createBillSplit:T,getBillSplit:R,processMultiplePayments:S}},I5=({mode:e,onModeChange:t,user:n})=>{const i={balcao:"Balco",mesas:"Mesas",comandas:"Comandas",fila:"Fila",pedidos:"Preparo"},l={balcao:"Balco",mesas:"Mesas",comandas:"Comandas",fila:"Fila de Pedidos",pedidos:"Pedidos Bar"},c={balcao:"",mesas:"",comandas:"",fila:"",pedidos:""};return s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"px-2 sm:px-4 lg:px-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center py-3 space-y-3 lg:space-y-0 min-h-16",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 min-w-0 flex-1",children:[s.jsxs("h1",{className:"text-base sm:text-lg lg:text-xl font-semibold text-gray-900 truncate",children:[s.jsx("span",{className:"hidden sm:inline",children:"Sistema de Atendimento - "}),"Bar"]}),n&&s.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 mt-1 sm:mt-0 truncate",children:[s.jsx("span",{className:"hidden sm:inline",children:"Atendente: "}),n.full_name||n.email]})]}),s.jsx("nav",{className:"flex flex-wrap gap-1 sm:gap-2",children:Object.keys(i).map(u=>s.jsxs("button",{onClick:()=>t(u),className:`
                  flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 rounded-lg font-medium transition-colors text-xs sm:text-sm
                  ${e===u?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}
                `,children:[s.jsx("span",{className:"text-sm sm:text-lg",children:c[u]}),s.jsx("span",{className:"hidden sm:inline",children:l[u]}),s.jsx("span",{className:"sm:hidden",children:i[u]})]},u))})]})})})};function G5({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const pv=v.forwardRef(G5);function Y5({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const X5=v.forwardRef(Y5);function K5({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const c1=v.forwardRef(K5);function W5({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Lc=v.forwardRef(W5);function Q5({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const Z5=v.forwardRef(Q5);function J5({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const um=v.forwardRef(J5);function eO({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Qm=v.forwardRef(eO);function tO({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const sO=v.forwardRef(tO);function aO({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const Zm=v.forwardRef(aO);function nO({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const rO=v.forwardRef(nO);function iO({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const oO=v.forwardRef(iO);function lO({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const cO=v.forwardRef(lO);function dO({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const nd=v.forwardRef(dO);function uO({title:e,titleId:t,...n},i){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const n0=v.forwardRef(uO),d1=(e=!1)=>{const[t,n]=v.useState([]),[i,l]=v.useState(!0),[c,u]=v.useState(null),h=async()=>{try{l(!0),console.log("Fetching menu items...");try{const{data:T,error:R}=await le.from("menu_items").select("count").limit(1);if(R&&R.message.includes("JWT"))throw new Error("Supabase no configurado")}catch(T){console.error("Supabase no configurado. Criando dados mock...",T);const R=[{id:"mock-1",name:"Cerveja Pilsen",description:"Cerveja gelada 350ml",price:8.5,category:"Bebidas",image_url:void 0,available:!0,preparation_time:0,item_type:"prepared",direct_inventory_item_id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"mock-2",name:"Refrigerante",description:"Coca-Cola 350ml",price:5,category:"Bebidas",image_url:void 0,available:!0,preparation_time:0,item_type:"prepared",direct_inventory_item_id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"mock-3",name:"Poro de Batata",description:"Batata frita crocante",price:15,category:"Petiscos",image_url:void 0,available:!0,preparation_time:15,item_type:"prepared",direct_inventory_item_id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];n(R),u("Dados de exemplo sendo exibidos. Configure o Supabase para usar dados reais.");return}const{data:g,error:y}=await le.from("menu_items").select("*");console.log("All menu items:",g,"Error:",y);let b=le.from("menu_items").select(`
          *,
          inventory_items!left(
            name,
            image_url,
            current_stock,
            min_stock,
            unit,
            available_for_sale
          )
        `).eq("available",!0).order("category",{ascending:!0}).order("name",{ascending:!0});e||(b=b.neq("item_type","direct"));const{data:w,error:_}=await b;if(console.log("Available menu items:",w,"Error:",_),_)throw _;if(!w||w.length===0){console.log("No menu items found - creating sample data");const T=[{name:"Cerveja Pilsen",description:"Cerveja gelada 350ml",price:8.5,category:"Bebidas",available:!0},{name:"Refrigerante",description:"Coca-Cola 350ml",price:5,category:"Bebidas",available:!0}],{data:R,error:S}=await le.from("menu_items").insert(T).select();if(console.log("Sample data inserted:",R,"Error:",S),!S&&R){const k=R.map(E=>({id:E.id,name:E.name,description:E.description||"",price:E.price,category:E.category||"",image_url:E.image_url||void 0,available:E.available||!1,preparation_time:E.preparation_time||0,item_type:E.item_type||"prepared",direct_inventory_item_id:E.direct_inventory_item_id||void 0,created_at:E.created_at||void 0,updated_at:E.updated_at||void 0}));n(k);return}}const N=(w||[]).map(T=>{const R=T.inventory_items,S=T.item_type==="direct";return{id:T.id,name:S&&(R!=null&&R.name)?R.name:T.name,description:T.description||"",price:typeof T.price=="string"?parseFloat(T.price):T.price||0,category:T.category||"",image_url:S&&(R!=null&&R.image_url)?R.image_url:T.image_url||void 0,available:T.available||!1,preparation_time:T.preparation_time||0,item_type:T.item_type||"prepared",direct_inventory_item_id:T.direct_inventory_item_id||void 0,created_at:T.created_at||void 0,updated_at:T.updated_at||void 0,inventory_items:R?{id:"",name:R.name||"",currentStock:R.current_stock||0,minStock:R.min_stock||0,unit:R.unit||"unidades",lastUpdated:new Date,cost:0,availableForSale:R.available_for_sale||!1,image_url:R.image_url||void 0}:void 0}});console.log("Mapped items:",N),n(N)}catch(g){console.error("Error in fetchMenuItems:",g),u(g instanceof Error?g.message:"Erro ao carregar itens do menu")}finally{l(!1)}},f=g=>t.filter(y=>y.category===g),p=()=>t.filter(g=>g.available);return v.useEffect(()=>{h()},[e]),{menuItems:t,loading:i,error:c,refetch:h,getItemsByCategory:f,getAvailableItems:p}},pd=()=>{const{user:e}=Kt(),{refreshKitchenOrders:t,refreshBarOrders:n}=ft(),[i,l]=v.useState({orders:[],metrics:null,loading:!0,error:null}),c=v.useCallback(j=>{l(M=>({...M,...j}))},[]),u=v.useCallback((j,M)=>{console.error(`Erro em ${M}:`,j),c({error:`Erro em ${M}: ${j.message||"Erro desconhecido"}`,loading:!1})},[c]),h=v.useCallback(async()=>{if(e)try{c({loading:!0,error:null});const{data:j,error:M}=await le.from("balcao_orders_with_details").select("*").order("created_at",{ascending:!1}).limit(50);if(M)throw M;const z=await Promise.all((j||[]).map(async U=>{const{data:I,error:V}=await le.from("balcao_order_items").select(`
              *,
              menu_items:menu_item_id (
                id,
                name,
                category,
                price,
                preparation_time,
                item_type
              )
            `).eq("balcao_order_id",U.id);return V&&console.warn(`Erro ao carregar itens do pedido ${U.id}:`,V),{...U,items:(I==null?void 0:I.map(Q=>({...Q,menu_item:Array.isArray(Q.menu_items)?Q.menu_items[0]:Q.menu_items})))||[]}}));c({orders:z,loading:!1})}catch(j){u(j,"carregamento de pedidos")}},[e,c,u]),f=v.useCallback(async j=>{if(!e)throw new Error("Usurio no autenticado");try{c({loading:!0,error:null});const{data:M,error:z}=await le.from("balcao_orders").insert({employee_id:e.id,customer_name:j.customer_name,customer_phone:j.customer_phone,discount_amount:j.discount_amount||0,notes:j.notes,customer_notes:j.customer_notes,status:"pending_payment"}).select().single();if(z)throw z;const U=j.items.map(V=>({balcao_order_id:M.id,menu_item_id:V.menu_item_id,quantity:V.quantity,unit_price:V.unit_price,notes:V.notes,status:"pending"})),{error:I}=await le.from("balcao_order_items").insert(U);if(I)throw I;return await h(),M.id}catch(M){throw u(M,"criao de pedido"),M}},[e,c,u,h]),p=v.useCallback(async(j,M)=>{try{c({loading:!0,error:null});const z={status:M.status,updated_at:new Date().toISOString()};M.status==="paid"?(z.payment_method=M.payment_method,z.cash_session_id=M.cash_session_id,z.paid_at=new Date().toISOString()):M.status==="preparing"?z.preparation_started_at=new Date().toISOString():M.status==="ready"?z.preparation_completed_at=new Date().toISOString():M.status==="delivered"&&(z.delivered_at=new Date().toISOString(),z.delivered_by=M.delivered_by||(e==null?void 0:e.id)),M.notes&&(z.notes=M.notes);const{error:U}=await le.from("balcao_orders").update(z).eq("id",j);if(U)throw U;await h()}catch(z){throw u(z,"atualizao de status do pedido"),z}},[c,u,h,e]),g=v.useCallback(async j=>{try{console.log(" Iniciando processamento de pagamento:",j.order_id),await p(j.order_id,{status:"paid",payment_method:j.payment_method,cash_session_id:j.cash_session_id,notes:j.notes});const{error:M}=await le.from("cash_transactions").insert({cash_session_id:j.cash_session_id,transaction_type:"sale",payment_method:j.payment_method,amount:j.amount_paid,processed_by:e.id,notes:`Pedido de balco #${j.order_id}`,processed_at:new Date().toISOString()});if(M)throw M;console.log(" Pagamento processado com sucesso!"),console.log(" Forando atualizao dos monitores em mltiplas camadas..."),setTimeout(async()=>{await Promise.all([t(),n()]),console.log(" Primeira atualizao dos monitores concluda!")},500),setTimeout(async()=>{await Promise.all([t(),n(),h()]),console.log(" Atualizao backup dos monitores concluda!")},1500)}catch(M){throw u(M,"processamento de pagamento"),M}},[p,u,e,t,n,h]),y=v.useCallback(async(j,M)=>{try{const z={status:M,updated_at:new Date().toISOString()};M==="preparing"?z.preparation_started_at=new Date().toISOString():M==="ready"&&(z.preparation_completed_at=new Date().toISOString());const{error:U}=await le.from("balcao_order_items").update(z).eq("id",j);if(U)throw U;await h()}catch(z){throw u(z,"atualizao de status do item"),z}},[u,h]),b=v.useCallback(async(j,M)=>{try{await p(j,{status:"cancelled",notes:M?`Cancelado: ${M}`:"Pedido cancelado"})}catch(z){throw u(z,"cancelamento de pedido"),z}},[p,u]),w=v.useCallback(async j=>{try{let M=le.from("balcao_orders_with_details").select("*");j.status&&j.status.length>0&&(M=M.in("status",j.status)),j.employee_id&&(M=M.eq("employee_id",j.employee_id)),j.start_date&&(M=M.gte("created_at",j.start_date)),j.end_date&&(M=M.lte("created_at",j.end_date)),j.customer_name&&(M=M.ilike("customer_name",`%${j.customer_name}%`)),j.order_number&&(M=M.eq("order_number",j.order_number)),j.payment_method&&(M=M.eq("payment_method",j.payment_method));const{data:z,error:U}=await M.order("created_at",{ascending:!1}).limit(100);if(U)throw U;return z||[]}catch(M){return u(M,"busca de pedidos"),[]}},[u]),_=v.useCallback(async()=>{try{const j=new Date().toISOString().split("T")[0],{data:M,error:z}=await le.from("balcao_orders").select("status, final_amount, payment_method").gte("created_at",`${j}T00:00:00.000Z`).lt("created_at",`${j}T23:59:59.999Z`);if(z)throw z;const U=M||[],I={today:{total_orders:U.length,total_revenue:U.reduce((V,Q)=>V+(Q.final_amount||0),0),avg_order_value:U.length>0?U.reduce((V,Q)=>V+(Q.final_amount||0),0)/U.length:0,pending_payment:U.filter(V=>V.status==="pending_payment").length,preparing:U.filter(V=>V.status==="preparing").length,ready_for_delivery:U.filter(V=>V.status==="ready").length},by_status:[],by_payment_method:[],hourly_breakdown:[]};c({metrics:I})}catch(j){u(j,"carregamento de mtricas")}},[c,u]),N=v.useCallback(async()=>{await Promise.all([h(),_()])},[h,_]),T=v.useCallback(j=>i.orders.filter(M=>M.status===j),[i.orders]),R=v.useCallback(j=>i.orders.find(M=>M.id===j),[i.orders]),S=T("pending_payment"),k=T("preparing"),E=T("ready");return v.useEffect(()=>{e&&N()},[e,N]),v.useEffect(()=>{if(!e)return;const j=le.channel("balcao_orders_changes").on("postgres_changes",{event:"*",schema:"public",table:"balcao_orders"},()=>{h()}).on("postgres_changes",{event:"*",schema:"public",table:"balcao_order_items"},()=>{h()}).subscribe();return()=>{j.unsubscribe()}},[e,h]),{orders:i.orders,pendingOrders:S,preparingOrders:k,readyOrders:E,metrics:i.metrics,loading:i.loading,error:i.error,createOrder:f,updateOrderStatus:p,updateItemStatus:y,cancelOrder:b,processPayment:g,searchOrders:w,getOrdersByStatus:T,refreshData:N,getOrderById:R,loadMetrics:_}},u1=()=>{const{user:e}=Kt(),[t,n]=v.useState({currentSession:null,pendingComandas:[],todaysTransactions:[],todaysSessions:[],todaysSummary:{session_date:new Date().toISOString().split("T")[0],total_sessions:0,total_sales:0,total_transactions:0,by_payment_method:[],by_employee:[],discrepancies:[],avg_ticket:0,peak_hours:[]},loading:!0,error:null}),i=v.useCallback(f=>{n(p=>({...p,...f}))},[]),l=v.useCallback((f,p)=>{console.error(`Erro em ${p}:`,f),i({error:`Erro em ${p}: ${f.message||"Erro desconhecido"}`,loading:!1})},[i]),c=v.useCallback(async()=>{if(e)try{i({loading:!0,error:null});const{data:f,error:p}=await le.from("cash_sessions").select("*").eq("employee_id",e.id).eq("status","open").maybeSingle();if(p&&p.code!=="PGRST116")throw p;const g=f?{...f,employee:{id:e.id,name:e.email||"Usurio",role:"employee"}}:null;i({currentSession:g,pendingComandas:[],todaysTransactions:[],todaysSessions:[],loading:!1})}catch(f){l(f,"carregamento inicial")}},[e,i,l]),u=v.useCallback(async f=>{if(!e)throw new Error("Usurio no autenticado");try{i({loading:!0,error:null});const p={employee_id:e.id,opening_amount:f.opening_amount,opening_notes:f.opening_notes,supervisor_approval_id:f.supervisor_approval_id,status:"open"},{data:g,error:y}=await le.from("cash_sessions").insert(p).select("*").single();if(y)throw y;await c()}catch(p){throw l(p,"abertura de caixa"),p}},[e,i,l,c]),h=v.useCallback(async f=>{if(!t.currentSession)throw new Error("Nenhuma sesso aberta");try{i({loading:!0,error:null});const p=f.closing_amount-t.currentSession.expected_amount,{error:g}=await le.from("cash_sessions").update({status:"closed",closed_at:new Date().toISOString(),closing_amount:f.closing_amount,cash_discrepancy:p,closing_notes:f.closing_notes}).eq("id",t.currentSession.id);if(g)throw g;const y=f.reconciliation.map(w=>({cash_session_id:t.currentSession.id,payment_method:w.payment_method,expected_amount:w.expected_amount,actual_amount:w.actual_amount,transaction_count:w.transaction_count,reconciled_by:e.id,notes:w.notes})),{error:b}=await le.from("payment_reconciliation").insert(y);if(b)throw b;await c()}catch(p){throw l(p,"fechamento de caixa"),p}},[t.currentSession,e,i,l,c]);return v.useEffect(()=>{c()},[c]),{currentSession:t.currentSession,pendingComandas:t.pendingComandas,todaysTransactions:t.todaysTransactions,todaysSessions:t.todaysSessions,todaysSummary:t.todaysSummary,loading:t.loading,error:t.error,openCashSession:u,closeCashSession:h,getCurrentSession:()=>t.currentSession,processComandaPayment:async()=>{throw new Error("No implementado ainda")},processRefund:async()=>{throw new Error("No implementado ainda")},processAdjustment:async()=>{throw new Error("No implementado ainda")},generateDailySummary:async()=>t.todaysSummary,generateMonthlySummary:async()=>({month:new Date().toISOString().slice(0,7),total_sessions:0,total_sales:0,total_transactions:0,employees_performance:[],top_payment_methods:[],daily_breakdown:[],avg_discrepancy:0,peak_days:[]}),getTransactionsByFilters:async()=>[],getSessionsByFilters:async()=>[],validateCashAmount:async()=>({isValid:!0,errors:[]}),validateSession:async()=>({isValid:!0,errors:[]}),reloadData:c}},Ce=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),gd={dinheiro:"Dinheiro",cartao_debito:"Carto de Dbito",cartao_credito:"Carto de Crdito",pix:"PIX",transferencia:"Transferncia"},h1={sale:"Venda",refund:"Estorno",adjustment:"Ajuste",tip:"Gorjeta",cash_withdrawal:"Sada de Dinheiro",treasury_transfer:"Transferncia para Tesouraria"},hO=({isOpen:e,onClose:t,onSelectCustomer:n})=>{const[i,l]=v.useState(""),[c,u]=v.useState([]),[h,f]=v.useState(!1),[p,g]=v.useState("phone");v.useEffect(()=>{e&&(l(""),u([]))},[e]);const y=async()=>{if(i.trim()){f(!0);try{let _=le.from("bar_customers").select("*");p==="phone"?_=_.ilike("phone",`%${i}%`):_=_.ilike("name",`%${i}%`);const{data:N,error:T}=await _.eq("status","active").order("name").limit(10);if(T)throw T;if(!N||N.length===0){const R=[{id:"mock-1",phone:i.includes("11")?i:"(11) 99999-1234",name:"Joo Silva",email:"joao@exemplo.com",credit_limit:1e3,current_balance:0,status:"active",is_vip:!0,loyalty_points:250,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_visit:"2024-08-30"},{id:"mock-2",phone:"(11) 88888-5678",name:"Maria Santos",email:"maria@exemplo.com",credit_limit:500,current_balance:0,status:"active",is_vip:!1,loyalty_points:120,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_visit:"2024-08-28"}];u(p==="phone"?R.filter(S=>S.phone.includes(i)||i.includes("11")):R.filter(S=>S.name.toLowerCase().includes(i.toLowerCase())))}else u(N)}catch(_){console.error("Erro ao buscar clientes:",_),u([])}finally{f(!1)}}},b=_=>{_.key==="Enter"&&y()},w=_=>{n(_),t()};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Identificar Membro"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(n0,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-6 border-b",children:[s.jsx("div",{className:"flex space-x-4 mb-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>g("phone"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${p==="phone"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.jsx(Zm,{className:"h-4 w-4 inline mr-1"}),"Telefone"]}),s.jsxs("button",{onClick:()=>g("name"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${p==="name"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.jsx(nd,{className:"h-4 w-4 inline mr-1"}),"Nome"]})]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Qm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:p==="phone"?"Digite o telefone (ex: 11999999999)":"Digite o nome do membro",value:i,onChange:_=>l(_.target.value),onKeyPress:b,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0})]}),s.jsx("button",{onClick:y,disabled:h||!i.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Buscando...":"Buscar"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c.length>0?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:[c.length," resultado(s) encontrado(s)"]}),c.map(_=>s.jsxs("div",{onClick:()=>w(_),className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 cursor-pointer transition-colors border border-gray-200",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:_.name}),_.is_vip&&s.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-100 px-2 py-1 rounded-full",children:[s.jsx(oO,{className:"h-3 w-3 text-yellow-600"}),s.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"VIP"})]})]}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zm,{className:"h-4 w-4"}),s.jsx("span",{children:_.phone})]}),_.email&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Z5,{className:"h-4 w-4"}),s.jsx("span",{children:_.email})]})]})]}),s.jsxs("div",{className:"text-right text-sm",children:[s.jsxs("div",{className:"text-gray-900 font-medium",children:[_.loyalty_points," pontos"]}),_.last_visit&&s.jsxs("div",{className:"text-gray-500",children:["ltima visita: ",new Date(_.last_visit).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs",children:[s.jsx("span",{className:`px-2 py-1 rounded-full ${_.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.status==="active"?"Ativo":"Inativo"}),s.jsxs("span",{className:"text-gray-500",children:["Limite: R$ ",_.credit_limit.toFixed(2)]})]})]},_.id))]}):i&&!h?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(nd,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum membro encontrado"}),s.jsxs("p",{className:"text-gray-600",children:["Tente buscar por outro ",p==="phone"?"telefone":"nome"," ou verifique se o membro est cadastrado."]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Qm,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Buscar Membro"}),s.jsxs("p",{className:"text-gray-600",children:["Digite o ",p==="phone"?"telefone":"nome"," do membro para aplicar descontos e benefcios."]})]})}),s.jsx("div",{className:"p-6 border-t bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsx("span",{children:" Membros recebem 10% de desconto automaticamente"}),s.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-800 font-medium",children:"Continuar sem identificar"})]})})]})}):null},gv=()=>{const{user:e}=Kt(),{menuItems:t,loading:n}=d1(!0),{createOrder:i}=pd(),{currentSession:l}=u1(),{inventory:c}=ft(),[u,h]=v.useState([]),[f,p]=v.useState(null),[g,y]=v.useState(""),[b,w]=v.useState(""),[_,N]=v.useState("all"),[T,R]=v.useState(""),[S,k]=v.useState(!1),[E,j]=v.useState(!1),[M,z]=v.useState({}),U=v.useMemo(()=>Array.from(new Set(t.map(F=>F.category))).sort(),[t]),I=v.useMemo(()=>{let A=t.filter(F=>F.available);return _!=="all"&&(A=A.filter(F=>F.category===_)),T&&(A=A.filter(F=>{var B;return F.name.toLowerCase().includes(T.toLowerCase())||((B=F.description)==null?void 0:B.toLowerCase().includes(T.toLowerCase()))})),A},[t,_,T]),V=v.useMemo(()=>u.reduce((A,F)=>A+F.price*F.quantity,0),[u]),Q=v.useMemo(()=>f?V*.1:0,[f,V]),K=v.useMemo(()=>V-Q,[V,Q]),ie=(A,F)=>{if(A.item_type==="direct"&&A.direct_inventory_item_id){const B=c.find(W=>W.id===A.direct_inventory_item_id);return B?B.currentStock<F?{available:!1,currentStock:B.currentStock,warning:`Estoque insuficiente. Disponvel: ${B.currentStock} ${B.unit}`}:B.currentStock<=B.minStock?{available:!0,currentStock:B.currentStock,warning:`Estoque baixo! Disponvel: ${B.currentStock} ${B.unit}`}:{available:!0,currentStock:B.currentStock}:{available:!1,warning:"Item no encontrado no estoque"}}return{available:!0}},pe=A=>{const F=ie(A,1);if(!F.available){alert(F.warning);return}h(B=>{const W=B.find(se=>se.menu_item_id===A.id);if(W){const se=W.quantity+1,fe=ie(A,se);return fe.available?(fe.warning?z(ge=>({...ge,[A.id]:fe.warning})):z(ge=>{const oe={...ge};return delete oe[A.id],oe}),B.map(ge=>ge.menu_item_id===A.id?{...ge,quantity:se}:ge)):(alert(fe.warning),B)}else return F.warning&&z(se=>({...se,[A.id]:F.warning})),[...B,{menu_item_id:A.id,name:A.name,price:A.price,quantity:1}]})},L=A=>{h(F=>F.filter(B=>B.menu_item_id!==A)),z(F=>{const B={...F};return delete B[A],B})},O=(A,F)=>{if(F<=0){L(A);return}const B=t.find(W=>W.id===A);if(B){const W=ie(B,F);if(!W.available){alert(W.warning);return}W.warning?z(se=>({...se,[A]:W.warning})):z(se=>{const fe={...se};return delete fe[A],fe})}h(W=>W.map(se=>se.menu_item_id===A?{...se,quantity:F}:se))},P=()=>{h([]),p(null),y(""),w(""),z({})},$=()=>{const A=[];for(const F of u){const B=t.find(W=>W.id===F.menu_item_id);if(B){const W=ie(B,F.quantity);W.available||A.push(`${B.name}: ${W.warning}`)}}return{valid:A.length===0,errors:A}},Y=async()=>{if(u.length===0)return;const A=$();if(!A.valid){alert(`Problemas de estoque encontrados:

`+A.errors.join(`
`));return}j(!0);try{const F={customer_name:f==null?void 0:f.name,customer_phone:f==null?void 0:f.phone,customer_notes:b||void 0,items:u.map(W=>({menu_item_id:W.menu_item_id,quantity:W.quantity,unit_price:W.price,notes:W.notes})),discount_amount:Q,notes:g||void 0},B=await i(F);P(),alert(`Pedido #${B.slice(-4).toUpperCase()} criado com sucesso!

O pedido est aguardando pagamento no caixa.`)}catch(F){console.error("Erro ao criar pedido:",F),F instanceof Error&&F.message.includes("Estoque insuficiente")?alert("Estoque insuficiente para um ou mais itens. Verifique o estoque e tente novamente."):alert("Erro ao criar pedido. Tente novamente.")}finally{j(!1)}};return n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Criar Pedido de Balco"}),s.jsx("p",{className:"text-gray-600",children:"O pedido ficar pendente at o pagamento ser processado no caixa"})]}),s.jsx("div",{className:"flex items-center space-x-4",children:l?s.jsx("div",{className:"bg-green-100 px-4 py-2 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(c1,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{className:"text-green-800 font-medium",children:"Caixa Aberto"})]})}):s.jsx("div",{className:"bg-yellow-100 px-4 py-2 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lc,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-yellow-800 font-medium",children:"Caixa Fechado"}),s.jsx("p",{className:"text-yellow-700 text-sm",children:"Pedidos sero processados quando o caixa abrir"})]})]})})})]})}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"bg-white p-4 border-b",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Qm,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Buscar itens...",value:T,onChange:A=>R(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:_,onChange:A=>N(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todas Categorias"}),U.map(A=>s.jsx("option",{value:A,children:A},A))]})]})}),s.jsx("div",{className:"flex-1 overflow-auto p-4",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:I.map(A=>{const F=ie(A,1),B=F.warning&&F.available,W=!F.available;return s.jsxs(_e.div,{whileHover:{scale:W?1:1.02},whileTap:{scale:W?1:.98},onClick:()=>!W&&pe(A),className:`bg-white rounded-lg p-4 shadow-sm border transition-all duration-200 relative ${W?"cursor-not-allowed opacity-50 border-red-300":B?"cursor-pointer hover:shadow-lg hover:border-yellow-400 hover:bg-yellow-50 border-yellow-300":"cursor-pointer hover:shadow-lg hover:border-blue-400 hover:bg-blue-50 border-gray-200"}`,children:[W&&s.jsxs("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[s.jsx(um,{className:"h-3 w-3"}),s.jsx("span",{children:"Esgotado"})]}),B&&s.jsxs("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[s.jsx(um,{className:"h-3 w-3"}),s.jsx("span",{children:"Baixo"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2 line-clamp-2",children:A.name}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.category}),A.item_type==="direct"&&F.currentStock!==void 0&&s.jsxs("p",{className:`text-xs mb-2 ${W?"text-red-600":B?"text-yellow-600":"text-gray-500"}`,children:["Estoque: ",F.currentStock]}),s.jsx("p",{className:`text-lg font-bold ${W?"text-gray-400":"text-blue-600"}`,children:Ce(A.price)})]})]},A.id)})})})]}),s.jsxs("div",{className:"w-96 bg-white border-l flex flex-col",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Carrinho"}),u.length>0&&s.jsx("button",{onClick:P,className:"text-red-600 hover:text-red-700 text-sm",children:"Limpar"})]})}),s.jsx("div",{className:"flex-1 overflow-auto p-4",children:u.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"Carrinho vazio"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Adicione itens do menu"})]}):s.jsx("div",{className:"space-y-4",children:u.map(A=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:A.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[Ce(A.price)," cada"]}),M[A.menu_item_id]&&s.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[s.jsx(um,{className:"h-4 w-4 text-yellow-500"}),s.jsx("p",{className:"text-xs text-yellow-600",children:M[A.menu_item_id]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>O(A.menu_item_id,A.quantity-1),className:"p-1 rounded hover:bg-gray-200",children:s.jsx(sO,{className:"h-4 w-4"})}),s.jsx("span",{className:"w-8 text-center font-medium",children:A.quantity}),s.jsx("button",{onClick:()=>O(A.menu_item_id,A.quantity+1),className:"p-1 rounded hover:bg-gray-200",children:s.jsx(rO,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>L(A.menu_item_id),className:"p-1 rounded hover:bg-red-100 text-red-600 ml-2",children:s.jsx(cO,{className:"h-4 w-4"})})]})]},A.menu_item_id))})}),f&&s.jsx("div",{className:"p-4 border-t bg-blue-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-900",children:f.name}),s.jsx("p",{className:"text-sm text-blue-700",children:"Membro - Desconto 10%"})]}),s.jsx("button",{onClick:()=>p(null),className:"text-blue-600 hover:text-blue-700",children:s.jsx(n0,{className:"h-5 w-5"})})]})}),u.length>0&&s.jsxs("div",{className:"p-4 border-t bg-gray-50",children:[s.jsxs("button",{onClick:()=>k(!0),className:"w-full mb-4 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2",children:[s.jsx(nd,{className:"h-5 w-5"}),s.jsx("span",{children:f?"Trocar Cliente":"Identificar Cliente"})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:Ce(V)})]}),Q>0&&s.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[s.jsx("span",{children:"Desconto (10%):"}),s.jsxs("span",{children:["-",Ce(Q)]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Ce(K)})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes do Cliente"}),s.jsx("textarea",{value:b,onChange:A=>w(A.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observaes especiais..."})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes Internas"}),s.jsx("textarea",{value:g,onChange:A=>y(A.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observaes sobre o pedido..."})]}),s.jsx("button",{onClick:Y,disabled:E||u.length===0,className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-medium",children:E?"Criando Pedido...":"Enviar para Caixa"})]})]})]}),s.jsx(hO,{isOpen:S,onClose:()=>k(!1),onSelectCustomer:A=>{p(A),k(!1)}})]})},mO={pending_payment:"Aguardando Pagamento",paid:"Pago",preparing:"Preparando",ready:"Pronto",delivered:"Entregue",cancelled:"Cancelado"},fO={pending_payment:"bg-yellow-100 text-yellow-800",paid:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",ready:"bg-green-100 text-green-800",delivered:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"},xv=e=>`#${e.toString().padStart(4,"0")}`,pO=()=>{var E;const{pendingOrders:e,preparingOrders:t,readyOrders:n,updateOrderStatus:i,processPayment:l,loading:c,refreshData:u}=pd(),{currentSession:h}=u1(),[f,p]=v.useState(!1),[g,y]=v.useState(null),[b,w]=v.useState("dinheiro"),[_,N]=v.useState(!1),T=async()=>{if(!(!g||!h)){N(!0);try{await l({order_id:g.id,payment_method:b,cash_session_id:h.id,amount_paid:g.final_amount}),p(!1),y(null)}catch(j){console.error("Erro ao processar pagamento:",j),alert("Erro ao processar pagamento. Tente novamente.")}finally{N(!1)}}},R=async j=>{try{await i(j,{status:"ready"})}catch(M){console.error("Erro ao marcar como pronto:",M),alert("Erro ao atualizar status. Tente novamente.")}},S=async j=>{try{await i(j,{status:"delivered"})}catch(M){console.error("Erro ao marcar como entregue:",M),alert("Erro ao atualizar status. Tente novamente.")}},k=({order:j})=>{var Q;const M=fO[j.status],z=mO[j.status],I=(()=>{const K=new Date(j.created_at);return Math.floor((new Date().getTime()-K.getTime())/(1e3*60))})(),V=I>15;return s.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-lg shadow-md p-4 border-l-4 ${V?"border-red-500":j.status==="ready"?"border-green-500":"border-blue-500"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:xv(j.order_number)}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M}`,children:z})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(Lc,{className:"h-4 w-4"}),s.jsxs("span",{className:V?"text-red-600 font-medium":"",children:[I,"min"]})]})]}),(j.customer_name||j.customer_phone)&&s.jsx("div",{className:"mb-3 p-2 bg-gray-50 rounded",children:s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[j.customer_name&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(nd,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:j.customer_name})]}),j.customer_phone&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Zm,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:j.customer_phone})]})]})}),s.jsx("div",{className:"space-y-2 mb-3",children:(Q=j.items)==null?void 0:Q.map(K=>{var ie;return s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[K.quantity,"x ",((ie=K.menu_item)==null?void 0:ie.name)||"Item",K.notes&&s.jsxs("span",{className:"text-gray-500 italic",children:[" - ",K.notes]})]}),s.jsx("span",{className:"font-medium",children:Ce(K.total_price)})]},K.id)})}),(j.customer_notes||j.notes)&&s.jsxs("div",{className:"mb-3 p-2 bg-yellow-50 rounded",children:[j.customer_notes&&s.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[s.jsx(X5,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),s.jsx("span",{className:"text-yellow-800",children:j.customer_notes})]}),j.notes&&s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Obs. interna: ",j.notes]})]}),s.jsxs("div",{className:"flex justify-between items-center mb-3 pt-2 border-t",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Total:"}),s.jsx("span",{className:"text-lg font-bold text-green-600",children:Ce(j.final_amount)})]}),s.jsxs("div",{className:"flex space-x-2",children:[j.status==="pending_payment"&&s.jsx("button",{onClick:()=>{y(j),p(!0)},disabled:!h,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Receber Pagamento"}),j.status==="preparing"&&s.jsx("button",{onClick:()=>R(j.id),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 text-sm font-medium",children:"Marcar como Pronto"}),j.status==="ready"&&s.jsx("button",{onClick:()=>S(j.id),className:"flex-1 bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 text-sm font-medium",children:"Entregar ao Cliente"})]})]})};return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pedidos de Balco"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[h?s.jsx("div",{className:"bg-green-100 px-3 py-1 rounded-lg",children:s.jsx("span",{className:"text-green-800 text-sm font-medium",children:"Caixa Aberto"})}):s.jsx("div",{className:"bg-red-100 px-3 py-1 rounded-lg",children:s.jsx("span",{className:"text-red-800 text-sm font-medium",children:"Caixa Fechado"})}),s.jsxs("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx(pv,{className:"h-4 w-4"}),s.jsx("span",{children:"Atualizar"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-yellow-100 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"Aguardando Pagamento"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:e.length})]}),s.jsx(Lc,{className:"h-8 w-8 text-yellow-600"})]})}),s.jsx("div",{className:"bg-blue-100 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"Preparando"}),s.jsx("p",{className:"text-2xl font-bold text-blue-900",children:t.length})]}),s.jsx(pv,{className:"h-8 w-8 text-blue-600"})]})}),s.jsx("div",{className:"bg-green-100 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-green-800 text-sm font-medium",children:"Prontos"}),s.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.length})]}),s.jsx(c1,{className:"h-8 w-8 text-green-600"})]})})]}),s.jsxs("div",{className:"space-y-6",children:[e.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Aguardando Pagamento (",e.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(j=>s.jsx(k,{order:j},j.id))})]}),t.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Preparando (",t.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(j=>s.jsx(k,{order:j},j.id))})]}),n.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Prontos para Entrega (",n.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(j=>s.jsx(k,{order:j},j.id))})]}),e.length===0&&t.length===0&&n.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Lc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido pendente"}),s.jsx("p",{className:"text-gray-600",children:"Todos os pedidos foram processados e entregues."})]})]}),f&&g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Receber Pagamento - ",xv(g.order_number)]}),s.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(n0,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Resumo do Pedido"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[(E=g.items)==null?void 0:E.map(j=>{var M;return s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[j.quantity,"x ",(M=j.menu_item)==null?void 0:M.name]}),s.jsx("span",{children:Ce(j.total_price)})]},j.id)}),s.jsxs("div",{className:"border-t pt-2 flex justify-between font-medium",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Ce(g.final_amount)})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pagamento"}),s.jsxs("select",{value:b,onChange:j=>w(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"dinheiro",children:"Dinheiro"}),s.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),s.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),s.jsx("option",{value:"pix",children:"PIX"}),s.jsx("option",{value:"transferencia",children:"Transferncia"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>p(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:T,disabled:_||!h,className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:_?"Processando...":"Confirmar Pagamento"})]})]})})]})},xd=()=>{const[e,t]=v.useState([]),[n,i]=v.useState(!0),[l,c]=v.useState(null),u=async()=>{try{i(!0);const{data:p,error:g}=await le.from("bar_tables").select("*").order("number");if(g)throw g;t(p||[])}catch(p){c(p instanceof Error?p.message:"Erro ao carregar mesas")}finally{i(!1)}},h=async(p,g)=>{try{const{error:y}=await le.from("bar_tables").update({status:g}).eq("id",p);if(y)throw y;t(b=>b.map(w=>w.id===p?{...w,status:g}:w))}catch(y){throw new Error(y instanceof Error?y.message:"Erro ao atualizar mesa")}},f=async(p,g,y)=>{try{const{error:b}=await le.from("bar_tables").update({position_x:g,position_y:y}).eq("id",p);if(b)throw b;t(w=>w.map(_=>_.id===p?{..._,position_x:g,position_y:y}:_))}catch(b){throw new Error(b instanceof Error?b.message:"Erro ao atualizar posio da mesa")}};return v.useEffect(()=>{u()},[]),{tables:e,loading:n,error:l,refetch:u,updateTableStatus:h,updateTablePosition:f}},m1=({isOpen:e,onClose:t,selectedTable:n,onComandaCreated:i})=>{const{user:l}=Kt(),{tables:c}=xd(),{createComanda:u}=cl(),[h,f]=v.useState({table_id:(n==null?void 0:n.id)||"",customer_id:"",customer_name:"",people_count:1,notes:""}),[p,g]=v.useState(""),[y,b]=v.useState([]),[w,_]=v.useState(!1),[N,T]=v.useState(!1),R=async E=>{if(!E.trim()){b([]);return}try{_(!0);const{data:j,error:M}=await le.from("bar_customers").select("*").or(`phone.ilike.%${E}%,name.ilike.%${E}%`).eq("status","active").limit(10);if(M)throw M;b(j||[])}catch(j){console.error("Erro ao buscar clientes:",j)}finally{_(!1)}},S=E=>{f(j=>({...j,customer_id:E.id,customer_name:E.name})),g(E.name),b([])},k=async E=>{if(E.preventDefault(),!!l)try{T(!0);const j={table_id:h.table_id||void 0,customer_id:h.customer_id||void 0,customer_name:h.customer_name||void 0,employee_id:l.id,people_count:h.people_count,notes:h.notes||void 0};await u(j),i&&i(),t(),f({table_id:"",customer_id:"",customer_name:"",people_count:1,notes:""}),g("")}catch(j){console.error("Erro ao criar comanda:",j),alert("Erro ao criar comanda. Tente novamente.")}finally{T(!1)}};return v.useEffect(()=>{n&&f(E=>({...E,table_id:n.id}))},[n]),v.useEffect(()=>{const E=setTimeout(()=>{R(p)},300);return()=>clearTimeout(E)},[p]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nova Comanda"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(rt,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(il,{className:"w-4 h-4 inline mr-1"}),"Mesa (opcional)"]}),s.jsxs("select",{value:h.table_id,onChange:E=>f(j=>({...j,table_id:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Balco (sem mesa)"}),c.filter(E=>E.status==="available").map(E=>s.jsxs("option",{value:E.id,children:["Mesa ",E.number," (",E.capacity," pessoas)"]},E.id))]})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Kn,{className:"w-4 h-4 inline mr-1"}),"Cliente (opcional)"]}),s.jsx("input",{type:"text",value:p,onChange:E=>{g(E.target.value),E.target.value||f(j=>({...j,customer_id:"",customer_name:""}))},placeholder:"Buscar por telefone ou nome...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),y.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-40 overflow-y-auto",children:y.map(E=>s.jsxs("button",{type:"button",onClick:()=>S(E),className:"w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100",children:[s.jsx("div",{className:"font-medium",children:E.name}),s.jsx("div",{className:"text-sm text-gray-600",children:E.phone})]},E.id))}),w&&s.jsx("div",{className:"absolute right-3 top-9",children:s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),p&&!h.customer_id&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do cliente"}),s.jsx("input",{type:"text",value:h.customer_name,onChange:E=>f(j=>({...j,customer_name:E.target.value})),placeholder:"Digite o nome do cliente",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(ia,{className:"w-4 h-4 inline mr-1"}),"Nmero de pessoas"]}),s.jsx("input",{type:"number",min:"1",max:"20",value:h.people_count,onChange:E=>f(j=>({...j,people_count:parseInt(E.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),s.jsx("textarea",{value:h.notes,onChange:E=>f(j=>({...j,notes:E.target.value})),placeholder:"Observaes sobre a comanda...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:N,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:N?"Criando...":"Criar Comanda"})]})]})]})}):null},gO=({isOpen:e,onClose:t})=>{const{tables:n,updateTablePosition:i}=xd(),[l,c]=v.useState([]),[u,h]=v.useState({isDragging:!1,tableId:null,startX:0,startY:0,offsetX:0,offsetY:0}),[f,p]=v.useState(!1),g=v.useRef(null);v.useEffect(()=>{c([...n])},[n]);const y=(R,S)=>{var M;if(R.preventDefault(),!((M=g.current)==null?void 0:M.getBoundingClientRect()))return;const j=R.currentTarget.getBoundingClientRect();h({isDragging:!0,tableId:S.id,startX:R.clientX,startY:R.clientY,offsetX:R.clientX-j.left,offsetY:R.clientY-j.top})},b=R=>{if(!u.isDragging||!u.tableId||!g.current)return;const S=g.current.getBoundingClientRect(),k=(R.clientX-S.left-u.offsetX)/S.width*100,E=(R.clientY-S.top-u.offsetY)/S.height*100,j=Math.max(0,Math.min(95,k)),M=Math.max(0,Math.min(95,E));c(z=>z.map(U=>U.id===u.tableId?{...U,position_x:j,position_y:M}:U))},w=()=>{h({isDragging:!1,tableId:null,startX:0,startY:0,offsetX:0,offsetY:0})},_=async()=>{try{p(!0);const R=l.map(S=>{const k=n.find(E=>E.id===S.id);return k&&(k.position_x!==S.position_x||k.position_y!==S.position_y)?i(S.id,S.position_x,S.position_y):Promise.resolve()});await Promise.all(R),t(),alert("Layout salvo com sucesso!")}catch(R){console.error("Erro ao salvar layout:",R),alert("Erro ao salvar layout. Tente novamente.")}finally{p(!1)}},N=()=>{c([...n])},T=R=>{switch(R){case"available":return"bg-green-500";case"occupied":return"bg-red-500";case"reserved":return"bg-yellow-500";case"cleaning":return"bg-gray-500";case"maintenance":return"bg-orange-500";default:return"bg-gray-400"}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(VA,{className:"w-6 h-6 text-gray-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Configurar Layout do Salo"})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(rt,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-blue-800 text-sm",children:[s.jsx("strong",{children:"Instrues:"})," Arraste as mesas para reposicion-las no salo. As posies so salvas em porcentagem para se adaptar a diferentes tamanhos de tela."]})}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),s.jsx("span",{children:"Disponvel"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),s.jsx("span",{children:"Ocupada"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),s.jsx("span",{children:"Reservada"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-gray-500 rounded"}),s.jsx("span",{children:"Limpeza"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),s.jsx("span",{children:"Manuteno"})]})]}),s.jsxs("div",{ref:g,className:"relative bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg h-96 overflow-hidden select-none",onMouseMove:b,onMouseUp:w,onMouseLeave:w,children:[l.map(R=>s.jsx("div",{className:`absolute w-12 h-12 rounded-lg border-2 border-white shadow-lg cursor-move flex items-center justify-center text-white font-bold text-xs transition-transform hover:scale-110 ${T(R.status)} ${u.tableId===R.id?"scale-110 shadow-xl":""}`,style:{left:`${R.position_x}%`,top:`${R.position_y}%`,zIndex:u.tableId===R.id?10:1},onMouseDown:S=>y(S,R),title:`Mesa ${R.number} - ${R.capacity} pessoas - ${R.status}`,children:R.number},R.id)),s.jsx("div",{className:"absolute top-2 left-2 text-xs text-gray-500 bg-white px-2 py-1 rounded",children:"Salo Principal"})]}),s.jsxs("div",{className:"flex justify-between items-center mt-6",children:[s.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:[s.jsx(Uw,{className:"w-4 h-4"}),s.jsx("span",{children:"Resetar"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),s.jsxs("button",{onClick:_,disabled:f,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(Qc,{className:"w-4 h-4"}),s.jsx("span",{children:f?"Salvando...":"Salvar Layout"})]})]})]})]})]})}):null},r0=()=>{const{user:e}=Kt(),[t,n]=v.useState({mesas:[],comandas:[],metricas:null,notificacoes:[],loading:!0,error:null}),i=v.useCallback(V=>{n(Q=>({...Q,...V}))},[]),l=v.useCallback((V,Q)=>{console.error(`Erro em ${Q}:`,V),i({error:`Erro em ${Q}: ${V.message||"Erro desconhecido"}`,loading:!1})},[i]),c=v.useCallback(async()=>{if(e)try{i({loading:!0,error:null});const{data:V,error:Q}=await le.from("bar_tables").select(`
          *,
          comandas!comandas_table_id_fkey(
            id,
            customer_name,
            people_count,
            total,
            opened_at,
            status,
            comanda_items(
              id,
              quantity,
              price,
              status
            )
          )
        `).order("number");if(Q)throw Q;const K=(V==null?void 0:V.map($=>{var A;const Y=(A=$.comandas)==null?void 0:A.find(F=>F.status==="open");return{...$,currentComanda:Y||void 0,occupiedSince:(Y==null?void 0:Y.opened_at)||void 0,currentTotal:(Y==null?void 0:Y.total)||0,peopleCount:(Y==null?void 0:Y.people_count)||0}}))||[],{data:ie,error:pe}=await le.from("comandas").select(`
          *,
          bar_tables(number, capacity),
          bar_customers(name, phone),
          comanda_items(
            *,
            menu_items(name, price, category)
          )
        `).in("status",["open","pending_payment"]).order("opened_at",{ascending:!1});if(pe)throw pe;const L=(ie==null?void 0:ie.map($=>({...$,items:$.comanda_items||[],table:$.bar_tables||void 0,customer:$.bar_customers||void 0})))||[],{data:O,error:P}=await le.from("attendance_metrics").select("*").eq("employee_id",e.id).eq("date",new Date().toISOString().split("T")[0]).maybeSingle();P&&console.warn("Erro ao carregar mtricas:",P),i({mesas:K,comandas:L,metricas:O||null,loading:!1})}catch(V){l(V,"carregamento inicial")}},[e,i,l]);v.useEffect(()=>{if(!e)return;const V=[],Q=le.channel("bar-tables-changes").on("postgres_changes",{event:"*",schema:"public",table:"bar_tables"},pe=>{console.log("Mudana em mesas:",pe),c()}).subscribe();V.push(Q);const K=le.channel("comandas-changes").on("postgres_changes",{event:"*",schema:"public",table:"comandas"},pe=>{console.log("Mudana em comandas:",pe),c()}).subscribe();V.push(K);const ie=le.channel("comanda-items-changes").on("postgres_changes",{event:"*",schema:"public",table:"comanda_items"},pe=>{console.log("Mudana em itens de comanda:",pe),c()}).subscribe();return V.push(ie),()=>{V.forEach(pe=>le.removeChannel(pe))}},[e,c]),v.useEffect(()=>{e&&c()},[e,c]);const u=v.useCallback(async(V,Q,K)=>{if(!e)throw new Error("Usurio no autenticado");try{i({loading:!0,error:null});const{data:ie,error:pe}=await le.from("comandas").insert({table_id:V||null,customer_name:Q||null,people_count:K||1,employee_id:e.id,status:"open",opened_at:new Date().toISOString(),total:0}).select().single();if(pe)throw pe;return V&&await f(V,"occupied"),await c(),ie.id}catch(ie){throw l(ie,"criao de comanda"),ie}},[e,i,l,c]),h=v.useCallback(async(V,Q)=>{try{i({loading:!0,error:null});const{error:K}=await le.from("comandas").update({...Q,updated_at:new Date().toISOString()}).eq("id",V);if(K)throw K;await c()}catch(K){throw l(K,"atualizao de comanda"),K}},[i,l,c]),f=v.useCallback(async(V,Q)=>{try{const{error:K}=await le.from("bar_tables").update({status:Q,updated_at:new Date().toISOString()}).eq("id",V);if(K)throw K;await c()}catch(K){throw l(K,"atualizao de status da mesa"),K}},[l,c]),p=v.useCallback(async V=>{try{await f(V,"cleaning"),setTimeout(async()=>{await f(V,"available")},5*60*1e3)}catch(Q){throw l(Q,"liberao de mesa"),Q}},[f,l]),g=v.useCallback(async V=>{if(e)try{const Q=new Date().toISOString().split("T")[0],{data:K,error:ie}=await le.from("attendance_metrics").select("*").eq("employee_id",e.id).eq("date",Q).single();if(ie&&ie.code!=="PGRST116")throw ie;if(K){const{error:pe}=await le.from("attendance_metrics").update({total_sales:(K.total_sales||0)+V,orders_count:(K.orders_count||0)+1,comandas_count:(K.comandas_count||0)+1,updated_at:new Date().toISOString()}).eq("id",K.id);if(pe)throw pe}else{const{error:pe}=await le.from("attendance_metrics").insert({employee_id:e.id,date:Q,total_sales:V,orders_count:1,comandas_count:1});if(pe)throw pe}}catch(Q){console.error("Erro ao atualizar mtricas de venda:",Q)}},[e]),y=v.useCallback(async(V,Q,K)=>{try{i({loading:!0,error:null});const{data:ie,error:pe}=await le.from("comandas").select("table_id, total").eq("id",V).single();if(pe)throw pe;const{error:L}=await le.from("comandas").update({status:"closed",closed_at:new Date().toISOString(),payment_method:Q,notes:K,updated_at:new Date().toISOString()}).eq("id",V);if(L)throw L;ie.table_id&&await p(ie.table_id),await g(ie.total||0),await c()}catch(ie){throw l(ie,"fechamento de comanda"),ie}},[i,l,c,p,g]),b=v.useCallback(async(V,Q,K,ie)=>{try{i({loading:!0,error:null});const{data:pe,error:L}=await le.from("menu_items").select("price").eq("id",Q).single();if(L)throw L;const{error:O}=await le.from("comanda_items").insert({comanda_id:V,menu_item_id:Q,quantity:K,price:pe.price,notes:ie,status:"pending",added_at:new Date().toISOString()});if(O)throw O;const{data:P,error:$}=await le.from("comanda_items").select("quantity, price").eq("comanda_id",V);if($)throw $;const Y=P.reduce((A,F)=>A+F.quantity*F.price,0);await h(V,{total:Y})}catch(pe){throw l(pe,"adio de item  comanda"),pe}},[i,l,h]),w=v.useCallback(async V=>{try{i({loading:!0,error:null});const{data:Q,error:K}=await le.from("comanda_items").select("comanda_id").eq("id",V).single();if(K)throw K;const{error:ie}=await le.from("comanda_items").delete().eq("id",V);if(ie)throw ie;const{data:pe,error:L}=await le.from("comanda_items").select("quantity, price").eq("comanda_id",Q.comanda_id);if(L)throw L;const O=pe.reduce((P,$)=>P+$.quantity*$.price,0);await h(Q.comanda_id,{total:O})}catch(Q){throw l(Q,"remoo de item da comanda"),Q}},[i,l,h]),_=v.useCallback(async(V,Q)=>{try{const K={status:Q,updated_at:new Date().toISOString()};Q==="ready"?K.prepared_at=new Date().toISOString():Q==="delivered"&&(K.delivered_at=new Date().toISOString());const{error:ie}=await le.from("comanda_items").update(K).eq("id",V);if(ie)throw ie;await c()}catch(K){throw l(K,"atualizao de status do item"),K}},[l,c]),N=v.useCallback(async(V,Q)=>{try{await f(V,"occupied"),Q&&await h(Q,{table_id:V})}catch(K){throw l(K,"ocupao de mesa"),K}},[f,h,l]),T=v.useCallback(async(V,Q,K)=>{try{const{error:ie}=await le.from("bar_tables").update({status:"reserved",notes:`Reservado para ${Q} s ${K.toLocaleTimeString()}`,updated_at:new Date().toISOString()}).eq("id",V);if(ie)throw ie;await c()}catch(ie){throw l(ie,"reserva de mesa"),ie}},[l,c]),R=v.useCallback(async V=>{try{await f(V,"available")}catch(Q){throw l(Q,"limpeza de mesa"),Q}},[f,l]),S=v.useCallback(async V=>{var Q;if(!e)throw new Error("Usurio no autenticado");try{i({loading:!0,error:null});const{data:K,error:ie}=await le.from("comandas").insert({customer_name:((Q=V.customer)==null?void 0:Q.name)||"Cliente Balco",employee_id:e.id,status:"closed",opened_at:new Date().toISOString(),closed_at:new Date().toISOString(),total:V.total,payment_method:V.payment_method||"dinheiro",notes:V.notes}).select().single();if(ie)throw ie;const pe=V.items.map(O=>({comanda_id:K.id,menu_item_id:O.menu_item_id,quantity:O.quantity,price:O.price,notes:O.notes,status:"delivered",added_at:new Date().toISOString(),delivered_at:new Date().toISOString()})),{error:L}=await le.from("comanda_items").insert(pe);if(L)throw L;return await g(V.total),await c(),K.id}catch(K){throw l(K,"processamento de pedido do balco"),K}},[e,i,l,c]),k=v.useCallback(async(V,Q)=>{if(!e)throw new Error("Usurio no autenticado");try{i({loading:!0,error:null});const{error:K}=await le.from("bill_splits").insert({comanda_id:V,split_type:Q.type,person_count:Q.person_count,splits:Q.splits,total_amount:Q.splits.reduce((ie,pe)=>ie+pe.total,0),service_charge:Q.service_charge_percentage||0,discount_amount:Q.discount_amount||0,created_by:e.id});if(K)throw K;await c()}catch(K){throw l(K,"diviso de conta"),K}},[e,i,l,c]),E=v.useCallback(async()=>{if(e)try{const V=new Date().toISOString().split("T")[0],{data:Q}=await le.from("attendance_metrics").select("*").eq("employee_id",e.id).eq("date",V).single(),{data:K}=await le.from("comandas").select("total, opened_at, closed_at").eq("employee_id",e.id).gte("opened_at",`${V}T00:00:00`).lt("opened_at",`${V}T23:59:59`),ie=(K==null?void 0:K.reduce((O,P)=>O+(P.total||0),0))||0,pe=(K==null?void 0:K.length)||0,L={employee_id:e.id,date:V,comandas_count:pe,total_sales:ie,orders_count:pe,updated_at:new Date().toISOString()};if(Q){const{error:O}=await le.from("attendance_metrics").update(L).eq("id",Q.id);if(O)throw O}else{const{error:O}=await le.from("attendance_metrics").insert(L);if(O)throw O}await c()}catch(V){l(V,"atualizao de mtricas")}},[e,l,c]),j=v.useCallback(async V=>{i({notificacoes:t.notificacoes.map(Q=>Q.id===V?{...Q,read:!0}:Q)})},[t.notificacoes,i]),M=v.useCallback(async()=>{i({notificacoes:[]})},[i]),z=v.useCallback(async()=>{await c()},[c]),U=v.useCallback(V=>t.comandas.find(Q=>Q.table_id===V&&Q.status==="open"),[t.comandas]),I=v.useCallback(V=>t.mesas.find(Q=>Q.number===V),[t.mesas]);return{...t,criarComanda:u,atualizarComanda:h,fecharComanda:y,adicionarItemComanda:b,removerItemComanda:w,atualizarStatusItem:_,ocuparMesa:N,liberarMesa:p,reservarMesa:T,limparMesa:R,atualizarStatusMesa:f,processarPedidoBalcao:S,dividirConta:k,atualizarMetricas:E,marcarNotificacaoLida:j,limparNotificacoes:M,recarregarDados:z,obterComandaPorMesa:U,obterMesaPorNumero:I}},xO=({isOpen:e,onClose:t,mesa:n,onStatusChange:i})=>{if(!e||!n)return null;const{getComandaByTable:l}=cl();r0();const[c,u]=v.useState(null),[h,f]=v.useState(!1),[p,g]=v.useState(!1),[y,b]=v.useState(!1);v.useEffect(()=>{e&&n&&n.status==="occupied"&&w()},[e,n]);const w=async()=>{if(n)try{f(!0);const j=await l(n.id);u(j)}catch(j){console.error("Erro ao carregar detalhes da comanda:",j)}finally{f(!1)}},_=j=>new Date(j).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),N=j=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(j),T=j=>{switch(j){case"available":return"text-green-600 bg-green-100";case"occupied":return"text-red-600 bg-red-100";case"reserved":return"text-yellow-600 bg-yellow-100";case"cleaning":return"text-gray-600 bg-gray-100";case"maintenance":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},R=j=>{switch(j){case"available":return"Disponvel";case"occupied":return"Ocupada";case"reserved":return"Reservada";case"cleaning":return"Limpeza";case"maintenance":return"Manuteno";default:return"Indefinido"}},S=async(j,M)=>{if(c){b(!0);try{console.log(" Enviando comanda para o caixa:",c.id,"Mtodo:",j);const{error:z}=await le.from("comandas").update({status:"pending_payment",payment_method:j,notes:M,updated_at:new Date().toISOString()}).eq("id",c.id);if(z)throw z;console.log(" Comanda enviada para o caixa com sucesso"),await w(),g(!1)}catch(z){console.error(" Erro ao enviar comanda para o caixa:",z)}finally{b(!1)}}},k=j=>{n&&(i(n.id,j),t())},E=j=>{const M=new Date(j),U=new Date().getTime()-M.getTime(),I=Math.floor(U/(1e3*60*60)),V=Math.floor(U%(1e3*60*60)/(1e3*60));return I>0?`${I}h ${V}min`:`${V}min`};return s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Mesa ",n.number]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T(n.status)}`,children:R(n.status)})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(rt,{size:24})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(ia,{size:20,className:"text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:"Capacidade"})]}),s.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[n.capacity," pessoas"]})]}),n.status==="occupied"&&n.occupiedSince&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Lt,{size:20,className:"text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:"Tempo de ocupao"})]}),s.jsx("span",{className:"text-2xl font-bold text-gray-900",children:E(n.occupiedSince)})]})]}),n.status==="occupied"&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaes da Comanda"}),h?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2",children:"Carregando comanda..."})]}):c?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Cliente"}),s.jsx("p",{className:"font-medium",children:c.customer_name||"No informado"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Pessoas"}),s.jsx("p",{className:"font-medium",children:c.people_count||n.peopleCount||1})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Aberta em"}),s.jsx("p",{className:"font-medium",children:_(c.opened_at)})]})]})}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(qt,{size:20,className:"text-green-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:"Total da Comanda"})]}),s.jsx("span",{className:"text-2xl font-bold text-green-600",children:N(c.total)})]})}),c.items&&c.items.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Itens da Comanda (",c.items.length,")"]}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:c.items.map((j,M)=>{var z,U;return console.log(" Debug item no MesaDetailsModal:",j),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"font-medium text-gray-900",children:[j.quantity,"x ",((z=j.menu_item)==null?void 0:z.name)||((U=j.menu_items)==null?void 0:U.name)||`Item #${j.menu_item_id}`]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Adicionado em ",_(j.added_at)]}),j.notes&&s.jsxs("p",{className:"text-sm text-gray-500 italic",children:["Obs: ",j.notes]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-medium text-gray-900",children:N(j.price*j.quantity)}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${j.status==="delivered"?"bg-green-100 text-green-800":j.status==="ready"?"bg-blue-100 text-blue-800":j.status==="preparing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:j.status==="delivered"?"Entregue":j.status==="ready"?"Pronto":j.status==="preparing"?"Preparando":"Pendente"})]})]},j.id)})})]})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma comanda encontrada para esta mesa"})]}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aes Rpidas"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.status==="available"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>k("occupied"),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Ocupar Mesa"}),s.jsx("button",{onClick:()=>k("reserved"),className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors",children:"Reservar Mesa"})]}),n.status==="occupied"&&s.jsxs(s.Fragment,{children:[c&&c.status==="open"&&c.items&&c.items.length>0&&s.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors col-span-2 flex items-center justify-center space-x-2",children:[s.jsx(qt,{size:16}),s.jsxs("span",{children:["Enviar para Caixa - ",N(c.total)]})]}),s.jsx("button",{onClick:()=>k("available"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Liberar Mesa"}),s.jsx("button",{onClick:()=>k("cleaning"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Marcar para Limpeza"})]}),(n.status==="cleaning"||n.status==="reserved")&&s.jsx("button",{onClick:()=>k("available"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors col-span-2",children:"Liberar Mesa"})]})]})]})]}),p&&c&&s.jsx(yO,{isOpen:p,onClose:()=>g(!1),comanda:c,onConfirm:S,isLoading:y})]})},yO=({isOpen:e,onClose:t,comanda:n,onConfirm:i,isLoading:l})=>{var y;const[c,u]=v.useState("dinheiro"),[h,f]=v.useState("");if(!e)return null;const p=b=>{b.preventDefault(),i(c,h)},g=b=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(b);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Enviar para Caixa"}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["Mesa ",((y=n.table)==null?void 0:y.number)||"N/A"," - ",n.customer_name||"Cliente"]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Total da conta:"}),s.jsx("span",{className:"text-2xl font-bold text-green-600",children:g(n.total)})]})]}),s.jsxs("form",{onSubmit:p,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pagamento"}),s.jsxs("select",{value:c,onChange:b=>u(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"dinheiro",children:"Dinheiro"}),s.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),s.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),s.jsx("option",{value:"pix",children:"PIX"}),s.jsx("option",{value:"vale_refeicao",children:"Vale Refeio"}),s.jsx("option",{value:"outros",children:"Outros"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes (opcional)"}),s.jsx("textarea",{value:h,onChange:b=>f(b.target.value),placeholder:"Observaes para o caixa...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:t,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:l,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Enviando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(wi,{size:16}),s.jsx("span",{children:"Enviar para Caixa"})]})})]})]})]})})})},bO=()=>{const{tables:e,loading:t,updateTableStatus:n,refetch:i}=xd(),{comandas:l,refetch:c}=cl(),[u,h]=v.useState(!1),[f,p]=v.useState(!1),[g,y]=v.useState(!1),[b,w]=v.useState(null),[_,N]=v.useState([]);v.useEffect(()=>{const U=e.map(I=>{const V=l.find(K=>K.table_id===I.id&&K.status==="open"),Q=V?"occupied":I.status;return{...I,status:Q,currentComanda:V,occupiedSince:V==null?void 0:V.opened_at,currentTotal:(V==null?void 0:V.total)||0,peopleCount:(V==null?void 0:V.people_count)||void 0}});N(U)},[e,l]);const T=()=>{w(null),h(!0)},R=()=>{p(!0)},S=U=>{w(U),U.status==="available"?h(!0):y(!0)},k=async(U,I)=>{try{await n(U,I)}catch(V){console.error("Erro ao atualizar status da mesa:",V)}},j=(()=>{const U={available:0,occupied:0,reserved:0,cleaning:0,maintenance:0};return _.forEach(I=>{I.status in U&&U[I.status]++}),U})(),M=U=>{switch(U){case"available":return"bg-green-100 border-green-300 text-green-800 hover:bg-green-200";case"occupied":return"bg-red-100 border-red-300 text-red-800 hover:bg-red-200";case"reserved":return"bg-yellow-100 border-yellow-300 text-yellow-800 hover:bg-yellow-200";case"cleaning":return"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200";case"maintenance":return"bg-orange-100 border-orange-300 text-orange-800 hover:bg-orange-200";default:return"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200"}},z=U=>{switch(U){case"available":return"";case"occupied":return"";case"reserved":return"";case"cleaning":return"";case"maintenance":return"";default:return"?"}};return s.jsxs("div",{className:"mesas-container space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gesto de Mesas"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:[_.length," mesas configuradas"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:T,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(vs,{size:20}),s.jsx("span",{children:"Nova Comanda"})]}),s.jsxs("button",{onClick:()=>i(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Uw,{size:20}),s.jsx("span",{children:"Atualizar"})]}),s.jsxs("button",{onClick:R,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsx(qw,{size:20}),s.jsx("span",{children:"Configurar Layout"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.available}),s.jsx("div",{className:"text-sm text-green-700",children:"Disponveis"})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:j.occupied}),s.jsx("div",{className:"text-sm text-red-700",children:"Ocupadas"})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:j.reserved}),s.jsx("div",{className:"text-sm text-yellow-700",children:"Reservadas"})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600",children:j.cleaning}),s.jsx("div",{className:"text-sm text-gray-700",children:"Limpeza"})]}),s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:j.maintenance}),s.jsx("div",{className:"text-sm text-orange-700",children:"Manuteno"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Layout do Salo"}),s.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:s.jsx("span",{children:"Clique nas mesas para gerenciar"})})]}),t?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2",children:"Carregando mesas..."})]}):s.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-4 p-4 bg-gray-50 rounded-lg min-h-96",children:[_.map(U=>s.jsxs("div",{onClick:()=>S(U),className:`
                  relative aspect-square rounded-lg border-2 cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg
                  flex flex-col items-center justify-center text-center p-2
                  ${M(U.status)}
                `,children:[s.jsx("div",{className:"font-bold text-sm mb-1",children:U.number}),s.jsx("div",{className:"text-xs opacity-75",children:z(U.status)}),U.currentComanda&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:U.peopleCount||"!"}),s.jsxs("div",{className:"text-xs mt-1 opacity-60",children:[U.capacity,"p"]})]},U.id)),Array.from({length:Math.max(0,40-_.length)}).map((U,I)=>s.jsx("div",{className:"aspect-square rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center text-gray-400 text-xs",children:"Vazio"},`empty-${I}`))]})]}),s.jsx(m1,{isOpen:u,onClose:()=>{h(!1),w(null)},selectedTable:b,onComandaCreated:()=>{c()}}),s.jsx(gO,{isOpen:f,onClose:()=>p(!1)}),s.jsx(xO,{isOpen:g,onClose:()=>{y(!1),w(null)},mesa:b,onStatusChange:k})]})},vO=({comandas:e,onComandaClick:t,onDismissAlert:n})=>{const i=()=>{const f=new Date;return e.filter(p=>{if(p.status!=="open")return!1;const g=new Date(p.opened_at);return(f.getTime()-g.getTime())/(1e3*60*60)>2})},l=()=>{const f=new Date;return e.filter(p=>{if(p.status!=="open")return!1;const g=new Date(p.opened_at);return(f.getTime()-g.getTime())/(1e3*60*60)>4})},c=f=>{const p=new Date(f),y=new Date().getTime()-p.getTime(),b=Math.floor(y/(1e3*60*60)),w=Math.floor(y%(1e3*60*60)/(1e3*60));return b>0?`${b}h ${w}m`:`${w}m`},u=i(),h=l();return u.length===0?null:s.jsxs("div",{className:"mb-6 space-y-3",children:[h.map(f=>{var p,g;return s.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Fs,{className:"w-6 h-6 text-red-500"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-red-800 font-semibold",children:["Comanda Crtica - ",((p=f.table)==null?void 0:p.number)||"Balco"]}),s.jsxs("p",{className:"text-red-700 text-sm",children:[((g=f.customer)==null?void 0:g.name)||f.customer_name||"Cliente no identificado","  Aberta h ",c(f.opened_at),"  R$ ",f.total.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t(f),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Ver Detalhes"}),n&&s.jsx("button",{onClick:()=>n(f.id),className:"p-1 text-red-500 hover:bg-red-100 rounded transition-colors",children:s.jsx(rt,{className:"w-4 h-4"})})]})]})},`critical-${f.id}`)}),u.filter(f=>!h.includes(f)).map(f=>{var p,g;return s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Lt,{className:"w-5 h-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-yellow-800 font-semibold",children:["Ateno - ",((p=f.table)==null?void 0:p.number)||"Balco"]}),s.jsxs("p",{className:"text-yellow-700 text-sm",children:[((g=f.customer)==null?void 0:g.name)||f.customer_name||"Cliente no identificado","  Aberta h ",c(f.opened_at),"  R$ ",f.total.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t(f),className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700 transition-colors",children:"Ver Detalhes"}),n&&s.jsx("button",{onClick:()=>n(f.id),className:"p-1 text-yellow-500 hover:bg-yellow-100 rounded transition-colors",children:s.jsx(rt,{className:"w-4 h-4"})})]})]})},`warning-${f.id}`)}),u.length>3&&s.jsx("div",{className:"bg-gray-50 border border-gray-200 p-3 rounded-lg text-center",children:s.jsxs("p",{className:"text-gray-600 text-sm",children:[u.length," comandas com tempo excessivo ",h.length," crticas"]})})]})},jO=({searchTerm:e,onSearchChange:t,statusFilter:n,onStatusFilterChange:i,employeeFilter:l,onEmployeeFilterChange:c,tableFilter:u,onTableFilterChange:h,timeFilter:f,onTimeFilterChange:p,employees:g,tables:y,onClearFilters:b})=>{var T,R;const w=e||n!=="all"||l||u||f!=="all",_=S=>{switch(S){case"all":return"Todos os Status";case"open":return"Abertas";case"pending_payment":return"Aguardando Pagamento";case"closed":return"Fechadas";case"cancelled":return"Canceladas";default:return S}},N=S=>{switch(S){case"all":return"Todos os Tempos";case"recent":return"Recentes (< 1h)";case"overdue":return"Atrasadas (> 2h)";case"critical":return"Crticas (> 4h)";default:return S}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($w,{className:"w-5 h-5 text-gray-500"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros"})]}),w&&s.jsxs("button",{onClick:b,className:"flex items-center space-x-1 px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(rt,{className:"w-4 h-4"}),s.jsx("span",{children:"Limpar Filtros"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"xl:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),s.jsxs("div",{className:"relative",children:[s.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:e,onChange:S=>t(S.target.value),placeholder:"Mesa, cliente ou funcionrio...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:n,onChange:S=>i(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todos os Status"}),s.jsx("option",{value:"open",children:"Abertas"}),s.jsx("option",{value:"pending_payment",children:"Aguardando Pagamento"}),s.jsx("option",{value:"closed",children:"Fechadas"}),s.jsx("option",{value:"cancelled",children:"Canceladas"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funcionrio"}),s.jsxs("select",{value:l,onChange:S=>c(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Todos os Funcionrios"}),g.map(S=>s.jsx("option",{value:S.id,children:S.name},S.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesa"}),s.jsxs("select",{value:u,onChange:S=>h(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Todas as Mesas"}),s.jsx("option",{value:"balcao",children:"Balco"}),y.map(S=>s.jsxs("option",{value:S.id,children:["Mesa ",S.number]},S.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo"}),s.jsxs("select",{value:f,onChange:S=>p(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todos os Tempos"}),s.jsx("option",{value:"recent",children:"Recentes (< 1h)"}),s.jsx("option",{value:"overdue",children:"Atrasadas (> 2h)"}),s.jsx("option",{value:"critical",children:"Crticas (> 4h)"})]})]})]}),w&&s.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:['Busca: "',e,'"',s.jsx("button",{onClick:()=>t(""),className:"ml-1 p-0.5 hover:bg-blue-200 rounded-full",children:s.jsx(rt,{className:"w-3 h-3"})})]}),n!=="all"&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:["Status: ",_(n),s.jsx("button",{onClick:()=>i("all"),className:"ml-1 p-0.5 hover:bg-green-200 rounded-full",children:s.jsx(rt,{className:"w-3 h-3"})})]}),l&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:["Funcionrio: ",(T=g.find(S=>S.id===l))==null?void 0:T.name,s.jsx("button",{onClick:()=>c(""),className:"ml-1 p-0.5 hover:bg-purple-200 rounded-full",children:s.jsx(rt,{className:"w-3 h-3"})})]}),u&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full",children:["Mesa: ",u==="balcao"?"Balco":(R=y.find(S=>S.id===u))==null?void 0:R.number,s.jsx("button",{onClick:()=>h(""),className:"ml-1 p-0.5 hover:bg-orange-200 rounded-full",children:s.jsx(rt,{className:"w-3 h-3"})})]}),f!=="all"&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-full",children:["Tempo: ",N(f),s.jsx("button",{onClick:()=>p("all"),className:"ml-1 p-0.5 hover:bg-red-200 rounded-full",children:s.jsx(rt,{className:"w-3 h-3"})})]})]})]})},wO=()=>{var Ee,ze;const{comandas:e,loading:t,refetch:n}=cl(),{tables:i}=xd(),[l,c]=v.useState(""),[u,h]=v.useState("all"),[f,p]=v.useState(""),[g,y]=v.useState(""),[b,w]=v.useState("all"),[_,N]=v.useState(!1),[T,R]=v.useState(null),[S,k]=v.useState(new Set),[E,j]=v.useState("list"),[M,z]=v.useState([]),[U,I]=v.useState("all"),[V,Q]=v.useState(""),[K,ie]=v.useState(!1),[pe,L]=v.useState(!1),[O,P]=v.useState(""),[$,Y]=v.useState(!1),[A,F]=v.useState(!1),{menuItems:B,loading:W}=d1(!0),{adicionarItemComanda:se,fecharComanda:fe}=r0(),{refreshBarOrders:ge,refreshKitchenOrders:oe}=ft();v.useEffect(()=>{if(T&&e.length>0){const ne=e.find(Re=>Re.id===T.id);ne&&(console.log(" Atualizando comanda selecionada com novos dados:",ne),R(ne))}},[e,T==null?void 0:T.id]);const me=()=>{N(!0)},Ne=ne=>{R(ne),j("details")},Be=()=>{j("list"),R(null),z([])},je=ne=>{console.log("Adicionando item ao carrinho:",ne);const Re=M.findIndex(Ve=>Ve.menu_item_id===ne.id);if(Re>=0){const Ve=[...M];Ve[Re].quantity+=1,z(Ve),console.log("Item j existia, quantidade atualizada:",Ve)}else{const Ve={menu_item_id:ne.id,name:ne.name,price:typeof ne.price=="string"?parseFloat(ne.price):ne.price,quantity:1,notes:""},Wt=[...M,Ve];z(Wt),console.log("Novo item adicionado ao carrinho:",Wt)}},De=(ne,Re)=>{Re<=0?z(M.filter(Ve=>Ve.menu_item_id!==ne)):z(M.map(Ve=>Ve.menu_item_id===ne?{...Ve,quantity:Re}:Ve))},St=()=>M.reduce((ne,Re)=>ne+Re.price*Re.quantity,0),ds=async()=>{if(console.log(" Boto clicado! Iniciando adio de itens  comanda"),console.log("Comanda selecionada:",T),console.log("Itens no carrinho:",M),!T){console.error(" Nenhuma comanda selecionada");return}if(M.length===0){console.error(" Carrinho vazio");return}ie(!0);try{console.log(" Adicionando",M.length,"itens  comanda",T.id);for(const Re of M)console.log(" Adicionando item:",Re),await se(T.id,Re.menu_item_id,Re.quantity,Re.notes||""),console.log(" Item adicionado com sucesso");console.log(" Limpando carrinho");const ne=M.length;z([]),console.log(" Atualizando dados"),await n(),console.log(" Dados atualizados, comanda selecionada ser atualizada automaticamente"),console.log(" Forando atualizao dos pedidos do bar e cozinha..."),await ge(),await oe(),console.log(" Pedidos do bar e cozinha atualizados"),P(` ${ne} ${ne===1?"item adicionado":"itens adicionados"} com sucesso!`),L(!0),setTimeout(()=>{L(!1)},3e3),console.log(" Processo concludo com sucesso!")}catch(ne){console.error(" Erro ao adicionar itens  comanda:",ne),P(" Erro ao adicionar itens  comanda"),L(!0),setTimeout(()=>{L(!1)},3e3)}finally{ie(!1)}},Ra=async(ne,Re)=>{if(T){F(!0);try{console.log(" Fechando comanda:",T.id,"Mtodo:",ne),await fe(T.id,ne,Re),console.log(" Comanda fechada com sucesso"),await n(),await ge(),await oe(),j("list"),R(null),z([]),Y(!1),P(" Comanda fechada e enviada para o caixa!"),L(!0),setTimeout(()=>{L(!1)},3e3)}catch(Ve){console.error(" Erro ao fechar comanda:",Ve),P(" Erro ao fechar comanda"),L(!0),setTimeout(()=>{L(!1)},3e3)}finally{F(!1)}}},la=ne=>{k(Re=>new Set([...Re,ne]))},Tt=v.useMemo(()=>e.filter(ne=>{var js,Gs,Ys,xn,Ni,Si;const Re=!l||((js=ne.customer_name)==null?void 0:js.toLowerCase().includes(l.toLowerCase()))||((Ys=(Gs=ne.table)==null?void 0:Gs.number)==null?void 0:Ys.toString().includes(l))||ne.id.toLowerCase().includes(l.toLowerCase()),Ve=u==="all"||ne.status===u,Wt=!f||((xn=ne.employee_name)==null?void 0:xn.toLowerCase().includes(f.toLowerCase())),Ht=!g||((Si=(Ni=ne.table)==null?void 0:Ni.number)==null?void 0:Si.toString().includes(g)),us=(()=>{if(b==="all")return!0;const Ti=new Date(ne.opened_at),Ci=(new Date().getTime()-Ti.getTime())/(1e3*60*60);switch(b){case"recent":if(Ci>=1)return!1;break;case"overdue":if(Ci<=2)return!1;break;case"critical":if(Ci<=4)return!1;break}return!0})();return Re&&Ve&&Wt&&Ht&&us}),[e,l,u,f,g,b]),er=Tt.filter(ne=>ne.status==="open"),ca=Tt.filter(ne=>ne.status==="pending_payment"),H=Tt.filter(ne=>{if(ne.status!=="open")return!1;const Re=new Date(ne.opened_at);return(new Date().getTime()-Re.getTime())/(1e3*60*60)>2}),ee=H.filter(ne=>!S.has(ne.id)),ce=ne=>new Date(ne).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),be=ne=>{switch(ne){case"open":return"Aberta";case"pending_payment":return"Aguardando Pagamento";case"closed":return"Fechada";default:return ne}},ye=[...new Set(B.map(ne=>ne.category))],Z=B.filter(ne=>{const Re=U==="all"||ne.category===U,Ve=ne.name.toLowerCase().includes(V.toLowerCase());return Re&&Ve&&ne.available});if(console.log("Estado atual do carrinho:",M),console.log("Carrinho tem itens?",M.length>0),console.log(" Debug boto Fechar Conta:",{selectedComanda:!!T,status:T==null?void 0:T.status,shouldShow:(T==null?void 0:T.status)==="open"}),E==="details"&&T)return s.jsxs("div",{className:"comanda-details-container h-full flex flex-col bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-white flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:Be,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Xf,{size:20}),s.jsx("span",{children:"Voltar para Comandas"})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Mesa ",((Ee=T.table)==null?void 0:Ee.number)||"N/A"," - ",T.customer_name||"Cliente"]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Aberta em ",ce(T.opened_at)]}),s.jsx("div",{className:"bg-green-100 px-4 py-2 rounded-lg border border-green-200",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium text-green-800",children:"Total da Comanda:"}),s.jsxs("span",{className:"text-xl font-bold text-green-900",children:["R$ ",((ze=T.total)==null?void 0:ze.toFixed(2))||"0,00"]})]})})]})]})]}),s.jsx("div",{className:"flex flex-col space-y-2",children:s.jsxs("button",{onClick:()=>Y(!0),className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center space-x-2",children:[s.jsx(wi,{size:20}),s.jsx("span",{children:"Fechar Conta"})]})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[s.jsxs("div",{className:"flex-1 flex flex-col p-6",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsx("input",{type:"text",placeholder:"Buscar itens...",value:V,onChange:ne=>Q(ne.target.value),className:"w-full pl-4 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),s.jsxs("select",{value:U,onChange:ne=>I(ne.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todas as Categorias"}),ye.map(ne=>s.jsx("option",{value:ne,children:ne},ne))]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:W?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Z.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhum item encontrado"})}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Z.map(ne=>s.jsxs("div",{onClick:()=>je(ne),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 group cursor-pointer hover:border-blue-300 hover:bg-blue-50",children:[s.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center group-hover:bg-blue-100 transition-colors",children:[ne.image_url?s.jsx("img",{src:ne.image_url,alt:ne.name,className:"max-w-full max-h-full object-contain rounded-lg",onError:Re=>{Re.currentTarget.style.display="none",Re.currentTarget.nextElementSibling.style.display="block"}}):null,s.jsx("div",{className:"text-gray-400 text-2xl group-hover:text-blue-500 transition-colors",style:{display:ne.image_url?"none":"block"},children:""})]}),s.jsx("h3",{className:"font-medium text-gray-900 mb-1 line-clamp-2 group-hover:text-blue-900",children:ne.name}),s.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2 group-hover:text-blue-700",children:ne.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-lg font-bold text-green-600 group-hover:text-green-700",children:["R$ ",(typeof ne.price=="string"?parseFloat(ne.price):ne.price).toFixed(2)]}),s.jsx("div",{className:"bg-blue-600 text-white p-2 rounded-lg group-hover:bg-blue-700 transition-colors",children:s.jsx(vs,{size:16})})]})]},ne.id))})})]}),s.jsxs("div",{className:"w-96 bg-gray-50 border-l border-gray-200 flex flex-col",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 flex-shrink-0",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pedidos da Comanda"})})}),(T==null?void 0:T.items)&&T.items.length>0&&s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("div",{className:"p-4 bg-blue-50",children:[s.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:["Itens j pedidos (",T.items.length,")",s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Debug: ",new Date().toLocaleTimeString(),")"]})]}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:T.items.map(ne=>{var Re,Ve;return console.log(" Debug item da comanda:",ne),s.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h5",{className:"font-medium text-gray-900 text-sm",children:((Re=ne.menu_item)==null?void 0:Re.name)||((Ve=ne.menu_items)==null?void 0:Ve.name)||`Item ${ne.menu_item_id}`}),s.jsxs("p",{className:"text-xs text-gray-600",children:["R$ ",ne.price.toFixed(2)," cada"]})]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${ne.status==="pending"?"bg-yellow-100 text-yellow-800":ne.status==="preparing"?"bg-blue-100 text-blue-800":ne.status==="ready"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:ne.status==="pending"?"Pendente":ne.status==="preparing"?"Preparando":ne.status==="ready"?"Pronto":ne.status==="delivered"?"Entregue":ne.status})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["Qtd: ",ne.quantity]}),s.jsxs("span",{className:"font-medium text-green-600 text-sm",children:["R$ ",(ne.price*ne.quantity).toFixed(2)]})]}),ne.notes&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Obs: ",ne.notes]})]},ne.id)})})]})}),s.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Novos Itens (",M.length,")"]}),M.length>0&&s.jsx("button",{onClick:()=>z([]),className:"text-xs text-red-600 hover:text-red-800",children:"Limpar"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:M.length===0?s.jsxs("div",{className:"text-center text-gray-500 py-4 h-full flex flex-col items-center justify-center",children:[s.jsx(Wo,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"Nenhum item novo selecionado"})]}):s.jsxs("div",{className:"space-y-4",children:[M.map(ne=>s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:ne.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["R$ ",ne.price.toFixed(2)," cada"]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>De(ne.menu_item_id,ne.quantity-1),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:s.jsx(mi,{size:14})}),s.jsx("span",{className:"w-8 text-center font-medium",children:ne.quantity}),s.jsx("button",{onClick:()=>De(ne.menu_item_id,ne.quantity+1),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:s.jsx(vs,{size:14})})]}),s.jsxs("span",{className:"font-bold text-green-600",children:["R$ ",(ne.price*ne.quantity).toFixed(2)]})]})]},ne.menu_item_id)),s.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200 mb-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-green-800",children:"Total dos Novos Itens:"}),s.jsxs("span",{className:"text-3xl font-bold text-green-900",children:["R$ ",St().toFixed(2)]})]})}),s.jsx("button",{onClick:ds,disabled:K,className:`w-full py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 ${K?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,children:K?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),s.jsx("span",{children:"Adicionando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(vs,{size:20}),s.jsx("span",{children:"Adicionar  Comanda"})]})}),pe&&s.jsx("div",{className:`mt-3 p-3 rounded-lg text-sm font-medium text-center transition-all duration-300 ${O.includes("")?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:O})]})]})})]})]}),s.jsx(_O,{isOpen:$,onClose:()=>Y(!1),comanda:T,onConfirm:Ra,isLoading:A})]});return s.jsxs("div",{className:"comandas-container",children:[s.jsx(vO,{comandas:ee,onComandaClick:Ne,onDismissAlert:la}),s.jsx(jO,{searchTerm:l,onSearchChange:c,statusFilter:u,onStatusFilterChange:h,employeeFilter:f,onEmployeeFilterChange:p,tableFilter:g,onTableFilterChange:y,timeFilter:b,onTimeFilterChange:w,employees:[],tables:i||[],onClearFilters:()=>{c(""),h("all"),p(""),y(""),w("all")}}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:er.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Abertas"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:ca.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Aguardando Pagamento"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:H.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Com Atraso"})]})]}),s.jsx("button",{onClick:me,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"+ Nova Comanda"})]}),s.jsx("div",{className:"bg-white rounded-lg border",children:t?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mesa/Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abertura"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Tt.map(ne=>{var Wt,Ht;const Re=xe(ne.opened_at),Ve=new Date().getTime()-new Date(ne.opened_at).getTime()>2*60*60*1e3;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[((Wt=ne.table)==null?void 0:Wt.number)||"Balco",ne.customer_name&&s.jsx("div",{className:"text-xs text-gray-500",children:ne.customer_name})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ne.status==="open"?"bg-green-100 text-green-800":ne.status==="pending_payment"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:be(ne.status)}),Ve&&ne.status==="open"&&s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:" Atrasada"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.employee_name||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{children:[ce(ne.opened_at),s.jsxs("div",{className:`text-xs ${Ve?"text-red-600 font-medium":"text-gray-400"}`,children:[Re," decorrido"]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:["R$ ",((Ht=ne.total)==null?void 0:Ht.toFixed(2))||"0,00"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("button",{onClick:()=>Ne(ne),className:"inline-flex items-center px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:[s.jsx(_i,{className:"w-3 h-3 mr-1"}),"Ver Detalhes"]})})]},ne.id)})})]})})}),s.jsx(m1,{isOpen:_,onClose:()=>N(!1),onComandaCreated:()=>{n()}}),console.log(" Debug modal:",{showCloseModal:$,selectedComanda:!!T,viewMode:E}),pe&&E==="list"&&s.jsx("div",{className:"fixed top-4 right-4 z-50",children:s.jsx("div",{className:`p-4 rounded-lg shadow-lg ${O.includes("")?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:O})})]});function xe(ne){const Re=new Date(ne),Wt=new Date().getTime()-Re.getTime(),Ht=Math.floor(Wt/(1e3*60*60)),us=Math.floor(Wt%(1e3*60*60)/(1e3*60));return Ht>0?`${Ht}h ${us}min`:`${us}min`}},_O=({isOpen:e,onClose:t,comanda:n,onConfirm:i,isLoading:l})=>{var g,y;const[c,u]=v.useState("dinheiro"),[h,f]=v.useState("");if(console.log(" CloseComandaModal renderizado:",{isOpen:e,comanda:!!n,isLoading:l}),!e)return console.log(" Modal no est aberto, retornando null"),null;console.log(" Modal est aberto, renderizando interface");const p=b=>{b.preventDefault(),i(c,h)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Fechar Conta"}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:["Mesa ",((g=n.table)==null?void 0:g.number)||"N/A"," - ",n.customer_name||"Cliente"]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Total da conta:"}),s.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["R$ ",((y=n.total)==null?void 0:y.toFixed(2))||"0,00"]})]})]}),s.jsxs("form",{onSubmit:p,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pagamento"}),s.jsxs("select",{value:c,onChange:b=>u(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"dinheiro",children:"Dinheiro"}),s.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),s.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),s.jsx("option",{value:"pix",children:"PIX"}),s.jsx("option",{value:"vale_refeicao",children:"Vale Refeio"}),s.jsx("option",{value:"outros",children:"Outros"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes (opcional)"}),s.jsx("textarea",{value:h,onChange:b=>f(b.target.value),placeholder:"Observaes sobre o pagamento...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:t,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:l,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Fechando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(wi,{size:16}),s.jsx("span",{children:"Fechar Conta"})]})})]})]})]})})})},NO=()=>{const{user:e}=Kt(),[t,n]=v.useState([]),[i,l]=v.useState({orderQueue:[],alerts:[],loading:!0,error:null}),c=v.useCallback(L=>{l(O=>({...O,...L}))},[]),u=v.useCallback((L,O)=>{console.error(`Erro em ${O}:`,L),c({error:`Erro em ${O}: ${L.message||"Erro desconhecido"}`,loading:!1})},[c]),h=v.useCallback(async()=>{if(e)try{c({loading:!0,error:null});const{data:L,error:O}=await le.rpc("get_order_queue_items");if(O)throw O;const P=(L||[]).map(Y=>{const A=w([Y]);return{...Y,priority:{level:A.priorityLevel,complexity:_(A.finalEstimate),estimatedTime:A.finalEstimate,isManuallyPrioritized:Y.is_priority||!1,createdAt:new Date(Y.added_at),timerStatus:f(new Date(Y.added_at),A.finalEstimate),alertsEnabled:!0}}}),$=E(P);c({orderQueue:$,loading:!1})}catch(L){u(L,"carregamento da fila de pedidos")}},[e,c,u]),f=(L,O)=>{const $=(new Date().getTime()-L.getTime())/(1e3*60),Y=O*.8,A=O*1.2;return $>=A?"overdue":$>=Y?"warning":"normal"},p={bebidas:{baseTime:2,complexity:"simple"},drinks:{baseTime:3,complexity:"simple"},petiscos:{baseTime:8,complexity:"medium"},pratos:{baseTime:15,complexity:"complex"},sobremesas:{baseTime:5,complexity:"simple"},cafes:{baseTime:3,complexity:"simple"}},g={simple:1,medium:1.3,complex:1.8},y=v.useCallback(L=>{let O=0,P="simple",$=0;L.forEach(B=>{var W,se;if(B.menu_items){const fe=B.menu_items.category.toLowerCase(),ge=B.menu_items.preparation_time||0,oe=ge>0?ge:((W=p[fe])==null?void 0:W.baseTime)||8;O+=oe*B.quantity;const me=((se=p[fe])==null?void 0:se.complexity)||"medium";b(me)>b(P)&&(P=me),fe==="pratos"&&($+=2),fe==="petiscos"&&($+=1)}});const Y=g[P],A=Math.ceil((O+$)*Y);let F="low";return A>=20?F="high":A>=12?F="medium":F="low",{baseTime:O,complexityMultiplier:Y,categoryBonus:$,finalEstimate:A,priorityLevel:F}},[]),b=L=>{switch(L){case"simple":return 1;case"medium":return 2;case"complex":return 3;default:return 1}},w=v.useCallback((L,O=!1,P)=>{const $=y(L);return{level:O&&P?P:$.priorityLevel,complexity:_($.finalEstimate),estimatedTime:$.finalEstimate,isManuallyPrioritized:O,createdAt:new Date,timerStatus:"normal",alertsEnabled:!0}},[y]),_=L=>L>=15?"complex":L>=8?"medium":"simple",N=v.useCallback((L,O)=>{const P={id:L,startTime:new Date,estimatedTime:O,status:"normal",alertsSent:[]};n($=>[...$.filter(Y=>Y.id!==L),P])},[]),T=v.useCallback(L=>{n(O=>O.filter(P=>P.id!==L))},[]),R=v.useCallback((L,O,P)=>{n(Y=>Y.map(A=>A.id===L?{...A,status:O==="urgent"?"warning":A.status}:A));const $={id:`priority-${L}-${Date.now()}`,orderId:L,type:"warning",message:`Pedido marcado como ${S(O)}${P?`: ${P}`:""}`,timestamp:new Date,acknowledged:!1};setAlerts(Y=>[$,...Y])},[]),S=L=>{switch(L){case"low":return"Baixa Prioridade";case"medium":return"Prioridade Mdia";case"high":return"Alta Prioridade";case"urgent":return"Urgente";default:return L}},k=L=>{switch(L){case"low":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"urgent":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},E=v.useCallback(L=>{const O={urgent:4,high:3,medium:2,low:1};return L.sort((P,$)=>{var fe,ge,oe,me,Ne,Be,je,De;if((fe=P.priority)!=null&&fe.isManuallyPrioritized&&!((ge=$.priority)!=null&&ge.isManuallyPrioritized))return-1;if(!((oe=P.priority)!=null&&oe.isManuallyPrioritized)&&((me=$.priority)!=null&&me.isManuallyPrioritized))return 1;const Y=((Ne=P.priority)==null?void 0:Ne.level)||"low",A=((Be=$.priority)==null?void 0:Be.level)||"low",F=O[Y],B=O[A];if(F!==B)return B-F;const W=new Date(((je=P.priority)==null?void 0:je.createdAt)||P.added_at||0).getTime(),se=new Date(((De=$.priority)==null?void 0:De.createdAt)||$.added_at||0).getTime();return W-se})},[]),j=v.useCallback(async(L,O)=>{try{const{error:P}=await le.from("comanda_items").update({is_priority:O,updated_at:new Date().toISOString()}).eq("id",L);if(P)throw P;c({orderQueue:i.orderQueue.map($=>$.id===L&&$.priority?{...$,priority:{...$.priority,isManuallyPrioritized:O,level:O?"urgent":$.priority.level}}:$)}),await h()}catch(P){throw u(P,"marcao de prioridade"),P}},[i.orderQueue,c,u,h]),M=v.useCallback(async(L,O)=>{try{const P={status:O,updated_at:new Date().toISOString()};O==="preparing"?P.started_at=new Date().toISOString():O==="ready"?P.prepared_at=new Date().toISOString():O==="delivered"&&(P.delivered_at=new Date().toISOString());const{error:$}=await le.from("comanda_items").update(P).eq("id",L);if($)throw $;await h()}catch(P){throw u(P,"atualizao de status"),P}},[u,h]);v.useCallback((L,O,P)=>{const $={id:`alert-${L}-${Date.now()}`,orderId:L,type:O,message:P,timestamp:new Date,acknowledged:!1};c({alerts:[$,...i.alerts]})},[i.alerts,c]);const z=v.useCallback(L=>{c({alerts:i.alerts.map(O=>O.id===L?{...O,acknowledged:!0}:O)})},[i.alerts,c]),U=v.useCallback(()=>{c({alerts:[]})},[c]),I=v.useCallback(L=>{if(L.priority)return L.priority;const O=w([L]);return{level:O.priorityLevel,complexity:_(O.finalEstimate),estimatedTime:O.finalEstimate,isManuallyPrioritized:!1,createdAt:new Date(L.added_at),timerStatus:f(new Date(L.added_at),O.finalEstimate),alertsEnabled:!0}},[]),V=v.useCallback(L=>{const O=I(L);return f(O.createdAt,O.estimatedTime)},[I]),Q=v.useCallback(L=>{const O=I(L),P=(new Date().getTime()-O.createdAt.getTime())/(1e3*60);return Math.max(0,O.estimatedTime-P)},[I]),K=v.useCallback(L=>{const O=Q(L);if(O<1)return"< 1min";if(O<60)return`${Math.ceil(O)}min`;const P=Math.floor(O/60),$=Math.ceil(O%60);return $===0?`${P}h`:`${P}h ${$}min`},[Q]),ie=v.useCallback(()=>{const L={urgent:0,high:0,medium:0,low:0,overdue:0,warning:0};return i.orderQueue.forEach(O=>{const P=I(O);L[P.level]++,P.timerStatus==="overdue"?L.overdue++:P.timerStatus==="warning"&&L.warning++}),L},[i.orderQueue,I]),pe=v.useCallback(async()=>{await h()},[h]);return v.useEffect(()=>{if(!e)return;const L=le.channel("order-priority-changes").on("postgres_changes",{event:"*",schema:"public",table:"comanda_items"},O=>{console.log("Mudana em itens de comanda:",O),h()}).subscribe();return()=>{le.removeChannel(L)}},[e,h]),v.useEffect(()=>{e&&h()},[e,h]),v.useEffect(()=>{const L=setInterval(()=>{if(i.orderQueue.length>0){const O=i.orderQueue.map(P=>{if(P.priority){const $=f(P.priority.createdAt,P.priority.estimatedTime);return{...P,priority:{...P.priority,timerStatus:$}}}return P});c({orderQueue:O})}},6e4);return()=>clearInterval(L)},[i.orderQueue,c]),{...i,markItemAsPriority:j,updateItemStatus:M,dismissAlert:z,clearAllAlerts:U,getItemPriority:I,getTimerStatus:V,getRemainingTime:Q,formatRemainingTime:K,getPriorityStats:ie,refreshQueue:pe,getPriorityLabel:S,getPriorityColor:k,sortOrdersByPriority:E,calculateOrderPriority:w,calculateAutoPriority:y,startOrderTimer:N,stopOrderTimer:T,markOrderAsPriority:R,orderTimers:t,allAlerts:i.alerts}},SO=({onUpdateItemStatus:e})=>{const{orderQueue:t,loading:n,markItemAsPriority:i,updateItemStatus:l,getItemPriority:c,getTimerStatus:u,formatRemainingTime:h,alerts:f,getPriorityLabel:p,getPriorityColor:g}=NO(),[y,b]=v.useState(!0),[w,_]=v.useState(null),N=t,R=(()=>{const I=new Map;return N.forEach(V=>{var K,ie;const Q=((ie=(K=V.comandas)==null?void 0:K.bar_tables)==null?void 0:ie.number)||"Balco";I.has(Q)||I.set(Q,[]),I.get(Q).push(V)}),I})(),S=I=>(R.get(I)||[]).length>1,k=I=>I.id.slice(-4).toUpperCase(),E=async(I,V)=>{try{e?await e(I,V):await l(I,V)}catch(Q){console.error("Erro ao atualizar status:",Q)}},j=async(I,V)=>{try{await i(I,V),_(null)}catch(Q){console.error("Erro ao marcar prioridade:",Q)}},M=I=>{switch(I){case"pending":return s.jsx(Lt,{className:"h-4 w-4"});case"preparing":return s.jsx(Kb,{className:"h-4 w-4"});case"ready":return s.jsx(Kc,{className:"h-4 w-4"});default:return s.jsx(Lt,{className:"h-4 w-4"})}},z=I=>{switch(I){case"pending":return"text-yellow-600 bg-yellow-100";case"preparing":return"text-blue-600 bg-blue-100";case"ready":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},U=I=>{switch(I){case"pending":return"Pendente";case"preparing":return"Preparando";case"ready":return"Pronto";default:return I}};return n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(Zn,{children:y&&f.length>0&&s.jsxs(_e.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(iA,{className:"h-5 w-5 text-red-600"}),s.jsxs("h3",{className:"text-lg font-semibold text-red-800",children:["Alertas (",f.length,")"]})]}),s.jsx("button",{onClick:()=>b(!1),className:"text-red-600 hover:text-red-800",title:"Fechar alertas","aria-label":"Fechar alertas",children:s.jsx(rt,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"space-y-2",children:f.slice(0,3).map(I=>s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-red-800",children:I.message}),s.jsx("p",{className:"text-xs text-red-600",children:Ft(I.timestamp,"HH:mm",{locale:ts})})]}),s.jsx("button",{onClick:()=>acknowledgeAlert(I.id),className:"text-red-600 hover:text-red-800 ml-2",title:"Reconhecer alerta","aria-label":"Reconhecer alerta",children:s.jsx(Kc,{className:"h-4 w-4"})})]},I.id))})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Fila de Pedidos"}),s.jsxs("p",{className:"text-gray-600",children:[N.length," itens na fila, ordenados por prioridade"]}),Array.from(R.entries()).filter(([I,V])=>V.length>1).length>0&&s.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium mt-1 inline-block",children:[Array.from(R.entries()).filter(([I,V])=>V.length>1).length," mesa(s) com mltiplos pedidos"]})]}),f.length>0&&!y&&s.jsxs("button",{onClick:()=>b(!0),className:"flex items-center space-x-2 bg-red-100 text-red-800 px-3 py-2 rounded-lg hover:bg-red-200 transition-colors",title:"Mostrar alertas","aria-label":"Mostrar alertas",children:[s.jsx(Kf,{className:"h-4 w-4"}),s.jsxs("span",{children:[f.length," alertas"]})]})]}),Array.from(R.entries()).filter(([I,V])=>V.length>1).length>0&&s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:" Mesas com Mltiplos Pedidos:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(R.entries()).filter(([I,V])=>V.length>1).map(([I,V])=>s.jsxs("span",{className:"bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:["Mesa ",I,": ",V.length," itens"]},I))})]}),s.jsx("div",{className:"space-y-4",children:N.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Lt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Nenhum pedido na fila"})]}):N.map((I,V)=>{var ie,pe,L,O,P,$;const Q=u(I),K=c(I);return s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:V*.1},className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${K!=null&&K.isManuallyPrioritized?"border-red-500":(K==null?void 0:K.level)==="high"?"border-orange-500":(K==null?void 0:K.level)==="medium"?"border-yellow-500":"border-green-500"} ${S(((pe=(ie=I.comandas)==null?void 0:ie.bar_tables)==null?void 0:pe.number)||"Balco")?"ring-2 ring-orange-300 ring-offset-2":""}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm font-medium",children:["#",V+1]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((L=I.menu_items)==null?void 0:L.name)||"Item sem nome"}),s.jsxs("span",{className:"text-sm text-gray-500",children:["x",I.quantity]}),s.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",k(I)]})]}),(K==null?void 0:K.isManuallyPrioritized)&&s.jsx(Xm,{className:"h-5 w-5 text-red-500"})]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[((P=(O=I.comandas)==null?void 0:O.bar_tables)==null?void 0:P.number)&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{children:["Mesa ",I.comandas.bar_tables.number]}),s.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",k(I)]}),S(I.comandas.bar_tables.number)&&s.jsxs("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:[(R.get(I.comandas.bar_tables.number)||[]).length," itens"]})]}),(($=I.comandas)==null?void 0:$.customer_name)&&s.jsxs("span",{children:["Cliente: ",I.comandas.customer_name]}),s.jsxs("span",{children:["Pedido s ",Ft(new Date(I.added_at||""),"HH:mm",{locale:ts})]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${g((K==null?void 0:K.level)||"low")}`,children:p((K==null?void 0:K.level)||"low")}),s.jsxs("span",{className:"text-sm text-gray-600",children:["Tempo estimado: ",(K==null?void 0:K.estimatedTime)||0,"min"]}),s.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded text-sm ${Q==="overdue"?"bg-red-100 text-red-800":Q==="warning"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:[s.jsx(Kb,{className:"h-3 w-3"}),s.jsx("span",{children:h(I)}),Q==="overdue"&&s.jsx(Fs,{className:"h-3 w-3"})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("span",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${z(I.status||"pending")}`,children:[M(I.status||"pending"),s.jsx("span",{children:U(I.status||"pending")})]})})]}),s.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[s.jsxs("button",{onClick:()=>_(I.id),className:"flex items-center space-x-1 px-3 py-1 bg-orange-100 text-orange-800 rounded hover:bg-orange-200 transition-colors",title:"Marcar como prioritrio","aria-label":"Marcar como prioritrio",children:[s.jsx(sA,{className:"h-3 w-3"}),s.jsx("span",{className:"text-xs",children:"Priorizar"})]}),I.status==="pending"&&s.jsx("button",{onClick:()=>E(I.id,"preparing"),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:"Iniciar"}),I.status==="preparing"&&s.jsx("button",{onClick:()=>E(I.id,"ready"),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"Pronto"})]})]})},I.id)})}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Definir Prioridade"}),s.jsx("div",{className:"space-y-3",children:["urgent","high","medium","low"].map(I=>s.jsxs("button",{onClick:()=>j(w||"",!0),className:`w-full p-3 rounded border-2 text-left transition-colors ${g(I)} hover:opacity-80`,children:[s.jsx("div",{className:"font-medium",children:p(I)}),s.jsxs("div",{className:"text-sm opacity-75",children:[I==="urgent"&&"Para pedidos que precisam ser feitos imediatamente",I==="high"&&"Para pedidos importantes com prazo apertado",I==="medium"&&"Para pedidos com prioridade normal",I==="low"&&"Para pedidos que podem aguardar"]})]},I))}),s.jsx("div",{className:"mt-4 flex space-x-3",children:s.jsx("button",{onClick:()=>_(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded hover:bg-gray-400 transition-colors",children:"Cancelar"})})]})})]})},TO=({orders:e,menuItems:t})=>{const{updateOrderStatus:n}=ft(),[i,l]=v.useState(new Set),u=(()=>{const N=new Map;return e.forEach(T=>{const R=T.tableNumber||"Balco";N.has(R)||N.set(R,[]),N.get(R).push(T)}),N})(),h=N=>N.items.reduce((T,R)=>{const S=t.find(E=>E.id===R.menuItemId)||R.menuItem,k=(S==null?void 0:S.preparation_time)||(S==null?void 0:S.preparationTime)||0;return T+k},0),f=N=>{const T=(new Date().getTime()-N.createdAt.getTime())/6e4;return T>20?"high":T>10?"medium":"low"},p=N=>{switch(N){case"high":return"border-red-400 bg-red-50";case"medium":return"border-yellow-400 bg-yellow-50";case"low":return"border-green-400 bg-green-50";default:return"border-gray-200 bg-white"}},g=N=>N.id.slice(-4).toUpperCase(),y=N=>N.id.startsWith("balcao-"),b=N=>N.id.startsWith("comanda-"),w=async(N,T)=>{l(R=>new Set([...R,N]));try{await n(N,T),console.log(` Status do pedido ${N} atualizado para ${T}`)}catch(R){console.error("Erro ao atualizar status:",R)}finally{setTimeout(()=>{l(R=>{const S=new Set(R);return S.delete(N),S})},1e3)}},_=N=>(u.get(N)||[]).length>1;return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Pedidos do Bar"}),s.jsx("div",{className:"text-sm text-gray-600",children:Array.from(u.entries()).filter(([N,T])=>T.length>1).length>0&&s.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:[Array.from(u.entries()).filter(([N,T])=>T.length>1).length," mesa(s) com mltiplos pedidos"]})})]}),Array.from(u.entries()).filter(([N,T])=>T.length>1).length>0&&s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:" Mesas com Mltiplos Pedidos:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(u.entries()).filter(([N,T])=>T.length>1).map(([N,T])=>s.jsxs("span",{className:"bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:["Mesa ",N,": ",T.length," pedidos"]},N))})]}),e.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"Nenhum pedido pendente no bar"})}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(N=>{const T=f(N),R=h(N),S=N.items,k=_(N.tableNumber||"Balco");return s.jsxs(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`border-2 rounded-lg p-4 ${p(T)} ${k?"ring-2 ring-orange-300 ring-offset-2":""} ${y(N)?"border-green-400 bg-green-50 shadow-lg":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(il,{size:16,className:"text-gray-500"}),s.jsxs("span",{className:"font-bold text-lg",children:["Mesa ",N.tableNumber||"N/A"]}),s.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",g(N)]}),y(N)&&s.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:" PAGO"}),b(N)&&s.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"AGUARDA PAGTO"}),_(N.tableNumber||"Balco")&&s.jsxs("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:[(u.get(N.tableNumber||"Balco")||[]).length," pedidos"]})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[s.jsx(Lt,{size:14}),s.jsx("span",{children:Ft(N.createdAt,"HH:mm",{locale:ts})})]})]}),s.jsx("div",{className:"space-y-2 mb-4",children:S.map(E=>{const j=t.find(M=>M.id===E.menuItemId)||E.menuItem;return s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"font-medium",children:[E.quantity,"x ",(j==null?void 0:j.name)||"Item no encontrado"]}),s.jsxs("span",{className:"text-sm text-gray-600",children:[(j==null?void 0:j.preparation_time)||(j==null?void 0:j.preparationTime)||0,"min"]})]},E.id)})}),N.notes&&s.jsx("div",{className:"mb-4 p-2 bg-yellow-100 rounded border",children:s.jsx("p",{className:"text-sm text-yellow-800",children:N.notes})}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["Tempo estimado: ",R,"min"]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${T==="high"?"bg-red-200 text-red-800":T==="medium"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:T==="high"?"Urgente":T==="medium"?"Mdio":"Normal"})]}),s.jsxs("div",{className:"space-y-2",children:[N.status==="pending"&&s.jsx("button",{onClick:()=>w(N.id,"preparing"),disabled:i.has(N.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(N.id)?"bg-blue-300 text-blue-700 cursor-not-allowed animate-pulse scale-95":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(N.id)?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-700 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Iniciando..."})]}):"Iniciar Preparo"}),N.status==="preparing"&&s.jsx("button",{onClick:()=>w(N.id,"ready"),disabled:i.has(N.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(N.id)?"bg-green-300 text-green-700 cursor-not-allowed animate-pulse scale-95":"bg-green-600 text-white hover:bg-green-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(N.id)?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Finalizando..."})]}):"Marcar como Pronto"}),N.status==="ready"&&s.jsx("div",{className:"w-full py-2 rounded-lg font-medium bg-green-100 text-green-800 border-2 border-green-300 text-center animate-pulse",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:""})}),s.jsx("span",{children:"Pronto para Entrega"})]})})]})]},N.id)})})]})},CO=()=>null,EO=()=>{const{user:e}=Kt(),{updateItemStatus:t}=cl(),{barOrders:n,menuItems:i}=ft(),[l,c]=v.useState("balcao"),[u,h]=v.useState(!1),f=y=>{c(y)},p=async(y,b)=>{try{await t(y,b)}catch(w){throw console.error("Erro ao atualizar status do item:",w),w}},g=()=>{switch(l){case"balcao":return u?s.jsx(pO,{}):s.jsx(gv,{});case"mesas":return s.jsx(bO,{});case"comandas":return s.jsx(wO,{});case"fila":return s.jsx(SO,{onUpdateItemStatus:p});case"pedidos":return s.jsx(TO,{orders:n,menuItems:i});default:return s.jsx(gv,{})}};return s.jsxs("div",{className:"bar-attendance-container min-h-screen bg-gray-50 flex flex-col",children:[s.jsx(I5,{mode:l,onModeChange:f,user:e}),l==="balcao"&&s.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-2",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("button",{onClick:()=>h(!1),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-600 text-white"}`,children:" Criar Pedido"}),s.jsx("button",{onClick:()=>h(!0),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Gerenciar Pedidos"})]})}),s.jsx("main",{className:"bar-content flex-1 p-4 md:p-6 overflow-auto",children:g()}),s.jsx(CO,{})]})},i0=()=>{const{user:e}=Kt(),{fecharComanda:t,recarregarDados:n}=r0(),{refreshKitchenOrders:i,refreshBarOrders:l}=ft(),[c,u]=v.useState({currentSession:null,pendingComandas:[],todaysTransactions:[],todaysSessions:[],todaysSummary:{session_date:new Date().toISOString().split("T")[0],total_sessions:0,total_sales:0,total_transactions:0,total_cash_withdrawals:0,total_treasury_transfers:0,cash_balance:0,by_payment_method:[],by_employee:[],discrepancies:[],avg_ticket:0,peak_hours:[]},loading:!0,error:null}),h=v.useCallback(L=>{u(O=>({...O,...L}))},[]),f=v.useCallback((L,O)=>{console.error(`Erro em ${O}:`,L),h({error:`Erro em ${O}: ${L.message||"Erro desconhecido"}`,loading:!1})},[h]),p=v.useCallback(async()=>{if(!e){console.log("useCashManagement: Usurio no encontrado, pulando carregamento");return}try{console.log("useCashManagement: Iniciando carregamento para usurio:",e),h({loading:!0,error:null});const L=new Date().toISOString().split("T")[0];console.log("useCashManagement: Data atual:",L),console.log("useCashManagement: Buscando sesso para usurio ID:",e.id);const{data:O,error:P}=await le.from("cash_sessions").select("*").eq("employee_id",e.id).eq("status","open").maybeSingle();if(console.log("useCashManagement: Resultado da busca de sesso:",{currentSessionData:O,sessionError:P}),P&&P.code!=="PGRST116")throw console.error("Erro ao carregar sesso:",P),P;const{data:$,error:Y}=await le.from("comandas").select("*").eq("status","pending_payment").order("opened_at",{ascending:!1});if(Y)throw Y;const{data:A,error:F}=await le.from("cash_transactions").select("*").gte("processed_at",`${L}T00:00:00.000Z`).lt("processed_at",`${L}T23:59:59.999Z`).order("processed_at",{ascending:!1});if(F)throw F;const{data:B,error:W}=await le.from("cash_sessions").select("*").eq("session_date",L).order("opened_at",{ascending:!1});if(W)throw W;console.log("Dados da sesso atual:",O),console.log("Usurio atual:",e);const se=O?{...O,employee:{id:e.id,name:e.name||e.email||"Usurio",role:e.role||"employee"},supervisor:void 0}:null;console.log("Sesso processada:",se);const fe=($==null?void 0:$.map(Ne=>({...Ne,items:[],table:void 0,customer:void 0})))||[],ge=(A==null?void 0:A.map(Ne=>({...Ne,comanda:void 0,processed_by_employee:{id:e.id,name:e.email||"Usurio"},session:void 0})))||[],oe=(B==null?void 0:B.map(Ne=>({...Ne,employee:{id:e.id,name:e.email||"Usurio",role:"employee"}})))||[],me=await E(new Date);h({currentSession:se,pendingComandas:fe,todaysTransactions:ge,todaysSessions:oe,todaysSummary:me,loading:!1})}catch(L){f(L,"carregamento inicial")}},[e,h,f]),g=v.useCallback(async L=>{try{const O=L||(e==null?void 0:e.id);if(!O)return 0;const{data:P,error:$}=await le.from("cash_sessions").select("closing_amount, session_date").eq("employee_id",O).eq("status","closed").order("session_date",{ascending:!1}).order("closed_at",{ascending:!1}).limit(1).maybeSingle();return $&&$.code!=="PGRST116"?(console.error("Erro ao buscar ltima sesso fechada:",$),0):(P==null?void 0:P.closing_amount)||0}catch(O){return console.error("Erro ao obter saldo da ltima sesso:",O),0}},[e]),y=v.useCallback(async L=>{try{const{data:O,error:P}=await le.from("cash_sessions").select(`
          *,
          profiles!cash_sessions_employee_id_fkey(id, name, role)
        `).eq("session_date",L).order("opened_at",{ascending:!0});if(P)throw P;const{data:$,error:Y}=await le.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `).gte("processed_at",`${L}T00:00:00.000Z`).lt("processed_at",`${L}T23:59:59.999Z`).order("processed_at",{ascending:!0});if(Y)throw Y;const A=(O==null?void 0:O.map(je=>({...je,employee:je.profiles||{id:je.employee_id,name:"Usurio",role:"employee"}})))||[],F=($==null?void 0:$.map(je=>({...je,comanda:je.comandas||void 0,processed_by_employee:je.profiles||{id:je.processed_by,name:"Usurio"},session:je.cash_sessions||void 0})))||[],B=A.reduce((je,De)=>je+(De.opening_amount||0),0),W=A.reduce((je,De)=>je+(De.closing_amount||0),0),se=A.reduce((je,De)=>je+(De.cash_discrepancy||0),0),fe=F.filter(je=>je.transaction_type==="sale"),ge=fe.reduce((je,De)=>je+De.amount,0),oe=fe.filter(je=>je.payment_method==="dinheiro").reduce((je,De)=>je+De.amount,0),me=fe.filter(je=>["cartao_debito","cartao_credito"].includes(je.payment_method)).reduce((je,De)=>je+De.amount,0),Ne=fe.filter(je=>je.payment_method==="pix").reduce((je,De)=>je+De.amount,0),Be=F.filter(je=>je.transaction_type==="adjustment").reduce((je,De)=>je+De.amount,0);return{sessions:A,transactions:F,summary:{opening_total:B,closing_total:W,sales_total:ge,cash_sales:oe,card_sales:me,pix_sales:Ne,adjustments:Be,discrepancy_total:se,transaction_count:F.length}}}catch(O){return console.error("Erro ao obter movimento dirio:",O),{sessions:[],transactions:[],summary:{opening_total:0,closing_total:0,sales_total:0,cash_sales:0,card_sales:0,pix_sales:0,adjustments:0,discrepancy_total:0,transaction_count:0}}}},[]),b=v.useCallback(async L=>{if(!e)throw new Error("Usurio no autenticado");try{console.log("Iniciando abertura de caixa para usurio:",e.id),h({loading:!0,error:null});const O={employee_id:e.id,opening_amount:L.opening_amount,opening_notes:L.opening_notes,supervisor_approval_id:L.supervisor_approval_id,status:"open"};console.log("Dados da sesso:",O);const{data:P,error:$}=await le.from("cash_sessions").insert(O).select("*").single();if($)throw console.error("Erro ao inserir sesso:",$),$;console.log("Sesso criada com sucesso:",P),await p()}catch(O){throw f(O,"abertura de caixa"),O}},[e,h,f,p]),w=v.useCallback(async L=>{if(!c.currentSession)throw new Error("Nenhuma sesso aberta");try{h({loading:!0,error:null});const O=L.closing_amount-c.currentSession.expected_amount,{error:P}=await le.from("cash_sessions").update({status:"closed",closed_at:new Date().toISOString(),closing_amount:L.closing_amount,cash_discrepancy:O,closing_notes:L.closing_notes}).eq("id",c.currentSession.id);if(P)throw P;const $=L.reconciliation.map(A=>({cash_session_id:c.currentSession.id,payment_method:A.payment_method,expected_amount:A.expected_amount,actual_amount:A.actual_amount,transaction_count:A.transaction_count,reconciled_by:e.id,notes:A.notes})),{error:Y}=await le.from("payment_reconciliation").insert($);if(Y)throw Y;await p()}catch(O){throw f(O,"fechamento de caixa"),O}},[c.currentSession,e,h,f,p]),_=v.useCallback(()=>c.currentSession,[c.currentSession]),N=v.useCallback(async L=>{if(!c.currentSession)throw new Error("Nenhuma sesso de caixa aberta");try{h({loading:!0,error:null}),await t(L.comanda_id,L.payment_method,L.notes);const O={cash_session_id:c.currentSession.id,comanda_id:L.comanda_id,transaction_type:"sale",payment_method:L.payment_method,amount:L.amount,processed_by:e.id,reference_number:L.reference_number,customer_name:L.customer_name,notes:L.notes},{error:P}=await le.from("cash_transactions").insert(O);if(P)throw P;await pe(L.amount),await p(),await n(),L.notes&&L.notes.includes("balco")&&(console.log(" Forando atualizao dos monitores aps pagamento de balco..."),setTimeout(async()=>{await Promise.all([i(),l()]),console.log(" Monitores atualizados imediatamente!")},500),setTimeout(async()=>{await Promise.all([i(),l()]),console.log(" Atualizao backup dos monitores concluda!")},2e3))}catch(O){throw f(O,"processamento de pagamento"),O}},[c.currentSession,e,t,h,f,p,n]),T=v.useCallback(async L=>{if(!c.currentSession)throw new Error("Nenhuma sesso de caixa aberta");try{h({loading:!0,error:null});const O={cash_session_id:c.currentSession.id,transaction_type:"refund",payment_method:L.refund_method,amount:-Math.abs(L.amount),processed_by:e.id,notes:`Estorno: ${L.reason}. Transao original: ${L.original_transaction_id}`},{error:P}=await le.from("cash_transactions").insert(O);if(P)throw P;await p()}catch(O){throw f(O,"processamento de estorno"),O}},[c.currentSession,e,h,f,p]),R=v.useCallback(async L=>{if(!c.currentSession)throw new Error("Nenhuma sesso de caixa aberta");try{h({loading:!0,error:null});const O=L.adjustment_type==="add"?L.amount:-L.amount,P={cash_session_id:c.currentSession.id,transaction_type:"adjustment",payment_method:L.payment_method||"dinheiro",amount:O,processed_by:e.id,notes:`Ajuste ${L.adjustment_type==="add"?"positivo":"negativo"}: ${L.reason}`},{error:$}=await le.from("cash_transactions").insert(P);if($)throw $;await p()}catch(O){throw f(O,"processamento de ajuste"),O}},[c.currentSession,e,h,f,p]),S=v.useCallback(async L=>{if(!c.currentSession)throw new Error("Nenhuma sesso de caixa aberta");try{h({loading:!0,error:null});const O={cash_session_id:c.currentSession.id,transaction_type:"adjustment",payment_method:"dinheiro",amount:-Math.abs(L.amount),processed_by:e.id,notes:`[SADA] ${L.purpose}: ${L.reason}. Autorizado por: ${L.authorized_by}${L.recipient?`. Destinatrio: ${L.recipient}`:""}`},{data:P,error:$}=await le.from("cash_transactions").insert(O).select("*").single();if($)throw $;const Y=c.currentSession.expected_amount-L.amount,{error:A}=await le.from("cash_sessions").update({expected_amount:Y}).eq("id",c.currentSession.id);if(A)throw A;return await p(),P.id}catch(O){throw f(O,"processamento de sada de dinheiro"),O}},[c.currentSession,e,h,f,p]),k=v.useCallback(async L=>{if(!c.currentSession)throw new Error("Nenhuma sesso de caixa aberta");try{h({loading:!0,error:null});const O={cash_session_id:c.currentSession.id,transaction_type:"adjustment",payment_method:"dinheiro",amount:-Math.abs(L.amount),processed_by:e.id,notes:`[TRANSFERNCIA TESOURARIA] Autorizado por: ${L.authorized_by}${L.treasury_receipt_number?`. Comprovante: ${L.treasury_receipt_number}`:""}${L.notes?`. Obs: ${L.notes}`:""}`},{data:P,error:$}=await le.from("cash_transactions").insert(O).select("*").single();if($)throw $;const Y=c.currentSession.expected_amount-L.amount,{error:A}=await le.from("cash_sessions").update({expected_amount:Y}).eq("id",c.currentSession.id);if(A)throw A;return await p(),P.id}catch(O){throw f(O,"processamento de transferncia para tesouraria"),O}},[c.currentSession,e,h,f,p]),E=v.useCallback(async L=>{const P=(L||new Date).toISOString().split("T")[0];try{const{data:$,error:Y}=await le.from("daily_cash_summary").select("*").eq("session_date",P);if(Y)return console.warn("Erro ao buscar view daily_cash_summary, usando dados padro:",Y),{session_date:P,total_sessions:0,total_sales:0,total_transactions:0,total_cash_withdrawals:0,total_treasury_transfers:0,cash_balance:0,by_payment_method:[],by_employee:[],discrepancies:[],avg_ticket:0,peak_hours:[]};const A=$||[],F=A.reduce((se,fe)=>se+(fe.cash_sales+fe.debit_sales+fe.credit_sales+fe.pix_sales),0),B=A.reduce((se,fe)=>se+fe.total_transactions,0),W=[{payment_method:"dinheiro",amount:A.reduce((se,fe)=>se+fe.cash_sales,0),transaction_count:0,percentage:0,expected_amount:0,actual_amount:0,discrepancy:0},{payment_method:"cartao_debito",amount:A.reduce((se,fe)=>se+fe.debit_sales,0),transaction_count:0,percentage:0,expected_amount:0,actual_amount:0,discrepancy:0},{payment_method:"cartao_credito",amount:A.reduce((se,fe)=>se+fe.credit_sales,0),transaction_count:0,percentage:0,expected_amount:0,actual_amount:0,discrepancy:0},{payment_method:"pix",amount:A.reduce((se,fe)=>se+fe.pix_sales,0),transaction_count:0,percentage:0,expected_amount:0,actual_amount:0,discrepancy:0}];return W.forEach(se=>{se.percentage=F>0?se.amount/F*100:0}),{session_date:P,total_sessions:A.length,total_sales:F,total_transactions:B,total_cash_withdrawals:0,total_treasury_transfers:0,cash_balance:F,by_payment_method:W,by_employee:A.map(se=>({employee_id:se.employee_id,employee_name:se.employee_name,session_count:1,total_sales:se.cash_sales+se.debit_sales+se.credit_sales+se.pix_sales,transaction_count:se.total_transactions,avg_ticket:se.total_transactions>0?(se.cash_sales+se.debit_sales+se.credit_sales+se.pix_sales)/se.total_transactions:0,cash_discrepancy:se.cash_discrepancy||0,session_duration:"8:00"})),discrepancies:A.filter(se=>Math.abs(se.cash_discrepancy||0)>0).map(se=>({employee_id:se.employee_id,employee_name:se.employee_name,session_id:se.employee_id,cash_discrepancy:se.cash_discrepancy||0,payment_discrepancies:[],total_discrepancy:se.cash_discrepancy||0})),avg_ticket:B>0?F/B:0,peak_hours:[]}}catch($){throw console.error("Erro ao gerar resumo dirio:",$),$}},[]),j=v.useCallback(async L=>E(L),[E]),M=v.useCallback(async L=>{throw new Error("Relatrio mensal ainda no implementado")},[]),z=v.useCallback(async(L,O)=>{throw new Error("Relatrio de performance ainda no implementado")},[]),U=v.useCallback(async L=>{if(!c.currentSession)return{isValid:!1,warnings:[],errors:[{type:"invalid_state",message:"Nenhuma sesso ativa"}],suggestions:["Abra uma sesso de caixa primeiro"]};const O=L-c.currentSession.expected_amount,P=Math.abs(O/c.currentSession.expected_amount)*100,$=[],Y=[],A=[];return Math.abs(O)>10&&($.push({type:"discrepancy",message:`Discrepncia alta: R$ ${O.toFixed(2)}`,severity:"high",data:{discrepancy:O,percentage:P}}),A.push("Recontagem recomendada")),{isValid:Math.abs(O)<=5,warnings:$,errors:Y,suggestions:A}},[c.currentSession]),I=v.useCallback(async L=>({isValid:!0,warnings:[],errors:[],suggestions:[]}),[]),V=v.useCallback(async()=>{await p()},[p]),Q=v.useCallback(async(L,O)=>{throw new Error("Exportao de relatrios ainda no implementada")},[]),K=v.useCallback(async L=>{try{let O=le.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `);L.start_date&&(O=O.gte("processed_at",L.start_date)),L.end_date&&(O=O.lte("processed_at",L.end_date)),L.payment_method&&(O=O.eq("payment_method",L.payment_method)),L.transaction_type&&(O=O.eq("transaction_type",L.transaction_type)),L.employee_id&&(O=O.eq("processed_by",L.employee_id)),L.session_id&&(O=O.eq("cash_session_id",L.session_id)),L.min_amount&&(O=O.gte("amount",L.min_amount)),L.max_amount&&(O=O.lte("amount",L.max_amount));const{data:P,error:$}=await O.order("processed_at",{ascending:!1});if($)throw $;return(P==null?void 0:P.map(Y=>({...Y,comanda:Y.comandas||void 0,processed_by_employee:Y.profiles||void 0,session:Y.cash_sessions||void 0})))||[]}catch(O){throw console.error("Erro na busca de transaes:",O),O}},[]),ie=v.useCallback(async L=>{try{let O=le.from("cash_sessions").select(`
          *,
          profiles!cash_sessions_employee_id_fkey(id, name, role)
        `);L.start_date&&(O=O.gte("session_date",L.start_date)),L.end_date&&(O=O.lte("session_date",L.end_date)),L.employee_id&&(O=O.eq("employee_id",L.employee_id)),L.status&&(O=O.eq("status",L.status)),L.has_discrepancy&&(O=O.neq("cash_discrepancy",0));const{data:P,error:$}=await O.order("session_date",{ascending:!1});if($)throw $;return(P==null?void 0:P.map(Y=>({...Y,employee:Y.profiles||void 0})))||[]}catch(O){throw console.error("Erro na busca de sesses:",O),O}},[]),pe=v.useCallback(async L=>{if(e)try{const O=new Date().toISOString().split("T")[0],{error:P}=await le.rpc("atualizar_metricas_venda",{p_employee_id:e.id,p_date:O,p_sale_amount:L});P&&console.warn("Erro ao atualizar mtricas:",P)}catch(O){console.warn("Erro ao atualizar mtricas:",O)}},[e]);return v.useEffect(()=>{p()},[p]),v.useEffect(()=>{if(!e)return;const L=[],O=le.channel("cash-sessions-changes").on("postgres_changes",{event:"*",schema:"public",table:"cash_sessions"},Y=>{console.log("Mudana em sesses de caixa:",Y),p()}).subscribe();L.push(O);const P=le.channel("cash-transactions-changes").on("postgres_changes",{event:"*",schema:"public",table:"cash_transactions"},Y=>{console.log("Mudana em transaes:",Y),p()}).subscribe();L.push(P);const $=le.channel("comandas-changes").on("postgres_changes",{event:"*",schema:"public",table:"comandas"},Y=>{console.log("Mudana em comandas:",Y),p()}).subscribe();return L.push($),()=>{L.forEach(Y=>{le.removeChannel(Y)})}},[e,p]),{...c,openCashSession:b,closeCashSession:w,getCurrentSession:_,processComandaPayment:N,processRefund:T,processAdjustment:R,processCashWithdrawal:S,processTreasuryTransfer:k,getDailySummary:j,getMonthlyCashReport:M,getEmployeePerformance:z,validateCashCount:U,validateSession:I,refreshData:V,exportReport:Q,searchTransactions:K,searchSessions:ie,getLastClosedSessionBalance:g,getDailyCashMovement:y}},AO=({isOpen:e,onClose:t,onOpenCash:n,getLastClosedSessionBalance:i})=>{const[l,c]=v.useState({opening_amount:0,opening_notes:""}),[u,h]=v.useState(!1),[f,p]=v.useState(null),[g,y]=v.useState(!1);v.useEffect(()=>{(async()=>{if(e&&i){y(!0);try{const N=await i();p(N),N>0&&l.opening_amount===0&&c(T=>({...T,opening_amount:N}))}catch(N){console.error("Erro ao carregar saldo da ltima sesso:",N)}finally{y(!1)}}})()},[e,i,l.opening_amount]);const b=()=>{f!==null&&c(_=>({..._,opening_amount:f}))},w=async _=>{_.preventDefault(),h(!0);try{await n(l),t(),c({opening_amount:0,opening_notes:""})}catch(N){console.error("Erro ao abrir caixa:",N)}finally{h(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:s.jsx(qt,{className:"h-6 w-6 text-green-600"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Abrir Caixa"})]}),s.jsx("button",{onClick:t,disabled:u,className:"text-gray-400 hover:text-gray-600","aria-label":"Fechar modal",children:s.jsx(rt,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[f!==null&&f>0&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Lt,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Saldo da ltima sesso fechada"}),s.jsxs("p",{className:"text-lg font-bold text-blue-700",children:["R$ ",f.toFixed(2)]}),s.jsx("button",{type:"button",onClick:b,className:"mt-2 text-sm text-blue-600 hover:text-blue-800 underline",disabled:u,children:"Usar este valor como abertura"})]})]})}),g&&s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:s.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-600",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}),s.jsx("span",{className:"text-sm",children:"Carregando histrico..."})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Inicial (R$) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:l.opening_amount,onChange:_=>c(N=>({...N,opening_amount:parseFloat(_.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,disabled:u,"aria-label":"Valor inicial em reais"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),s.jsx("textarea",{value:l.opening_notes||"",onChange:_=>c(N=>({...N,opening_notes:_.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Observaes sobre a abertura do caixa...",disabled:u})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:u,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:u?"Abrindo...":"Abrir Caixa"})]})]})]})}):null},kO=({isOpen:e,onClose:t,session:n,onCloseCash:i})=>{var j;const{preparingOrders:l,readyOrders:c}=pd(),[u,h]=v.useState({closing_amount:n.expected_amount,closing_notes:"",reconciliation:[{payment_method:"dinheiro",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"cartao_debito",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"cartao_credito",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"pix",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"transferencia",expected_amount:0,actual_amount:0,transaction_count:0}]}),[f,p]=v.useState(!1),[g,y]=v.useState([]),[b,w]=v.useState(!1);v.useEffect(()=>{e&&n&&(h(M=>({...M,closing_amount:n.expected_amount})),_())},[e,n]);const _=async()=>{w(!0);try{const{data:M,error:z}=await le.from("comanda_items").select(`
          *,
          comanda:comandas!inner(
            id,
            customer_name,
            table_id,
            bar_tables(number)
          ),
          menu_item:menu_items(name)
        `).in("status",["pending","preparing","ready"]).eq("comanda.status","open").order("added_at",{ascending:!0});z?(console.error("Erro ao carregar itens pendentes:",z),y([])):y(M||[])}catch(M){console.error("Erro ao validar pedidos pendentes:",M),y([])}finally{w(!1)}},N=async M=>{M.preventDefault();const z=l.length+c.length+g.length;if(z>0){const U=`ATENO: Existem ${z} pedidos pendentes de entrega:

 ${l.length} pedidos de balco em preparo
 ${c.length} pedidos de balco prontos para entrega
 ${g.length} itens de comandas no entregues

Tem certeza que deseja fechar o caixa mesmo com pedidos pendentes?`;if(!window.confirm(U))return}p(!0);try{await i(u),t()}catch(U){console.error("Erro ao fechar caixa:",U)}finally{p(!1)}},T=(M,z,U)=>{h(I=>({...I,reconciliation:I.reconciliation.map(V=>V.payment_method===M?{...V,[z]:U}:V)}))},R=u.reconciliation.reduce((M,z)=>M+z.actual_amount,0),S=R-n.expected_amount,E=l.length+c.length+g.length>0;return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:s.jsx(qt,{className:"h-6 w-6 text-red-600"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Fechar Caixa"})]}),s.jsx("button",{onClick:t,disabled:f,className:"text-gray-400 hover:text-gray-600",children:s.jsx(rt,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:N,className:"space-y-6",children:[E&&s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Fs,{className:"h-6 w-6 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:" Ateno: Pedidos Pendentes de Entrega"}),s.jsxs("div",{className:"text-sm text-yellow-700 space-y-1",children:[l.length>0&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{className:"h-4 w-4"}),s.jsxs("span",{children:[l.length," pedidos de balco em preparo"]})]}),c.length>0&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ym,{className:"h-4 w-4"}),s.jsxs("span",{children:[c.length," pedidos de balco prontos para entrega"]})]}),g.length>0&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{className:"h-4 w-4"}),s.jsxs("span",{children:[g.length," itens de comandas no entregues"]})]})]}),s.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"Recomenda-se entregar todos os pedidos antes de fechar o caixa."})]})]})}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Resumo da Sesso"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Valor inicial:"}),s.jsx("span",{className:"font-medium",children:Ce(n.opening_amount)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Valor esperado total:"}),s.jsx("span",{className:"font-medium",children:Ce(n.expected_amount)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Aberta em:"}),s.jsx("span",{className:"font-medium",children:new Date(n.opened_at).toLocaleString("pt-BR")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Funcionrio:"}),s.jsx("span",{className:"font-medium",children:(j=n.employee)==null?void 0:j.name})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reconciliao por Mtodo de Pagamento"}),s.jsx("div",{className:"space-y-4",children:u.reconciliation.map((M,z)=>{const U=I=>{switch(I){case"dinheiro":return s.jsx(qt,{className:"h-5 w-5"});case"cartao_debito":case"cartao_credito":return s.jsx(wi,{className:"h-5 w-5"});case"pix":return s.jsx(Fw,{className:"h-5 w-5"});case"transferencia":return s.jsx(cA,{className:"h-5 w-5"});default:return s.jsx(qt,{className:"h-5 w-5"})}};return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[U(M.payment_method),s.jsx("h4",{className:"font-medium text-gray-900",children:gd[M.payment_method]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Valor Esperado"}),s.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded text-sm font-medium",children:Ce(M.expected_amount)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Valor Real *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:M.actual_amount,onChange:I=>T(M.payment_method,"actual_amount",parseFloat(I.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:f})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Transaes"}),s.jsx("input",{type:"number",min:"0",value:M.transaction_count,onChange:I=>T(M.payment_method,"transaction_count",parseInt(I.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:f})]})]}),Math.abs(M.actual_amount-M.expected_amount)>.01&&s.jsxs("div",{className:`mt-2 p-2 rounded text-xs ${M.actual_amount>M.expected_amount?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[M.actual_amount>M.expected_amount?"Sobra":"Falta",":",Ce(Math.abs(M.actual_amount-M.expected_amount))]})]},M.payment_method)})})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"Resumo Final"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total esperado:"}),s.jsx("span",{className:"font-medium",children:Ce(n.expected_amount)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total contado:"}),s.jsx("span",{className:"font-medium",children:Ce(R)})]}),s.jsxs("div",{className:"flex justify-between col-span-2 pt-2 border-t border-blue-200",children:[s.jsx("span",{className:"font-medium",children:"Diferena:"}),s.jsxs("span",{className:`font-bold ${Math.abs(S)<.01||S>0?"text-green-600":"text-red-600"}`,children:[S===0?"Exato":Ce(S),S>0&&" (Sobra)",S<0&&" (Falta)"]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes do Fechamento"}),s.jsx("textarea",{value:u.closing_notes||"",onChange:M=>h(z=>({...z,closing_notes:M.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Observaes sobre o fechamento...",disabled:f})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,disabled:f,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:f||b,className:`flex-1 px-4 py-2 text-white rounded-md disabled:opacity-50 transition-colors ${E?"bg-yellow-600 hover:bg-yellow-700":"bg-red-600 hover:bg-red-700"}`,children:f?"Fechando...":b?"Validando...":E?"Fechar Mesmo Assim":"Fechar Caixa"})]})]})]})}):null},MO=({isOpen:e,onClose:t,onProcessWithdrawal:n,currentCashBalance:i,loading:l=!1})=>{const[c,u]=v.useState({amount:0,reason:"",authorized_by:"",recipient:"",purpose:"other"}),[h,f]=v.useState({}),[p,g]=v.useState(!1),y=(T,R)=>{u(S=>({...S,[T]:R})),h[T]&&f(S=>({...S,[T]:""}))},b=()=>{var R;const T={};return(!c.amount||c.amount<=0)&&(T.amount="Valor deve ser maior que zero"),c.amount>i&&(T.amount="Valor no pode ser maior que o saldo em caixa"),c.reason.trim()||(T.reason="Motivo  obrigatrio"),c.authorized_by.trim()||(T.authorized_by="Nome do autorizador  obrigatrio"),c.purpose==="transfer"&&!((R=c.recipient)!=null&&R.trim())&&(T.recipient="Destinatrio  obrigatrio para transferncias"),f(T),Object.keys(T).length===0},w=async T=>{if(T.preventDefault(),!!b()){g(!0);try{await n(c),_()}catch(R){console.error("Erro ao processar sada:",R)}finally{g(!1)}}},_=()=>{u({amount:0,reason:"",authorized_by:"",recipient:"",purpose:"other"}),f({}),g(!1),t()},N=[{value:"change",label:"Troco"},{value:"expense",label:"Despesa"},{value:"transfer",label:"Transferncia"},{value:"other",label:"Outros"}];return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs(_e.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:s.jsx(mi,{className:"h-5 w-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sada de Dinheiro"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Saldo disponvel: ",Ce(i)]})]})]}),s.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:p,title:"Fechar modal","aria-label":"Fechar modal",children:s.jsx(rt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"p-6 pb-0",children:s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[s.jsx(Fs,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-yellow-800",children:"Ateno"}),s.jsx("p",{className:"text-yellow-700 mt-1",children:"Esta operao reduzir o saldo em caixa e deve ser autorizada por um supervisor."})]})]})}),s.jsxs("form",{onSubmit:w,className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor da Sada *"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"R$"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:i,value:c.amount||"",onChange:T=>y("amount",parseFloat(T.target.value)||0),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.amount?"border-red-300":"border-gray-300"}`,placeholder:"0,00",disabled:p})]}),h.amount&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.amount})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finalidade *"}),s.jsx("select",{value:c.purpose,onChange:T=>y("purpose",T.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:p,title:"Selecione a finalidade da sada","aria-label":"Finalidade da sada de dinheiro",children:N.map(T=>s.jsx("option",{value:T.value,children:T.label},T.value))})]}),c.purpose==="transfer"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destinatrio *"}),s.jsx("input",{type:"text",value:c.recipient||"",onChange:T=>y("recipient",T.target.value),className:`w-full px-3 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.recipient?"border-red-300":"border-gray-300"}`,placeholder:"Nome do destinatrio",disabled:p}),h.recipient&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.recipient})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo/Descrio *"}),s.jsx("textarea",{value:c.reason,onChange:T=>y("reason",T.target.value),rows:3,className:`w-full px-3 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none ${h.reason?"border-red-300":"border-gray-300"}`,placeholder:"Descreva o motivo da sada de dinheiro...",disabled:p}),h.reason&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.reason})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Autorizado por *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{type:"text",value:c.authorized_by,onChange:T=>y("authorized_by",T.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${h.authorized_by?"border-red-300":"border-gray-300"}`,placeholder:"Nome do supervisor/gerente",disabled:p})]}),h.authorized_by&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.authorized_by})]})]}),c.amount>0&&s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Resumo da Operao"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Saldo atual:"}),s.jsx("span",{className:"font-medium",children:Ce(i)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Valor da sada:"}),s.jsxs("span",{className:"font-medium text-red-600",children:["-",Ce(c.amount)]})]}),s.jsx("div",{className:"border-t pt-1 mt-2",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-900 font-medium",children:"Saldo aps sada:"}),s.jsx("span",{className:"font-bold",children:Ce(i-c.amount)})]})})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:_,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors font-medium",disabled:p,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 bg-orange-600 text-white py-3 rounded-lg hover:bg-orange-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:p||l||!c.amount||!c.reason.trim()||!c.authorized_by.trim(),children:p?"Processando...":"Processar Sada"})]})]})]})}):null},OO=({isOpen:e,onClose:t,onProcessTransfer:n,currentCashBalance:i,loading:l=!1})=>{const[c,u]=v.useState({amount:i,transfer_date:new Date().toISOString().split("T")[0],authorized_by:"",treasury_receipt_number:"",notes:""}),[h,f]=v.useState({}),[p,g]=v.useState(!1),y=(T,R)=>{u(S=>({...S,[T]:R})),h[T]&&f(S=>({...S,[T]:""}))},b=()=>{const T={};(!c.amount||c.amount<=0)&&(T.amount="Valor deve ser maior que zero"),c.amount>i&&(T.amount="Valor no pode ser maior que o saldo em caixa"),c.transfer_date||(T.transfer_date="Data da transferncia  obrigatria"),c.authorized_by.trim()||(T.authorized_by="Nome do autorizador  obrigatrio");const R=new Date(c.transfer_date),S=new Date;return S.setHours(23,59,59,999),R>S&&(T.transfer_date="Data no pode ser futura"),f(T),Object.keys(T).length===0},w=async T=>{if(T.preventDefault(),!!b()){g(!0);try{await n(c),_()}catch(R){console.error("Erro ao processar transferncia:",R)}finally{g(!1)}}},_=()=>{u({amount:i,transfer_date:new Date().toISOString().split("T")[0],authorized_by:"",treasury_receipt_number:"",notes:""}),f({}),g(!1),t()},N=()=>{y("amount",i)};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs(_e.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:s.jsx(Yc,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transferncia para Tesouraria"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Saldo disponvel: ",Ce(i)]})]})]}),s.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:p,title:"Fechar modal","aria-label":"Fechar modal",children:s.jsx(rt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"p-6 pb-0",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start space-x-3",children:[s.jsx(uA,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-blue-800",children:"Transferncia para Tesouraria"}),s.jsx("p",{className:"text-blue-700 mt-1",children:"Esta operao transfere o dinheiro em caixa para a tesouraria central. Um comprovante ser gerado para assinatura do conferente."})]})]})}),s.jsxs("form",{onSubmit:w,className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor da Transferncia *"}),s.jsx("button",{type:"button",onClick:N,className:"text-xs text-purple-600 hover:text-purple-700 underline",disabled:p,children:"Transferir todo o saldo"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"R$"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:i,value:c.amount||"",onChange:T=>y("amount",parseFloat(T.target.value)||0),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.amount?"border-red-300":"border-gray-300"}`,placeholder:"0,00",disabled:p})]}),h.amount&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.amount})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Transferncia *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{type:"date",value:c.transfer_date,onChange:T=>y("transfer_date",T.target.value),max:new Date().toISOString().split("T")[0],className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.transfer_date?"border-red-300":"border-gray-300"}`,disabled:p,title:"Selecione a data da transferncia","aria-label":"Data da transferncia"})]}),h.transfer_date&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.transfer_date})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Autorizado por *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{type:"text",value:c.authorized_by,onChange:T=>y("authorized_by",T.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.authorized_by?"border-red-300":"border-gray-300"}`,placeholder:"Nome do supervisor/gerente",disabled:p})]}),h.authorized_by&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.authorized_by})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero do Comprovante da Tesouraria"}),s.jsxs("div",{className:"relative",children:[s.jsx(Bw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{type:"text",value:c.treasury_receipt_number||"",onChange:T=>y("treasury_receipt_number",T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: TSR-2024-001234",disabled:p})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Nmero de referncia do comprovante da tesouraria (opcional)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),s.jsx("textarea",{value:c.notes||"",onChange:T=>y("notes",T.target.value),rows:3,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",placeholder:"Observaes adicionais sobre a transferncia...",disabled:p})]})]}),c.amount>0&&s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Resumo da Transferncia"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Saldo atual em caixa:"}),s.jsx("span",{className:"font-medium",children:Ce(i)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Valor a transferir:"}),s.jsx("span",{className:"font-medium text-purple-600",children:Ce(c.amount)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Data da transferncia:"}),s.jsx("span",{className:"font-medium",children:Ft(new Date(c.transfer_date),"dd 'de' MMMM 'de' yyyy",{locale:ts})})]}),s.jsx("div",{className:"border-t pt-2 mt-2",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-900 font-medium",children:"Saldo restante em caixa:"}),s.jsx("span",{className:"font-bold",children:Ce(i-c.amount)})]})})]})]}),c.amount===i&&c.amount>0&&s.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start space-x-2",children:[s.jsx(Fs,{className:"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-yellow-800",children:"Transferncia Total"}),s.jsx("p",{className:"text-yellow-700",children:"Voc est transferindo todo o saldo em caixa. O caixa ficar zerado aps esta operao."})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:_,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors font-medium",disabled:p,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:p||l||!c.amount||!c.authorized_by.trim(),children:p?"Processando...":"Transferir e Imprimir Comprovante"})]})]})]})}):null},DO=({receiptData:e,onPrint:t})=>{const n=()=>{const i=document.getElementById("treasury-transfer-receipt");if(!i)return;const l=window.open("","_blank");l&&(l.document.write(`
      <html>
        <head>
          <title>Comprovante de Transferncia - Tesouraria</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.4;
              margin: 0;
              padding: 20px;
              background: white;
            }
            .receipt {
              max-width: 300px;
              margin: 0 auto;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #000;
              padding-bottom: 10px;
              margin-bottom: 15px;
            }
            .company-name {
              font-size: 16px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .receipt-title {
              font-size: 14px;
              font-weight: bold;
              margin-top: 10px;
            }
            .section {
              margin-bottom: 15px;
            }
            .section-title {
              font-weight: bold;
              border-bottom: 1px solid #000;
              margin-bottom: 5px;
              text-transform: uppercase;
            }
            .row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 3px;
            }
            .row-full {
              margin-bottom: 3px;
            }
            .total {
              border-top: 2px solid #000;
              border-bottom: 2px solid #000;
              padding: 8px 0;
              margin: 15px 0;
              font-weight: bold;
              font-size: 14px;
            }
            .signatures {
              margin-top: 30px;
              border-top: 1px solid #000;
              padding-top: 20px;
            }
            .signature-line {
              border-bottom: 1px solid #000;
              margin: 30px 0 10px 0;
              height: 1px;
            }
            .signature-label {
              text-align: center;
              font-size: 10px;
              margin-top: 5px;
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              font-size: 10px;
              border-top: 1px solid #000;
              padding-top: 10px;
            }
            @media print {
              body { margin: 0; padding: 10px; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          ${i.innerHTML}
        </body>
      </html>
    `),l.document.close(),l.focus(),l.print(),t&&t())};return s.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[s.jsxs("div",{id:"treasury-transfer-receipt",className:"receipt",children:[s.jsxs("div",{className:"header",children:[s.jsx("div",{className:"company-name",children:"AABB - SISTEMA DE GESTO"}),s.jsx("div",{children:"Associao Atltica Banco do Brasil"}),s.jsx("div",{className:"receipt-title",children:"COMPROVANTE DE TRANSFERNCIA"}),s.jsx("div",{className:"receipt-title",children:"TESOURARIA"})]}),s.jsxs("div",{className:"section",children:[s.jsx("div",{className:"section-title",children:"Dados da Transferncia"}),s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"ID Transferncia:"}),s.jsxs("span",{children:["#",e.transferId.slice(-8).toUpperCase()]})]}),s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"Data/Hora:"}),s.jsx("span",{children:Ft(e.timestamp,"dd/MM/yyyy HH:mm",{locale:ts})})]}),s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"Data Transferncia:"}),s.jsx("span",{children:Ft(new Date(e.transferDate),"dd/MM/yyyy",{locale:ts})})]}),s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"Sesso Caixa:"}),s.jsxs("span",{children:["#",e.sessionId.slice(-6).toUpperCase()]})]})]}),s.jsx("div",{className:"total",children:s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"VALOR TRANSFERIDO:"}),s.jsx("span",{children:Ce(e.amount)})]})}),s.jsxs("div",{className:"section",children:[s.jsx("div",{className:"section-title",children:"Autorizao"}),s.jsxs("div",{className:"row-full",children:[s.jsx("strong",{children:"Autorizado por:"})," ",e.authorizedBy]}),s.jsxs("div",{className:"row-full",children:[s.jsx("strong",{children:"Operador:"})," ",e.cashierName]}),e.treasuryReceiptNumber&&s.jsxs("div",{className:"row-full",children:[s.jsx("strong",{children:"Comprovante Tesouraria:"})," ",e.treasuryReceiptNumber]})]}),e.notes&&s.jsxs("div",{className:"section",children:[s.jsx("div",{className:"section-title",children:"Observaes"}),s.jsx("div",{className:"row-full",children:e.notes})]}),s.jsxs("div",{className:"section",children:[s.jsx("div",{className:"section-title",children:"Informaes"}),s.jsx("div",{className:"row-full",style:{fontSize:"10px"},children:"Este comprovante confirma a transferncia de valores em dinheiro do caixa operacional para a tesouraria central."}),s.jsx("div",{className:"row-full",style:{fontSize:"10px",marginTop:"5px"},children:"Confira os dados e guarde este comprovante."})]}),s.jsxs("div",{className:"signatures",children:[s.jsx("div",{className:"section-title",children:"Assinaturas"}),s.jsxs("div",{style:{marginTop:"20px"},children:[s.jsx("div",{className:"signature-line"}),s.jsx("div",{className:"signature-label",children:"OPERADOR DE CAIXA"}),s.jsx("div",{className:"signature-label",children:e.cashierName})]}),s.jsxs("div",{style:{marginTop:"25px"},children:[s.jsx("div",{className:"signature-line"}),s.jsx("div",{className:"signature-label",children:"SUPERVISOR/AUTORIZAO"}),s.jsx("div",{className:"signature-label",children:e.authorizedBy})]}),s.jsxs("div",{style:{marginTop:"25px"},children:[s.jsx("div",{className:"signature-line"}),s.jsx("div",{className:"signature-label",children:"CONFERENTE TESOURARIA"}),s.jsx("div",{className:"signature-label",children:"Nome: ___________________________"})]})]}),s.jsxs("div",{className:"footer",children:[s.jsx("div",{children:"AABB - Sistema de Gesto v1.0"}),s.jsx("div",{children:"Documento gerado automaticamente"}),s.jsx("div",{children:Ft(new Date,"dd/MM/yyyy HH:mm:ss",{locale:ts})})]})]}),s.jsx("div",{className:"flex justify-center mt-6 no-print",children:s.jsxs("button",{onClick:n,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),s.jsx("span",{children:"Imprimir Comprovante"})]})})]})},RO={change:"Troco",expense:"Despesa",transfer:"Transferncia",other:"Outros"},PO=({receiptData:e,onPrint:t})=>{const n=()=>{const i=document.getElementById("cash-withdrawal-receipt");if(!i)return;const l=window.open("","_blank");l&&(l.document.write(`
      <html>
        <head>
          <title>Comprovante de Sada de Dinheiro</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.4;
              margin: 0;
              padding: 20px;
              background: white;
            }
            .receipt {
              max-width: 300px;
              margin: 0 auto;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #000;
              padding-bottom: 10px;
              margin-bottom: 15px;
            }
            .company-name {
              font-size: 16px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .receipt-title {
              font-size: 14px;
              font-weight: bold;
              margin-top: 10px;
            }
            .section {
              margin-bottom: 15px;
            }
            .section-title {
              font-weight: bold;
              border-bottom: 1px solid #000;
              margin-bottom: 5px;
              text-transform: uppercase;
            }
            .row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 3px;
            }
            .row-full {
              margin-bottom: 3px;
            }
            .total {
              border-top: 2px solid #000;
              border-bottom: 2px solid #000;
              padding: 8px 0;
              margin: 15px 0;
              font-weight: bold;
              font-size: 14px;
            }
            .signatures {
              margin-top: 30px;
              border-top: 1px solid #000;
              padding-top: 20px;
            }
            .signature-line {
              border-bottom: 1px solid #000;
              margin: 30px 0 10px 0;
              height: 1px;
            }
            .signature-label {
              text-align: center;
              font-size: 10px;
              margin-top: 5px;
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              font-size: 10px;
              border-top: 1px solid #000;
              padding-top: 10px;
            }
            .highlight {
              background-color: #f0f0f0;
              padding: 5px;
              border: 1px solid #000;
              margin: 10px 0;
            }
            @media print {
              body { margin: 0; padding: 10px; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          ${i.innerHTML}
        </body>
      </html>
    `),l.document.close(),l.focus(),l.print(),t&&t())};return s.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[s.jsxs("div",{id:"cash-withdrawal-receipt",className:"receipt",children:[s.jsxs("div",{className:"header",children:[s.jsx("div",{className:"company-name",children:"AABB - SISTEMA DE GESTO"}),s.jsx("div",{children:"Associao Atltica Banco do Brasil"}),s.jsx("div",{className:"receipt-title",children:"COMPROVANTE DE SADA"}),s.jsx("div",{className:"receipt-title",children:"DE DINHEIRO"})]}),s.jsxs("div",{className:"section",children:[s.jsx("div",{className:"section-title",children:"Dados da Operao"}),s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"ID Operao:"}),s.jsxs("span",{children:["#",e.withdrawalId.slice(-8).toUpperCase()]})]}),s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"Data/Hora:"}),s.jsx("span",{children:Ft(e.timestamp,"dd/MM/yyyy HH:mm",{locale:ts})})]}),s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"Sesso Caixa:"}),s.jsxs("span",{children:["#",e.sessionId.slice(-6).toUpperCase()]})]}),s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"Finalidade:"}),s.jsx("span",{children:RO[e.purpose]})]})]}),s.jsx("div",{className:"total",children:s.jsxs("div",{className:"row",children:[s.jsx("span",{children:"VALOR DA SADA:"}),s.jsx("span",{children:Ce(e.amount)})]})}),s.jsxs("div",{className:"section",children:[s.jsx("div",{className:"section-title",children:"Justificativa"}),s.jsx("div",{className:"highlight",children:s.jsx("div",{className:"row-full",children:e.reason})})]}),s.jsxs("div",{className:"section",children:[s.jsx("div",{className:"section-title",children:"Autorizao"}),s.jsxs("div",{className:"row-full",children:[s.jsx("strong",{children:"Autorizado por:"})," ",e.authorizedBy]}),s.jsxs("div",{className:"row-full",children:[s.jsx("strong",{children:"Operador de Caixa:"})," ",e.cashierName]}),e.recipient&&s.jsxs("div",{className:"row-full",children:[s.jsx("strong",{children:"Beneficirio:"})," ",e.recipient]})]}),s.jsxs("div",{className:"section",children:[s.jsx("div",{className:"section-title",children:"Informaes"}),s.jsx("div",{className:"row-full",style:{fontSize:"10px"},children:"Este comprovante documenta a sada de dinheiro do caixa operacional."}),s.jsx("div",{className:"row-full",style:{fontSize:"10px",marginTop:"5px"},children:"Operao devidamente autorizada e registrada no sistema."}),s.jsx("div",{className:"row-full",style:{fontSize:"10px",marginTop:"5px"},children:"Confira os dados e mantenha este comprovante arquivado."})]}),s.jsxs("div",{className:"signatures",children:[s.jsx("div",{className:"section-title",children:"Assinaturas e Confirmaes"}),s.jsxs("div",{style:{marginTop:"20px"},children:[s.jsx("div",{className:"signature-line"}),s.jsx("div",{className:"signature-label",children:"OPERADOR DE CAIXA"}),s.jsx("div",{className:"signature-label",children:e.cashierName})]}),s.jsxs("div",{style:{marginTop:"25px"},children:[s.jsx("div",{className:"signature-line"}),s.jsx("div",{className:"signature-label",children:"SUPERVISOR/AUTORIZAO"}),s.jsx("div",{className:"signature-label",children:e.authorizedBy})]}),e.recipient&&s.jsxs("div",{style:{marginTop:"25px"},children:[s.jsx("div",{className:"signature-line"}),s.jsx("div",{className:"signature-label",children:"BENEFICIRIO/RECEBEDOR"}),s.jsx("div",{className:"signature-label",children:e.recipient})]}),s.jsxs("div",{style:{marginTop:"25px"},children:[s.jsx("div",{className:"signature-line"}),s.jsx("div",{className:"signature-label",children:"TESTEMUNHA (se necessrio)"}),s.jsx("div",{className:"signature-label",children:"Nome: ___________________________"})]})]}),s.jsxs("div",{className:"footer",children:[s.jsx("div",{children:"AABB - Sistema de Gesto v1.0"}),s.jsx("div",{children:"Documento gerado automaticamente"}),s.jsx("div",{children:Ft(new Date,"dd/MM/yyyy HH:mm:ss",{locale:ts})}),s.jsx("div",{style:{marginTop:"10px",fontSize:"8px"},children:" Este documento possui valor legal e deve ser arquivado"})]})]}),s.jsx("div",{className:"flex justify-center mt-6 no-print",children:s.jsxs("button",{onClick:n,className:"bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center space-x-2",children:[s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),s.jsx("span",{children:"Imprimir Comprovante"})]})})]})},zO=({transactions:e,onAddWithdrawal:t,onExportReport:n})=>{const[i,l]=v.useState("all"),[c,u]=v.useState("all"),h=b=>{var w,_;return(w=b.notes)!=null&&w.includes("[SADA]")?"cash_withdrawal":(_=b.notes)!=null&&_.includes("[TRANSFERNCIA TESOURARIA]")?"treasury_transfer":b.transaction_type},f=e.filter(b=>{const w=h(b),_=i==="all"||w===i,N=c==="all"||b.payment_method===c;return _&&N}),p={entradas:e.filter(b=>{const w=h(b);return["sale","adjustment"].includes(w)&&b.amount>0}).reduce((b,w)=>b+w.amount,0),saidas:e.filter(b=>{const w=h(b);return["refund","cash_withdrawal","treasury_transfer"].includes(w)||w==="adjustment"&&b.amount<0}).reduce((b,w)=>b+Math.abs(w.amount),0),saldo:0};p.saldo=p.entradas-p.saidas;const g=b=>{switch(b){case"sale":return s.jsx(fi,{className:"h-4 w-4 text-green-600"});case"refund":return s.jsx(Wb,{className:"h-4 w-4 text-red-600"});case"adjustment":return s.jsx(Yc,{className:"h-4 w-4 text-blue-600"});case"cash_withdrawal":return s.jsx(mi,{className:"h-4 w-4 text-orange-600"});case"treasury_transfer":return s.jsx(Yc,{className:"h-4 w-4 text-purple-600"});default:return s.jsx(qt,{className:"h-4 w-4 text-gray-600"})}},y=(b,w)=>b==="sale"||b==="adjustment"&&w>0?"text-green-600":["refund","cash_withdrawal","treasury_transfer"].includes(b)||b==="adjustment"&&w<0?"text-red-600":"text-gray-600";return s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Movimentao do Dia"}),s.jsx("p",{className:"text-sm text-gray-600",children:Ft(new Date,"dd 'de' MMMM 'de' yyyy",{locale:ts})})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:t,className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center space-x-2 text-sm",children:[s.jsx(mi,{className:"h-4 w-4"}),s.jsx("span",{children:"Sada de Dinheiro"})]}),s.jsxs("button",{onClick:n,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 text-sm",children:[s.jsx(zw,{className:"h-4 w-4"}),s.jsx("span",{children:"Exportar"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Entradas"}),s.jsx("p",{className:"text-2xl font-bold text-green-900",children:Ce(p.entradas)})]}),s.jsx(fi,{className:"h-8 w-8 text-green-600"})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:"Sadas"}),s.jsx("p",{className:"text-2xl font-bold text-red-900",children:Ce(p.saidas)})]}),s.jsx(Wb,{className:"h-8 w-8 text-red-600"})]})}),s.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`border rounded-lg p-4 ${p.saldo>=0?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${p.saldo>=0?"text-blue-800":"text-orange-800"}`,children:"Saldo"}),s.jsx("p",{className:`text-2xl font-bold ${p.saldo>=0?"text-blue-900":"text-orange-900"}`,children:Ce(Math.abs(p.saldo))})]}),s.jsx(qt,{className:`h-8 w-8 ${p.saldo>=0?"text-blue-600":"text-orange-600"}`})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-3 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("select",{value:i,onChange:b=>l(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",title:"Filtrar por tipo de transao","aria-label":"Filtro por tipo de transao",children:[s.jsx("option",{value:"all",children:"Todos os Tipos"}),s.jsx("option",{value:"sale",children:"Vendas"}),s.jsx("option",{value:"refund",children:"Estornos"}),s.jsx("option",{value:"adjustment",children:"Ajustes"}),s.jsx("option",{value:"cash_withdrawal",children:"Sadas de Dinheiro"}),s.jsx("option",{value:"treasury_transfer",children:"Transferncias"})]}),s.jsxs("select",{value:c,onChange:b=>u(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",title:"Filtrar por mtodo de pagamento","aria-label":"Filtro por mtodo de pagamento",children:[s.jsx("option",{value:"all",children:"Todos os Mtodos"}),s.jsx("option",{value:"dinheiro",children:"Dinheiro"}),s.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),s.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),s.jsx("option",{value:"pix",children:"PIX"}),s.jsx("option",{value:"transferencia",children:"Transferncia"})]})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[f.length," de ",e.length," transaes"]})]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"Nenhuma transao encontrada"})}):f.map(b=>{const w=h(b);return s.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[g(w),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:h1[w]||"Transao"}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[s.jsx(Lt,{className:"h-3 w-3"}),s.jsx("span",{children:Ft(new Date(b.processed_at),"HH:mm",{locale:ts})}),s.jsx("span",{children:""}),s.jsx("span",{children:gd[b.payment_method]}),b.processed_by_employee&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx(Kn,{className:"h-3 w-3"}),s.jsx("span",{children:b.processed_by_employee.name})]})]}),b.notes&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b.notes.replace(/\[[^\]]+\]\s*/g,"")})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`text-sm font-bold ${y(w,b.amount)}`,children:[["refund","cash_withdrawal","treasury_transfer"].includes(w)||w==="adjustment"&&b.amount<0?"-":"+",Ce(Math.abs(b.amount))]}),b.reference_number&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",b.reference_number]})]})]},b.id)})})]})},LO=({receiptData:e,onPrint:t})=>{var y;const{order:n,paymentMethod:i,amountPaid:l,cashierName:c,referenceNumber:u,timestamp:h}=e,f=b=>({dinheiro:"Dinheiro",cartao_debito:"Carto Dbito",cartao_credito:"Carto Crdito",pix:"PIX",transferencia:"Transferncia"})[b]||b,p=()=>{t&&t();const b=window.open("","_blank");b&&(b.document.write(g()),b.document.close(),b.print(),b.close())},g=()=>{var b;return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Comprovante - ${n.order_number.toString().padStart(4,"0")}</title>
        <style>
          body {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            margin: 0;
            padding: 20px;
            width: 300px;
          }
          .header {
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
            margin-bottom: 15px;
          }
          .title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
          }
          .subtitle {
            font-size: 10px;
            color: #666;
          }
          .section {
            margin-bottom: 15px;
          }
          .section-title {
            font-weight: bold;
            border-bottom: 1px solid #ccc;
            padding-bottom: 2px;
            margin-bottom: 5px;
          }
          .item-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
          }
          .item-name {
            flex: 1;
          }
          .item-qty {
            width: 30px;
            text-align: center;
          }
          .item-price {
            width: 60px;
            text-align: right;
          }
          .total-row {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            border-top: 1px solid #000;
            padding-top: 5px;
            margin-top: 10px;
          }
          .footer {
            text-align: center;
            border-top: 2px solid #000;
            padding-top: 10px;
            margin-top: 15px;
            font-size: 10px;
          }
          .dashed-line {
            border-top: 1px dashed #666;
            margin: 10px 0;
          }
          .payment-status {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            margin: 15px 0;
          }
          @media print {
            body { margin: 0; padding: 10px; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="title">CLUBE SOCIAL</div>
          <div class="subtitle">Bar & Restaurante</div>
          <div class="subtitle">CNPJ: 12.345.678/0001-90</div>
        </div>

        <div class="section">
          <div class="section-title">COMPROVANTE DE PAGAMENTO</div>
          <div>Pedido: #${n.order_number.toString().padStart(4,"0")}</div>
          <div>Data Pedido: ${new Date(n.created_at).toLocaleDateString("pt-BR")}</div>
          <div>Hora Pedido: ${new Date(n.created_at).toLocaleTimeString("pt-BR")}</div>
          <div>Data Pagto: ${h.toLocaleDateString("pt-BR")}</div>
          <div>Hora Pagto: ${h.toLocaleTimeString("pt-BR")}</div>
          <div>Atendente: ${n.employee_name||"N/A"}</div>
          <div>Caixa: ${c}</div>
          ${n.customer_name?`<div>Cliente: ${n.customer_name}</div>`:""}
          ${n.customer_phone?`<div>Telefone: ${n.customer_phone}</div>`:""}
        </div>

        <div class="dashed-line"></div>

        <div class="section">
          <div class="section-title">ITENS VENDIDOS</div>
          ${((b=n.items)==null?void 0:b.map(w=>{var _;return`
            <div class="item-row">
              <div class="item-name">${((_=w.menu_item)==null?void 0:_.name)||"Item"}</div>
              <div class="item-qty">${w.quantity}x</div>
              <div class="item-price">R$ ${(w.unit_price*w.quantity).toFixed(2)}</div>
            </div>
            ${w.notes?`<div style="font-size: 10px; color: #666; margin-left: 10px;">Obs: ${w.notes}</div>`:""}
          `}).join(""))||"<div>Nenhum item encontrado</div>"}
        </div>

        <div class="dashed-line"></div>

        <div class="section">
          <div class="item-row">
            <div>Subtotal:</div>
            <div>R$ ${n.total_amount.toFixed(2)}</div>
          </div>
          ${n.discount_amount&&n.discount_amount>0?`
            <div class="item-row" style="color: #666;">
              <div>Desconto:</div>
              <div>-R$ ${n.discount_amount.toFixed(2)}</div>
            </div>
          `:""}
          <div class="total-row">
            <div>TOTAL PAGO:</div>
            <div>R$ ${l.toFixed(2)}</div>
          </div>
        </div>

        <div class="dashed-line"></div>

        <div class="section">
          <div class="section-title">INFORMAES DE PAGAMENTO</div>
          <div>Forma de Pagamento: ${f(i)}</div>
          <div>Valor Pago: R$ ${l.toFixed(2)}</div>
          ${u?`<div>Ref. Transao: ${u}</div>`:""}
          <div>Status: PAGO </div>
        </div>

        ${n.notes?`
          <div class="dashed-line"></div>
          <div class="section">
            <div class="section-title">OBSERVAES DO PEDIDO</div>
            <div>${n.notes}</div>
          </div>
        `:""}

        ${n.customer_notes?`
          <div class="dashed-line"></div>
          <div class="section">
            <div class="section-title">OBSERVAES DO CLIENTE</div>
            <div>${n.customer_notes}</div>
          </div>
        `:""}

        <div class="payment-status">
          <div> PAGAMENTO APROVADO </div>
          <div style="margin-top: 5px; font-size: 10px;">
            Transao processada com sucesso
          </div>
        </div>

        <div class="footer">
          <div>Obrigado pela preferncia!</div>
          <div>Volte sempre!</div>
          <div style="margin-top: 10px;">
            ${n.customer_name?`Pontos acumulados: +${Math.floor(n.final_amount/10)}`:"Cadastre-se e ganhe pontos!"}
          </div>
          <div style="margin-top: 10px;">
            ID: ${n.id.substring(0,8).toUpperCase()}
          </div>
        </div>
      </body>
      </html>
    `};return s.jsxs("div",{className:"payment-receipt",children:[s.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 max-w-sm mx-auto font-mono text-sm",children:[s.jsxs("div",{className:"text-center border-b-2 border-black pb-3 mb-4",children:[s.jsx("div",{className:"font-bold text-lg",children:"CLUBE SOCIAL"}),s.jsx("div",{className:"text-xs text-gray-600",children:"Bar & Restaurante"}),s.jsx("div",{className:"text-xs text-gray-600",children:"CNPJ: 12.345.678/0001-90"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"COMPROVANTE DE PAGAMENTO"}),s.jsxs("div",{children:["Pedido: #",n.order_number.toString().padStart(4,"0")]}),s.jsxs("div",{children:["Data Pedido: ",new Date(n.created_at).toLocaleDateString("pt-BR")]}),s.jsxs("div",{children:["Hora Pedido: ",new Date(n.created_at).toLocaleTimeString("pt-BR")]}),s.jsxs("div",{children:["Data Pagto: ",h.toLocaleDateString("pt-BR")]}),s.jsxs("div",{children:["Hora Pagto: ",h.toLocaleTimeString("pt-BR")]}),s.jsxs("div",{children:["Atendente: ",n.employee_name||"N/A"]}),s.jsxs("div",{children:["Caixa: ",c]}),n.customer_name&&s.jsxs("div",{children:["Cliente: ",n.customer_name]}),n.customer_phone&&s.jsxs("div",{children:["Telefone: ",n.customer_phone]})]}),s.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[s.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"ITENS VENDIDOS"}),((y=n.items)==null?void 0:y.map((b,w)=>{var _;return s.jsxs("div",{className:"mb-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"flex-1",children:((_=b.menu_item)==null?void 0:_.name)||"Item"}),s.jsxs("span",{className:"w-8 text-center",children:[b.quantity,"x"]}),s.jsxs("span",{className:"w-16 text-right",children:["R$ ",(b.unit_price*b.quantity).toFixed(2)]})]}),b.notes&&s.jsxs("div",{className:"text-xs text-gray-600 ml-2",children:["Obs: ",b.notes]})]},w)}))||s.jsx("div",{className:"text-gray-500 text-center py-2",children:"Nenhum item encontrado"})]}),s.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["R$ ",n.total_amount.toFixed(2)]})]}),n.discount_amount&&n.discount_amount>0&&s.jsxs("div",{className:"flex justify-between mb-1 text-gray-600",children:[s.jsx("span",{children:"Desconto:"}),s.jsxs("span",{children:["-R$ ",n.discount_amount.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between font-bold border-t border-black pt-2",children:[s.jsx("span",{children:"TOTAL PAGO:"}),s.jsxs("span",{children:["R$ ",l.toFixed(2)]})]})]}),s.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[s.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"INFORMAES DE PAGAMENTO"}),s.jsxs("div",{children:["Forma: ",f(i)]}),s.jsxs("div",{children:["Valor Pago: ",Ce(l)]}),u&&s.jsxs("div",{children:["Ref.: ",u]}),s.jsx("div",{children:"Status: PAGO "})]}),n.notes&&s.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[s.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"OBSERVAES DO PEDIDO"}),s.jsx("div",{children:n.notes})]}),n.customer_notes&&s.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[s.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"OBSERVAES DO CLIENTE"}),s.jsx("div",{children:n.customer_notes})]}),s.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 p-3 text-center font-bold mb-4",children:[s.jsx("div",{children:" PAGAMENTO APROVADO "}),s.jsx("div",{className:"text-xs mt-1",children:"Transao processada com sucesso"})]}),s.jsxs("div",{className:"text-center border-t-2 border-black pt-3 text-xs",children:[s.jsx("div",{children:"Obrigado pela preferncia!"}),s.jsx("div",{children:"Volte sempre!"}),s.jsx("div",{className:"mt-2",children:n.customer_name?`Pontos acumulados: +${Math.floor(n.final_amount/10)}`:"Cadastre-se e ganhe pontos!"}),s.jsxs("div",{className:"mt-2",children:["ID: ",n.id.substring(0,8).toUpperCase()]})]})]}),s.jsx("div",{className:"text-center mt-4",children:s.jsx("button",{onClick:p,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Imprimir Comprovante"})})]})},BO=({comandas:e,onPayComanda:t,disabled:n=!1})=>{const i=c=>{const u=new Date,h=new Date(c),f=Math.floor((u.getTime()-h.getTime())/(1e3*60));if(f<60)return`${f}min`;const p=Math.floor(f/60),g=f%60;return`${p}h ${g}min`},l=c=>{const u=Math.floor((new Date().getTime()-new Date(c).getTime())/6e4);return u>120?"text-red-600 bg-red-50":u>60?"text-orange-600 bg-orange-50":"text-green-600 bg-green-50"};return e.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Kc,{className:"h-6 w-6 text-green-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Comandas Pendentes de Pagamento"})]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Kc,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Todas as comandas foram pagas!"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"No h comandas aguardando pagamento no momento."})]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Lt,{className:"h-6 w-6 text-orange-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Comandas Pendentes de Pagamento"}),s.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:e.length})]}),n&&s.jsxs("div",{className:"flex items-center space-x-2 text-amber-600",children:[s.jsx(Xc,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Abra o caixa para processar pagamentos"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(c=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"flex items-center space-x-2",children:c.table?s.jsxs(s.Fragment,{children:[s.jsx(il,{className:"h-4 w-4 text-gray-600"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Mesa ",c.table.number]})]}):s.jsxs(s.Fragment,{children:[s.jsx(wi,{className:"h-4 w-4 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Balco"})]})}),s.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(c.opened_at)}`,children:i(c.opened_at)})]}),c.customer_name&&s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(ia,{className:"h-4 w-4 text-gray-600"}),s.jsx("span",{className:"text-sm text-gray-700",children:c.customer_name}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",c.people_count," pessoas)"]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(Jn,{className:"h-4 w-4 text-gray-600"}),s.jsx("span",{className:"text-sm text-gray-700",children:new Date(c.opened_at).toLocaleString("pt-BR")})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[c.items.length," ",c.items.length===1?"item":"itens"]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ce(c.total)}),s.jsx("p",{className:"text-xs text-gray-600",children:"Total da comanda"})]}),s.jsx("button",{onClick:()=>t(c),disabled:n,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Receber"})]})]},c.id))})]})},$O=()=>{const{user:e}=Kt(),t=Wn(),{currentSession:n,pendingComandas:i,todaysSummary:l,todaysTransactions:c,loading:u,error:h,openCashSession:f,closeCashSession:p,processComandaPayment:g,processCashWithdrawal:y,processTreasuryTransfer:b}=i0(),{pendingOrders:w,processPayment:_}=pd(),[N,T]=v.useState(!1),[R,S]=v.useState(!1),[k,E]=v.useState(!1),[j,M]=v.useState(!1),[z,U]=v.useState(!1),[I,V]=v.useState(!1),[Q,K]=v.useState(!1),[ie,pe]=v.useState(!1),[L,O]=v.useState(null),[P,$]=v.useState("dinheiro"),[Y,A]=v.useState(!1),[F,B]=v.useState(null),[W,se]=v.useState(null),[fe,ge]=v.useState(null),[oe,me]=v.useState(!0),[Ne,Be]=v.useState(!1),[je,De]=v.useState(0),St=async Z=>{if(!n){alert(" necessrio ter uma sesso de caixa aberta para processar pagamentos.");return}O(Z),E(!0)},ds=async Z=>{if(!n){alert(" necessrio ter uma sesso de caixa aberta para processar pagamentos.");return}try{A(!0),await g({comanda_id:Z.id,payment_method:Z.payment_method||"dinheiro",amount:Z.total}),console.log(" Pagamento da comanda processado com sucesso")}catch(xe){console.error(" Erro ao processar pagamento da comanda:",xe),alert("Erro ao processar pagamento da comanda")}finally{A(!1)}},Ra=async()=>{if(!(!L||!n)){A(!0);try{await _({order_id:L.id,payment_method:P,cash_session_id:n.id,amount_paid:L.final_amount}),B({order:L,paymentMethod:P,amountPaid:L.final_amount,cashierName:(e==null?void 0:e.name)||(e==null?void 0:e.email)||"Operador de Caixa",timestamp:new Date}),E(!1),M(!0),O(null)}catch(Z){console.error("Erro ao processar pagamento:",Z),alert("Erro ao processar pagamento. Tente novamente.")}finally{A(!1)}}},la=()=>{M(!1),B(null)},Tt=async Z=>{try{const xe=await y(Z);ge({withdrawalId:xe,amount:Z.amount,reason:Z.reason,authorizedBy:Z.authorized_by,recipient:Z.recipient,purpose:Z.purpose,cashierName:(e==null?void 0:e.name)||(e==null?void 0:e.email)||"Operador de Caixa",timestamp:new Date,sessionId:(n==null?void 0:n.id)||""}),U(!1),pe(!0)}catch(xe){console.error("Erro ao processar sada de dinheiro:",xe),alert("Erro ao processar sada de dinheiro. Tente novamente.")}},er=async Z=>{try{const xe=await b(Z);se({transferId:xe,amount:Z.amount,transferDate:Z.transfer_date,authorizedBy:Z.authorized_by,treasuryReceiptNumber:Z.treasury_receipt_number,notes:Z.notes,cashierName:(e==null?void 0:e.name)||(e==null?void 0:e.email)||"Operador de Caixa",timestamp:new Date,sessionId:(n==null?void 0:n.id)||""}),V(!1),K(!0)}catch(xe){console.error("Erro ao processar transferncia:",xe),alert("Erro ao processar transferncia. Tente novamente.")}},ca=()=>{U(!0)},H=()=>{console.log("Exportando relatrio...")},ee=()=>{K(!1),se(null)},ce=()=>{pe(!1),ge(null)};v.useEffect(()=>{const Z=w.length;if(Z>je&&je>0){Be(!0),me(!0);const xe=setTimeout(()=>{Be(!1)},1e4);return()=>clearTimeout(xe)}De(Z)},[w.length,je]);const be=()=>{me(!1),Be(!1);const Z=document.getElementById("pending-orders-section");Z&&Z.scrollIntoView({behavior:"smooth"})},ye=()=>{me(!1),Be(!1)};return u?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):h?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Fs,{className:"h-6 w-6 text-red-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Erro no Sistema"}),s.jsx("p",{className:"text-red-600",children:h})]})]})})}):s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gesto de Caixa"}),s.jsx("p",{className:"text-gray-600 mt-1",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:()=>t("/cash/movement"),className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Bw,{className:"h-5 w-5"}),s.jsx("span",{children:"Movimento"})]}),n?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>V(!0),className:"bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 flex items-center space-x-2 transition-colors",children:[s.jsx(Yc,{className:"h-5 w-5"}),s.jsx("span",{children:"Transferncia"})]}),s.jsxs("button",{onClick:()=>S(!0),className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 flex items-center space-x-2 transition-colors",children:[s.jsx(qt,{className:"h-5 w-5"}),s.jsx("span",{children:"Fechar Caixa"})]})]}):s.jsxs("button",{onClick:()=>T(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors",children:[s.jsx(vs,{className:"h-5 w-5"}),s.jsx("span",{children:"Abrir Caixa"})]})]})]}),n?s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(qt,{className:"h-8 w-8 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Caixa Aberto"}),s.jsxs("p",{className:"text-green-600",children:["Aberto s ",new Date(n.opened_at).toLocaleTimeString("pt-BR")]}),s.jsxs("p",{className:"text-sm text-green-600",children:["Valor inicial: ",Ce(n.opening_amount)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-bold text-green-800",children:Ce(n.expected_amount)}),s.jsx("p",{className:"text-sm text-green-600",children:"Valor esperado"})]})]})}):s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:s.jsx(Fs,{className:"h-8 w-8 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Caixa Fechado"}),s.jsx("p",{className:"text-yellow-600",children:" necessrio abrir o caixa para processar pagamentos"})]})]})}),w.length>0&&oe&&s.jsx("div",{className:`mb-8 transition-all duration-300 ${Ne?"animate-pulse":""}`,children:s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-2 border-orange-300 rounded-lg p-6 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`p-3 rounded-full ${Ne?"bg-red-200 animate-bounce":"bg-orange-100"}`,children:s.jsxs("div",{className:"relative",children:[s.jsx(Ym,{className:`h-8 w-8 ${Ne?"text-red-600":"text-orange-600"}`}),w.length>0&&s.jsx("div",{className:`absolute -top-2 -right-2 h-6 w-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${Ne?"bg-red-500 animate-ping":"bg-orange-500"}`,children:w.length})]})}),s.jsxs("div",{children:[s.jsxs("h3",{className:`text-xl font-bold flex items-center space-x-2 ${Ne?"text-red-800":"text-orange-800"}`,children:[s.jsx("span",{children:"Pedidos Aguardando Pagamento"}),Ne&&s.jsx(Kf,{className:"h-5 w-5 text-red-600 animate-bounce"})]}),s.jsxs("p",{className:`${Ne?"text-red-600":"text-orange-600"} font-medium`,children:[w.length," ",w.length===1?"pedido pendente":"pedidos pendentes"]}),s.jsx("div",{className:"mt-2 text-sm text-gray-700",children:s.jsxs("p",{children:["Valor total: ",s.jsx("span",{className:"font-semibold text-green-600",children:Ce(w.reduce((Z,xe)=>Z+xe.final_amount,0))})]})})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:be,className:`px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200 ${Ne?"bg-red-600 hover:bg-red-700 text-white shadow-lg transform hover:scale-105":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:[s.jsx(_i,{className:"h-5 w-5"}),s.jsx("span",{children:"Ver Pedidos"})]}),s.jsx("button",{onClick:ye,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",title:"Dispensar alerta","aria-label":"Dispensar alerta",children:s.jsx(rt,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-orange-200",children:[s.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-3",children:"Pedidos mais recentes:"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:w.slice(0,3).map(Z=>s.jsxs("div",{className:"bg-white rounded-lg p-3 border border-orange-200 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("span",{className:"font-bold text-gray-900",children:["#",Z.order_number.toString().padStart(4,"0")]}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(Z.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),Z.customer_name&&s.jsx("p",{className:"text-sm text-gray-700 mb-1 truncate",children:Z.customer_name}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[(Z.items||[]).length," ",(Z.items||[]).length===1?"item":"itens"]}),s.jsx("span",{className:"font-bold text-green-600",children:Ce(Z.final_amount)})]})]},Z.id))}),w.length>3&&s.jsxs("p",{className:"text-sm text-orange-600 mt-3 text-center",children:["+",w.length-3," pedidos adicionais aguardando pagamento"]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(fi,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vendas Hoje"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ce(l.total_sales)})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:s.jsx(IA,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transaes"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_transactions})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(Pw,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ticket Mdio"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ce(l.avg_ticket)})]})]})}),s.jsx("div",{className:`bg-white rounded-lg shadow p-6 relative ${i.length>0?"ring-2 ring-orange-300":""}`,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`p-3 rounded-full ${i.length>0,"bg-orange-100"}`,children:s.jsx(Lt,{className:`h-6 w-6 ${i.length>0,"text-orange-600"}`})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Comandas Pendentes"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),i.length>0&&s.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 bg-orange-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold animate-pulse",children:"!"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vendas por Mtodo de Pagamento"}),s.jsx("div",{className:"space-y-4",children:l.by_payment_method.map(Z=>{const xe=Z.payment_method==="dinheiro"?nA:Z.payment_method==="pix"?Fw:wi;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(xe,{className:"h-5 w-5 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:gd[Z.payment_method]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Ce(Z.amount)}),s.jsxs("p",{className:"text-xs text-gray-600",children:[Z.percentage.toFixed(1),"%"]})]})]},Z.payment_method)})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance por Funcionrio"}),s.jsx("div",{className:"space-y-4",children:l.by_employee.map(Z=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:s.jsx(ia,{className:"h-4 w-4 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:Z.employee_name}),s.jsxs("p",{className:"text-xs text-gray-600",children:[Z.transaction_count," transaes"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Ce(Z.total_sales)}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Mdia: ",Ce(Z.avg_ticket)]})]})]},Z.employee_id))})]})]}),s.jsx(zO,{transactions:c,onAddWithdrawal:ca,onExportReport:H}),s.jsx("div",{className:"mb-8",children:s.jsx(BO,{comandas:i,onPayComanda:ds,disabled:!n||Y})}),s.jsxs("div",{id:"pending-orders-section",className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Wo,{className:"h-6 w-6 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pedidos de Balco Aguardando Pagamento"}),s.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:w.length})]}),w.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Wo,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Todos os pedidos foram pagos!"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"No h pedidos de balco aguardando pagamento."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(Z=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["#",Z.order_number.toString().padStart(4,"0")]}),s.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded-full",children:"Aguardando Pagamento"})]}),s.jsx("span",{className:"text-sm text-gray-500",children:new Date(Z.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),Z.customer_name&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:Z.customer_name}),Z.customer_phone&&s.jsx("p",{className:"text-xs text-gray-600",children:Z.customer_phone})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1",children:[(Z.items||[]).length," ",(Z.items||[]).length===1?"item":"itens"]}),s.jsxs("div",{className:"space-y-1",children:[(Z.items||[]).slice(0,3).map((xe,Ee)=>{var ze;return s.jsxs("p",{className:"text-xs text-gray-600",children:[xe.quantity,"x ",((ze=xe.menu_item)==null?void 0:ze.name)||"Item"]},Ee)}),(Z.items||[]).length>3&&s.jsxs("p",{className:"text-xs text-gray-500 italic",children:["+",(Z.items||[]).length-3," mais..."]})]})]}),Z.customer_notes&&s.jsx("div",{className:"mb-3 p-2 bg-yellow-50 rounded border",children:s.jsx("p",{className:"text-xs text-yellow-800",children:Z.customer_notes})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-lg font-bold text-green-600",children:Ce(Z.final_amount)}),s.jsx("button",{onClick:()=>St(Z),disabled:!n,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Receber Pagamento"})]})]},Z.id))})]}),s.jsx(AO,{isOpen:N,onClose:()=>T(!1),onOpenCash:f}),n&&s.jsx(kO,{isOpen:R,onClose:()=>S(!1),session:n,onCloseCash:p}),k&&L&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-h-screen overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Receber Pagamento - #",L.order_number.toString().padStart(4,"0")]}),s.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Fechar modal",children:s.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Resumo do Pedido"}),L.customer_name&&s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Cliente: ",L.customer_name]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[(L.items||[]).map((Z,xe)=>{var Ee;return s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[Z.quantity,"x ",(Ee=Z.menu_item)==null?void 0:Ee.name]}),s.jsx("span",{children:Ce(Z.unit_price*Z.quantity)})]},xe)}),(L.discount_amount||0)>0&&s.jsxs("div",{className:"flex justify-between text-green-600 border-t pt-1",children:[s.jsx("span",{children:"Desconto:"}),s.jsxs("span",{children:["-",Ce(L.discount_amount||0)]})]}),s.jsxs("div",{className:"border-t pt-2 flex justify-between font-medium",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:Ce(L.final_amount)})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pagamento"}),s.jsxs("select",{value:P,onChange:Z=>$(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Mtodo de pagamento",children:[s.jsx("option",{value:"dinheiro",children:"Dinheiro"}),s.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),s.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),s.jsx("option",{value:"pix",children:"PIX"}),s.jsx("option",{value:"transferencia",children:"Transferncia"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>E(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:Ra,disabled:Y||!n,className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:Y?"Processando...":"Processar e Imprimir"})]})]})}),j&&F&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 sticky top-0 bg-white pb-4 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pagamento Processado!"})]}),s.jsx("button",{onClick:la,className:"text-gray-400 hover:text-gray-600",title:"Fechar modal de comprovante","aria-label":"Fechar modal de comprovante",children:s.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"mb-6 text-center",children:[s.jsxs("p",{className:"text-gray-600 mb-2",children:["Pagamento de #",F.order.order_number.toString().padStart(4,"0")," processado com sucesso!"]}),s.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Comprovante de pagamento gerado"})]}),s.jsx("div",{className:"mb-6",children:s.jsx(LO,{receiptData:F,onPrint:la})}),s.jsxs("div",{className:"flex space-x-3 sticky bottom-0 bg-white pt-4 border-t",children:[s.jsx("button",{onClick:la,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Fechar"}),s.jsxs("button",{onClick:()=>{console.log("Reimprimindo comprovante de pagamento...")},className:"flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),s.jsx("span",{children:"Reimprimir"})]})]})]})}),s.jsx(MO,{isOpen:z,onClose:()=>U(!1),onProcessWithdrawal:Tt,currentCashBalance:(n==null?void 0:n.expected_amount)||0,loading:Y}),s.jsx(OO,{isOpen:I,onClose:()=>V(!1),onProcessTransfer:er,currentCashBalance:(n==null?void 0:n.expected_amount)||0,loading:Y}),Q&&W&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transferncia Processada!"})]}),s.jsx("button",{onClick:ee,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Fechar modal de comprovante","aria-label":"Fechar modal de comprovante",children:s.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("p",{className:"text-gray-600 mb-4 text-center",children:"Transferncia para tesouraria processada com sucesso!"}),s.jsx("p",{className:"text-sm text-green-600 font-medium text-center mb-4",children:"Comprovante de transferncia gerado"}),s.jsx(DO,{receiptData:W,onPrint:ee})]}),s.jsx("div",{className:"flex space-x-3 p-6 pt-0 border-t border-gray-200",children:s.jsx("button",{onClick:ee,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Fechar"})})]})}),ie&&fe&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sada de Dinheiro Processada!"})]}),s.jsx("button",{onClick:ce,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Fechar modal de comprovante","aria-label":"Fechar modal de comprovante",children:s.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("p",{className:"text-gray-600 mb-4 text-center",children:"Sada de dinheiro processada com sucesso!"}),s.jsx("p",{className:"text-sm text-orange-600 font-medium text-center mb-4",children:"Comprovante gerado para assinatura"}),s.jsx(PO,{receiptData:fe,onPrint:ce})]}),s.jsx("div",{className:"flex space-x-3 p-6 pt-0 border-t border-gray-200",children:s.jsx("button",{onClick:ce,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Fechar"})})]})}),w.length>0&&!oe&&s.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:s.jsxs("button",{onClick:be,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-full p-4 shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-200 flex items-center space-x-2 animate-bounce",title:`${w.length} pedidos aguardando pagamento`,children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ym,{className:"h-6 w-6"}),s.jsx("div",{className:"absolute -top-2 -right-2 h-5 w-5 bg-white rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-orange-600 text-xs font-bold",children:w.length})})]}),s.jsx("span",{className:"hidden sm:block font-medium",children:"Pedidos Pendentes"})]})})]})},VO=()=>s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Relatrios de Caixa"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Anlise detalhada das operaes financeiras"})]}),s.jsxs("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx(zw,{className:"h-5 w-5"}),s.jsx("span",{children:"Exportar"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtros"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perodo"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{children:"Hoje"}),s.jsx("option",{children:"Esta Semana"}),s.jsx("option",{children:"Este Ms"}),s.jsx("option",{children:"Personalizado"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionrio"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{children:"Todos"}),s.jsx("option",{children:"Joo Silva"}),s.jsx("option",{children:"Maria Santos"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pagamento"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{children:"Todos"}),s.jsx("option",{children:"Dinheiro"}),s.jsx("option",{children:"Carto"}),s.jsx("option",{children:"PIX"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Aplicar Filtros"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx(fi,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vendas Totais"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"R$ 12.450,00"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(Pw,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transaes"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"247"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:s.jsx(Jn,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Sesses"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"8"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:s.jsx(fi,{className:"h-6 w-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ticket Mdio"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"R$ 50,40"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vendas por Dia"}),s.jsx("div",{className:"h-64 bg-gray-100 rounded flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"Grfico de vendas dirias (a implementar)"})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mtodos de Pagamento"}),s.jsx("div",{className:"h-64 bg-gray-100 rounded flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"Grfico de pizza (a implementar)"})})]})]})]}),UO=()=>s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsx("div",{className:"flex justify-between items-center mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Histrico de Transaes"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Todas as transaes registradas no sistema"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente, valor, mtodo...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[s.jsx($w,{className:"h-4 w-4"}),s.jsx("span",{children:"Filtros"})]}),s.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[s.jsx(Jn,{className:"h-4 w-4"}),s.jsx("span",{children:"Perodo"})]}),s.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[s.jsx(eA,{className:"h-4 w-4"}),s.jsx("span",{children:"Ordenar"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Hora"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mtodo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"08/09/2025 14:30"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Venda"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Maria Silva"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"PIX"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"R$ 45,80"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Joo Santos"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Concluda"})})]}),s.jsx("tr",{children:s.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[s.jsx("p",{children:"Carregando transaes..."}),s.jsx("p",{className:"text-sm mt-1",children:"A integrao com dados reais ser implementada"})]})})]})]})}),s.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Anterior"}),s.jsx("button",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Prximo"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",s.jsx("span",{className:"font-medium",children:"1"})," at ",s.jsx("span",{className:"font-medium",children:"10"})," de"," ",s.jsx("span",{className:"font-medium",children:"247"})," resultados"]})}),s.jsx("div",{children:s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[s.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Anterior"}),s.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:"1"}),s.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-blue-600 text-sm font-medium text-white",children:"2"}),s.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:"3"}),s.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Prximo"})]})})]})]})]})]}),qO=()=>{const{user:e}=Kt(),{currentSession:t,loading:n,error:i}=i0();return v.useEffect(()=>{console.log("CashTest: Usurio:",e),console.log("CashTest: Sesso atual:",t),console.log("CashTest: Loading:",n),console.log("CashTest: Error:",i)},[e,t,n,i]),s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Teste de Cash Management"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gray-100 rounded",children:[s.jsx("h3",{className:"font-semibold",children:"Usurio:"}),s.jsx("pre",{children:JSON.stringify(e,null,2)})]}),s.jsxs("div",{className:"p-4 bg-gray-100 rounded",children:[s.jsx("h3",{className:"font-semibold",children:"Sesso Atual:"}),s.jsx("pre",{children:JSON.stringify(t,null,2)})]}),s.jsxs("div",{className:"p-4 bg-gray-100 rounded",children:[s.jsx("h3",{className:"font-semibold",children:"Status:"}),s.jsxs("p",{children:["Loading: ",n.toString()]}),s.jsxs("p",{children:["Error: ",i||"Nenhum erro"]})]}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Recarregar Pgina"})]})]})},FO=()=>{const{getDailyCashMovement:e}=i0(),[t,n]=v.useState(new Date().toISOString().split("T")[0]),[i,l]=v.useState(null),[c,u]=v.useState(!1),[h,f]=v.useState(null),[p,g]=v.useState(!0),[y,b]=v.useState(!0),[w,_]=v.useState(!0),N=async E=>{u(!0),f(null);try{const j=await e(E);l(j)}catch(j){const M=j.message||"Erro ao carregar dados do movimento";f(M),console.error("Erro ao carregar movimento dirio:",j),l({sessions:[],transactions:[],summary:{opening_total:0,closing_total:0,sales_total:0,cash_sales:0,card_sales:0,pix_sales:0,adjustments:0,discrepancy_total:0,transaction_count:0}})}finally{u(!1)}};v.useEffect(()=>{N(t)},[t]);const T=E=>new Date(E).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),R=E=>{const j={open:{bg:"bg-green-100",text:"text-green-800",label:"Aberto"},closed:{bg:"bg-gray-100",text:"text-gray-800",label:"Fechado"},reconciled:{bg:"bg-blue-100",text:"text-blue-800",label:"Reconciliado"}},M=j[E]||j.closed;return s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${M.bg} ${M.text}`,children:M.label})},S=E=>({sale:"text-green-600",refund:"text-red-600",adjustment:"text-blue-600",tip:"text-purple-600"})[E]||"text-gray-600",k=({isVisible:E,onClick:j,title:M})=>s.jsxs("button",{onClick:j,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800",title:E?`Ocultar ${M}`:`Mostrar ${M}`,children:[E?s.jsx(Lw,{className:"h-4 w-4"}):s.jsx(_i,{className:"h-4 w-4"}),s.jsx("span",{children:E?"Ocultar":"Mostrar"})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Jn,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Movimento do Caixa"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Consulte o movimento detalhado por data"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("input",{type:"date",value:t,onChange:E=>n(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c,"aria-label":"Selecione a data"}),s.jsx("button",{onClick:()=>N(t),disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:c?"Carregando...":"Consultar"})]})]}),h&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xc,{className:"h-5 w-5 text-red-600"}),s.jsx("p",{className:"text-red-800",children:h})]})}),c&&s.jsx("div",{className:"text-center py-8",children:s.jsxs("div",{className:"inline-flex items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"text-gray-600",children:"Carregando movimento..."})]})}),i&&!c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Resumo do Dia"}),s.jsx(k,{isVisible:w,onClick:()=>_(!w),title:"resumo"})]}),w&&s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-lg inline-flex",children:s.jsx(qt,{className:"h-6 w-6 text-green-600"})}),s.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Vendas Totais"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ce(i.summary.sales_total)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg inline-flex",children:s.jsx(ia,{className:"h-6 w-6 text-blue-600"})}),s.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Sesses"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.sessions.length})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-purple-100 p-3 rounded-lg inline-flex",children:s.jsx(fi,{className:"h-6 w-6 text-purple-600"})}),s.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Transaes"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary.transaction_count})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg inline-flex",children:s.jsx(Xc,{className:"h-6 w-6 text-yellow-600"})}),s.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Discrepncias"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ce(Math.abs(i.summary.discrepancy_total))})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Por Mtodo de Pagamento"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Dinheiro"}),s.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ce(i.summary.cash_sales)})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cartes"}),s.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ce(i.summary.card_sales)})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"PIX"}),s.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ce(i.summary.pix_sales)})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ajustes"}),s.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ce(i.summary.adjustments)})]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Sesses do Dia (",i.sessions.length,")"]}),s.jsx(k,{isVisible:p,onClick:()=>g(!p),title:"sesses"})]}),p&&s.jsx("div",{className:"p-6",children:i.sessions.length===0?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhuma sesso encontrada para esta data"}):s.jsx("div",{className:"space-y-4",children:i.sessions.map(E=>{var j;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(ia,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:((j=E.employee)==null?void 0:j.name)||"Funcionrio"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Sesso #",E.id.slice(-8)]})]})]}),R(E.status)]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Abertura"}),s.jsx("p",{className:"text-lg font-bold text-green-600",children:Ce(E.opening_amount)}),s.jsx("p",{className:"text-xs text-gray-500",children:T(E.opened_at)})]}),E.closed_at&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Fechamento"}),s.jsx("p",{className:"text-lg font-bold text-red-600",children:Ce(E.closing_amount||0)}),s.jsx("p",{className:"text-xs text-gray-500",children:T(E.closed_at)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Esperado"}),s.jsx("p",{className:"text-lg font-bold text-blue-600",children:Ce(E.expected_amount)})]}),E.cash_discrepancy!==null&&E.cash_discrepancy!==void 0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Discrepncia"}),s.jsx("p",{className:`text-lg font-bold ${E.cash_discrepancy>=0?"text-green-600":"text-red-600"}`,children:Ce(E.cash_discrepancy)})]})]}),(E.opening_notes||E.closing_notes)&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[E.opening_notes&&s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("strong",{children:"Obs. Abertura:"})," ",E.opening_notes]}),E.closing_notes&&s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("strong",{children:"Obs. Fechamento:"})," ",E.closing_notes]})]})]},E.id)})})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Transaes do Dia (",i.transactions.length,")"]}),s.jsx(k,{isVisible:y,onClick:()=>b(!y),title:"transaes"})]}),y&&s.jsx("div",{className:"p-6",children:i.transactions.length===0?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhuma transao encontrada para esta data"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Horrio"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Tipo"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Mtodo"}),s.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"Valor"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Cliente/Obs"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Funcionrio"})]})}),s.jsx("tbody",{children:i.transactions.map(E=>{var j;return s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[s.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:T(E.processed_at)}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("span",{className:`text-sm font-medium ${S(E.transaction_type)}`,children:h1[E.transaction_type]||E.transaction_type})}),s.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:gd[E.payment_method]||E.payment_method}),s.jsx("td",{className:`py-3 px-4 text-right text-sm font-medium ${E.amount>=0?"text-green-600":"text-red-600"}`,children:Ce(E.amount)}),s.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:E.customer_name||E.notes||"-"}),s.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:((j=E.processed_by_employee)==null?void 0:j.name)||"Funcionrio"})]},E.id)})})]})})})]})]})]})},HO=()=>s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs(Ev,{children:[s.jsx(yt,{path:"/",element:s.jsx($O,{})}),s.jsx(yt,{path:"/reports",element:s.jsx(VO,{})}),s.jsx(yt,{path:"/transactions",element:s.jsx(UO,{})}),s.jsx(yt,{path:"/movement",element:s.jsx(FO,{})}),s.jsx(yt,{path:"/test",element:s.jsx(qO,{})})]})}),IO=()=>{const{user:e}=Kt();return e?s.jsxs(hC,{children:[s.jsx(jk,{})," "]}):s.jsx(rf,{to:"/login",replace:!0})},GO=()=>{const{user:e}=Kt();return e?s.jsx(rf,{to:"/",replace:!0}):s.jsx(yk,{})};function YO(){return s.jsx(W2,{children:s.jsx(dC,{children:s.jsxs(Ev,{children:[s.jsx(yt,{path:"/login",element:s.jsx(GO,{})}),s.jsxs(yt,{element:s.jsx(IO,{}),children:[s.jsx(yt,{index:!0,element:s.jsx(r5,{})}),s.jsx(yt,{path:"bar",element:s.jsx(l5,{})}),s.jsx(yt,{path:"bar-customers",element:s.jsx(c5,{})}),s.jsx(yt,{path:"bar-employees",element:s.jsx(u5,{})}),s.jsx(yt,{path:"cash/*",element:s.jsx(HO,{})}),s.jsx(yt,{path:"kitchen",element:s.jsx(R5,{})}),s.jsx(yt,{path:"inventory",element:s.jsx(L5,{})}),s.jsx(yt,{path:"inventory/estoque-baixo",element:s.jsx($5,{})}),s.jsx(yt,{path:"inventory/atualizacao-massiva",element:s.jsx(V5,{})}),s.jsx(yt,{path:"members",element:s.jsx(F5,{})}),s.jsx(yt,{path:"bar/attendance",element:s.jsx(EO,{})}),s.jsx(yt,{path:"settings",element:s.jsx("div",{className:"p-6",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Configuraes (Em Desenvolvimento)"})})})]}),s.jsx(yt,{path:"*",element:s.jsx(rf,{to:"/",replace:!0})})]})})})}PN.createRoot(document.getElementById("root")).render(s.jsx(v.StrictMode,{children:s.jsx(YO,{})}));
