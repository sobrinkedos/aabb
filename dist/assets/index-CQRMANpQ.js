var x2=Object.defineProperty;var y2=(t,s,r)=>s in t?x2(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var Bc=(t,s,r)=>y2(t,typeof s!="symbol"?s+"":s,r);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function nj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function b2(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var s=t.default;if(typeof s=="function"){var r=function i(){return this instanceof i?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};r.prototype=s.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var l=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,l.get?l:{enumerable:!0,get:function(){return t[i]}})}),r}var Xm={exports:{}},Bo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function v2(){if(wy)return Bo;wy=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function r(i,l,c){var u=null;if(c!==void 0&&(u=""+c),l.key!==void 0&&(u=""+l.key),"key"in l){c={};for(var m in l)m!=="key"&&(c[m]=l[m])}else c=l;return l=c.ref,{$$typeof:t,type:i,key:u,ref:l!==void 0?l:null,props:c}}return Bo.Fragment=s,Bo.jsx=r,Bo.jsxs=r,Bo}var Ny;function j2(){return Ny||(Ny=1,Xm.exports=v2()),Xm.exports}var e=j2(),Wm={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function w2(){if(_y)return Ie;_y=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,j={};function C(D,q,U){this.props=D,this.context=q,this.refs=j,this.updater=U||N}C.prototype.isReactComponent={},C.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},C.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function M(){}M.prototype=C.prototype;function S(D,q,U){this.props=D,this.context=q,this.refs=j,this.updater=U||N}var A=S.prototype=new M;A.constructor=S,_(A,C.prototype),A.isPureReactComponent=!0;var E=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function L(D,q,U,Z,ie,he){return U=he.ref,{$$typeof:t,type:D,key:q,ref:U!==void 0?U:null,props:he}}function V(D,q){return L(D.type,q,void 0,void 0,void 0,D.props)}function H(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function B(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(U){return q[U]})}var K=/\/+/g;function G(D,q){return typeof D=="object"&&D!==null&&D.key!=null?B(""+D.key):q.toString(36)}function ae(){}function oe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ae,ae):(D.status="pending",D.then(function(q){D.status==="pending"&&(D.status="fulfilled",D.value=q)},function(q){D.status==="pending"&&(D.status="rejected",D.reason=q)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function $(D,q,U,Z,ie){var he=typeof D;(he==="undefined"||he==="boolean")&&(D=null);var fe=!1;if(D===null)fe=!0;else switch(he){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(D.$$typeof){case t:case s:fe=!0;break;case g:return fe=D._init,$(fe(D._payload),q,U,Z,ie)}}if(fe)return ie=ie(D),fe=Z===""?"."+G(D,0):Z,E(ie)?(U="",fe!=null&&(U=fe.replace(K,"$&/")+"/"),$(ie,q,U,"",function(ue){return ue})):ie!=null&&(H(ie)&&(ie=V(ie,U+(ie.key==null||D&&D.key===ie.key?"":(""+ie.key).replace(K,"$&/")+"/")+fe)),q.push(ie)),1;fe=0;var Ce=Z===""?".":Z+":";if(E(D))for(var we=0;we<D.length;we++)Z=D[we],he=Ce+G(Z,we),fe+=$(Z,q,U,he,ie);else if(we=v(D),typeof we=="function")for(D=we.call(D),we=0;!(Z=D.next()).done;)Z=Z.value,he=Ce+G(Z,we++),fe+=$(Z,q,U,he,ie);else if(he==="object"){if(typeof D.then=="function")return $(oe(D),q,U,Z,ie);throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return fe}function T(D,q,U){if(D==null)return D;var Z=[],ie=0;return $(D,Z,"","",function(he){return q.call(U,he,ie++)}),Z}function R(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(U){(D._status===0||D._status===-1)&&(D._status=1,D._result=U)},function(U){(D._status===0||D._status===-1)&&(D._status=2,D._result=U)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var z=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function X(){}return Ie.Children={map:T,forEach:function(D,q,U){T(D,function(){q.apply(this,arguments)},U)},count:function(D){var q=0;return T(D,function(){q++}),q},toArray:function(D){return T(D,function(q){return q})||[]},only:function(D){if(!H(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ie.Component=C,Ie.Fragment=r,Ie.Profiler=l,Ie.PureComponent=S,Ie.StrictMode=i,Ie.Suspense=h,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(D){return w.H.useMemoCache(D)}},Ie.cache=function(D){return function(){return D.apply(null,arguments)}},Ie.cloneElement=function(D,q,U){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Z=_({},D.props),ie=D.key,he=void 0;if(q!=null)for(fe in q.ref!==void 0&&(he=void 0),q.key!==void 0&&(ie=""+q.key),q)!O.call(q,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&q.ref===void 0||(Z[fe]=q[fe]);var fe=arguments.length-2;if(fe===1)Z.children=U;else if(1<fe){for(var Ce=Array(fe),we=0;we<fe;we++)Ce[we]=arguments[we+2];Z.children=Ce}return L(D.type,ie,void 0,void 0,he,Z)},Ie.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Ie.createElement=function(D,q,U){var Z,ie={},he=null;if(q!=null)for(Z in q.key!==void 0&&(he=""+q.key),q)O.call(q,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ie[Z]=q[Z]);var fe=arguments.length-2;if(fe===1)ie.children=U;else if(1<fe){for(var Ce=Array(fe),we=0;we<fe;we++)Ce[we]=arguments[we+2];ie.children=Ce}if(D&&D.defaultProps)for(Z in fe=D.defaultProps,fe)ie[Z]===void 0&&(ie[Z]=fe[Z]);return L(D,he,void 0,void 0,null,ie)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(D){return{$$typeof:m,render:D}},Ie.isValidElement=H,Ie.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:R}},Ie.memo=function(D,q){return{$$typeof:f,type:D,compare:q===void 0?null:q}},Ie.startTransition=function(D){var q=w.T,U={};w.T=U;try{var Z=D(),ie=w.S;ie!==null&&ie(U,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(X,z)}catch(he){z(he)}finally{w.T=q}},Ie.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Ie.use=function(D){return w.H.use(D)},Ie.useActionState=function(D,q,U){return w.H.useActionState(D,q,U)},Ie.useCallback=function(D,q){return w.H.useCallback(D,q)},Ie.useContext=function(D){return w.H.useContext(D)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(D,q){return w.H.useDeferredValue(D,q)},Ie.useEffect=function(D,q,U){var Z=w.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(D,q)},Ie.useId=function(){return w.H.useId()},Ie.useImperativeHandle=function(D,q,U){return w.H.useImperativeHandle(D,q,U)},Ie.useInsertionEffect=function(D,q){return w.H.useInsertionEffect(D,q)},Ie.useLayoutEffect=function(D,q){return w.H.useLayoutEffect(D,q)},Ie.useMemo=function(D,q){return w.H.useMemo(D,q)},Ie.useOptimistic=function(D,q){return w.H.useOptimistic(D,q)},Ie.useReducer=function(D,q,U){return w.H.useReducer(D,q,U)},Ie.useRef=function(D){return w.H.useRef(D)},Ie.useState=function(D){return w.H.useState(D)},Ie.useSyncExternalStore=function(D,q,U){return w.H.useSyncExternalStore(D,q,U)},Ie.useTransition=function(){return w.H.useTransition()},Ie.version="19.1.0",Ie}var Sy;function _f(){return Sy||(Sy=1,Wm.exports=w2()),Wm.exports}var b=_f();const We=nj(b);var Qm={exports:{}},Uo={},Zm={exports:{}},Jm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function N2(){return Cy||(Cy=1,function(t){function s(T,R){var z=T.length;T.push(R);e:for(;0<z;){var X=z-1>>>1,D=T[X];if(0<l(D,R))T[X]=R,T[z]=D,z=X;else break e}}function r(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var R=T[0],z=T.pop();if(z!==R){T[0]=z;e:for(var X=0,D=T.length,q=D>>>1;X<q;){var U=2*(X+1)-1,Z=T[U],ie=U+1,he=T[ie];if(0>l(Z,z))ie<D&&0>l(he,Z)?(T[X]=he,T[ie]=z,X=ie):(T[X]=Z,T[U]=z,X=U);else if(ie<D&&0>l(he,z))T[X]=he,T[ie]=z,X=ie;else break e}}return R}function l(T,R){var z=T.sortIndex-R.sortIndex;return z!==0?z:T.id-R.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,m=u.now();t.unstable_now=function(){return u.now()-m}}var h=[],f=[],g=1,y=null,v=3,N=!1,_=!1,j=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function E(T){for(var R=r(f);R!==null;){if(R.callback===null)i(f);else if(R.startTime<=T)i(f),R.sortIndex=R.expirationTime,s(h,R);else break;R=r(f)}}function w(T){if(j=!1,E(T),!_)if(r(h)!==null)_=!0,O||(O=!0,G());else{var R=r(f);R!==null&&$(w,R.startTime-T)}}var O=!1,L=-1,V=5,H=-1;function B(){return C?!0:!(t.unstable_now()-H<V)}function K(){if(C=!1,O){var T=t.unstable_now();H=T;var R=!0;try{e:{_=!1,j&&(j=!1,S(L),L=-1),N=!0;var z=v;try{t:{for(E(T),y=r(h);y!==null&&!(y.expirationTime>T&&B());){var X=y.callback;if(typeof X=="function"){y.callback=null,v=y.priorityLevel;var D=X(y.expirationTime<=T);if(T=t.unstable_now(),typeof D=="function"){y.callback=D,E(T),R=!0;break t}y===r(h)&&i(h),E(T)}else i(h);y=r(h)}if(y!==null)R=!0;else{var q=r(f);q!==null&&$(w,q.startTime-T),R=!1}}break e}finally{y=null,v=z,N=!1}R=void 0}}finally{R?G():O=!1}}}var G;if(typeof A=="function")G=function(){A(K)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,oe=ae.port2;ae.port1.onmessage=K,G=function(){oe.postMessage(null)}}else G=function(){M(K,0)};function $(T,R){L=M(function(){T(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(T){switch(v){case 1:case 2:case 3:var R=3;break;default:R=v}var z=v;v=R;try{return T()}finally{v=z}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(T,R){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var z=v;v=T;try{return R()}finally{v=z}},t.unstable_scheduleCallback=function(T,R,z){var X=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?X+z:X):z=X,T){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=z+D,T={id:g++,callback:R,priorityLevel:T,startTime:z,expirationTime:D,sortIndex:-1},z>X?(T.sortIndex=z,s(f,T),r(h)===null&&T===r(f)&&(j?(S(L),L=-1):j=!0,$(w,z-X))):(T.sortIndex=D,s(h,T),_||N||(_=!0,O||(O=!0,G()))),T},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(T){var R=v;return function(){var z=v;v=R;try{return T.apply(this,arguments)}finally{v=z}}}}(Jm)),Jm}var Ey;function _2(){return Ey||(Ey=1,Zm.exports=N2()),Zm.exports}var eh={exports:{}},as={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function S2(){if(Ty)return as;Ty=1;var t=_f();function s(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(s(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(h,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:h,containerInfo:f,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return as.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,as.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(s(299));return c(h,f,null,g)},as.flushSync=function(h){var f=u.T,g=i.p;try{if(u.T=null,i.p=2,h)return h()}finally{u.T=f,i.p=g,i.d.f()}},as.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},as.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},as.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,y=m(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,N=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:N}):g==="script"&&i.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:N,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},as.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=m(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},as.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=m(g,f.crossOrigin);i.d.L(h,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},as.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=m(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},as.requestFormReset=function(h){i.d.r(h)},as.unstable_batchedUpdates=function(h,f){return h(f)},as.useFormState=function(h,f,g){return u.H.useFormState(h,f,g)},as.useFormStatus=function(){return u.H.useHostTransitionStatus()},as.version="19.1.0",as}var ky;function C2(){if(ky)return eh.exports;ky=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),eh.exports=S2(),eh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function E2(){if(Ay)return Uo;Ay=1;var t=_2(),s=_f(),r=C2();function i(a){var n="https://react.dev/errors/"+a;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+a+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var n=a,o=a;if(a.alternate)for(;n.return;)n=n.return;else{a=n;do n=a,(n.flags&4098)!==0&&(o=n.return),a=n.return;while(a)}return n.tag===3?o:null}function u(a){if(a.tag===13){var n=a.memoizedState;if(n===null&&(a=a.alternate,a!==null&&(n=a.memoizedState)),n!==null)return n.dehydrated}return null}function m(a){if(c(a)!==a)throw Error(i(188))}function h(a){var n=a.alternate;if(!n){if(n=c(a),n===null)throw Error(i(188));return n!==a?null:a}for(var o=a,d=n;;){var p=o.return;if(p===null)break;var x=p.alternate;if(x===null){if(d=p.return,d!==null){o=d;continue}break}if(p.child===x.child){for(x=p.child;x;){if(x===o)return m(p),a;if(x===d)return m(p),n;x=x.sibling}throw Error(i(188))}if(o.return!==d.return)o=p,d=x;else{for(var k=!1,P=p.child;P;){if(P===o){k=!0,o=p,d=x;break}if(P===d){k=!0,d=p,o=x;break}P=P.sibling}if(!k){for(P=x.child;P;){if(P===o){k=!0,o=x,d=p;break}if(P===d){k=!0,d=x,o=p;break}P=P.sibling}if(!k)throw Error(i(189))}}if(o.alternate!==d)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?a:n}function f(a){var n=a.tag;if(n===5||n===26||n===27||n===6)return a;for(a=a.child;a!==null;){if(n=f(a),n!==null)return n;a=a.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),A=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function G(a){return a===null||typeof a!="object"?null:(a=K&&a[K]||a["@@iterator"],typeof a=="function"?a:null)}var ae=Symbol.for("react.client.reference");function oe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ae?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case C:return"Profiler";case j:return"StrictMode";case w:return"Suspense";case O:return"SuspenseList";case H:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case N:return"Portal";case A:return(a.displayName||"Context")+".Provider";case S:return(a._context.displayName||"Context")+".Consumer";case E:var n=a.render;return a=a.displayName,a||(a=n.displayName||n.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return n=a.displayName||null,n!==null?n:oe(a.type)||"Memo";case V:n=a._payload,a=a._init;try{return oe(a(n))}catch{}}return null}var $=Array.isArray,T=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},X=[],D=-1;function q(a){return{current:a}}function U(a){0>D||(a.current=X[D],X[D]=null,D--)}function Z(a,n){D++,X[D]=a.current,a.current=n}var ie=q(null),he=q(null),fe=q(null),Ce=q(null);function we(a,n){switch(Z(fe,n),Z(he,a),Z(ie,null),n.nodeType){case 9:case 11:a=(a=n.documentElement)&&(a=a.namespaceURI)?Wx(a):0;break;default:if(a=n.tagName,n=n.namespaceURI)n=Wx(n),a=Qx(n,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}U(ie),Z(ie,a)}function ue(){U(ie),U(he),U(fe)}function Te(a){a.memoizedState!==null&&Z(Ce,a);var n=ie.current,o=Qx(n,a.type);n!==o&&(Z(he,a),Z(ie,o))}function ye(a){he.current===a&&(U(ie),U(he)),Ce.current===a&&(U(Ce),Ro._currentValue=z)}var Ee=Object.prototype.hasOwnProperty,Oe=t.unstable_scheduleCallback,Qe=t.unstable_cancelCallback,St=t.unstable_shouldYield,Me=t.unstable_requestPaint,Ue=t.unstable_now,Ct=t.unstable_getCurrentPriorityLevel,us=t.unstable_ImmediatePriority,F=t.unstable_UserBlockingPriority,te=t.unstable_NormalPriority,le=t.unstable_LowPriority,be=t.unstable_IdlePriority,xe=t.log,pe=t.unstable_setDisableYieldValue,_e=null,Le=null;function qe(a){if(typeof xe=="function"&&pe(a),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(_e,a)}catch{}}var st=Math.clz32?Math.clz32:J,ge=Math.log,Ze=Math.LN2;function J(a){return a>>>=0,a===0?32:31-(ge(a)/Ze|0)|0}var De=256,ze=4194304;function ot(a){var n=a&42;if(n!==0)return n;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Xt(a,n,o){var d=a.pendingLanes;if(d===0)return 0;var p=0,x=a.suspendedLanes,k=a.pingedLanes;a=a.warmLanes;var P=d&134217727;return P!==0?(d=P&~x,d!==0?p=ot(d):(k&=P,k!==0?p=ot(k):o||(o=P&~a,o!==0&&(p=ot(o))))):(P=d&~x,P!==0?p=ot(P):k!==0?p=ot(k):o||(o=d&~a,o!==0&&(p=ot(o)))),p===0?0:n!==0&&n!==p&&(n&x)===0&&(x=p&-p,o=n&-n,x>=o||x===32&&(o&4194048)!==0)?n:p}function ns(a,n){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&n)===0}function aa(a,n){switch(a){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kr(){var a=De;return De<<=1,(De&4194048)===0&&(De=256),a}function Ii(){var a=ze;return ze<<=1,(ze&62914560)===0&&(ze=4194304),a}function gn(a){for(var n=[],o=0;31>o;o++)n.push(a);return n}function Ia(a,n){a.pendingLanes|=n,n!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function El(a,n,o,d,p,x){var k=a.pendingLanes;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=o,a.entangledLanes&=o,a.errorRecoveryDisabledLanes&=o,a.shellSuspendCounter=0;var P=a.entanglements,I=a.expirationTimes,se=a.hiddenUpdates;for(o=k&~o;0<o;){var ce=31-st(o),me=1<<ce;P[ce]=0,I[ce]=-1;var re=se[ce];if(re!==null)for(se[ce]=null,ce=0;ce<re.length;ce++){var ne=re[ce];ne!==null&&(ne.lane&=-536870913)}o&=~me}d!==0&&Tl(a,d,0),x!==0&&p===0&&a.tag!==0&&(a.suspendedLanes|=x&~(k&~n))}function Tl(a,n,o){a.pendingLanes|=n,a.suspendedLanes&=~n;var d=31-st(n);a.entangledLanes|=n,a.entanglements[d]=a.entanglements[d]|1073741824|o&4194090}function Bd(a,n){var o=a.entangledLanes|=n;for(a=a.entanglements;o;){var d=31-st(o),p=1<<d;p&n|a[d]&n&&(a[d]|=n),o&=~p}}function Ar(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ud(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function z0(){var a=R.p;return a!==0?a:(a=window.event,a===void 0?32:gy(a.type))}function iN(a,n){var o=R.p;try{return R.p=a,n()}finally{R.p=o}}var Fa=Math.random().toString(36).slice(2),ts="__reactFiber$"+Fa,ms="__reactProps$"+Fa,xn="__reactContainer$"+Fa,Vd="__reactEvents$"+Fa,oN="__reactListeners$"+Fa,lN="__reactHandles$"+Fa,$0="__reactResources$"+Fa,Fi="__reactMarker$"+Fa;function qd(a){delete a[ts],delete a[ms],delete a[Vd],delete a[oN],delete a[lN]}function yn(a){var n=a[ts];if(n)return n;for(var o=a.parentNode;o;){if(n=o[xn]||o[ts]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(a=ty(a);a!==null;){if(o=a[ts])return o;a=ty(a)}return n}a=o,o=a.parentNode}return null}function bn(a){if(a=a[ts]||a[xn]){var n=a.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return a}return null}function Hi(a){var n=a.tag;if(n===5||n===26||n===27||n===6)return a.stateNode;throw Error(i(33))}function vn(a){var n=a[$0];return n||(n=a[$0]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function qt(a){a[Fi]=!0}var B0=new Set,U0={};function Mr(a,n){jn(a,n),jn(a+"Capture",n)}function jn(a,n){for(U0[a]=n,a=0;a<n.length;a++)B0.add(n[a])}var cN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),V0={},q0={};function dN(a){return Ee.call(q0,a)?!0:Ee.call(V0,a)?!1:cN.test(a)?q0[a]=!0:(V0[a]=!0,!1)}function kl(a,n,o){if(dN(n))if(o===null)a.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":a.removeAttribute(n);return;case"boolean":var d=n.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(n);return}}a.setAttribute(n,""+o)}}function Al(a,n,o){if(o===null)a.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(n);return}a.setAttribute(n,""+o)}}function ya(a,n,o,d){if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttributeNS(n,o,""+d)}}var Id,I0;function wn(a){if(Id===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);Id=n&&n[1]||"",I0=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Id+a+I0}var Fd=!1;function Hd(a,n){if(!a||Fd)return"";Fd=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(n){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ne){var re=ne}Reflect.construct(a,[],me)}else{try{me.call()}catch(ne){re=ne}a.call(me.prototype)}}else{try{throw Error()}catch(ne){re=ne}(me=a())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ne){if(ne&&re&&typeof ne.stack=="string")return[ne.stack,re.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),k=x[0],P=x[1];if(k&&P){var I=k.split(`
`),se=P.split(`
`);for(p=d=0;d<I.length&&!I[d].includes("DetermineComponentFrameRoot");)d++;for(;p<se.length&&!se[p].includes("DetermineComponentFrameRoot");)p++;if(d===I.length||p===se.length)for(d=I.length-1,p=se.length-1;1<=d&&0<=p&&I[d]!==se[p];)p--;for(;1<=d&&0<=p;d--,p--)if(I[d]!==se[p]){if(d!==1||p!==1)do if(d--,p--,0>p||I[d]!==se[p]){var ce=`
`+I[d].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=d&&0<=p);break}}}finally{Fd=!1,Error.prepareStackTrace=o}return(o=a?a.displayName||a.name:"")?wn(o):""}function uN(a){switch(a.tag){case 26:case 27:case 5:return wn(a.type);case 16:return wn("Lazy");case 13:return wn("Suspense");case 19:return wn("SuspenseList");case 0:case 15:return Hd(a.type,!1);case 11:return Hd(a.type.render,!1);case 1:return Hd(a.type,!0);case 31:return wn("Activity");default:return""}}function F0(a){try{var n="";do n+=uN(a),a=a.return;while(a);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Ms(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function H0(a){var n=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function mN(a){var n=H0(a)?"checked":"value",o=Object.getOwnPropertyDescriptor(a.constructor.prototype,n),d=""+a[n];if(!a.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,x=o.set;return Object.defineProperty(a,n,{configurable:!0,get:function(){return p.call(this)},set:function(k){d=""+k,x.call(this,k)}}),Object.defineProperty(a,n,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(k){d=""+k},stopTracking:function(){a._valueTracker=null,delete a[n]}}}}function Ml(a){a._valueTracker||(a._valueTracker=mN(a))}function G0(a){if(!a)return!1;var n=a._valueTracker;if(!n)return!0;var o=n.getValue(),d="";return a&&(d=H0(a)?a.checked?"true":"false":a.value),a=d,a!==o?(n.setValue(a),!0):!1}function Dl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var hN=/[\n"\\]/g;function Ds(a){return a.replace(hN,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Gd(a,n,o,d,p,x,k,P){a.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?a.type=k:a.removeAttribute("type"),n!=null?k==="number"?(n===0&&a.value===""||a.value!=n)&&(a.value=""+Ms(n)):a.value!==""+Ms(n)&&(a.value=""+Ms(n)):k!=="submit"&&k!=="reset"||a.removeAttribute("value"),n!=null?Yd(a,k,Ms(n)):o!=null?Yd(a,k,Ms(o)):d!=null&&a.removeAttribute("value"),p==null&&x!=null&&(a.defaultChecked=!!x),p!=null&&(a.checked=p&&typeof p!="function"&&typeof p!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.name=""+Ms(P):a.removeAttribute("name")}function Y0(a,n,o,d,p,x,k,P){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),n!=null||o!=null){if(!(x!=="submit"&&x!=="reset"||n!=null))return;o=o!=null?""+Ms(o):"",n=n!=null?""+Ms(n):o,P||n===a.value||(a.value=n),a.defaultValue=n}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=P?a.checked:!!d,a.defaultChecked=!!d,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(a.name=k)}function Yd(a,n,o){n==="number"&&Dl(a.ownerDocument)===a||a.defaultValue===""+o||(a.defaultValue=""+o)}function Nn(a,n,o,d){if(a=a.options,n){n={};for(var p=0;p<o.length;p++)n["$"+o[p]]=!0;for(o=0;o<a.length;o++)p=n.hasOwnProperty("$"+a[o].value),a[o].selected!==p&&(a[o].selected=p),p&&d&&(a[o].defaultSelected=!0)}else{for(o=""+Ms(o),n=null,p=0;p<a.length;p++){if(a[p].value===o){a[p].selected=!0,d&&(a[p].defaultSelected=!0);return}n!==null||a[p].disabled||(n=a[p])}n!==null&&(n.selected=!0)}}function K0(a,n,o){if(n!=null&&(n=""+Ms(n),n!==a.value&&(a.value=n),o==null)){a.defaultValue!==n&&(a.defaultValue=n);return}a.defaultValue=o!=null?""+Ms(o):""}function X0(a,n,o,d){if(n==null){if(d!=null){if(o!=null)throw Error(i(92));if($(d)){if(1<d.length)throw Error(i(93));d=d[0]}o=d}o==null&&(o=""),n=o}o=Ms(n),a.defaultValue=o,d=a.textContent,d===o&&d!==""&&d!==null&&(a.value=d)}function _n(a,n){if(n){var o=a.firstChild;if(o&&o===a.lastChild&&o.nodeType===3){o.nodeValue=n;return}}a.textContent=n}var fN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function W0(a,n,o){var d=n.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?d?a.setProperty(n,""):n==="float"?a.cssFloat="":a[n]="":d?a.setProperty(n,o):typeof o!="number"||o===0||fN.has(n)?n==="float"?a.cssFloat=o:a[n]=(""+o).trim():a[n]=o+"px"}function Q0(a,n,o){if(n!=null&&typeof n!="object")throw Error(i(62));if(a=a.style,o!=null){for(var d in o)!o.hasOwnProperty(d)||n!=null&&n.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var p in n)d=n[p],n.hasOwnProperty(p)&&o[p]!==d&&W0(a,p,d)}else for(var x in n)n.hasOwnProperty(x)&&W0(a,x,n[x])}function Kd(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ol(a){return gN.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Xd=null;function Wd(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Sn=null,Cn=null;function Z0(a){var n=bn(a);if(n&&(a=n.stateNode)){var o=a[ms]||null;e:switch(a=n.stateNode,n.type){case"input":if(Gd(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),n=o.name,o.type==="radio"&&n!=null){for(o=a;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ds(""+n)+'"][type="radio"]'),n=0;n<o.length;n++){var d=o[n];if(d!==a&&d.form===a.form){var p=d[ms]||null;if(!p)throw Error(i(90));Gd(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<o.length;n++)d=o[n],d.form===a.form&&G0(d)}break e;case"textarea":K0(a,o.value,o.defaultValue);break e;case"select":n=o.value,n!=null&&Nn(a,!!o.multiple,n,!1)}}}var Qd=!1;function J0(a,n,o){if(Qd)return a(n,o);Qd=!0;try{var d=a(n);return d}finally{if(Qd=!1,(Sn!==null||Cn!==null)&&(yc(),Sn&&(n=Sn,a=Cn,Cn=Sn=null,Z0(n),a)))for(n=0;n<a.length;n++)Z0(a[n])}}function Gi(a,n){var o=a.stateNode;if(o===null)return null;var d=o[ms]||null;if(d===null)return null;o=d[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(o&&typeof o!="function")throw Error(i(231,n,typeof o));return o}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zd=!1;if(ba)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){Zd=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{Zd=!1}var Ha=null,Jd=null,Rl=null;function ep(){if(Rl)return Rl;var a,n=Jd,o=n.length,d,p="value"in Ha?Ha.value:Ha.textContent,x=p.length;for(a=0;a<o&&n[a]===p[a];a++);var k=o-a;for(d=1;d<=k&&n[o-d]===p[x-d];d++);return Rl=p.slice(a,1<d?1-d:void 0)}function Pl(a){var n=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&n===13&&(a=13)):a=n,a===10&&(a=13),32<=a||a===13?a:0}function Ll(){return!0}function tp(){return!1}function hs(a){function n(o,d,p,x,k){this._reactName=o,this._targetInst=p,this.type=d,this.nativeEvent=x,this.target=k,this.currentTarget=null;for(var P in a)a.hasOwnProperty(P)&&(o=a[P],this[P]=o?o(x):x[P]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ll:tp,this.isPropagationStopped=tp,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),n}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zl=hs(Dr),Ki=g({},Dr,{view:0,detail:0}),xN=hs(Ki),eu,tu,Xi,$l=g({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:au,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Xi&&(Xi&&a.type==="mousemove"?(eu=a.screenX-Xi.screenX,tu=a.screenY-Xi.screenY):tu=eu=0,Xi=a),eu)},movementY:function(a){return"movementY"in a?a.movementY:tu}}),sp=hs($l),yN=g({},$l,{dataTransfer:0}),bN=hs(yN),vN=g({},Ki,{relatedTarget:0}),su=hs(vN),jN=g({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),wN=hs(jN),NN=g({},Dr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),_N=hs(NN),SN=g({},Dr,{data:0}),ap=hs(SN),CN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kN(a){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(a):(a=TN[a])?!!n[a]:!1}function au(){return kN}var AN=g({},Ki,{key:function(a){if(a.key){var n=CN[a.key]||a.key;if(n!=="Unidentified")return n}return a.type==="keypress"?(a=Pl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?EN[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:au,charCode:function(a){return a.type==="keypress"?Pl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Pl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),MN=hs(AN),DN=g({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rp=hs(DN),ON=g({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:au}),RN=hs(ON),PN=g({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),LN=hs(PN),zN=g({},$l,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),$N=hs(zN),BN=g({},Dr,{newState:0,oldState:0}),UN=hs(BN),VN=[9,13,27,32],ru=ba&&"CompositionEvent"in window,Wi=null;ba&&"documentMode"in document&&(Wi=document.documentMode);var qN=ba&&"TextEvent"in window&&!Wi,np=ba&&(!ru||Wi&&8<Wi&&11>=Wi),ip=" ",op=!1;function lp(a,n){switch(a){case"keyup":return VN.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cp(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var En=!1;function IN(a,n){switch(a){case"compositionend":return cp(n);case"keypress":return n.which!==32?null:(op=!0,ip);case"textInput":return a=n.data,a===ip&&op?null:a;default:return null}}function FN(a,n){if(En)return a==="compositionend"||!ru&&lp(a,n)?(a=ep(),Rl=Jd=Ha=null,En=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return np&&n.locale!=="ko"?null:n.data;default:return null}}var HN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dp(a){var n=a&&a.nodeName&&a.nodeName.toLowerCase();return n==="input"?!!HN[a.type]:n==="textarea"}function up(a,n,o,d){Sn?Cn?Cn.push(d):Cn=[d]:Sn=d,n=_c(n,"onChange"),0<n.length&&(o=new zl("onChange","change",null,o,d),a.push({event:o,listeners:n}))}var Qi=null,Zi=null;function GN(a){Hx(a,0)}function Bl(a){var n=Hi(a);if(G0(n))return a}function mp(a,n){if(a==="change")return n}var hp=!1;if(ba){var nu;if(ba){var iu="oninput"in document;if(!iu){var fp=document.createElement("div");fp.setAttribute("oninput","return;"),iu=typeof fp.oninput=="function"}nu=iu}else nu=!1;hp=nu&&(!document.documentMode||9<document.documentMode)}function pp(){Qi&&(Qi.detachEvent("onpropertychange",gp),Zi=Qi=null)}function gp(a){if(a.propertyName==="value"&&Bl(Zi)){var n=[];up(n,Zi,a,Wd(a)),J0(GN,n)}}function YN(a,n,o){a==="focusin"?(pp(),Qi=n,Zi=o,Qi.attachEvent("onpropertychange",gp)):a==="focusout"&&pp()}function KN(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Bl(Zi)}function XN(a,n){if(a==="click")return Bl(n)}function WN(a,n){if(a==="input"||a==="change")return Bl(n)}function QN(a,n){return a===n&&(a!==0||1/a===1/n)||a!==a&&n!==n}var js=typeof Object.is=="function"?Object.is:QN;function Ji(a,n){if(js(a,n))return!0;if(typeof a!="object"||a===null||typeof n!="object"||n===null)return!1;var o=Object.keys(a),d=Object.keys(n);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var p=o[d];if(!Ee.call(n,p)||!js(a[p],n[p]))return!1}return!0}function xp(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function yp(a,n){var o=xp(a);a=0;for(var d;o;){if(o.nodeType===3){if(d=a+o.textContent.length,a<=n&&d>=n)return{node:o,offset:n-a};a=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=xp(o)}}function bp(a,n){return a&&n?a===n?!0:a&&a.nodeType===3?!1:n&&n.nodeType===3?bp(a,n.parentNode):"contains"in a?a.contains(n):a.compareDocumentPosition?!!(a.compareDocumentPosition(n)&16):!1:!1}function vp(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var n=Dl(a.document);n instanceof a.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)a=n.contentWindow;else break;n=Dl(a.document)}return n}function ou(a){var n=a&&a.nodeName&&a.nodeName.toLowerCase();return n&&(n==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||n==="textarea"||a.contentEditable==="true")}var ZN=ba&&"documentMode"in document&&11>=document.documentMode,Tn=null,lu=null,eo=null,cu=!1;function jp(a,n,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;cu||Tn==null||Tn!==Dl(d)||(d=Tn,"selectionStart"in d&&ou(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),eo&&Ji(eo,d)||(eo=d,d=_c(lu,"onSelect"),0<d.length&&(n=new zl("onSelect","select",null,n,o),a.push({event:n,listeners:d}),n.target=Tn)))}function Or(a,n){var o={};return o[a.toLowerCase()]=n.toLowerCase(),o["Webkit"+a]="webkit"+n,o["Moz"+a]="moz"+n,o}var kn={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},du={},wp={};ba&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete kn.animationend.animation,delete kn.animationiteration.animation,delete kn.animationstart.animation),"TransitionEvent"in window||delete kn.transitionend.transition);function Rr(a){if(du[a])return du[a];if(!kn[a])return a;var n=kn[a],o;for(o in n)if(n.hasOwnProperty(o)&&o in wp)return du[a]=n[o];return a}var Np=Rr("animationend"),_p=Rr("animationiteration"),Sp=Rr("animationstart"),JN=Rr("transitionrun"),e_=Rr("transitionstart"),t_=Rr("transitioncancel"),Cp=Rr("transitionend"),Ep=new Map,uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uu.push("scrollEnd");function Fs(a,n){Ep.set(a,n),Mr(n,[a])}var Tp=new WeakMap;function Os(a,n){if(typeof a=="object"&&a!==null){var o=Tp.get(a);return o!==void 0?o:(n={value:a,source:n,stack:F0(n)},Tp.set(a,n),n)}return{value:a,source:n,stack:F0(n)}}var Rs=[],An=0,mu=0;function Ul(){for(var a=An,n=mu=An=0;n<a;){var o=Rs[n];Rs[n++]=null;var d=Rs[n];Rs[n++]=null;var p=Rs[n];Rs[n++]=null;var x=Rs[n];if(Rs[n++]=null,d!==null&&p!==null){var k=d.pending;k===null?p.next=p:(p.next=k.next,k.next=p),d.pending=p}x!==0&&kp(o,p,x)}}function Vl(a,n,o,d){Rs[An++]=a,Rs[An++]=n,Rs[An++]=o,Rs[An++]=d,mu|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function hu(a,n,o,d){return Vl(a,n,o,d),ql(a)}function Mn(a,n){return Vl(a,null,null,n),ql(a)}function kp(a,n,o){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o);for(var p=!1,x=a.return;x!==null;)x.childLanes|=o,d=x.alternate,d!==null&&(d.childLanes|=o),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(p=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,p&&n!==null&&(p=31-st(o),a=x.hiddenUpdates,d=a[p],d===null?a[p]=[n]:d.push(n),n.lane=o|536870912),x):null}function ql(a){if(50<Co)throw Co=0,bm=null,Error(i(185));for(var n=a.return;n!==null;)a=n,n=a.return;return a.tag===3?a.stateNode:null}var Dn={};function s_(a,n,o,d){this.tag=a,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(a,n,o,d){return new s_(a,n,o,d)}function fu(a){return a=a.prototype,!(!a||!a.isReactComponent)}function va(a,n){var o=a.alternate;return o===null?(o=ws(a.tag,n,a.key,a.mode),o.elementType=a.elementType,o.type=a.type,o.stateNode=a.stateNode,o.alternate=a,a.alternate=o):(o.pendingProps=n,o.type=a.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=a.flags&65011712,o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=a.sibling,o.index=a.index,o.ref=a.ref,o.refCleanup=a.refCleanup,o}function Ap(a,n){a.flags&=65011714;var o=a.alternate;return o===null?(a.childLanes=0,a.lanes=n,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,n=o.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a}function Il(a,n,o,d,p,x){var k=0;if(d=a,typeof a=="function")fu(a)&&(k=1);else if(typeof a=="string")k=r2(a,o,ie.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case H:return a=ws(31,o,n,p),a.elementType=H,a.lanes=x,a;case _:return Pr(o.children,p,x,n);case j:k=8,p|=24;break;case C:return a=ws(12,o,n,p|2),a.elementType=C,a.lanes=x,a;case w:return a=ws(13,o,n,p),a.elementType=w,a.lanes=x,a;case O:return a=ws(19,o,n,p),a.elementType=O,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:case A:k=10;break e;case S:k=9;break e;case E:k=11;break e;case L:k=14;break e;case V:k=16,d=null;break e}k=29,o=Error(i(130,a===null?"null":typeof a,"")),d=null}return n=ws(k,o,n,p),n.elementType=a,n.type=d,n.lanes=x,n}function Pr(a,n,o,d){return a=ws(7,a,d,n),a.lanes=o,a}function pu(a,n,o){return a=ws(6,a,null,n),a.lanes=o,a}function gu(a,n,o){return n=ws(4,a.children!==null?a.children:[],a.key,n),n.lanes=o,n.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},n}var On=[],Rn=0,Fl=null,Hl=0,Ps=[],Ls=0,Lr=null,ja=1,wa="";function zr(a,n){On[Rn++]=Hl,On[Rn++]=Fl,Fl=a,Hl=n}function Mp(a,n,o){Ps[Ls++]=ja,Ps[Ls++]=wa,Ps[Ls++]=Lr,Lr=a;var d=ja;a=wa;var p=32-st(d)-1;d&=~(1<<p),o+=1;var x=32-st(n)+p;if(30<x){var k=p-p%5;x=(d&(1<<k)-1).toString(32),d>>=k,p-=k,ja=1<<32-st(n)+p|o<<p|d,wa=x+a}else ja=1<<x|o<<p|d,wa=a}function xu(a){a.return!==null&&(zr(a,1),Mp(a,1,0))}function yu(a){for(;a===Fl;)Fl=On[--Rn],On[Rn]=null,Hl=On[--Rn],On[Rn]=null;for(;a===Lr;)Lr=Ps[--Ls],Ps[Ls]=null,wa=Ps[--Ls],Ps[Ls]=null,ja=Ps[--Ls],Ps[Ls]=null}var is=null,jt=null,tt=!1,$r=null,ra=!1,bu=Error(i(519));function Br(a){var n=Error(i(418,""));throw ao(Os(n,a)),bu}function Dp(a){var n=a.stateNode,o=a.type,d=a.memoizedProps;switch(n[ts]=a,n[ms]=d,o){case"dialog":Ye("cancel",n),Ye("close",n);break;case"iframe":case"object":case"embed":Ye("load",n);break;case"video":case"audio":for(o=0;o<To.length;o++)Ye(To[o],n);break;case"source":Ye("error",n);break;case"img":case"image":case"link":Ye("error",n),Ye("load",n);break;case"details":Ye("toggle",n);break;case"input":Ye("invalid",n),Y0(n,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Ml(n);break;case"select":Ye("invalid",n);break;case"textarea":Ye("invalid",n),X0(n,d.value,d.defaultValue,d.children),Ml(n)}o=d.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||n.textContent===""+o||d.suppressHydrationWarning===!0||Xx(n.textContent,o)?(d.popover!=null&&(Ye("beforetoggle",n),Ye("toggle",n)),d.onScroll!=null&&Ye("scroll",n),d.onScrollEnd!=null&&Ye("scrollend",n),d.onClick!=null&&(n.onclick=Sc),n=!0):n=!1,n||Br(a)}function Op(a){for(is=a.return;is;)switch(is.tag){case 5:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:is=is.return}}function to(a){if(a!==is)return!1;if(!tt)return Op(a),tt=!0,!1;var n=a.tag,o;if((o=n!==3&&n!==27)&&((o=n===5)&&(o=a.type,o=!(o!=="form"&&o!=="button")||Pm(a.type,a.memoizedProps)),o=!o),o&&jt&&Br(a),Op(a),n===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));e:{for(a=a.nextSibling,n=0;a;){if(a.nodeType===8)if(o=a.data,o==="/$"){if(n===0){jt=Gs(a.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++;a=a.nextSibling}jt=null}}else n===27?(n=jt,or(a.type)?(a=Bm,Bm=null,jt=a):jt=n):jt=is?Gs(a.stateNode.nextSibling):null;return!0}function so(){jt=is=null,tt=!1}function Rp(){var a=$r;return a!==null&&(gs===null?gs=a:gs.push.apply(gs,a),$r=null),a}function ao(a){$r===null?$r=[a]:$r.push(a)}var vu=q(null),Ur=null,Na=null;function Ga(a,n,o){Z(vu,n._currentValue),n._currentValue=o}function _a(a){a._currentValue=vu.current,U(vu)}function ju(a,n,o){for(;a!==null;){var d=a.alternate;if((a.childLanes&n)!==n?(a.childLanes|=n,d!==null&&(d.childLanes|=n)):d!==null&&(d.childLanes&n)!==n&&(d.childLanes|=n),a===o)break;a=a.return}}function wu(a,n,o,d){var p=a.child;for(p!==null&&(p.return=a);p!==null;){var x=p.dependencies;if(x!==null){var k=p.child;x=x.firstContext;e:for(;x!==null;){var P=x;x=p;for(var I=0;I<n.length;I++)if(P.context===n[I]){x.lanes|=o,P=x.alternate,P!==null&&(P.lanes|=o),ju(x.return,o,a),d||(k=null);break e}x=P.next}}else if(p.tag===18){if(k=p.return,k===null)throw Error(i(341));k.lanes|=o,x=k.alternate,x!==null&&(x.lanes|=o),ju(k,o,a),k=null}else k=p.child;if(k!==null)k.return=p;else for(k=p;k!==null;){if(k===a){k=null;break}if(p=k.sibling,p!==null){p.return=k.return,k=p;break}k=k.return}p=k}}function ro(a,n,o,d){a=null;for(var p=n,x=!1;p!==null;){if(!x){if((p.flags&524288)!==0)x=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var k=p.alternate;if(k===null)throw Error(i(387));if(k=k.memoizedProps,k!==null){var P=p.type;js(p.pendingProps.value,k.value)||(a!==null?a.push(P):a=[P])}}else if(p===Ce.current){if(k=p.alternate,k===null)throw Error(i(387));k.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(a!==null?a.push(Ro):a=[Ro])}p=p.return}a!==null&&wu(n,a,o,d),n.flags|=262144}function Gl(a){for(a=a.firstContext;a!==null;){if(!js(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Vr(a){Ur=a,Na=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ss(a){return Pp(Ur,a)}function Yl(a,n){return Ur===null&&Vr(a),Pp(a,n)}function Pp(a,n){var o=n._currentValue;if(n={context:n,memoizedValue:o,next:null},Na===null){if(a===null)throw Error(i(308));Na=n,a.dependencies={lanes:0,firstContext:n},a.flags|=524288}else Na=Na.next=n;return o}var a_=typeof AbortController<"u"?AbortController:function(){var a=[],n=this.signal={aborted:!1,addEventListener:function(o,d){a.push(d)}};this.abort=function(){n.aborted=!0,a.forEach(function(o){return o()})}},r_=t.unstable_scheduleCallback,n_=t.unstable_NormalPriority,Lt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nu(){return{controller:new a_,data:new Map,refCount:0}}function no(a){a.refCount--,a.refCount===0&&r_(n_,function(){a.controller.abort()})}var io=null,_u=0,Pn=0,Ln=null;function i_(a,n){if(io===null){var o=io=[];_u=0,Pn=Cm(),Ln={status:"pending",value:void 0,then:function(d){o.push(d)}}}return _u++,n.then(Lp,Lp),n}function Lp(){if(--_u===0&&io!==null){Ln!==null&&(Ln.status="fulfilled");var a=io;io=null,Pn=0,Ln=null;for(var n=0;n<a.length;n++)(0,a[n])()}}function o_(a,n){var o=[],d={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return a.then(function(){d.status="fulfilled",d.value=n;for(var p=0;p<o.length;p++)(0,o[p])(n)},function(p){for(d.status="rejected",d.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),d}var zp=T.S;T.S=function(a,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&i_(a,n),zp!==null&&zp(a,n)};var qr=q(null);function Su(){var a=qr.current;return a!==null?a:mt.pooledCache}function Kl(a,n){n===null?Z(qr,qr.current):Z(qr,n.pool)}function $p(){var a=Su();return a===null?null:{parent:Lt._currentValue,pool:a}}var oo=Error(i(460)),Bp=Error(i(474)),Xl=Error(i(542)),Cu={then:function(){}};function Up(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Wl(){}function Vp(a,n,o){switch(o=a[o],o===void 0?a.push(n):o!==n&&(n.then(Wl,Wl),n=o),n.status){case"fulfilled":return n.value;case"rejected":throw a=n.reason,Ip(a),a;default:if(typeof n.status=="string")n.then(Wl,Wl);else{if(a=mt,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=n,a.status="pending",a.then(function(d){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=d}},function(d){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=d}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw a=n.reason,Ip(a),a}throw lo=n,oo}}var lo=null;function qp(){if(lo===null)throw Error(i(459));var a=lo;return lo=null,a}function Ip(a){if(a===oo||a===Xl)throw Error(i(483))}var Ya=!1;function Eu(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tu(a,n){a=a.updateQueue,n.updateQueue===a&&(n.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ka(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Xa(a,n,o){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(at&2)!==0){var p=d.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),d.pending=n,n=ql(a),kp(a,null,o),n}return Vl(a,d,n,o),ql(a)}function co(a,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194048)!==0)){var d=n.lanes;d&=a.pendingLanes,o|=d,n.lanes=o,Bd(a,o)}}function ku(a,n){var o=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var p=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var k={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};x===null?p=x=k:x=x.next=k,o=o.next}while(o!==null);x===null?p=x=n:x=x.next=n}else p=x=n;o={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},a.updateQueue=o;return}a=o.lastBaseUpdate,a===null?o.firstBaseUpdate=n:a.next=n,o.lastBaseUpdate=n}var Au=!1;function uo(){if(Au){var a=Ln;if(a!==null)throw a}}function mo(a,n,o,d){Au=!1;var p=a.updateQueue;Ya=!1;var x=p.firstBaseUpdate,k=p.lastBaseUpdate,P=p.shared.pending;if(P!==null){p.shared.pending=null;var I=P,se=I.next;I.next=null,k===null?x=se:k.next=se,k=I;var ce=a.alternate;ce!==null&&(ce=ce.updateQueue,P=ce.lastBaseUpdate,P!==k&&(P===null?ce.firstBaseUpdate=se:P.next=se,ce.lastBaseUpdate=I))}if(x!==null){var me=p.baseState;k=0,ce=se=I=null,P=x;do{var re=P.lane&-536870913,ne=re!==P.lane;if(ne?(Je&re)===re:(d&re)===re){re!==0&&re===Pn&&(Au=!0),ce!==null&&(ce=ce.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var $e=a,Re=P;re=n;var dt=o;switch(Re.tag){case 1:if($e=Re.payload,typeof $e=="function"){me=$e.call(dt,me,re);break e}me=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Re.payload,re=typeof $e=="function"?$e.call(dt,me,re):$e,re==null)break e;me=g({},me,re);break e;case 2:Ya=!0}}re=P.callback,re!==null&&(a.flags|=64,ne&&(a.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[re]:ne.push(re))}else ne={lane:re,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ce===null?(se=ce=ne,I=me):ce=ce.next=ne,k|=re;if(P=P.next,P===null){if(P=p.shared.pending,P===null)break;ne=P,P=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);ce===null&&(I=me),p.baseState=I,p.firstBaseUpdate=se,p.lastBaseUpdate=ce,x===null&&(p.shared.lanes=0),ar|=k,a.lanes=k,a.memoizedState=me}}function Fp(a,n){if(typeof a!="function")throw Error(i(191,a));a.call(n)}function Hp(a,n){var o=a.callbacks;if(o!==null)for(a.callbacks=null,a=0;a<o.length;a++)Fp(o[a],n)}var zn=q(null),Ql=q(0);function Gp(a,n){a=Ma,Z(Ql,a),Z(zn,n),Ma=a|n.baseLanes}function Mu(){Z(Ql,Ma),Z(zn,zn.current)}function Du(){Ma=Ql.current,U(zn),U(Ql)}var Wa=0,Fe=null,lt=null,Dt=null,Zl=!1,$n=!1,Ir=!1,Jl=0,ho=0,Bn=null,l_=0;function Et(){throw Error(i(321))}function Ou(a,n){if(n===null)return!1;for(var o=0;o<n.length&&o<a.length;o++)if(!js(a[o],n[o]))return!1;return!0}function Ru(a,n,o,d,p,x){return Wa=x,Fe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,T.H=a===null||a.memoizedState===null?kg:Ag,Ir=!1,x=o(d,p),Ir=!1,$n&&(x=Kp(n,o,d,p)),Yp(a),x}function Yp(a){T.H=nc;var n=lt!==null&&lt.next!==null;if(Wa=0,Dt=lt=Fe=null,Zl=!1,ho=0,Bn=null,n)throw Error(i(300));a===null||It||(a=a.dependencies,a!==null&&Gl(a)&&(It=!0))}function Kp(a,n,o,d){Fe=a;var p=0;do{if($n&&(Bn=null),ho=0,$n=!1,25<=p)throw Error(i(301));if(p+=1,Dt=lt=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}T.H=p_,x=n(o,d)}while($n);return x}function c_(){var a=T.H,n=a.useState()[0];return n=typeof n.then=="function"?fo(n):n,a=a.useState()[0],(lt!==null?lt.memoizedState:null)!==a&&(Fe.flags|=1024),n}function Pu(){var a=Jl!==0;return Jl=0,a}function Lu(a,n,o){n.updateQueue=a.updateQueue,n.flags&=-2053,a.lanes&=~o}function zu(a){if(Zl){for(a=a.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Zl=!1}Wa=0,Dt=lt=Fe=null,$n=!1,ho=Jl=0,Bn=null}function fs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Fe.memoizedState=Dt=a:Dt=Dt.next=a,Dt}function Ot(){if(lt===null){var a=Fe.alternate;a=a!==null?a.memoizedState:null}else a=lt.next;var n=Dt===null?Fe.memoizedState:Dt.next;if(n!==null)Dt=n,lt=a;else{if(a===null)throw Fe.alternate===null?Error(i(467)):Error(i(310));lt=a,a={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Dt===null?Fe.memoizedState=Dt=a:Dt=Dt.next=a}return Dt}function $u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fo(a){var n=ho;return ho+=1,Bn===null&&(Bn=[]),a=Vp(Bn,a,n),n=Fe,(Dt===null?n.memoizedState:Dt.next)===null&&(n=n.alternate,T.H=n===null||n.memoizedState===null?kg:Ag),a}function ec(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return fo(a);if(a.$$typeof===A)return ss(a)}throw Error(i(438,String(a)))}function Bu(a){var n=null,o=Fe.updateQueue;if(o!==null&&(n=o.memoCache),n==null){var d=Fe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(n={data:d.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),o===null&&(o=$u(),Fe.updateQueue=o),o.memoCache=n,o=n.data[n.index],o===void 0)for(o=n.data[n.index]=Array(a),d=0;d<a;d++)o[d]=B;return n.index++,o}function Sa(a,n){return typeof n=="function"?n(a):n}function tc(a){var n=Ot();return Uu(n,lt,a)}function Uu(a,n,o){var d=a.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=o;var p=a.baseQueue,x=d.pending;if(x!==null){if(p!==null){var k=p.next;p.next=x.next,x.next=k}n.baseQueue=p=x,d.pending=null}if(x=a.baseState,p===null)a.memoizedState=x;else{n=p.next;var P=k=null,I=null,se=n,ce=!1;do{var me=se.lane&-536870913;if(me!==se.lane?(Je&me)===me:(Wa&me)===me){var re=se.revertLane;if(re===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),me===Pn&&(ce=!0);else if((Wa&re)===re){se=se.next,re===Pn&&(ce=!0);continue}else me={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},I===null?(P=I=me,k=x):I=I.next=me,Fe.lanes|=re,ar|=re;me=se.action,Ir&&o(x,me),x=se.hasEagerState?se.eagerState:o(x,me)}else re={lane:me,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},I===null?(P=I=re,k=x):I=I.next=re,Fe.lanes|=me,ar|=me;se=se.next}while(se!==null&&se!==n);if(I===null?k=x:I.next=P,!js(x,a.memoizedState)&&(It=!0,ce&&(o=Ln,o!==null)))throw o;a.memoizedState=x,a.baseState=k,a.baseQueue=I,d.lastRenderedState=x}return p===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Vu(a){var n=Ot(),o=n.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var d=o.dispatch,p=o.pending,x=n.memoizedState;if(p!==null){o.pending=null;var k=p=p.next;do x=a(x,k.action),k=k.next;while(k!==p);js(x,n.memoizedState)||(It=!0),n.memoizedState=x,n.baseQueue===null&&(n.baseState=x),o.lastRenderedState=x}return[x,d]}function Xp(a,n,o){var d=Fe,p=Ot(),x=tt;if(x){if(o===void 0)throw Error(i(407));o=o()}else o=n();var k=!js((lt||p).memoizedState,o);k&&(p.memoizedState=o,It=!0),p=p.queue;var P=Zp.bind(null,d,p,a);if(po(2048,8,P,[a]),p.getSnapshot!==n||k||Dt!==null&&Dt.memoizedState.tag&1){if(d.flags|=2048,Un(9,sc(),Qp.bind(null,d,p,o,n),null),mt===null)throw Error(i(349));x||(Wa&124)!==0||Wp(d,n,o)}return o}function Wp(a,n,o){a.flags|=16384,a={getSnapshot:n,value:o},n=Fe.updateQueue,n===null?(n=$u(),Fe.updateQueue=n,n.stores=[a]):(o=n.stores,o===null?n.stores=[a]:o.push(a))}function Qp(a,n,o,d){n.value=o,n.getSnapshot=d,Jp(n)&&eg(a)}function Zp(a,n,o){return o(function(){Jp(n)&&eg(a)})}function Jp(a){var n=a.getSnapshot;a=a.value;try{var o=n();return!js(a,o)}catch{return!0}}function eg(a){var n=Mn(a,2);n!==null&&Es(n,a,2)}function qu(a){var n=fs();if(typeof a=="function"){var o=a;if(a=o(),Ir){qe(!0);try{o()}finally{qe(!1)}}}return n.memoizedState=n.baseState=a,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:a},n}function tg(a,n,o,d){return a.baseState=o,Uu(a,lt,typeof d=="function"?d:Sa)}function d_(a,n,o,d,p){if(rc(a))throw Error(i(485));if(a=n.action,a!==null){var x={payload:p,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){x.listeners.push(k)}};T.T!==null?o(!0):x.isTransition=!1,d(x),o=n.pending,o===null?(x.next=n.pending=x,sg(n,x)):(x.next=o.next,n.pending=o.next=x)}}function sg(a,n){var o=n.action,d=n.payload,p=a.state;if(n.isTransition){var x=T.T,k={};T.T=k;try{var P=o(p,d),I=T.S;I!==null&&I(k,P),ag(a,n,P)}catch(se){Iu(a,n,se)}finally{T.T=x}}else try{x=o(p,d),ag(a,n,x)}catch(se){Iu(a,n,se)}}function ag(a,n,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(d){rg(a,n,d)},function(d){return Iu(a,n,d)}):rg(a,n,o)}function rg(a,n,o){n.status="fulfilled",n.value=o,ng(n),a.state=o,n=a.pending,n!==null&&(o=n.next,o===n?a.pending=null:(o=o.next,n.next=o,sg(a,o)))}function Iu(a,n,o){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do n.status="rejected",n.reason=o,ng(n),n=n.next;while(n!==d)}a.action=null}function ng(a){a=a.listeners;for(var n=0;n<a.length;n++)(0,a[n])()}function ig(a,n){return n}function og(a,n){if(tt){var o=mt.formState;if(o!==null){e:{var d=Fe;if(tt){if(jt){t:{for(var p=jt,x=ra;p.nodeType!==8;){if(!x){p=null;break t}if(p=Gs(p.nextSibling),p===null){p=null;break t}}x=p.data,p=x==="F!"||x==="F"?p:null}if(p){jt=Gs(p.nextSibling),d=p.data==="F!";break e}}Br(d)}d=!1}d&&(n=o[0])}}return o=fs(),o.memoizedState=o.baseState=n,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:n},o.queue=d,o=Cg.bind(null,Fe,d),d.dispatch=o,d=qu(!1),x=Ku.bind(null,Fe,!1,d.queue),d=fs(),p={state:n,dispatch:null,action:a,pending:null},d.queue=p,o=d_.bind(null,Fe,p,x,o),p.dispatch=o,d.memoizedState=a,[n,o,!1]}function lg(a){var n=Ot();return cg(n,lt,a)}function cg(a,n,o){if(n=Uu(a,n,ig)[0],a=tc(Sa)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var d=fo(n)}catch(k){throw k===oo?Xl:k}else d=n;n=Ot();var p=n.queue,x=p.dispatch;return o!==n.memoizedState&&(Fe.flags|=2048,Un(9,sc(),u_.bind(null,p,o),null)),[d,x,a]}function u_(a,n){a.action=n}function dg(a){var n=Ot(),o=lt;if(o!==null)return cg(n,o,a);Ot(),n=n.memoizedState,o=Ot();var d=o.queue.dispatch;return o.memoizedState=a,[n,d,!1]}function Un(a,n,o,d){return a={tag:a,create:o,deps:d,inst:n,next:null},n=Fe.updateQueue,n===null&&(n=$u(),Fe.updateQueue=n),o=n.lastEffect,o===null?n.lastEffect=a.next=a:(d=o.next,o.next=a,a.next=d,n.lastEffect=a),a}function sc(){return{destroy:void 0,resource:void 0}}function ug(){return Ot().memoizedState}function ac(a,n,o,d){var p=fs();d=d===void 0?null:d,Fe.flags|=a,p.memoizedState=Un(1|n,sc(),o,d)}function po(a,n,o,d){var p=Ot();d=d===void 0?null:d;var x=p.memoizedState.inst;lt!==null&&d!==null&&Ou(d,lt.memoizedState.deps)?p.memoizedState=Un(n,x,o,d):(Fe.flags|=a,p.memoizedState=Un(1|n,x,o,d))}function mg(a,n){ac(8390656,8,a,n)}function hg(a,n){po(2048,8,a,n)}function fg(a,n){return po(4,2,a,n)}function pg(a,n){return po(4,4,a,n)}function gg(a,n){if(typeof n=="function"){a=a();var o=n(a);return function(){typeof o=="function"?o():n(null)}}if(n!=null)return a=a(),n.current=a,function(){n.current=null}}function xg(a,n,o){o=o!=null?o.concat([a]):null,po(4,4,gg.bind(null,n,a),o)}function Fu(){}function yg(a,n){var o=Ot();n=n===void 0?null:n;var d=o.memoizedState;return n!==null&&Ou(n,d[1])?d[0]:(o.memoizedState=[a,n],a)}function bg(a,n){var o=Ot();n=n===void 0?null:n;var d=o.memoizedState;if(n!==null&&Ou(n,d[1]))return d[0];if(d=a(),Ir){qe(!0);try{a()}finally{qe(!1)}}return o.memoizedState=[d,n],d}function Hu(a,n,o){return o===void 0||(Wa&1073741824)!==0?a.memoizedState=n:(a.memoizedState=o,a=wx(),Fe.lanes|=a,ar|=a,o)}function vg(a,n,o,d){return js(o,n)?o:zn.current!==null?(a=Hu(a,o,d),js(a,n)||(It=!0),a):(Wa&42)===0?(It=!0,a.memoizedState=o):(a=wx(),Fe.lanes|=a,ar|=a,n)}function jg(a,n,o,d,p){var x=R.p;R.p=x!==0&&8>x?x:8;var k=T.T,P={};T.T=P,Ku(a,!1,n,o);try{var I=p(),se=T.S;if(se!==null&&se(P,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var ce=o_(I,d);go(a,n,ce,Cs(a))}else go(a,n,d,Cs(a))}catch(me){go(a,n,{then:function(){},status:"rejected",reason:me},Cs())}finally{R.p=x,T.T=k}}function m_(){}function Gu(a,n,o,d){if(a.tag!==5)throw Error(i(476));var p=wg(a).queue;jg(a,p,n,z,o===null?m_:function(){return Ng(a),o(d)})}function wg(a){var n=a.memoizedState;if(n!==null)return n;n={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:z},next:null};var o={};return n.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:o},next:null},a.memoizedState=n,a=a.alternate,a!==null&&(a.memoizedState=n),n}function Ng(a){var n=wg(a).next.queue;go(a,n,{},Cs())}function Yu(){return ss(Ro)}function _g(){return Ot().memoizedState}function Sg(){return Ot().memoizedState}function h_(a){for(var n=a.return;n!==null;){switch(n.tag){case 24:case 3:var o=Cs();a=Ka(o);var d=Xa(n,a,o);d!==null&&(Es(d,n,o),co(d,n,o)),n={cache:Nu()},a.payload=n;return}n=n.return}}function f_(a,n,o){var d=Cs();o={lane:d,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},rc(a)?Eg(n,o):(o=hu(a,n,o,d),o!==null&&(Es(o,a,d),Tg(o,n,d)))}function Cg(a,n,o){var d=Cs();go(a,n,o,d)}function go(a,n,o,d){var p={lane:d,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(rc(a))Eg(n,p);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=n.lastRenderedReducer,x!==null))try{var k=n.lastRenderedState,P=x(k,o);if(p.hasEagerState=!0,p.eagerState=P,js(P,k))return Vl(a,n,p,0),mt===null&&Ul(),!1}catch{}finally{}if(o=hu(a,n,p,d),o!==null)return Es(o,a,d),Tg(o,n,d),!0}return!1}function Ku(a,n,o,d){if(d={lane:2,revertLane:Cm(),action:d,hasEagerState:!1,eagerState:null,next:null},rc(a)){if(n)throw Error(i(479))}else n=hu(a,o,d,2),n!==null&&Es(n,a,2)}function rc(a){var n=a.alternate;return a===Fe||n!==null&&n===Fe}function Eg(a,n){$n=Zl=!0;var o=a.pending;o===null?n.next=n:(n.next=o.next,o.next=n),a.pending=n}function Tg(a,n,o){if((o&4194048)!==0){var d=n.lanes;d&=a.pendingLanes,o|=d,n.lanes=o,Bd(a,o)}}var nc={readContext:ss,use:ec,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},kg={readContext:ss,use:ec,useCallback:function(a,n){return fs().memoizedState=[a,n===void 0?null:n],a},useContext:ss,useEffect:mg,useImperativeHandle:function(a,n,o){o=o!=null?o.concat([a]):null,ac(4194308,4,gg.bind(null,n,a),o)},useLayoutEffect:function(a,n){return ac(4194308,4,a,n)},useInsertionEffect:function(a,n){ac(4,2,a,n)},useMemo:function(a,n){var o=fs();n=n===void 0?null:n;var d=a();if(Ir){qe(!0);try{a()}finally{qe(!1)}}return o.memoizedState=[d,n],d},useReducer:function(a,n,o){var d=fs();if(o!==void 0){var p=o(n);if(Ir){qe(!0);try{o(n)}finally{qe(!1)}}}else p=n;return d.memoizedState=d.baseState=p,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:p},d.queue=a,a=a.dispatch=f_.bind(null,Fe,a),[d.memoizedState,a]},useRef:function(a){var n=fs();return a={current:a},n.memoizedState=a},useState:function(a){a=qu(a);var n=a.queue,o=Cg.bind(null,Fe,n);return n.dispatch=o,[a.memoizedState,o]},useDebugValue:Fu,useDeferredValue:function(a,n){var o=fs();return Hu(o,a,n)},useTransition:function(){var a=qu(!1);return a=jg.bind(null,Fe,a.queue,!0,!1),fs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,n,o){var d=Fe,p=fs();if(tt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=n(),mt===null)throw Error(i(349));(Je&124)!==0||Wp(d,n,o)}p.memoizedState=o;var x={value:o,getSnapshot:n};return p.queue=x,mg(Zp.bind(null,d,x,a),[a]),d.flags|=2048,Un(9,sc(),Qp.bind(null,d,x,o,n),null),o},useId:function(){var a=fs(),n=mt.identifierPrefix;if(tt){var o=wa,d=ja;o=(d&~(1<<32-st(d)-1)).toString(32)+o,n=""+n+"R"+o,o=Jl++,0<o&&(n+="H"+o.toString(32)),n+=""}else o=l_++,n=""+n+"r"+o.toString(32)+"";return a.memoizedState=n},useHostTransitionStatus:Yu,useFormState:og,useActionState:og,useOptimistic:function(a){var n=fs();n.memoizedState=n.baseState=a;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=o,n=Ku.bind(null,Fe,!0,o),o.dispatch=n,[a,n]},useMemoCache:Bu,useCacheRefresh:function(){return fs().memoizedState=h_.bind(null,Fe)}},Ag={readContext:ss,use:ec,useCallback:yg,useContext:ss,useEffect:hg,useImperativeHandle:xg,useInsertionEffect:fg,useLayoutEffect:pg,useMemo:bg,useReducer:tc,useRef:ug,useState:function(){return tc(Sa)},useDebugValue:Fu,useDeferredValue:function(a,n){var o=Ot();return vg(o,lt.memoizedState,a,n)},useTransition:function(){var a=tc(Sa)[0],n=Ot().memoizedState;return[typeof a=="boolean"?a:fo(a),n]},useSyncExternalStore:Xp,useId:_g,useHostTransitionStatus:Yu,useFormState:lg,useActionState:lg,useOptimistic:function(a,n){var o=Ot();return tg(o,lt,a,n)},useMemoCache:Bu,useCacheRefresh:Sg},p_={readContext:ss,use:ec,useCallback:yg,useContext:ss,useEffect:hg,useImperativeHandle:xg,useInsertionEffect:fg,useLayoutEffect:pg,useMemo:bg,useReducer:Vu,useRef:ug,useState:function(){return Vu(Sa)},useDebugValue:Fu,useDeferredValue:function(a,n){var o=Ot();return lt===null?Hu(o,a,n):vg(o,lt.memoizedState,a,n)},useTransition:function(){var a=Vu(Sa)[0],n=Ot().memoizedState;return[typeof a=="boolean"?a:fo(a),n]},useSyncExternalStore:Xp,useId:_g,useHostTransitionStatus:Yu,useFormState:dg,useActionState:dg,useOptimistic:function(a,n){var o=Ot();return lt!==null?tg(o,lt,a,n):(o.baseState=a,[a,o.queue.dispatch])},useMemoCache:Bu,useCacheRefresh:Sg},Vn=null,xo=0;function ic(a){var n=xo;return xo+=1,Vn===null&&(Vn=[]),Vp(Vn,a,n)}function yo(a,n){n=n.props.ref,a.ref=n!==void 0?n:null}function oc(a,n){throw n.$$typeof===y?Error(i(525)):(a=Object.prototype.toString.call(n),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":a)))}function Mg(a){var n=a._init;return n(a._payload)}function Dg(a){function n(Q,Y){if(a){var ee=Q.deletions;ee===null?(Q.deletions=[Y],Q.flags|=16):ee.push(Y)}}function o(Q,Y){if(!a)return null;for(;Y!==null;)n(Q,Y),Y=Y.sibling;return null}function d(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function p(Q,Y){return Q=va(Q,Y),Q.index=0,Q.sibling=null,Q}function x(Q,Y,ee){return Q.index=ee,a?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<Y?(Q.flags|=67108866,Y):ee):(Q.flags|=67108866,Y)):(Q.flags|=1048576,Y)}function k(Q){return a&&Q.alternate===null&&(Q.flags|=67108866),Q}function P(Q,Y,ee,de){return Y===null||Y.tag!==6?(Y=pu(ee,Q.mode,de),Y.return=Q,Y):(Y=p(Y,ee),Y.return=Q,Y)}function I(Q,Y,ee,de){var Se=ee.type;return Se===_?ce(Q,Y,ee.props.children,de,ee.key):Y!==null&&(Y.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===V&&Mg(Se)===Y.type)?(Y=p(Y,ee.props),yo(Y,ee),Y.return=Q,Y):(Y=Il(ee.type,ee.key,ee.props,null,Q.mode,de),yo(Y,ee),Y.return=Q,Y)}function se(Q,Y,ee,de){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=gu(ee,Q.mode,de),Y.return=Q,Y):(Y=p(Y,ee.children||[]),Y.return=Q,Y)}function ce(Q,Y,ee,de,Se){return Y===null||Y.tag!==7?(Y=Pr(ee,Q.mode,de,Se),Y.return=Q,Y):(Y=p(Y,ee),Y.return=Q,Y)}function me(Q,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=pu(""+Y,Q.mode,ee),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return ee=Il(Y.type,Y.key,Y.props,null,Q.mode,ee),yo(ee,Y),ee.return=Q,ee;case N:return Y=gu(Y,Q.mode,ee),Y.return=Q,Y;case V:var de=Y._init;return Y=de(Y._payload),me(Q,Y,ee)}if($(Y)||G(Y))return Y=Pr(Y,Q.mode,ee,null),Y.return=Q,Y;if(typeof Y.then=="function")return me(Q,ic(Y),ee);if(Y.$$typeof===A)return me(Q,Yl(Q,Y),ee);oc(Q,Y)}return null}function re(Q,Y,ee,de){var Se=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Se!==null?null:P(Q,Y,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:return ee.key===Se?I(Q,Y,ee,de):null;case N:return ee.key===Se?se(Q,Y,ee,de):null;case V:return Se=ee._init,ee=Se(ee._payload),re(Q,Y,ee,de)}if($(ee)||G(ee))return Se!==null?null:ce(Q,Y,ee,de,null);if(typeof ee.then=="function")return re(Q,Y,ic(ee),de);if(ee.$$typeof===A)return re(Q,Y,Yl(Q,ee),de);oc(Q,ee)}return null}function ne(Q,Y,ee,de,Se){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Q=Q.get(ee)||null,P(Y,Q,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case v:return Q=Q.get(de.key===null?ee:de.key)||null,I(Y,Q,de,Se);case N:return Q=Q.get(de.key===null?ee:de.key)||null,se(Y,Q,de,Se);case V:var He=de._init;return de=He(de._payload),ne(Q,Y,ee,de,Se)}if($(de)||G(de))return Q=Q.get(ee)||null,ce(Y,Q,de,Se,null);if(typeof de.then=="function")return ne(Q,Y,ee,ic(de),Se);if(de.$$typeof===A)return ne(Q,Y,ee,Yl(Y,de),Se);oc(Y,de)}return null}function $e(Q,Y,ee,de){for(var Se=null,He=null,ke=Y,Pe=Y=0,Ht=null;ke!==null&&Pe<ee.length;Pe++){ke.index>Pe?(Ht=ke,ke=null):Ht=ke.sibling;var et=re(Q,ke,ee[Pe],de);if(et===null){ke===null&&(ke=Ht);break}a&&ke&&et.alternate===null&&n(Q,ke),Y=x(et,Y,Pe),He===null?Se=et:He.sibling=et,He=et,ke=Ht}if(Pe===ee.length)return o(Q,ke),tt&&zr(Q,Pe),Se;if(ke===null){for(;Pe<ee.length;Pe++)ke=me(Q,ee[Pe],de),ke!==null&&(Y=x(ke,Y,Pe),He===null?Se=ke:He.sibling=ke,He=ke);return tt&&zr(Q,Pe),Se}for(ke=d(ke);Pe<ee.length;Pe++)Ht=ne(ke,Q,Pe,ee[Pe],de),Ht!==null&&(a&&Ht.alternate!==null&&ke.delete(Ht.key===null?Pe:Ht.key),Y=x(Ht,Y,Pe),He===null?Se=Ht:He.sibling=Ht,He=Ht);return a&&ke.forEach(function(mr){return n(Q,mr)}),tt&&zr(Q,Pe),Se}function Re(Q,Y,ee,de){if(ee==null)throw Error(i(151));for(var Se=null,He=null,ke=Y,Pe=Y=0,Ht=null,et=ee.next();ke!==null&&!et.done;Pe++,et=ee.next()){ke.index>Pe?(Ht=ke,ke=null):Ht=ke.sibling;var mr=re(Q,ke,et.value,de);if(mr===null){ke===null&&(ke=Ht);break}a&&ke&&mr.alternate===null&&n(Q,ke),Y=x(mr,Y,Pe),He===null?Se=mr:He.sibling=mr,He=mr,ke=Ht}if(et.done)return o(Q,ke),tt&&zr(Q,Pe),Se;if(ke===null){for(;!et.done;Pe++,et=ee.next())et=me(Q,et.value,de),et!==null&&(Y=x(et,Y,Pe),He===null?Se=et:He.sibling=et,He=et);return tt&&zr(Q,Pe),Se}for(ke=d(ke);!et.done;Pe++,et=ee.next())et=ne(ke,Q,Pe,et.value,de),et!==null&&(a&&et.alternate!==null&&ke.delete(et.key===null?Pe:et.key),Y=x(et,Y,Pe),He===null?Se=et:He.sibling=et,He=et);return a&&ke.forEach(function(g2){return n(Q,g2)}),tt&&zr(Q,Pe),Se}function dt(Q,Y,ee,de){if(typeof ee=="object"&&ee!==null&&ee.type===_&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:e:{for(var Se=ee.key;Y!==null;){if(Y.key===Se){if(Se=ee.type,Se===_){if(Y.tag===7){o(Q,Y.sibling),de=p(Y,ee.props.children),de.return=Q,Q=de;break e}}else if(Y.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===V&&Mg(Se)===Y.type){o(Q,Y.sibling),de=p(Y,ee.props),yo(de,ee),de.return=Q,Q=de;break e}o(Q,Y);break}else n(Q,Y);Y=Y.sibling}ee.type===_?(de=Pr(ee.props.children,Q.mode,de,ee.key),de.return=Q,Q=de):(de=Il(ee.type,ee.key,ee.props,null,Q.mode,de),yo(de,ee),de.return=Q,Q=de)}return k(Q);case N:e:{for(Se=ee.key;Y!==null;){if(Y.key===Se)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){o(Q,Y.sibling),de=p(Y,ee.children||[]),de.return=Q,Q=de;break e}else{o(Q,Y);break}else n(Q,Y);Y=Y.sibling}de=gu(ee,Q.mode,de),de.return=Q,Q=de}return k(Q);case V:return Se=ee._init,ee=Se(ee._payload),dt(Q,Y,ee,de)}if($(ee))return $e(Q,Y,ee,de);if(G(ee)){if(Se=G(ee),typeof Se!="function")throw Error(i(150));return ee=Se.call(ee),Re(Q,Y,ee,de)}if(typeof ee.then=="function")return dt(Q,Y,ic(ee),de);if(ee.$$typeof===A)return dt(Q,Y,Yl(Q,ee),de);oc(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Y!==null&&Y.tag===6?(o(Q,Y.sibling),de=p(Y,ee),de.return=Q,Q=de):(o(Q,Y),de=pu(ee,Q.mode,de),de.return=Q,Q=de),k(Q)):o(Q,Y)}return function(Q,Y,ee,de){try{xo=0;var Se=dt(Q,Y,ee,de);return Vn=null,Se}catch(ke){if(ke===oo||ke===Xl)throw ke;var He=ws(29,ke,null,Q.mode);return He.lanes=de,He.return=Q,He}finally{}}}var qn=Dg(!0),Og=Dg(!1),zs=q(null),na=null;function Qa(a){var n=a.alternate;Z(zt,zt.current&1),Z(zs,a),na===null&&(n===null||zn.current!==null||n.memoizedState!==null)&&(na=a)}function Rg(a){if(a.tag===22){if(Z(zt,zt.current),Z(zs,a),na===null){var n=a.alternate;n!==null&&n.memoizedState!==null&&(na=a)}}else Za()}function Za(){Z(zt,zt.current),Z(zs,zs.current)}function Ca(a){U(zs),na===a&&(na=null),U(zt)}var zt=q(0);function lc(a){for(var n=a;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||$m(o)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break;for(;n.sibling===null;){if(n.return===null||n.return===a)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Xu(a,n,o,d){n=a.memoizedState,o=o(d,n),o=o==null?n:g({},n,o),a.memoizedState=o,a.lanes===0&&(a.updateQueue.baseState=o)}var Wu={enqueueSetState:function(a,n,o){a=a._reactInternals;var d=Cs(),p=Ka(d);p.payload=n,o!=null&&(p.callback=o),n=Xa(a,p,d),n!==null&&(Es(n,a,d),co(n,a,d))},enqueueReplaceState:function(a,n,o){a=a._reactInternals;var d=Cs(),p=Ka(d);p.tag=1,p.payload=n,o!=null&&(p.callback=o),n=Xa(a,p,d),n!==null&&(Es(n,a,d),co(n,a,d))},enqueueForceUpdate:function(a,n){a=a._reactInternals;var o=Cs(),d=Ka(o);d.tag=2,n!=null&&(d.callback=n),n=Xa(a,d,o),n!==null&&(Es(n,a,o),co(n,a,o))}};function Pg(a,n,o,d,p,x,k){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,x,k):n.prototype&&n.prototype.isPureReactComponent?!Ji(o,d)||!Ji(p,x):!0}function Lg(a,n,o,d){a=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,d),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,d),n.state!==a&&Wu.enqueueReplaceState(n,n.state,null)}function Fr(a,n){var o=n;if("ref"in n){o={};for(var d in n)d!=="ref"&&(o[d]=n[d])}if(a=a.defaultProps){o===n&&(o=g({},o));for(var p in a)o[p]===void 0&&(o[p]=a[p])}return o}var cc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function zg(a){cc(a)}function $g(a){console.error(a)}function Bg(a){cc(a)}function dc(a,n){try{var o=a.onUncaughtError;o(n.value,{componentStack:n.stack})}catch(d){setTimeout(function(){throw d})}}function Ug(a,n,o){try{var d=a.onCaughtError;d(o.value,{componentStack:o.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Qu(a,n,o){return o=Ka(o),o.tag=3,o.payload={element:null},o.callback=function(){dc(a,n)},o}function Vg(a){return a=Ka(a),a.tag=3,a}function qg(a,n,o,d){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var x=d.value;a.payload=function(){return p(x)},a.callback=function(){Ug(n,o,d)}}var k=o.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(a.callback=function(){Ug(n,o,d),typeof p!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var P=d.stack;this.componentDidCatch(d.value,{componentStack:P!==null?P:""})})}function g_(a,n,o,d,p){if(o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(n=o.alternate,n!==null&&ro(n,o,p,!0),o=zs.current,o!==null){switch(o.tag){case 13:return na===null?jm():o.alternate===null&&wt===0&&(wt=3),o.flags&=-257,o.flags|=65536,o.lanes=p,d===Cu?o.flags|=16384:(n=o.updateQueue,n===null?o.updateQueue=new Set([d]):n.add(d),Nm(a,d,p)),!1;case 22:return o.flags|=65536,d===Cu?o.flags|=16384:(n=o.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([d])},o.updateQueue=n):(o=n.retryQueue,o===null?n.retryQueue=new Set([d]):o.add(d)),Nm(a,d,p)),!1}throw Error(i(435,o.tag))}return Nm(a,d,p),jm(),!1}if(tt)return n=zs.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,d!==bu&&(a=Error(i(422),{cause:d}),ao(Os(a,o)))):(d!==bu&&(n=Error(i(423),{cause:d}),ao(Os(n,o))),a=a.current.alternate,a.flags|=65536,p&=-p,a.lanes|=p,d=Os(d,o),p=Qu(a.stateNode,d,p),ku(a,p),wt!==4&&(wt=2)),!1;var x=Error(i(520),{cause:d});if(x=Os(x,o),So===null?So=[x]:So.push(x),wt!==4&&(wt=2),n===null)return!0;d=Os(d,o),o=n;do{switch(o.tag){case 3:return o.flags|=65536,a=p&-p,o.lanes|=a,a=Qu(o.stateNode,d,a),ku(o,a),!1;case 1:if(n=o.type,x=o.stateNode,(o.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(rr===null||!rr.has(x))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Vg(p),qg(p,a,o,d),ku(o,p),!1}o=o.return}while(o!==null);return!1}var Ig=Error(i(461)),It=!1;function Wt(a,n,o,d){n.child=a===null?Og(n,null,o,d):qn(n,a.child,o,d)}function Fg(a,n,o,d,p){o=o.render;var x=n.ref;if("ref"in d){var k={};for(var P in d)P!=="ref"&&(k[P]=d[P])}else k=d;return Vr(n),d=Ru(a,n,o,k,x,p),P=Pu(),a!==null&&!It?(Lu(a,n,p),Ea(a,n,p)):(tt&&P&&xu(n),n.flags|=1,Wt(a,n,d,p),n.child)}function Hg(a,n,o,d,p){if(a===null){var x=o.type;return typeof x=="function"&&!fu(x)&&x.defaultProps===void 0&&o.compare===null?(n.tag=15,n.type=x,Gg(a,n,x,d,p)):(a=Il(o.type,null,d,n,n.mode,p),a.ref=n.ref,a.return=n,n.child=a)}if(x=a.child,!nm(a,p)){var k=x.memoizedProps;if(o=o.compare,o=o!==null?o:Ji,o(k,d)&&a.ref===n.ref)return Ea(a,n,p)}return n.flags|=1,a=va(x,d),a.ref=n.ref,a.return=n,n.child=a}function Gg(a,n,o,d,p){if(a!==null){var x=a.memoizedProps;if(Ji(x,d)&&a.ref===n.ref)if(It=!1,n.pendingProps=d=x,nm(a,p))(a.flags&131072)!==0&&(It=!0);else return n.lanes=a.lanes,Ea(a,n,p)}return Zu(a,n,o,d,p)}function Yg(a,n,o){var d=n.pendingProps,p=d.children,x=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((n.flags&128)!==0){if(d=x!==null?x.baseLanes|o:o,a!==null){for(p=n.child=a.child,x=0;p!==null;)x=x|p.lanes|p.childLanes,p=p.sibling;n.childLanes=x&~d}else n.childLanes=0,n.child=null;return Kg(a,n,d,o)}if((o&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},a!==null&&Kl(n,x!==null?x.cachePool:null),x!==null?Gp(n,x):Mu(),Rg(n);else return n.lanes=n.childLanes=536870912,Kg(a,n,x!==null?x.baseLanes|o:o,o)}else x!==null?(Kl(n,x.cachePool),Gp(n,x),Za(),n.memoizedState=null):(a!==null&&Kl(n,null),Mu(),Za());return Wt(a,n,p,o),n.child}function Kg(a,n,o,d){var p=Su();return p=p===null?null:{parent:Lt._currentValue,pool:p},n.memoizedState={baseLanes:o,cachePool:p},a!==null&&Kl(n,null),Mu(),Rg(n),a!==null&&ro(a,n,d,!0),null}function uc(a,n){var o=n.ref;if(o===null)a!==null&&a.ref!==null&&(n.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(a===null||a.ref!==o)&&(n.flags|=4194816)}}function Zu(a,n,o,d,p){return Vr(n),o=Ru(a,n,o,d,void 0,p),d=Pu(),a!==null&&!It?(Lu(a,n,p),Ea(a,n,p)):(tt&&d&&xu(n),n.flags|=1,Wt(a,n,o,p),n.child)}function Xg(a,n,o,d,p,x){return Vr(n),n.updateQueue=null,o=Kp(n,d,o,p),Yp(a),d=Pu(),a!==null&&!It?(Lu(a,n,x),Ea(a,n,x)):(tt&&d&&xu(n),n.flags|=1,Wt(a,n,o,x),n.child)}function Wg(a,n,o,d,p){if(Vr(n),n.stateNode===null){var x=Dn,k=o.contextType;typeof k=="object"&&k!==null&&(x=ss(k)),x=new o(d,x),n.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Wu,n.stateNode=x,x._reactInternals=n,x=n.stateNode,x.props=d,x.state=n.memoizedState,x.refs={},Eu(n),k=o.contextType,x.context=typeof k=="object"&&k!==null?ss(k):Dn,x.state=n.memoizedState,k=o.getDerivedStateFromProps,typeof k=="function"&&(Xu(n,o,k,d),x.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(k=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),k!==x.state&&Wu.enqueueReplaceState(x,x.state,null),mo(n,d,x,p),uo(),x.state=n.memoizedState),typeof x.componentDidMount=="function"&&(n.flags|=4194308),d=!0}else if(a===null){x=n.stateNode;var P=n.memoizedProps,I=Fr(o,P);x.props=I;var se=x.context,ce=o.contextType;k=Dn,typeof ce=="object"&&ce!==null&&(k=ss(ce));var me=o.getDerivedStateFromProps;ce=typeof me=="function"||typeof x.getSnapshotBeforeUpdate=="function",P=n.pendingProps!==P,ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P||se!==k)&&Lg(n,x,d,k),Ya=!1;var re=n.memoizedState;x.state=re,mo(n,d,x,p),uo(),se=n.memoizedState,P||re!==se||Ya?(typeof me=="function"&&(Xu(n,o,me,d),se=n.memoizedState),(I=Ya||Pg(n,o,I,d,re,se,k))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(n.flags|=4194308)):(typeof x.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=d,n.memoizedState=se),x.props=d,x.state=se,x.context=k,d=I):(typeof x.componentDidMount=="function"&&(n.flags|=4194308),d=!1)}else{x=n.stateNode,Tu(a,n),k=n.memoizedProps,ce=Fr(o,k),x.props=ce,me=n.pendingProps,re=x.context,se=o.contextType,I=Dn,typeof se=="object"&&se!==null&&(I=ss(se)),P=o.getDerivedStateFromProps,(se=typeof P=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==me||re!==I)&&Lg(n,x,d,I),Ya=!1,re=n.memoizedState,x.state=re,mo(n,d,x,p),uo();var ne=n.memoizedState;k!==me||re!==ne||Ya||a!==null&&a.dependencies!==null&&Gl(a.dependencies)?(typeof P=="function"&&(Xu(n,o,P,d),ne=n.memoizedState),(ce=Ya||Pg(n,o,ce,d,re,ne,I)||a!==null&&a.dependencies!==null&&Gl(a.dependencies))?(se||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,ne,I),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,ne,I)),typeof x.componentDidUpdate=="function"&&(n.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof x.componentDidUpdate!="function"||k===a.memoizedProps&&re===a.memoizedState||(n.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===a.memoizedProps&&re===a.memoizedState||(n.flags|=1024),n.memoizedProps=d,n.memoizedState=ne),x.props=d,x.state=ne,x.context=I,d=ce):(typeof x.componentDidUpdate!="function"||k===a.memoizedProps&&re===a.memoizedState||(n.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===a.memoizedProps&&re===a.memoizedState||(n.flags|=1024),d=!1)}return x=d,uc(a,n),d=(n.flags&128)!==0,x||d?(x=n.stateNode,o=d&&typeof o.getDerivedStateFromError!="function"?null:x.render(),n.flags|=1,a!==null&&d?(n.child=qn(n,a.child,null,p),n.child=qn(n,null,o,p)):Wt(a,n,o,p),n.memoizedState=x.state,a=n.child):a=Ea(a,n,p),a}function Qg(a,n,o,d){return so(),n.flags|=256,Wt(a,n,o,d),n.child}var Ju={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(a){return{baseLanes:a,cachePool:$p()}}function tm(a,n,o){return a=a!==null?a.childLanes&~o:0,n&&(a|=$s),a}function Zg(a,n,o){var d=n.pendingProps,p=!1,x=(n.flags&128)!==0,k;if((k=x)||(k=a!==null&&a.memoizedState===null?!1:(zt.current&2)!==0),k&&(p=!0,n.flags&=-129),k=(n.flags&32)!==0,n.flags&=-33,a===null){if(tt){if(p?Qa(n):Za(),tt){var P=jt,I;if(I=P){e:{for(I=P,P=ra;I.nodeType!==8;){if(!P){P=null;break e}if(I=Gs(I.nextSibling),I===null){P=null;break e}}P=I}P!==null?(n.memoizedState={dehydrated:P,treeContext:Lr!==null?{id:ja,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},I=ws(18,null,null,0),I.stateNode=P,I.return=n,n.child=I,is=n,jt=null,I=!0):I=!1}I||Br(n)}if(P=n.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return $m(P)?n.lanes=32:n.lanes=536870912,null;Ca(n)}return P=d.children,d=d.fallback,p?(Za(),p=n.mode,P=mc({mode:"hidden",children:P},p),d=Pr(d,p,o,null),P.return=n,d.return=n,P.sibling=d,n.child=P,p=n.child,p.memoizedState=em(o),p.childLanes=tm(a,k,o),n.memoizedState=Ju,d):(Qa(n),sm(n,P))}if(I=a.memoizedState,I!==null&&(P=I.dehydrated,P!==null)){if(x)n.flags&256?(Qa(n),n.flags&=-257,n=am(a,n,o)):n.memoizedState!==null?(Za(),n.child=a.child,n.flags|=128,n=null):(Za(),p=d.fallback,P=n.mode,d=mc({mode:"visible",children:d.children},P),p=Pr(p,P,o,null),p.flags|=2,d.return=n,p.return=n,d.sibling=p,n.child=d,qn(n,a.child,null,o),d=n.child,d.memoizedState=em(o),d.childLanes=tm(a,k,o),n.memoizedState=Ju,n=p);else if(Qa(n),$m(P)){if(k=P.nextSibling&&P.nextSibling.dataset,k)var se=k.dgst;k=se,d=Error(i(419)),d.stack="",d.digest=k,ao({value:d,source:null,stack:null}),n=am(a,n,o)}else if(It||ro(a,n,o,!1),k=(o&a.childLanes)!==0,It||k){if(k=mt,k!==null&&(d=o&-o,d=(d&42)!==0?1:Ar(d),d=(d&(k.suspendedLanes|o))!==0?0:d,d!==0&&d!==I.retryLane))throw I.retryLane=d,Mn(a,d),Es(k,a,d),Ig;P.data==="$?"||jm(),n=am(a,n,o)}else P.data==="$?"?(n.flags|=192,n.child=a.child,n=null):(a=I.treeContext,jt=Gs(P.nextSibling),is=n,tt=!0,$r=null,ra=!1,a!==null&&(Ps[Ls++]=ja,Ps[Ls++]=wa,Ps[Ls++]=Lr,ja=a.id,wa=a.overflow,Lr=n),n=sm(n,d.children),n.flags|=4096);return n}return p?(Za(),p=d.fallback,P=n.mode,I=a.child,se=I.sibling,d=va(I,{mode:"hidden",children:d.children}),d.subtreeFlags=I.subtreeFlags&65011712,se!==null?p=va(se,p):(p=Pr(p,P,o,null),p.flags|=2),p.return=n,d.return=n,d.sibling=p,n.child=d,d=p,p=n.child,P=a.child.memoizedState,P===null?P=em(o):(I=P.cachePool,I!==null?(se=Lt._currentValue,I=I.parent!==se?{parent:se,pool:se}:I):I=$p(),P={baseLanes:P.baseLanes|o,cachePool:I}),p.memoizedState=P,p.childLanes=tm(a,k,o),n.memoizedState=Ju,d):(Qa(n),o=a.child,a=o.sibling,o=va(o,{mode:"visible",children:d.children}),o.return=n,o.sibling=null,a!==null&&(k=n.deletions,k===null?(n.deletions=[a],n.flags|=16):k.push(a)),n.child=o,n.memoizedState=null,o)}function sm(a,n){return n=mc({mode:"visible",children:n},a.mode),n.return=a,a.child=n}function mc(a,n){return a=ws(22,a,null,n),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function am(a,n,o){return qn(n,a.child,null,o),a=sm(n,n.pendingProps.children),a.flags|=2,n.memoizedState=null,a}function Jg(a,n,o){a.lanes|=n;var d=a.alternate;d!==null&&(d.lanes|=n),ju(a.return,n,o)}function rm(a,n,o,d,p){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:p}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=o,x.tailMode=p)}function ex(a,n,o){var d=n.pendingProps,p=d.revealOrder,x=d.tail;if(Wt(a,n,d.children,o),d=zt.current,(d&2)!==0)d=d&1|2,n.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=n.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Jg(a,o,n);else if(a.tag===19)Jg(a,o,n);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(Z(zt,d),p){case"forwards":for(o=n.child,p=null;o!==null;)a=o.alternate,a!==null&&lc(a)===null&&(p=o),o=o.sibling;o=p,o===null?(p=n.child,n.child=null):(p=o.sibling,o.sibling=null),rm(n,!1,p,o,x);break;case"backwards":for(o=null,p=n.child,n.child=null;p!==null;){if(a=p.alternate,a!==null&&lc(a)===null){n.child=p;break}a=p.sibling,p.sibling=o,o=p,p=a}rm(n,!0,o,null,x);break;case"together":rm(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ea(a,n,o){if(a!==null&&(n.dependencies=a.dependencies),ar|=n.lanes,(o&n.childLanes)===0)if(a!==null){if(ro(a,n,o,!1),(o&n.childLanes)===0)return null}else return null;if(a!==null&&n.child!==a.child)throw Error(i(153));if(n.child!==null){for(a=n.child,o=va(a,a.pendingProps),n.child=o,o.return=n;a.sibling!==null;)a=a.sibling,o=o.sibling=va(a,a.pendingProps),o.return=n;o.sibling=null}return n.child}function nm(a,n){return(a.lanes&n)!==0?!0:(a=a.dependencies,!!(a!==null&&Gl(a)))}function x_(a,n,o){switch(n.tag){case 3:we(n,n.stateNode.containerInfo),Ga(n,Lt,a.memoizedState.cache),so();break;case 27:case 5:Te(n);break;case 4:we(n,n.stateNode.containerInfo);break;case 10:Ga(n,n.type,n.memoizedProps.value);break;case 13:var d=n.memoizedState;if(d!==null)return d.dehydrated!==null?(Qa(n),n.flags|=128,null):(o&n.child.childLanes)!==0?Zg(a,n,o):(Qa(n),a=Ea(a,n,o),a!==null?a.sibling:null);Qa(n);break;case 19:var p=(a.flags&128)!==0;if(d=(o&n.childLanes)!==0,d||(ro(a,n,o,!1),d=(o&n.childLanes)!==0),p){if(d)return ex(a,n,o);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Z(zt,zt.current),d)break;return null;case 22:case 23:return n.lanes=0,Yg(a,n,o);case 24:Ga(n,Lt,a.memoizedState.cache)}return Ea(a,n,o)}function tx(a,n,o){if(a!==null)if(a.memoizedProps!==n.pendingProps)It=!0;else{if(!nm(a,o)&&(n.flags&128)===0)return It=!1,x_(a,n,o);It=(a.flags&131072)!==0}else It=!1,tt&&(n.flags&1048576)!==0&&Mp(n,Hl,n.index);switch(n.lanes=0,n.tag){case 16:e:{a=n.pendingProps;var d=n.elementType,p=d._init;if(d=p(d._payload),n.type=d,typeof d=="function")fu(d)?(a=Fr(d,a),n.tag=1,n=Wg(null,n,d,a,o)):(n.tag=0,n=Zu(null,n,d,a,o));else{if(d!=null){if(p=d.$$typeof,p===E){n.tag=11,n=Fg(null,n,d,a,o);break e}else if(p===L){n.tag=14,n=Hg(null,n,d,a,o);break e}}throw n=oe(d)||d,Error(i(306,n,""))}}return n;case 0:return Zu(a,n,n.type,n.pendingProps,o);case 1:return d=n.type,p=Fr(d,n.pendingProps),Wg(a,n,d,p,o);case 3:e:{if(we(n,n.stateNode.containerInfo),a===null)throw Error(i(387));d=n.pendingProps;var x=n.memoizedState;p=x.element,Tu(a,n),mo(n,d,null,o);var k=n.memoizedState;if(d=k.cache,Ga(n,Lt,d),d!==x.cache&&wu(n,[Lt],o,!0),uo(),d=k.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:k.cache},n.updateQueue.baseState=x,n.memoizedState=x,n.flags&256){n=Qg(a,n,d,o);break e}else if(d!==p){p=Os(Error(i(424)),n),ao(p),n=Qg(a,n,d,o);break e}else{switch(a=n.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(jt=Gs(a.firstChild),is=n,tt=!0,$r=null,ra=!0,o=Og(n,null,d,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(so(),d===p){n=Ea(a,n,o);break e}Wt(a,n,d,o)}n=n.child}return n;case 26:return uc(a,n),a===null?(o=ny(n.type,null,n.pendingProps,null))?n.memoizedState=o:tt||(o=n.type,a=n.pendingProps,d=Cc(fe.current).createElement(o),d[ts]=n,d[ms]=a,Zt(d,o,a),qt(d),n.stateNode=d):n.memoizedState=ny(n.type,a.memoizedProps,n.pendingProps,a.memoizedState),null;case 27:return Te(n),a===null&&tt&&(d=n.stateNode=sy(n.type,n.pendingProps,fe.current),is=n,ra=!0,p=jt,or(n.type)?(Bm=p,jt=Gs(d.firstChild)):jt=p),Wt(a,n,n.pendingProps.children,o),uc(a,n),a===null&&(n.flags|=4194304),n.child;case 5:return a===null&&tt&&((p=d=jt)&&(d=H_(d,n.type,n.pendingProps,ra),d!==null?(n.stateNode=d,is=n,jt=Gs(d.firstChild),ra=!1,p=!0):p=!1),p||Br(n)),Te(n),p=n.type,x=n.pendingProps,k=a!==null?a.memoizedProps:null,d=x.children,Pm(p,x)?d=null:k!==null&&Pm(p,k)&&(n.flags|=32),n.memoizedState!==null&&(p=Ru(a,n,c_,null,null,o),Ro._currentValue=p),uc(a,n),Wt(a,n,d,o),n.child;case 6:return a===null&&tt&&((a=o=jt)&&(o=G_(o,n.pendingProps,ra),o!==null?(n.stateNode=o,is=n,jt=null,a=!0):a=!1),a||Br(n)),null;case 13:return Zg(a,n,o);case 4:return we(n,n.stateNode.containerInfo),d=n.pendingProps,a===null?n.child=qn(n,null,d,o):Wt(a,n,d,o),n.child;case 11:return Fg(a,n,n.type,n.pendingProps,o);case 7:return Wt(a,n,n.pendingProps,o),n.child;case 8:return Wt(a,n,n.pendingProps.children,o),n.child;case 12:return Wt(a,n,n.pendingProps.children,o),n.child;case 10:return d=n.pendingProps,Ga(n,n.type,d.value),Wt(a,n,d.children,o),n.child;case 9:return p=n.type._context,d=n.pendingProps.children,Vr(n),p=ss(p),d=d(p),n.flags|=1,Wt(a,n,d,o),n.child;case 14:return Hg(a,n,n.type,n.pendingProps,o);case 15:return Gg(a,n,n.type,n.pendingProps,o);case 19:return ex(a,n,o);case 31:return d=n.pendingProps,o=n.mode,d={mode:d.mode,children:d.children},a===null?(o=mc(d,o),o.ref=n.ref,n.child=o,o.return=n,n=o):(o=va(a.child,d),o.ref=n.ref,n.child=o,o.return=n,n=o),n;case 22:return Yg(a,n,o);case 24:return Vr(n),d=ss(Lt),a===null?(p=Su(),p===null&&(p=mt,x=Nu(),p.pooledCache=x,x.refCount++,x!==null&&(p.pooledCacheLanes|=o),p=x),n.memoizedState={parent:d,cache:p},Eu(n),Ga(n,Lt,p)):((a.lanes&o)!==0&&(Tu(a,n),mo(n,null,null,o),uo()),p=a.memoizedState,x=n.memoizedState,p.parent!==d?(p={parent:d,cache:d},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),Ga(n,Lt,d)):(d=x.cache,Ga(n,Lt,d),d!==p.cache&&wu(n,[Lt],o,!0))),Wt(a,n,n.pendingProps.children,o),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Ta(a){a.flags|=4}function sx(a,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!dy(n)){if(n=zs.current,n!==null&&((Je&4194048)===Je?na!==null:(Je&62914560)!==Je&&(Je&536870912)===0||n!==na))throw lo=Cu,Bp;a.flags|=8192}}function hc(a,n){n!==null&&(a.flags|=4),a.flags&16384&&(n=a.tag!==22?Ii():536870912,a.lanes|=n,Gn|=n)}function bo(a,n){if(!tt)switch(a.tailMode){case"hidden":n=a.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?a.tail=null:o.sibling=null;break;case"collapsed":o=a.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?n||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function bt(a){var n=a.alternate!==null&&a.alternate.child===a.child,o=0,d=0;if(n)for(var p=a.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=a,p=p.sibling;else for(p=a.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=a,p=p.sibling;return a.subtreeFlags|=d,a.childLanes=o,n}function y_(a,n,o){var d=n.pendingProps;switch(yu(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(n),null;case 1:return bt(n),null;case 3:return o=n.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),n.memoizedState.cache!==d&&(n.flags|=2048),_a(Lt),ue(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(a===null||a.child===null)&&(to(n)?Ta(n):a===null||a.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Rp())),bt(n),null;case 26:return o=n.memoizedState,a===null?(Ta(n),o!==null?(bt(n),sx(n,o)):(bt(n),n.flags&=-16777217)):o?o!==a.memoizedState?(Ta(n),bt(n),sx(n,o)):(bt(n),n.flags&=-16777217):(a.memoizedProps!==d&&Ta(n),bt(n),n.flags&=-16777217),null;case 27:ye(n),o=fe.current;var p=n.type;if(a!==null&&n.stateNode!=null)a.memoizedProps!==d&&Ta(n);else{if(!d){if(n.stateNode===null)throw Error(i(166));return bt(n),null}a=ie.current,to(n)?Dp(n):(a=sy(p,d,o),n.stateNode=a,Ta(n))}return bt(n),null;case 5:if(ye(n),o=n.type,a!==null&&n.stateNode!=null)a.memoizedProps!==d&&Ta(n);else{if(!d){if(n.stateNode===null)throw Error(i(166));return bt(n),null}if(a=ie.current,to(n))Dp(n);else{switch(p=Cc(fe.current),a){case 1:a=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:a=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":a=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":a=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":a=p.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?p.createElement("select",{is:d.is}):p.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?p.createElement(o,{is:d.is}):p.createElement(o)}}a[ts]=n,a[ms]=d;e:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=a;e:switch(Zt(a,o,d),o){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ta(n)}}return bt(n),n.flags&=-16777217,null;case 6:if(a&&n.stateNode!=null)a.memoizedProps!==d&&Ta(n);else{if(typeof d!="string"&&n.stateNode===null)throw Error(i(166));if(a=fe.current,to(n)){if(a=n.stateNode,o=n.memoizedProps,d=null,p=is,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}a[ts]=n,a=!!(a.nodeValue===o||d!==null&&d.suppressHydrationWarning===!0||Xx(a.nodeValue,o)),a||Br(n)}else a=Cc(a).createTextNode(d),a[ts]=n,n.stateNode=a}return bt(n),null;case 13:if(d=n.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(p=to(n),d!==null&&d.dehydrated!==null){if(a===null){if(!p)throw Error(i(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[ts]=n}else so(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;bt(n),p=!1}else p=Rp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(Ca(n),n):(Ca(n),null)}if(Ca(n),(n.flags&128)!==0)return n.lanes=o,n;if(o=d!==null,a=a!==null&&a.memoizedState!==null,o){d=n.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool);var x=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==p&&(d.flags|=2048)}return o!==a&&o&&(n.child.flags|=8192),hc(n,n.updateQueue),bt(n),null;case 4:return ue(),a===null&&Am(n.stateNode.containerInfo),bt(n),null;case 10:return _a(n.type),bt(n),null;case 19:if(U(zt),p=n.memoizedState,p===null)return bt(n),null;if(d=(n.flags&128)!==0,x=p.rendering,x===null)if(d)bo(p,!1);else{if(wt!==0||a!==null&&(a.flags&128)!==0)for(a=n.child;a!==null;){if(x=lc(a),x!==null){for(n.flags|=128,bo(p,!1),a=x.updateQueue,n.updateQueue=a,hc(n,a),n.subtreeFlags=0,a=o,o=n.child;o!==null;)Ap(o,a),o=o.sibling;return Z(zt,zt.current&1|2),n.child}a=a.sibling}p.tail!==null&&Ue()>gc&&(n.flags|=128,d=!0,bo(p,!1),n.lanes=4194304)}else{if(!d)if(a=lc(x),a!==null){if(n.flags|=128,d=!0,a=a.updateQueue,n.updateQueue=a,hc(n,a),bo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!tt)return bt(n),null}else 2*Ue()-p.renderingStartTime>gc&&o!==536870912&&(n.flags|=128,d=!0,bo(p,!1),n.lanes=4194304);p.isBackwards?(x.sibling=n.child,n.child=x):(a=p.last,a!==null?a.sibling=x:n.child=x,p.last=x)}return p.tail!==null?(n=p.tail,p.rendering=n,p.tail=n.sibling,p.renderingStartTime=Ue(),n.sibling=null,a=zt.current,Z(zt,d?a&1|2:a&1),n):(bt(n),null);case 22:case 23:return Ca(n),Du(),d=n.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(n.flags|=8192):d&&(n.flags|=8192),d?(o&536870912)!==0&&(n.flags&128)===0&&(bt(n),n.subtreeFlags&6&&(n.flags|=8192)):bt(n),o=n.updateQueue,o!==null&&hc(n,o.retryQueue),o=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),d=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),d!==o&&(n.flags|=2048),a!==null&&U(qr),null;case 24:return o=null,a!==null&&(o=a.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),_a(Lt),bt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function b_(a,n){switch(yu(n),n.tag){case 1:return a=n.flags,a&65536?(n.flags=a&-65537|128,n):null;case 3:return _a(Lt),ue(),a=n.flags,(a&65536)!==0&&(a&128)===0?(n.flags=a&-65537|128,n):null;case 26:case 27:case 5:return ye(n),null;case 13:if(Ca(n),a=n.memoizedState,a!==null&&a.dehydrated!==null){if(n.alternate===null)throw Error(i(340));so()}return a=n.flags,a&65536?(n.flags=a&-65537|128,n):null;case 19:return U(zt),null;case 4:return ue(),null;case 10:return _a(n.type),null;case 22:case 23:return Ca(n),Du(),a!==null&&U(qr),a=n.flags,a&65536?(n.flags=a&-65537|128,n):null;case 24:return _a(Lt),null;case 25:return null;default:return null}}function ax(a,n){switch(yu(n),n.tag){case 3:_a(Lt),ue();break;case 26:case 27:case 5:ye(n);break;case 4:ue();break;case 13:Ca(n);break;case 19:U(zt);break;case 10:_a(n.type);break;case 22:case 23:Ca(n),Du(),a!==null&&U(qr);break;case 24:_a(Lt)}}function vo(a,n){try{var o=n.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var p=d.next;o=p;do{if((o.tag&a)===a){d=void 0;var x=o.create,k=o.inst;d=x(),k.destroy=d}o=o.next}while(o!==p)}}catch(P){ut(n,n.return,P)}}function Ja(a,n,o){try{var d=n.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var x=p.next;d=x;do{if((d.tag&a)===a){var k=d.inst,P=k.destroy;if(P!==void 0){k.destroy=void 0,p=n;var I=o,se=P;try{se()}catch(ce){ut(p,I,ce)}}}d=d.next}while(d!==x)}}catch(ce){ut(n,n.return,ce)}}function rx(a){var n=a.updateQueue;if(n!==null){var o=a.stateNode;try{Hp(n,o)}catch(d){ut(a,a.return,d)}}}function nx(a,n,o){o.props=Fr(a.type,a.memoizedProps),o.state=a.memoizedState;try{o.componentWillUnmount()}catch(d){ut(a,n,d)}}function jo(a,n){try{var o=a.ref;if(o!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof o=="function"?a.refCleanup=o(d):o.current=d}}catch(p){ut(a,n,p)}}function ia(a,n){var o=a.ref,d=a.refCleanup;if(o!==null)if(typeof d=="function")try{d()}catch(p){ut(a,n,p)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){ut(a,n,p)}else o.current=null}function ix(a){var n=a.type,o=a.memoizedProps,d=a.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":o.autoFocus&&d.focus();break e;case"img":o.src?d.src=o.src:o.srcSet&&(d.srcset=o.srcSet)}}catch(p){ut(a,a.return,p)}}function im(a,n,o){try{var d=a.stateNode;U_(d,a.type,o,n),d[ms]=n}catch(p){ut(a,a.return,p)}}function ox(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&or(a.type)||a.tag===4}function om(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ox(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&or(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function lm(a,n,o){var d=a.tag;if(d===5||d===6)a=a.stateNode,n?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(a,n):(n=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,n.appendChild(a),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=Sc));else if(d!==4&&(d===27&&or(a.type)&&(o=a.stateNode,n=null),a=a.child,a!==null))for(lm(a,n,o),a=a.sibling;a!==null;)lm(a,n,o),a=a.sibling}function fc(a,n,o){var d=a.tag;if(d===5||d===6)a=a.stateNode,n?o.insertBefore(a,n):o.appendChild(a);else if(d!==4&&(d===27&&or(a.type)&&(o=a.stateNode),a=a.child,a!==null))for(fc(a,n,o),a=a.sibling;a!==null;)fc(a,n,o),a=a.sibling}function lx(a){var n=a.stateNode,o=a.memoizedProps;try{for(var d=a.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Zt(n,d,o),n[ts]=a,n[ms]=o}catch(x){ut(a,a.return,x)}}var ka=!1,Tt=!1,cm=!1,cx=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function v_(a,n){if(a=a.containerInfo,Om=Dc,a=vp(a),ou(a)){if("selectionStart"in a)var o={start:a.selectionStart,end:a.selectionEnd};else e:{o=(o=a.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var p=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var k=0,P=-1,I=-1,se=0,ce=0,me=a,re=null;t:for(;;){for(var ne;me!==o||p!==0&&me.nodeType!==3||(P=k+p),me!==x||d!==0&&me.nodeType!==3||(I=k+d),me.nodeType===3&&(k+=me.nodeValue.length),(ne=me.firstChild)!==null;)re=me,me=ne;for(;;){if(me===a)break t;if(re===o&&++se===p&&(P=k),re===x&&++ce===d&&(I=k),(ne=me.nextSibling)!==null)break;me=re,re=me.parentNode}me=ne}o=P===-1||I===-1?null:{start:P,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(Rm={focusedElem:a,selectionRange:o},Dc=!1,Ft=n;Ft!==null;)if(n=Ft,a=n.child,(n.subtreeFlags&1024)!==0&&a!==null)a.return=n,Ft=a;else for(;Ft!==null;){switch(n=Ft,x=n.alternate,a=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,o=n,p=x.memoizedProps,x=x.memoizedState,d=o.stateNode;try{var $e=Fr(o.type,p,o.elementType===o.type);a=d.getSnapshotBeforeUpdate($e,x),d.__reactInternalSnapshotBeforeUpdate=a}catch(Re){ut(o,o.return,Re)}}break;case 3:if((a&1024)!==0){if(a=n.stateNode.containerInfo,o=a.nodeType,o===9)zm(a);else if(o===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":zm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=n.sibling,a!==null){a.return=n.return,Ft=a;break}Ft=n.return}}function dx(a,n,o){var d=o.flags;switch(o.tag){case 0:case 11:case 15:er(a,o),d&4&&vo(5,o);break;case 1:if(er(a,o),d&4)if(a=o.stateNode,n===null)try{a.componentDidMount()}catch(k){ut(o,o.return,k)}else{var p=Fr(o.type,n.memoizedProps);n=n.memoizedState;try{a.componentDidUpdate(p,n,a.__reactInternalSnapshotBeforeUpdate)}catch(k){ut(o,o.return,k)}}d&64&&rx(o),d&512&&jo(o,o.return);break;case 3:if(er(a,o),d&64&&(a=o.updateQueue,a!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{Hp(a,n)}catch(k){ut(o,o.return,k)}}break;case 27:n===null&&d&4&&lx(o);case 26:case 5:er(a,o),n===null&&d&4&&ix(o),d&512&&jo(o,o.return);break;case 12:er(a,o);break;case 13:er(a,o),d&4&&hx(a,o),d&64&&(a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(o=k_.bind(null,o),Y_(a,o))));break;case 22:if(d=o.memoizedState!==null||ka,!d){n=n!==null&&n.memoizedState!==null||Tt,p=ka;var x=Tt;ka=d,(Tt=n)&&!x?tr(a,o,(o.subtreeFlags&8772)!==0):er(a,o),ka=p,Tt=x}break;case 30:break;default:er(a,o)}}function ux(a){var n=a.alternate;n!==null&&(a.alternate=null,ux(n)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(n=a.stateNode,n!==null&&qd(n)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var pt=null,ps=!1;function Aa(a,n,o){for(o=o.child;o!==null;)mx(a,n,o),o=o.sibling}function mx(a,n,o){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(_e,o)}catch{}switch(o.tag){case 26:Tt||ia(o,n),Aa(a,n,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Tt||ia(o,n);var d=pt,p=ps;or(o.type)&&(pt=o.stateNode,ps=!1),Aa(a,n,o),Ao(o.stateNode),pt=d,ps=p;break;case 5:Tt||ia(o,n);case 6:if(d=pt,p=ps,pt=null,Aa(a,n,o),pt=d,ps=p,pt!==null)if(ps)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(o.stateNode)}catch(x){ut(o,n,x)}else try{pt.removeChild(o.stateNode)}catch(x){ut(o,n,x)}break;case 18:pt!==null&&(ps?(a=pt,ey(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.stateNode),$o(a)):ey(pt,o.stateNode));break;case 4:d=pt,p=ps,pt=o.stateNode.containerInfo,ps=!0,Aa(a,n,o),pt=d,ps=p;break;case 0:case 11:case 14:case 15:Tt||Ja(2,o,n),Tt||Ja(4,o,n),Aa(a,n,o);break;case 1:Tt||(ia(o,n),d=o.stateNode,typeof d.componentWillUnmount=="function"&&nx(o,n,d)),Aa(a,n,o);break;case 21:Aa(a,n,o);break;case 22:Tt=(d=Tt)||o.memoizedState!==null,Aa(a,n,o),Tt=d;break;default:Aa(a,n,o)}}function hx(a,n){if(n.memoizedState===null&&(a=n.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{$o(a)}catch(o){ut(n,n.return,o)}}function j_(a){switch(a.tag){case 13:case 19:var n=a.stateNode;return n===null&&(n=a.stateNode=new cx),n;case 22:return a=a.stateNode,n=a._retryCache,n===null&&(n=a._retryCache=new cx),n;default:throw Error(i(435,a.tag))}}function dm(a,n){var o=j_(a);n.forEach(function(d){var p=A_.bind(null,a,d);o.has(d)||(o.add(d),d.then(p,p))})}function Ns(a,n){var o=n.deletions;if(o!==null)for(var d=0;d<o.length;d++){var p=o[d],x=a,k=n,P=k;e:for(;P!==null;){switch(P.tag){case 27:if(or(P.type)){pt=P.stateNode,ps=!1;break e}break;case 5:pt=P.stateNode,ps=!1;break e;case 3:case 4:pt=P.stateNode.containerInfo,ps=!0;break e}P=P.return}if(pt===null)throw Error(i(160));mx(x,k,p),pt=null,ps=!1,x=p.alternate,x!==null&&(x.return=null),p.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)fx(n,a),n=n.sibling}var Hs=null;function fx(a,n){var o=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ns(n,a),_s(a),d&4&&(Ja(3,a,a.return),vo(3,a),Ja(5,a,a.return));break;case 1:Ns(n,a),_s(a),d&512&&(Tt||o===null||ia(o,o.return)),d&64&&ka&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(o=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=o===null?d:o.concat(d))));break;case 26:var p=Hs;if(Ns(n,a),_s(a),d&512&&(Tt||o===null||ia(o,o.return)),d&4){var x=o!==null?o.memoizedState:null;if(d=a.memoizedState,o===null)if(d===null)if(a.stateNode===null){e:{d=a.type,o=a.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":x=p.getElementsByTagName("title")[0],(!x||x[Fi]||x[ts]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=p.createElement(d),p.head.insertBefore(x,p.querySelector("head > title"))),Zt(x,d,o),x[ts]=a,qt(x),d=x;break e;case"link":var k=ly("link","href",p).get(d+(o.href||""));if(k){for(var P=0;P<k.length;P++)if(x=k[P],x.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&x.getAttribute("rel")===(o.rel==null?null:o.rel)&&x.getAttribute("title")===(o.title==null?null:o.title)&&x.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){k.splice(P,1);break t}}x=p.createElement(d),Zt(x,d,o),p.head.appendChild(x);break;case"meta":if(k=ly("meta","content",p).get(d+(o.content||""))){for(P=0;P<k.length;P++)if(x=k[P],x.getAttribute("content")===(o.content==null?null:""+o.content)&&x.getAttribute("name")===(o.name==null?null:o.name)&&x.getAttribute("property")===(o.property==null?null:o.property)&&x.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&x.getAttribute("charset")===(o.charSet==null?null:o.charSet)){k.splice(P,1);break t}}x=p.createElement(d),Zt(x,d,o),p.head.appendChild(x);break;default:throw Error(i(468,d))}x[ts]=a,qt(x),d=x}a.stateNode=d}else cy(p,a.type,a.stateNode);else a.stateNode=oy(p,d,a.memoizedProps);else x!==d?(x===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):x.count--,d===null?cy(p,a.type,a.stateNode):oy(p,d,a.memoizedProps)):d===null&&a.stateNode!==null&&im(a,a.memoizedProps,o.memoizedProps)}break;case 27:Ns(n,a),_s(a),d&512&&(Tt||o===null||ia(o,o.return)),o!==null&&d&4&&im(a,a.memoizedProps,o.memoizedProps);break;case 5:if(Ns(n,a),_s(a),d&512&&(Tt||o===null||ia(o,o.return)),a.flags&32){p=a.stateNode;try{_n(p,"")}catch(ne){ut(a,a.return,ne)}}d&4&&a.stateNode!=null&&(p=a.memoizedProps,im(a,p,o!==null?o.memoizedProps:p)),d&1024&&(cm=!0);break;case 6:if(Ns(n,a),_s(a),d&4){if(a.stateNode===null)throw Error(i(162));d=a.memoizedProps,o=a.stateNode;try{o.nodeValue=d}catch(ne){ut(a,a.return,ne)}}break;case 3:if(kc=null,p=Hs,Hs=Ec(n.containerInfo),Ns(n,a),Hs=p,_s(a),d&4&&o!==null&&o.memoizedState.isDehydrated)try{$o(n.containerInfo)}catch(ne){ut(a,a.return,ne)}cm&&(cm=!1,px(a));break;case 4:d=Hs,Hs=Ec(a.stateNode.containerInfo),Ns(n,a),_s(a),Hs=d;break;case 12:Ns(n,a),_s(a);break;case 13:Ns(n,a),_s(a),a.child.flags&8192&&a.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(gm=Ue()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,dm(a,d)));break;case 22:p=a.memoizedState!==null;var I=o!==null&&o.memoizedState!==null,se=ka,ce=Tt;if(ka=se||p,Tt=ce||I,Ns(n,a),Tt=ce,ka=se,_s(a),d&8192)e:for(n=a.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(o===null||I||ka||Tt||Hr(a)),o=null,n=a;;){if(n.tag===5||n.tag===26){if(o===null){I=o=n;try{if(x=I.stateNode,p)k=x.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{P=I.stateNode;var me=I.memoizedProps.style,re=me!=null&&me.hasOwnProperty("display")?me.display:null;P.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ne){ut(I,I.return,ne)}}}else if(n.tag===6){if(o===null){I=n;try{I.stateNode.nodeValue=p?"":I.memoizedProps}catch(ne){ut(I,I.return,ne)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===a)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;o===n&&(o=null),n=n.return}o===n&&(o=null),n.sibling.return=n.return,n=n.sibling}d&4&&(d=a.updateQueue,d!==null&&(o=d.retryQueue,o!==null&&(d.retryQueue=null,dm(a,o))));break;case 19:Ns(n,a),_s(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,dm(a,d)));break;case 30:break;case 21:break;default:Ns(n,a),_s(a)}}function _s(a){var n=a.flags;if(n&2){try{for(var o,d=a.return;d!==null;){if(ox(d)){o=d;break}d=d.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var p=o.stateNode,x=om(a);fc(a,x,p);break;case 5:var k=o.stateNode;o.flags&32&&(_n(k,""),o.flags&=-33);var P=om(a);fc(a,P,k);break;case 3:case 4:var I=o.stateNode.containerInfo,se=om(a);lm(a,se,I);break;default:throw Error(i(161))}}catch(ce){ut(a,a.return,ce)}a.flags&=-3}n&4096&&(a.flags&=-4097)}function px(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var n=a;px(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),a=a.sibling}}function er(a,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)dx(a,n.alternate,n),n=n.sibling}function Hr(a){for(a=a.child;a!==null;){var n=a;switch(n.tag){case 0:case 11:case 14:case 15:Ja(4,n,n.return),Hr(n);break;case 1:ia(n,n.return);var o=n.stateNode;typeof o.componentWillUnmount=="function"&&nx(n,n.return,o),Hr(n);break;case 27:Ao(n.stateNode);case 26:case 5:ia(n,n.return),Hr(n);break;case 22:n.memoizedState===null&&Hr(n);break;case 30:Hr(n);break;default:Hr(n)}a=a.sibling}}function tr(a,n,o){for(o=o&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var d=n.alternate,p=a,x=n,k=x.flags;switch(x.tag){case 0:case 11:case 15:tr(p,x,o),vo(4,x);break;case 1:if(tr(p,x,o),d=x,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(se){ut(d,d.return,se)}if(d=x,p=d.updateQueue,p!==null){var P=d.stateNode;try{var I=p.shared.hiddenCallbacks;if(I!==null)for(p.shared.hiddenCallbacks=null,p=0;p<I.length;p++)Fp(I[p],P)}catch(se){ut(d,d.return,se)}}o&&k&64&&rx(x),jo(x,x.return);break;case 27:lx(x);case 26:case 5:tr(p,x,o),o&&d===null&&k&4&&ix(x),jo(x,x.return);break;case 12:tr(p,x,o);break;case 13:tr(p,x,o),o&&k&4&&hx(p,x);break;case 22:x.memoizedState===null&&tr(p,x,o),jo(x,x.return);break;case 30:break;default:tr(p,x,o)}n=n.sibling}}function um(a,n){var o=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==o&&(a!=null&&a.refCount++,o!=null&&no(o))}function mm(a,n){a=null,n.alternate!==null&&(a=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==a&&(n.refCount++,a!=null&&no(a))}function oa(a,n,o,d){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)gx(a,n,o,d),n=n.sibling}function gx(a,n,o,d){var p=n.flags;switch(n.tag){case 0:case 11:case 15:oa(a,n,o,d),p&2048&&vo(9,n);break;case 1:oa(a,n,o,d);break;case 3:oa(a,n,o,d),p&2048&&(a=null,n.alternate!==null&&(a=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==a&&(n.refCount++,a!=null&&no(a)));break;case 12:if(p&2048){oa(a,n,o,d),a=n.stateNode;try{var x=n.memoizedProps,k=x.id,P=x.onPostCommit;typeof P=="function"&&P(k,n.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(I){ut(n,n.return,I)}}else oa(a,n,o,d);break;case 13:oa(a,n,o,d);break;case 23:break;case 22:x=n.stateNode,k=n.alternate,n.memoizedState!==null?x._visibility&2?oa(a,n,o,d):wo(a,n):x._visibility&2?oa(a,n,o,d):(x._visibility|=2,In(a,n,o,d,(n.subtreeFlags&10256)!==0)),p&2048&&um(k,n);break;case 24:oa(a,n,o,d),p&2048&&mm(n.alternate,n);break;default:oa(a,n,o,d)}}function In(a,n,o,d,p){for(p=p&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var x=a,k=n,P=o,I=d,se=k.flags;switch(k.tag){case 0:case 11:case 15:In(x,k,P,I,p),vo(8,k);break;case 23:break;case 22:var ce=k.stateNode;k.memoizedState!==null?ce._visibility&2?In(x,k,P,I,p):wo(x,k):(ce._visibility|=2,In(x,k,P,I,p)),p&&se&2048&&um(k.alternate,k);break;case 24:In(x,k,P,I,p),p&&se&2048&&mm(k.alternate,k);break;default:In(x,k,P,I,p)}n=n.sibling}}function wo(a,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var o=a,d=n,p=d.flags;switch(d.tag){case 22:wo(o,d),p&2048&&um(d.alternate,d);break;case 24:wo(o,d),p&2048&&mm(d.alternate,d);break;default:wo(o,d)}n=n.sibling}}var No=8192;function Fn(a){if(a.subtreeFlags&No)for(a=a.child;a!==null;)xx(a),a=a.sibling}function xx(a){switch(a.tag){case 26:Fn(a),a.flags&No&&a.memoizedState!==null&&i2(Hs,a.memoizedState,a.memoizedProps);break;case 5:Fn(a);break;case 3:case 4:var n=Hs;Hs=Ec(a.stateNode.containerInfo),Fn(a),Hs=n;break;case 22:a.memoizedState===null&&(n=a.alternate,n!==null&&n.memoizedState!==null?(n=No,No=16777216,Fn(a),No=n):Fn(a));break;default:Fn(a)}}function yx(a){var n=a.alternate;if(n!==null&&(a=n.child,a!==null)){n.child=null;do n=a.sibling,a.sibling=null,a=n;while(a!==null)}}function _o(a){var n=a.deletions;if((a.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var d=n[o];Ft=d,vx(d,a)}yx(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)bx(a),a=a.sibling}function bx(a){switch(a.tag){case 0:case 11:case 15:_o(a),a.flags&2048&&Ja(9,a,a.return);break;case 3:_o(a);break;case 12:_o(a);break;case 22:var n=a.stateNode;a.memoizedState!==null&&n._visibility&2&&(a.return===null||a.return.tag!==13)?(n._visibility&=-3,pc(a)):_o(a);break;default:_o(a)}}function pc(a){var n=a.deletions;if((a.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var d=n[o];Ft=d,vx(d,a)}yx(a)}for(a=a.child;a!==null;){switch(n=a,n.tag){case 0:case 11:case 15:Ja(8,n,n.return),pc(n);break;case 22:o=n.stateNode,o._visibility&2&&(o._visibility&=-3,pc(n));break;default:pc(n)}a=a.sibling}}function vx(a,n){for(;Ft!==null;){var o=Ft;switch(o.tag){case 0:case 11:case 15:Ja(8,o,n);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var d=o.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:no(o.memoizedState.cache)}if(d=o.child,d!==null)d.return=o,Ft=d;else e:for(o=a;Ft!==null;){d=Ft;var p=d.sibling,x=d.return;if(ux(d),d===o){Ft=null;break e}if(p!==null){p.return=x,Ft=p;break e}Ft=x}}}var w_={getCacheForType:function(a){var n=ss(Lt),o=n.data.get(a);return o===void 0&&(o=a(),n.data.set(a,o)),o}},N_=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,Ge=null,Je=0,rt=0,Ss=null,sr=!1,Hn=!1,hm=!1,Ma=0,wt=0,ar=0,Gr=0,fm=0,$s=0,Gn=0,So=null,gs=null,pm=!1,gm=0,gc=1/0,xc=null,rr=null,Qt=0,nr=null,Yn=null,Kn=0,xm=0,ym=null,jx=null,Co=0,bm=null;function Cs(){if((at&2)!==0&&Je!==0)return Je&-Je;if(T.T!==null){var a=Pn;return a!==0?a:Cm()}return z0()}function wx(){$s===0&&($s=(Je&536870912)===0||tt?kr():536870912);var a=zs.current;return a!==null&&(a.flags|=32),$s}function Es(a,n,o){(a===mt&&(rt===2||rt===9)||a.cancelPendingCommit!==null)&&(Xn(a,0),ir(a,Je,$s,!1)),Ia(a,o),((at&2)===0||a!==mt)&&(a===mt&&((at&2)===0&&(Gr|=o),wt===4&&ir(a,Je,$s,!1)),la(a))}function Nx(a,n,o){if((at&6)!==0)throw Error(i(327));var d=!o&&(n&124)===0&&(n&a.expiredLanes)===0||ns(a,n),p=d?C_(a,n):wm(a,n,!0),x=d;do{if(p===0){Hn&&!d&&ir(a,n,0,!1);break}else{if(o=a.current.alternate,x&&!__(o)){p=wm(a,n,!1),x=!1;continue}if(p===2){if(x=n,a.errorRecoveryDisabledLanes&x)var k=0;else k=a.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){n=k;e:{var P=a;p=So;var I=P.current.memoizedState.isDehydrated;if(I&&(Xn(P,k).flags|=256),k=wm(P,k,!1),k!==2){if(hm&&!I){P.errorRecoveryDisabledLanes|=x,Gr|=x,p=4;break e}x=gs,gs=p,x!==null&&(gs===null?gs=x:gs.push.apply(gs,x))}p=k}if(x=!1,p!==2)continue}}if(p===1){Xn(a,0),ir(a,n,0,!0);break}e:{switch(d=a,x=p,x){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:ir(d,n,$s,!sr);break e;case 2:gs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(p=gm+300-Ue(),10<p)){if(ir(d,n,$s,!sr),Xt(d,0,!0)!==0)break e;d.timeoutHandle=Zx(_x.bind(null,d,o,gs,xc,pm,n,$s,Gr,Gn,sr,x,2,-0,0),p);break e}_x(d,o,gs,xc,pm,n,$s,Gr,Gn,sr,x,0,-0,0)}}break}while(!0);la(a)}function _x(a,n,o,d,p,x,k,P,I,se,ce,me,re,ne){if(a.timeoutHandle=-1,me=n.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(Oo={stylesheets:null,count:0,unsuspend:n2},xx(n),me=o2(),me!==null)){a.cancelPendingCommit=me(Mx.bind(null,a,n,x,o,d,p,k,P,I,ce,1,re,ne)),ir(a,x,k,!se);return}Mx(a,n,x,o,d,p,k,P,I)}function __(a){for(var n=a;;){var o=n.tag;if((o===0||o===11||o===15)&&n.flags&16384&&(o=n.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var d=0;d<o.length;d++){var p=o[d],x=p.getSnapshot;p=p.value;try{if(!js(x(),p))return!1}catch{return!1}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===a)break;for(;n.sibling===null;){if(n.return===null||n.return===a)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ir(a,n,o,d){n&=~fm,n&=~Gr,a.suspendedLanes|=n,a.pingedLanes&=~n,d&&(a.warmLanes|=n),d=a.expirationTimes;for(var p=n;0<p;){var x=31-st(p),k=1<<x;d[x]=-1,p&=~k}o!==0&&Tl(a,o,n)}function yc(){return(at&6)===0?(Eo(0),!1):!0}function vm(){if(Ge!==null){if(rt===0)var a=Ge.return;else a=Ge,Na=Ur=null,zu(a),Vn=null,xo=0,a=Ge;for(;a!==null;)ax(a.alternate,a),a=a.return;Ge=null}}function Xn(a,n){var o=a.timeoutHandle;o!==-1&&(a.timeoutHandle=-1,q_(o)),o=a.cancelPendingCommit,o!==null&&(a.cancelPendingCommit=null,o()),vm(),mt=a,Ge=o=va(a.current,null),Je=n,rt=0,Ss=null,sr=!1,Hn=ns(a,n),hm=!1,Gn=$s=fm=Gr=ar=wt=0,gs=So=null,pm=!1,(n&8)!==0&&(n|=n&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=n;0<d;){var p=31-st(d),x=1<<p;n|=a[p],d&=~x}return Ma=n,Ul(),o}function Sx(a,n){Fe=null,T.H=nc,n===oo||n===Xl?(n=qp(),rt=3):n===Bp?(n=qp(),rt=4):rt=n===Ig?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ss=n,Ge===null&&(wt=1,dc(a,Os(n,a.current)))}function Cx(){var a=T.H;return T.H=nc,a===null?nc:a}function Ex(){var a=T.A;return T.A=w_,a}function jm(){wt=4,sr||(Je&4194048)!==Je&&zs.current!==null||(Hn=!0),(ar&134217727)===0&&(Gr&134217727)===0||mt===null||ir(mt,Je,$s,!1)}function wm(a,n,o){var d=at;at|=2;var p=Cx(),x=Ex();(mt!==a||Je!==n)&&(xc=null,Xn(a,n)),n=!1;var k=wt;e:do try{if(rt!==0&&Ge!==null){var P=Ge,I=Ss;switch(rt){case 8:vm(),k=6;break e;case 3:case 2:case 9:case 6:zs.current===null&&(n=!0);var se=rt;if(rt=0,Ss=null,Wn(a,P,I,se),o&&Hn){k=0;break e}break;default:se=rt,rt=0,Ss=null,Wn(a,P,I,se)}}S_(),k=wt;break}catch(ce){Sx(a,ce)}while(!0);return n&&a.shellSuspendCounter++,Na=Ur=null,at=d,T.H=p,T.A=x,Ge===null&&(mt=null,Je=0,Ul()),k}function S_(){for(;Ge!==null;)Tx(Ge)}function C_(a,n){var o=at;at|=2;var d=Cx(),p=Ex();mt!==a||Je!==n?(xc=null,gc=Ue()+500,Xn(a,n)):Hn=ns(a,n);e:do try{if(rt!==0&&Ge!==null){n=Ge;var x=Ss;t:switch(rt){case 1:rt=0,Ss=null,Wn(a,n,x,1);break;case 2:case 9:if(Up(x)){rt=0,Ss=null,kx(n);break}n=function(){rt!==2&&rt!==9||mt!==a||(rt=7),la(a)},x.then(n,n);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Up(x)?(rt=0,Ss=null,kx(n)):(rt=0,Ss=null,Wn(a,n,x,7));break;case 5:var k=null;switch(Ge.tag){case 26:k=Ge.memoizedState;case 5:case 27:var P=Ge;if(!k||dy(k)){rt=0,Ss=null;var I=P.sibling;if(I!==null)Ge=I;else{var se=P.return;se!==null?(Ge=se,bc(se)):Ge=null}break t}}rt=0,Ss=null,Wn(a,n,x,5);break;case 6:rt=0,Ss=null,Wn(a,n,x,6);break;case 8:vm(),wt=6;break e;default:throw Error(i(462))}}E_();break}catch(ce){Sx(a,ce)}while(!0);return Na=Ur=null,T.H=d,T.A=p,at=o,Ge!==null?0:(mt=null,Je=0,Ul(),wt)}function E_(){for(;Ge!==null&&!St();)Tx(Ge)}function Tx(a){var n=tx(a.alternate,a,Ma);a.memoizedProps=a.pendingProps,n===null?bc(a):Ge=n}function kx(a){var n=a,o=n.alternate;switch(n.tag){case 15:case 0:n=Xg(o,n,n.pendingProps,n.type,void 0,Je);break;case 11:n=Xg(o,n,n.pendingProps,n.type.render,n.ref,Je);break;case 5:zu(n);default:ax(o,n),n=Ge=Ap(n,Ma),n=tx(o,n,Ma)}a.memoizedProps=a.pendingProps,n===null?bc(a):Ge=n}function Wn(a,n,o,d){Na=Ur=null,zu(n),Vn=null,xo=0;var p=n.return;try{if(g_(a,p,n,o,Je)){wt=1,dc(a,Os(o,a.current)),Ge=null;return}}catch(x){if(p!==null)throw Ge=p,x;wt=1,dc(a,Os(o,a.current)),Ge=null;return}n.flags&32768?(tt||d===1?a=!0:Hn||(Je&536870912)!==0?a=!1:(sr=a=!0,(d===2||d===9||d===3||d===6)&&(d=zs.current,d!==null&&d.tag===13&&(d.flags|=16384))),Ax(n,a)):bc(n)}function bc(a){var n=a;do{if((n.flags&32768)!==0){Ax(n,sr);return}a=n.return;var o=y_(n.alternate,n,Ma);if(o!==null){Ge=o;return}if(n=n.sibling,n!==null){Ge=n;return}Ge=n=a}while(n!==null);wt===0&&(wt=5)}function Ax(a,n){do{var o=b_(a.alternate,a);if(o!==null){o.flags&=32767,Ge=o;return}if(o=a.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!n&&(a=a.sibling,a!==null)){Ge=a;return}Ge=a=o}while(a!==null);wt=6,Ge=null}function Mx(a,n,o,d,p,x,k,P,I){a.cancelPendingCommit=null;do vc();while(Qt!==0);if((at&6)!==0)throw Error(i(327));if(n!==null){if(n===a.current)throw Error(i(177));if(x=n.lanes|n.childLanes,x|=mu,El(a,o,x,k,P,I),a===mt&&(Ge=mt=null,Je=0),Yn=n,nr=a,Kn=o,xm=x,ym=p,jx=d,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,M_(te,function(){return Lx(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||d){d=T.T,T.T=null,p=R.p,R.p=2,k=at,at|=4;try{v_(a,n,o)}finally{at=k,R.p=p,T.T=d}}Qt=1,Dx(),Ox(),Rx()}}function Dx(){if(Qt===1){Qt=0;var a=nr,n=Yn,o=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||o){o=T.T,T.T=null;var d=R.p;R.p=2;var p=at;at|=4;try{fx(n,a);var x=Rm,k=vp(a.containerInfo),P=x.focusedElem,I=x.selectionRange;if(k!==P&&P&&P.ownerDocument&&bp(P.ownerDocument.documentElement,P)){if(I!==null&&ou(P)){var se=I.start,ce=I.end;if(ce===void 0&&(ce=se),"selectionStart"in P)P.selectionStart=se,P.selectionEnd=Math.min(ce,P.value.length);else{var me=P.ownerDocument||document,re=me&&me.defaultView||window;if(re.getSelection){var ne=re.getSelection(),$e=P.textContent.length,Re=Math.min(I.start,$e),dt=I.end===void 0?Re:Math.min(I.end,$e);!ne.extend&&Re>dt&&(k=dt,dt=Re,Re=k);var Q=yp(P,Re),Y=yp(P,dt);if(Q&&Y&&(ne.rangeCount!==1||ne.anchorNode!==Q.node||ne.anchorOffset!==Q.offset||ne.focusNode!==Y.node||ne.focusOffset!==Y.offset)){var ee=me.createRange();ee.setStart(Q.node,Q.offset),ne.removeAllRanges(),Re>dt?(ne.addRange(ee),ne.extend(Y.node,Y.offset)):(ee.setEnd(Y.node,Y.offset),ne.addRange(ee))}}}}for(me=[],ne=P;ne=ne.parentNode;)ne.nodeType===1&&me.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<me.length;P++){var de=me[P];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Dc=!!Om,Rm=Om=null}finally{at=p,R.p=d,T.T=o}}a.current=n,Qt=2}}function Ox(){if(Qt===2){Qt=0;var a=nr,n=Yn,o=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||o){o=T.T,T.T=null;var d=R.p;R.p=2;var p=at;at|=4;try{dx(a,n.alternate,n)}finally{at=p,R.p=d,T.T=o}}Qt=3}}function Rx(){if(Qt===4||Qt===3){Qt=0,Me();var a=nr,n=Yn,o=Kn,d=jx;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Qt=5:(Qt=0,Yn=nr=null,Px(a,a.pendingLanes));var p=a.pendingLanes;if(p===0&&(rr=null),Ud(o),n=n.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(_e,n,void 0,(n.current.flags&128)===128)}catch{}if(d!==null){n=T.T,p=R.p,R.p=2,T.T=null;try{for(var x=a.onRecoverableError,k=0;k<d.length;k++){var P=d[k];x(P.value,{componentStack:P.stack})}}finally{T.T=n,R.p=p}}(Kn&3)!==0&&vc(),la(a),p=a.pendingLanes,(o&4194090)!==0&&(p&42)!==0?a===bm?Co++:(Co=0,bm=a):Co=0,Eo(0)}}function Px(a,n){(a.pooledCacheLanes&=n)===0&&(n=a.pooledCache,n!=null&&(a.pooledCache=null,no(n)))}function vc(a){return Dx(),Ox(),Rx(),Lx()}function Lx(){if(Qt!==5)return!1;var a=nr,n=xm;xm=0;var o=Ud(Kn),d=T.T,p=R.p;try{R.p=32>o?32:o,T.T=null,o=ym,ym=null;var x=nr,k=Kn;if(Qt=0,Yn=nr=null,Kn=0,(at&6)!==0)throw Error(i(331));var P=at;if(at|=4,bx(x.current),gx(x,x.current,k,o),at=P,Eo(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(_e,x)}catch{}return!0}finally{R.p=p,T.T=d,Px(a,n)}}function zx(a,n,o){n=Os(o,n),n=Qu(a.stateNode,n,2),a=Xa(a,n,2),a!==null&&(Ia(a,2),la(a))}function ut(a,n,o){if(a.tag===3)zx(a,a,o);else for(;n!==null;){if(n.tag===3){zx(n,a,o);break}else if(n.tag===1){var d=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(rr===null||!rr.has(d))){a=Os(o,a),o=Vg(2),d=Xa(n,o,2),d!==null&&(qg(o,d,n,a),Ia(d,2),la(d));break}}n=n.return}}function Nm(a,n,o){var d=a.pingCache;if(d===null){d=a.pingCache=new N_;var p=new Set;d.set(n,p)}else p=d.get(n),p===void 0&&(p=new Set,d.set(n,p));p.has(o)||(hm=!0,p.add(o),a=T_.bind(null,a,n,o),n.then(a,a))}function T_(a,n,o){var d=a.pingCache;d!==null&&d.delete(n),a.pingedLanes|=a.suspendedLanes&o,a.warmLanes&=~o,mt===a&&(Je&o)===o&&(wt===4||wt===3&&(Je&62914560)===Je&&300>Ue()-gm?(at&2)===0&&Xn(a,0):fm|=o,Gn===Je&&(Gn=0)),la(a)}function $x(a,n){n===0&&(n=Ii()),a=Mn(a,n),a!==null&&(Ia(a,n),la(a))}function k_(a){var n=a.memoizedState,o=0;n!==null&&(o=n.retryLane),$x(a,o)}function A_(a,n){var o=0;switch(a.tag){case 13:var d=a.stateNode,p=a.memoizedState;p!==null&&(o=p.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(n),$x(a,o)}function M_(a,n){return Oe(a,n)}var jc=null,Qn=null,_m=!1,wc=!1,Sm=!1,Yr=0;function la(a){a!==Qn&&a.next===null&&(Qn===null?jc=Qn=a:Qn=Qn.next=a),wc=!0,_m||(_m=!0,O_())}function Eo(a,n){if(!Sm&&wc){Sm=!0;do for(var o=!1,d=jc;d!==null;){if(a!==0){var p=d.pendingLanes;if(p===0)var x=0;else{var k=d.suspendedLanes,P=d.pingedLanes;x=(1<<31-st(42|a)+1)-1,x&=p&~(k&~P),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(o=!0,qx(d,x))}else x=Je,x=Xt(d,d===mt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||ns(d,x)||(o=!0,qx(d,x));d=d.next}while(o);Sm=!1}}function D_(){Bx()}function Bx(){wc=_m=!1;var a=0;Yr!==0&&(V_()&&(a=Yr),Yr=0);for(var n=Ue(),o=null,d=jc;d!==null;){var p=d.next,x=Ux(d,n);x===0?(d.next=null,o===null?jc=p:o.next=p,p===null&&(Qn=o)):(o=d,(a!==0||(x&3)!==0)&&(wc=!0)),d=p}Eo(a)}function Ux(a,n){for(var o=a.suspendedLanes,d=a.pingedLanes,p=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var k=31-st(x),P=1<<k,I=p[k];I===-1?((P&o)===0||(P&d)!==0)&&(p[k]=aa(P,n)):I<=n&&(a.expiredLanes|=P),x&=~P}if(n=mt,o=Je,o=Xt(a,a===n?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,o===0||a===n&&(rt===2||rt===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Qe(d),a.callbackNode=null,a.callbackPriority=0;if((o&3)===0||ns(a,o)){if(n=o&-o,n===a.callbackPriority)return n;switch(d!==null&&Qe(d),Ud(o)){case 2:case 8:o=F;break;case 32:o=te;break;case 268435456:o=be;break;default:o=te}return d=Vx.bind(null,a),o=Oe(o,d),a.callbackPriority=n,a.callbackNode=o,n}return d!==null&&d!==null&&Qe(d),a.callbackPriority=2,a.callbackNode=null,2}function Vx(a,n){if(Qt!==0&&Qt!==5)return a.callbackNode=null,a.callbackPriority=0,null;var o=a.callbackNode;if(vc()&&a.callbackNode!==o)return null;var d=Je;return d=Xt(a,a===mt?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(Nx(a,d,n),Ux(a,Ue()),a.callbackNode!=null&&a.callbackNode===o?Vx.bind(null,a):null)}function qx(a,n){if(vc())return null;Nx(a,n,!0)}function O_(){I_(function(){(at&6)!==0?Oe(us,D_):Bx()})}function Cm(){return Yr===0&&(Yr=kr()),Yr}function Ix(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ol(""+a)}function Fx(a,n){var o=n.ownerDocument.createElement("input");return o.name=n.name,o.value=n.value,a.id&&o.setAttribute("form",a.id),n.parentNode.insertBefore(o,n),a=new FormData(a),o.parentNode.removeChild(o),a}function R_(a,n,o,d,p){if(n==="submit"&&o&&o.stateNode===p){var x=Ix((p[ms]||null).action),k=d.submitter;k&&(n=(n=k[ms]||null)?Ix(n.formAction):k.getAttribute("formAction"),n!==null&&(x=n,k=null));var P=new zl("action","action",null,d,p);a.push({event:P,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Yr!==0){var I=k?Fx(p,k):new FormData(p);Gu(o,{pending:!0,data:I,method:p.method,action:x},null,I)}}else typeof x=="function"&&(P.preventDefault(),I=k?Fx(p,k):new FormData(p),Gu(o,{pending:!0,data:I,method:p.method,action:x},x,I))},currentTarget:p}]})}}for(var Em=0;Em<uu.length;Em++){var Tm=uu[Em],P_=Tm.toLowerCase(),L_=Tm[0].toUpperCase()+Tm.slice(1);Fs(P_,"on"+L_)}Fs(Np,"onAnimationEnd"),Fs(_p,"onAnimationIteration"),Fs(Sp,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(JN,"onTransitionRun"),Fs(e_,"onTransitionStart"),Fs(t_,"onTransitionCancel"),Fs(Cp,"onTransitionEnd"),jn("onMouseEnter",["mouseout","mouseover"]),jn("onMouseLeave",["mouseout","mouseover"]),jn("onPointerEnter",["pointerout","pointerover"]),jn("onPointerLeave",["pointerout","pointerover"]),Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(To));function Hx(a,n){n=(n&4)!==0;for(var o=0;o<a.length;o++){var d=a[o],p=d.event;d=d.listeners;e:{var x=void 0;if(n)for(var k=d.length-1;0<=k;k--){var P=d[k],I=P.instance,se=P.currentTarget;if(P=P.listener,I!==x&&p.isPropagationStopped())break e;x=P,p.currentTarget=se;try{x(p)}catch(ce){cc(ce)}p.currentTarget=null,x=I}else for(k=0;k<d.length;k++){if(P=d[k],I=P.instance,se=P.currentTarget,P=P.listener,I!==x&&p.isPropagationStopped())break e;x=P,p.currentTarget=se;try{x(p)}catch(ce){cc(ce)}p.currentTarget=null,x=I}}}}function Ye(a,n){var o=n[Vd];o===void 0&&(o=n[Vd]=new Set);var d=a+"__bubble";o.has(d)||(Gx(n,a,2,!1),o.add(d))}function km(a,n,o){var d=0;n&&(d|=4),Gx(o,a,d,n)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function Am(a){if(!a[Nc]){a[Nc]=!0,B0.forEach(function(o){o!=="selectionchange"&&(z_.has(o)||km(o,!1,a),km(o,!0,a))});var n=a.nodeType===9?a:a.ownerDocument;n===null||n[Nc]||(n[Nc]=!0,km("selectionchange",!1,n))}}function Gx(a,n,o,d){switch(gy(n)){case 2:var p=d2;break;case 8:p=u2;break;default:p=Fm}o=p.bind(null,n,o,a),p=void 0,!Zd||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),d?p!==void 0?a.addEventListener(n,o,{capture:!0,passive:p}):a.addEventListener(n,o,!0):p!==void 0?a.addEventListener(n,o,{passive:p}):a.addEventListener(n,o,!1)}function Mm(a,n,o,d,p){var x=d;if((n&1)===0&&(n&2)===0&&d!==null)e:for(;;){if(d===null)return;var k=d.tag;if(k===3||k===4){var P=d.stateNode.containerInfo;if(P===p)break;if(k===4)for(k=d.return;k!==null;){var I=k.tag;if((I===3||I===4)&&k.stateNode.containerInfo===p)return;k=k.return}for(;P!==null;){if(k=yn(P),k===null)return;if(I=k.tag,I===5||I===6||I===26||I===27){d=x=k;continue e}P=P.parentNode}}d=d.return}J0(function(){var se=x,ce=Wd(o),me=[];e:{var re=Ep.get(a);if(re!==void 0){var ne=zl,$e=a;switch(a){case"keypress":if(Pl(o)===0)break e;case"keydown":case"keyup":ne=MN;break;case"focusin":$e="focus",ne=su;break;case"focusout":$e="blur",ne=su;break;case"beforeblur":case"afterblur":ne=su;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=sp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=bN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=RN;break;case Np:case _p:case Sp:ne=wN;break;case Cp:ne=LN;break;case"scroll":case"scrollend":ne=xN;break;case"wheel":ne=$N;break;case"copy":case"cut":case"paste":ne=_N;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=rp;break;case"toggle":case"beforetoggle":ne=UN}var Re=(n&4)!==0,dt=!Re&&(a==="scroll"||a==="scrollend"),Q=Re?re!==null?re+"Capture":null:re;Re=[];for(var Y=se,ee;Y!==null;){var de=Y;if(ee=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ee===null||Q===null||(de=Gi(Y,Q),de!=null&&Re.push(ko(Y,de,ee))),dt)break;Y=Y.return}0<Re.length&&(re=new ne(re,$e,null,o,ce),me.push({event:re,listeners:Re}))}}if((n&7)===0){e:{if(re=a==="mouseover"||a==="pointerover",ne=a==="mouseout"||a==="pointerout",re&&o!==Xd&&($e=o.relatedTarget||o.fromElement)&&(yn($e)||$e[xn]))break e;if((ne||re)&&(re=ce.window===ce?ce:(re=ce.ownerDocument)?re.defaultView||re.parentWindow:window,ne?($e=o.relatedTarget||o.toElement,ne=se,$e=$e?yn($e):null,$e!==null&&(dt=c($e),Re=$e.tag,$e!==dt||Re!==5&&Re!==27&&Re!==6)&&($e=null)):(ne=null,$e=se),ne!==$e)){if(Re=sp,de="onMouseLeave",Q="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Re=rp,de="onPointerLeave",Q="onPointerEnter",Y="pointer"),dt=ne==null?re:Hi(ne),ee=$e==null?re:Hi($e),re=new Re(de,Y+"leave",ne,o,ce),re.target=dt,re.relatedTarget=ee,de=null,yn(ce)===se&&(Re=new Re(Q,Y+"enter",$e,o,ce),Re.target=ee,Re.relatedTarget=dt,de=Re),dt=de,ne&&$e)t:{for(Re=ne,Q=$e,Y=0,ee=Re;ee;ee=Zn(ee))Y++;for(ee=0,de=Q;de;de=Zn(de))ee++;for(;0<Y-ee;)Re=Zn(Re),Y--;for(;0<ee-Y;)Q=Zn(Q),ee--;for(;Y--;){if(Re===Q||Q!==null&&Re===Q.alternate)break t;Re=Zn(Re),Q=Zn(Q)}Re=null}else Re=null;ne!==null&&Yx(me,re,ne,Re,!1),$e!==null&&dt!==null&&Yx(me,dt,$e,Re,!0)}}e:{if(re=se?Hi(se):window,ne=re.nodeName&&re.nodeName.toLowerCase(),ne==="select"||ne==="input"&&re.type==="file")var Se=mp;else if(dp(re))if(hp)Se=WN;else{Se=KN;var He=YN}else ne=re.nodeName,!ne||ne.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?se&&Kd(se.elementType)&&(Se=mp):Se=XN;if(Se&&(Se=Se(a,se))){up(me,Se,o,ce);break e}He&&He(a,re,se),a==="focusout"&&se&&re.type==="number"&&se.memoizedProps.value!=null&&Yd(re,"number",re.value)}switch(He=se?Hi(se):window,a){case"focusin":(dp(He)||He.contentEditable==="true")&&(Tn=He,lu=se,eo=null);break;case"focusout":eo=lu=Tn=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,jp(me,o,ce);break;case"selectionchange":if(ZN)break;case"keydown":case"keyup":jp(me,o,ce)}var ke;if(ru)e:{switch(a){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else En?lp(a,o)&&(Pe="onCompositionEnd"):a==="keydown"&&o.keyCode===229&&(Pe="onCompositionStart");Pe&&(np&&o.locale!=="ko"&&(En||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&En&&(ke=ep()):(Ha=ce,Jd="value"in Ha?Ha.value:Ha.textContent,En=!0)),He=_c(se,Pe),0<He.length&&(Pe=new ap(Pe,a,null,o,ce),me.push({event:Pe,listeners:He}),ke?Pe.data=ke:(ke=cp(o),ke!==null&&(Pe.data=ke)))),(ke=qN?IN(a,o):FN(a,o))&&(Pe=_c(se,"onBeforeInput"),0<Pe.length&&(He=new ap("onBeforeInput","beforeinput",null,o,ce),me.push({event:He,listeners:Pe}),He.data=ke)),R_(me,a,se,o,ce)}Hx(me,n)})}function ko(a,n,o){return{instance:a,listener:n,currentTarget:o}}function _c(a,n){for(var o=n+"Capture",d=[];a!==null;){var p=a,x=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||x===null||(p=Gi(a,o),p!=null&&d.unshift(ko(a,p,x)),p=Gi(a,n),p!=null&&d.push(ko(a,p,x))),a.tag===3)return d;a=a.return}return[]}function Zn(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Yx(a,n,o,d,p){for(var x=n._reactName,k=[];o!==null&&o!==d;){var P=o,I=P.alternate,se=P.stateNode;if(P=P.tag,I!==null&&I===d)break;P!==5&&P!==26&&P!==27||se===null||(I=se,p?(se=Gi(o,x),se!=null&&k.unshift(ko(o,se,I))):p||(se=Gi(o,x),se!=null&&k.push(ko(o,se,I)))),o=o.return}k.length!==0&&a.push({event:n,listeners:k})}var $_=/\r\n?/g,B_=/\u0000|\uFFFD/g;function Kx(a){return(typeof a=="string"?a:""+a).replace($_,`
`).replace(B_,"")}function Xx(a,n){return n=Kx(n),Kx(a)===n}function Sc(){}function ct(a,n,o,d,p,x){switch(o){case"children":typeof d=="string"?n==="body"||n==="textarea"&&d===""||_n(a,d):(typeof d=="number"||typeof d=="bigint")&&n!=="body"&&_n(a,""+d);break;case"className":Al(a,"class",d);break;case"tabIndex":Al(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(a,o,d);break;case"style":Q0(a,d,x);break;case"data":if(n!=="object"){Al(a,"data",d);break}case"src":case"href":if(d===""&&(n!=="a"||o!=="href")){a.removeAttribute(o);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(o);break}d=Ol(""+d),a.setAttribute(o,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(o==="formAction"?(n!=="input"&&ct(a,n,"name",p.name,p,null),ct(a,n,"formEncType",p.formEncType,p,null),ct(a,n,"formMethod",p.formMethod,p,null),ct(a,n,"formTarget",p.formTarget,p,null)):(ct(a,n,"encType",p.encType,p,null),ct(a,n,"method",p.method,p,null),ct(a,n,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(o);break}d=Ol(""+d),a.setAttribute(o,d);break;case"onClick":d!=null&&(a.onclick=Sc);break;case"onScroll":d!=null&&Ye("scroll",a);break;case"onScrollEnd":d!=null&&Ye("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(o=d.__html,o!=null){if(p.children!=null)throw Error(i(60));a.innerHTML=o}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}o=Ol(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(o,""+d):a.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(o,""):a.removeAttribute(o);break;case"capture":case"download":d===!0?a.setAttribute(o,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(o,d):a.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(o,d):a.removeAttribute(o);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(o):a.setAttribute(o,d);break;case"popover":Ye("beforetoggle",a),Ye("toggle",a),kl(a,"popover",d);break;case"xlinkActuate":ya(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ya(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ya(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ya(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ya(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ya(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ya(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ya(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ya(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":kl(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=pN.get(o)||o,kl(a,o,d))}}function Dm(a,n,o,d,p,x){switch(o){case"style":Q0(a,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(o=d.__html,o!=null){if(p.children!=null)throw Error(i(60));a.innerHTML=o}}break;case"children":typeof d=="string"?_n(a,d):(typeof d=="number"||typeof d=="bigint")&&_n(a,""+d);break;case"onScroll":d!=null&&Ye("scroll",a);break;case"onScrollEnd":d!=null&&Ye("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Sc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!U0.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),n=o.slice(2,p?o.length-7:void 0),x=a[ms]||null,x=x!=null?x[o]:null,typeof x=="function"&&a.removeEventListener(n,x,p),typeof d=="function")){typeof x!="function"&&x!==null&&(o in a?a[o]=null:a.hasAttribute(o)&&a.removeAttribute(o)),a.addEventListener(n,d,p);break e}o in a?a[o]=d:d===!0?a.setAttribute(o,""):kl(a,o,d)}}}function Zt(a,n,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",a),Ye("load",a);var d=!1,p=!1,x;for(x in o)if(o.hasOwnProperty(x)){var k=o[x];if(k!=null)switch(x){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ct(a,n,x,k,o,null)}}p&&ct(a,n,"srcSet",o.srcSet,o,null),d&&ct(a,n,"src",o.src,o,null);return;case"input":Ye("invalid",a);var P=x=k=p=null,I=null,se=null;for(d in o)if(o.hasOwnProperty(d)){var ce=o[d];if(ce!=null)switch(d){case"name":p=ce;break;case"type":k=ce;break;case"checked":I=ce;break;case"defaultChecked":se=ce;break;case"value":x=ce;break;case"defaultValue":P=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,n));break;default:ct(a,n,d,ce,o,null)}}Y0(a,x,P,I,se,k,p,!1),Ml(a);return;case"select":Ye("invalid",a),d=k=x=null;for(p in o)if(o.hasOwnProperty(p)&&(P=o[p],P!=null))switch(p){case"value":x=P;break;case"defaultValue":k=P;break;case"multiple":d=P;default:ct(a,n,p,P,o,null)}n=x,o=k,a.multiple=!!d,n!=null?Nn(a,!!d,n,!1):o!=null&&Nn(a,!!d,o,!0);return;case"textarea":Ye("invalid",a),x=p=d=null;for(k in o)if(o.hasOwnProperty(k)&&(P=o[k],P!=null))switch(k){case"value":d=P;break;case"defaultValue":p=P;break;case"children":x=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:ct(a,n,k,P,o,null)}X0(a,d,p,x),Ml(a);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(d=o[I],d!=null))switch(I){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ct(a,n,I,d,o,null)}return;case"dialog":Ye("beforetoggle",a),Ye("toggle",a),Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":Ye("load",a);break;case"video":case"audio":for(d=0;d<To.length;d++)Ye(To[d],a);break;case"image":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"embed":case"source":case"link":Ye("error",a),Ye("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in o)if(o.hasOwnProperty(se)&&(d=o[se],d!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ct(a,n,se,d,o,null)}return;default:if(Kd(n)){for(ce in o)o.hasOwnProperty(ce)&&(d=o[ce],d!==void 0&&Dm(a,n,ce,d,o,void 0));return}}for(P in o)o.hasOwnProperty(P)&&(d=o[P],d!=null&&ct(a,n,P,d,o,null))}function U_(a,n,o,d){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,x=null,k=null,P=null,I=null,se=null,ce=null;for(ne in o){var me=o[ne];if(o.hasOwnProperty(ne)&&me!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":I=me;default:d.hasOwnProperty(ne)||ct(a,n,ne,null,d,me)}}for(var re in d){var ne=d[re];if(me=o[re],d.hasOwnProperty(re)&&(ne!=null||me!=null))switch(re){case"type":x=ne;break;case"name":p=ne;break;case"checked":se=ne;break;case"defaultChecked":ce=ne;break;case"value":k=ne;break;case"defaultValue":P=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,n));break;default:ne!==me&&ct(a,n,re,ne,d,me)}}Gd(a,k,P,I,se,ce,x,p);return;case"select":ne=k=P=re=null;for(x in o)if(I=o[x],o.hasOwnProperty(x)&&I!=null)switch(x){case"value":break;case"multiple":ne=I;default:d.hasOwnProperty(x)||ct(a,n,x,null,d,I)}for(p in d)if(x=d[p],I=o[p],d.hasOwnProperty(p)&&(x!=null||I!=null))switch(p){case"value":re=x;break;case"defaultValue":P=x;break;case"multiple":k=x;default:x!==I&&ct(a,n,p,x,d,I)}n=P,o=k,d=ne,re!=null?Nn(a,!!o,re,!1):!!d!=!!o&&(n!=null?Nn(a,!!o,n,!0):Nn(a,!!o,o?[]:"",!1));return;case"textarea":ne=re=null;for(P in o)if(p=o[P],o.hasOwnProperty(P)&&p!=null&&!d.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:ct(a,n,P,null,d,p)}for(k in d)if(p=d[k],x=o[k],d.hasOwnProperty(k)&&(p!=null||x!=null))switch(k){case"value":re=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==x&&ct(a,n,k,p,d,x)}K0(a,re,ne);return;case"option":for(var $e in o)if(re=o[$e],o.hasOwnProperty($e)&&re!=null&&!d.hasOwnProperty($e))switch($e){case"selected":a.selected=!1;break;default:ct(a,n,$e,null,d,re)}for(I in d)if(re=d[I],ne=o[I],d.hasOwnProperty(I)&&re!==ne&&(re!=null||ne!=null))switch(I){case"selected":a.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:ct(a,n,I,re,d,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in o)re=o[Re],o.hasOwnProperty(Re)&&re!=null&&!d.hasOwnProperty(Re)&&ct(a,n,Re,null,d,re);for(se in d)if(re=d[se],ne=o[se],d.hasOwnProperty(se)&&re!==ne&&(re!=null||ne!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,n));break;default:ct(a,n,se,re,d,ne)}return;default:if(Kd(n)){for(var dt in o)re=o[dt],o.hasOwnProperty(dt)&&re!==void 0&&!d.hasOwnProperty(dt)&&Dm(a,n,dt,void 0,d,re);for(ce in d)re=d[ce],ne=o[ce],!d.hasOwnProperty(ce)||re===ne||re===void 0&&ne===void 0||Dm(a,n,ce,re,d,ne);return}}for(var Q in o)re=o[Q],o.hasOwnProperty(Q)&&re!=null&&!d.hasOwnProperty(Q)&&ct(a,n,Q,null,d,re);for(me in d)re=d[me],ne=o[me],!d.hasOwnProperty(me)||re===ne||re==null&&ne==null||ct(a,n,me,re,d,ne)}var Om=null,Rm=null;function Cc(a){return a.nodeType===9?a:a.ownerDocument}function Wx(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qx(a,n){if(a===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&n==="foreignObject"?0:a}function Pm(a,n){return a==="textarea"||a==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Lm=null;function V_(){var a=window.event;return a&&a.type==="popstate"?a===Lm?!1:(Lm=a,!0):(Lm=null,!1)}var Zx=typeof setTimeout=="function"?setTimeout:void 0,q_=typeof clearTimeout=="function"?clearTimeout:void 0,Jx=typeof Promise=="function"?Promise:void 0,I_=typeof queueMicrotask=="function"?queueMicrotask:typeof Jx<"u"?function(a){return Jx.resolve(null).then(a).catch(F_)}:Zx;function F_(a){setTimeout(function(){throw a})}function or(a){return a==="head"}function ey(a,n){var o=n,d=0,p=0;do{var x=o.nextSibling;if(a.removeChild(o),x&&x.nodeType===8)if(o=x.data,o==="/$"){if(0<d&&8>d){o=d;var k=a.ownerDocument;if(o&1&&Ao(k.documentElement),o&2&&Ao(k.body),o&4)for(o=k.head,Ao(o),k=o.firstChild;k;){var P=k.nextSibling,I=k.nodeName;k[Fi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&k.rel.toLowerCase()==="stylesheet"||o.removeChild(k),k=P}}if(p===0){a.removeChild(x),$o(n);return}p--}else o==="$"||o==="$?"||o==="$!"?p++:d=o.charCodeAt(0)-48;else d=0;o=x}while(o);$o(n)}function zm(a){var n=a.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var o=n;switch(n=n.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":zm(o),qd(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}a.removeChild(o)}}function H_(a,n,o,d){for(;a.nodeType===1;){var p=o;if(a.nodeName.toLowerCase()!==n.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Fi])switch(n){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==p.rel||a.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||a.getAttribute("title")!==(p.title==null?null:p.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(p.src==null?null:p.src)||a.getAttribute("type")!==(p.type==null?null:p.type)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(n==="input"&&a.type==="hidden"){var x=p.name==null?null:""+p.name;if(p.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=Gs(a.nextSibling),a===null)break}return null}function G_(a,n,o){if(n==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Gs(a.nextSibling),a===null))return null;return a}function $m(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Y_(a,n){var o=a.ownerDocument;if(a.data!=="$?"||o.readyState==="complete")n();else{var d=function(){n(),o.removeEventListener("DOMContentLoaded",d)};o.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Gs(a){for(;a!=null;a=a.nextSibling){var n=a.nodeType;if(n===1||n===3)break;if(n===8){if(n=a.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return a}var Bm=null;function ty(a){a=a.previousSibling;for(var n=0;a;){if(a.nodeType===8){var o=a.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return a;n--}else o==="/$"&&n++}a=a.previousSibling}return null}function sy(a,n,o){switch(n=Cc(o),a){case"html":if(a=n.documentElement,!a)throw Error(i(452));return a;case"head":if(a=n.head,!a)throw Error(i(453));return a;case"body":if(a=n.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Ao(a){for(var n=a.attributes;n.length;)a.removeAttributeNode(n[0]);qd(a)}var Bs=new Map,ay=new Set;function Ec(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Da=R.d;R.d={f:K_,r:X_,D:W_,C:Q_,L:Z_,m:J_,X:t2,S:e2,M:s2};function K_(){var a=Da.f(),n=yc();return a||n}function X_(a){var n=bn(a);n!==null&&n.tag===5&&n.type==="form"?Ng(n):Da.r(a)}var Jn=typeof document>"u"?null:document;function ry(a,n,o){var d=Jn;if(d&&typeof n=="string"&&n){var p=Ds(n);p='link[rel="'+a+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),ay.has(p)||(ay.add(p),a={rel:a,crossOrigin:o,href:n},d.querySelector(p)===null&&(n=d.createElement("link"),Zt(n,"link",a),qt(n),d.head.appendChild(n)))}}function W_(a){Da.D(a),ry("dns-prefetch",a,null)}function Q_(a,n){Da.C(a,n),ry("preconnect",a,n)}function Z_(a,n,o){Da.L(a,n,o);var d=Jn;if(d&&a&&n){var p='link[rel="preload"][as="'+Ds(n)+'"]';n==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+Ds(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+Ds(o.imageSizes)+'"]')):p+='[href="'+Ds(a)+'"]';var x=p;switch(n){case"style":x=ei(a);break;case"script":x=ti(a)}Bs.has(x)||(a=g({rel:"preload",href:n==="image"&&o&&o.imageSrcSet?void 0:a,as:n},o),Bs.set(x,a),d.querySelector(p)!==null||n==="style"&&d.querySelector(Mo(x))||n==="script"&&d.querySelector(Do(x))||(n=d.createElement("link"),Zt(n,"link",a),qt(n),d.head.appendChild(n)))}}function J_(a,n){Da.m(a,n);var o=Jn;if(o&&a){var d=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+Ds(d)+'"][href="'+Ds(a)+'"]',x=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=ti(a)}if(!Bs.has(x)&&(a=g({rel:"modulepreload",href:a},n),Bs.set(x,a),o.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Do(x)))return}d=o.createElement("link"),Zt(d,"link",a),qt(d),o.head.appendChild(d)}}}function e2(a,n,o){Da.S(a,n,o);var d=Jn;if(d&&a){var p=vn(d).hoistableStyles,x=ei(a);n=n||"default";var k=p.get(x);if(!k){var P={loading:0,preload:null};if(k=d.querySelector(Mo(x)))P.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":n},o),(o=Bs.get(x))&&Um(a,o);var I=k=d.createElement("link");qt(I),Zt(I,"link",a),I._p=new Promise(function(se,ce){I.onload=se,I.onerror=ce}),I.addEventListener("load",function(){P.loading|=1}),I.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Tc(k,n,d)}k={type:"stylesheet",instance:k,count:1,state:P},p.set(x,k)}}}function t2(a,n){Da.X(a,n);var o=Jn;if(o&&a){var d=vn(o).hoistableScripts,p=ti(a),x=d.get(p);x||(x=o.querySelector(Do(p)),x||(a=g({src:a,async:!0},n),(n=Bs.get(p))&&Vm(a,n),x=o.createElement("script"),qt(x),Zt(x,"link",a),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(p,x))}}function s2(a,n){Da.M(a,n);var o=Jn;if(o&&a){var d=vn(o).hoistableScripts,p=ti(a),x=d.get(p);x||(x=o.querySelector(Do(p)),x||(a=g({src:a,async:!0,type:"module"},n),(n=Bs.get(p))&&Vm(a,n),x=o.createElement("script"),qt(x),Zt(x,"link",a),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(p,x))}}function ny(a,n,o,d){var p=(p=fe.current)?Ec(p):null;if(!p)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(n=ei(o.href),o=vn(p).hoistableStyles,d=o.get(n),d||(d={type:"style",instance:null,count:0,state:null},o.set(n,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){a=ei(o.href);var x=vn(p).hoistableStyles,k=x.get(a);if(k||(p=p.ownerDocument||p,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,k),(x=p.querySelector(Mo(a)))&&!x._p&&(k.instance=x,k.state.loading=5),Bs.has(a)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Bs.set(a,o),x||a2(p,a,o,k.state))),n&&d===null)throw Error(i(528,""));return k}if(n&&d!==null)throw Error(i(529,""));return null;case"script":return n=o.async,o=o.src,typeof o=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ti(o),o=vn(p).hoistableScripts,d=o.get(n),d||(d={type:"script",instance:null,count:0,state:null},o.set(n,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function ei(a){return'href="'+Ds(a)+'"'}function Mo(a){return'link[rel="stylesheet"]['+a+"]"}function iy(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function a2(a,n,o,d){a.querySelector('link[rel="preload"][as="style"]['+n+"]")?d.loading=1:(n=a.createElement("link"),d.preload=n,n.addEventListener("load",function(){return d.loading|=1}),n.addEventListener("error",function(){return d.loading|=2}),Zt(n,"link",o),qt(n),a.head.appendChild(n))}function ti(a){return'[src="'+Ds(a)+'"]'}function Do(a){return"script[async]"+a}function oy(a,n,o){if(n.count++,n.instance===null)switch(n.type){case"style":var d=a.querySelector('style[data-href~="'+Ds(o.href)+'"]');if(d)return n.instance=d,qt(d),d;var p=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),qt(d),Zt(d,"style",p),Tc(d,o.precedence,a),n.instance=d;case"stylesheet":p=ei(o.href);var x=a.querySelector(Mo(p));if(x)return n.state.loading|=4,n.instance=x,qt(x),x;d=iy(o),(p=Bs.get(p))&&Um(d,p),x=(a.ownerDocument||a).createElement("link"),qt(x);var k=x;return k._p=new Promise(function(P,I){k.onload=P,k.onerror=I}),Zt(x,"link",d),n.state.loading|=4,Tc(x,o.precedence,a),n.instance=x;case"script":return x=ti(o.src),(p=a.querySelector(Do(x)))?(n.instance=p,qt(p),p):(d=o,(p=Bs.get(x))&&(d=g({},o),Vm(d,p)),a=a.ownerDocument||a,p=a.createElement("script"),qt(p),Zt(p,"link",d),a.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(d=n.instance,n.state.loading|=4,Tc(d,o.precedence,a));return n.instance}function Tc(a,n,o){for(var d=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,x=p,k=0;k<d.length;k++){var P=d[k];if(P.dataset.precedence===n)x=P;else if(x!==p)break}x?x.parentNode.insertBefore(a,x.nextSibling):(n=o.nodeType===9?o.head:o,n.insertBefore(a,n.firstChild))}function Um(a,n){a.crossOrigin==null&&(a.crossOrigin=n.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=n.referrerPolicy),a.title==null&&(a.title=n.title)}function Vm(a,n){a.crossOrigin==null&&(a.crossOrigin=n.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=n.referrerPolicy),a.integrity==null&&(a.integrity=n.integrity)}var kc=null;function ly(a,n,o){if(kc===null){var d=new Map,p=kc=new Map;p.set(o,d)}else p=kc,d=p.get(o),d||(d=new Map,p.set(o,d));if(d.has(a))return d;for(d.set(a,null),o=o.getElementsByTagName(a),p=0;p<o.length;p++){var x=o[p];if(!(x[Fi]||x[ts]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var k=x.getAttribute(n)||"";k=a+k;var P=d.get(k);P?P.push(x):d.set(k,[x])}}return d}function cy(a,n,o){a=a.ownerDocument||a,a.head.insertBefore(o,n==="title"?a.querySelector("head > title"):null)}function r2(a,n,o){if(o===1||n.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return a=n.disabled,typeof n.precedence=="string"&&a==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function dy(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Oo=null;function n2(){}function i2(a,n,o){if(Oo===null)throw Error(i(475));var d=Oo;if(n.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var p=ei(o.href),x=a.querySelector(Mo(p));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=Ac.bind(d),a.then(d,d)),n.state.loading|=4,n.instance=x,qt(x);return}x=a.ownerDocument||a,o=iy(o),(p=Bs.get(p))&&Um(o,p),x=x.createElement("link"),qt(x);var k=x;k._p=new Promise(function(P,I){k.onload=P,k.onerror=I}),Zt(x,"link",o),n.instance=x}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(n,a),(a=n.state.preload)&&(n.state.loading&3)===0&&(d.count++,n=Ac.bind(d),a.addEventListener("load",n),a.addEventListener("error",n))}}function o2(){if(Oo===null)throw Error(i(475));var a=Oo;return a.stylesheets&&a.count===0&&qm(a,a.stylesheets),0<a.count?function(n){var o=setTimeout(function(){if(a.stylesheets&&qm(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=n,function(){a.unsuspend=null,clearTimeout(o)}}:null}function Ac(){if(this.count--,this.count===0){if(this.stylesheets)qm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Mc=null;function qm(a,n){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Mc=new Map,n.forEach(l2,a),Mc=null,Ac.call(a))}function l2(a,n){if(!(n.state.loading&4)){var o=Mc.get(a);if(o)var d=o.get(null);else{o=new Map,Mc.set(a,o);for(var p=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<p.length;x++){var k=p[x];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(o.set(k.dataset.precedence,k),d=k)}d&&o.set(null,d)}p=n.instance,k=p.getAttribute("data-precedence"),x=o.get(k)||d,x===d&&o.set(null,p),o.set(k,p),this.count++,d=Ac.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),x?x.parentNode.insertBefore(p,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(p,a.firstChild)),n.state.loading|=4}}var Ro={$$typeof:A,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function c2(a,n,o,d,p,x,k,P){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=x,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function uy(a,n,o,d,p,x,k,P,I,se,ce,me){return a=new c2(a,n,o,k,P,I,se,me),n=1,x===!0&&(n|=24),x=ws(3,null,null,n),a.current=x,x.stateNode=a,n=Nu(),n.refCount++,a.pooledCache=n,n.refCount++,x.memoizedState={element:d,isDehydrated:o,cache:n},Eu(x),a}function my(a){return a?(a=Dn,a):Dn}function hy(a,n,o,d,p,x){p=my(p),d.context===null?d.context=p:d.pendingContext=p,d=Ka(n),d.payload={element:o},x=x===void 0?null:x,x!==null&&(d.callback=x),o=Xa(a,d,n),o!==null&&(Es(o,a,n),co(o,a,n))}function fy(a,n){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var o=a.retryLane;a.retryLane=o!==0&&o<n?o:n}}function Im(a,n){fy(a,n),(a=a.alternate)&&fy(a,n)}function py(a){if(a.tag===13){var n=Mn(a,67108864);n!==null&&Es(n,a,67108864),Im(a,67108864)}}var Dc=!0;function d2(a,n,o,d){var p=T.T;T.T=null;var x=R.p;try{R.p=2,Fm(a,n,o,d)}finally{R.p=x,T.T=p}}function u2(a,n,o,d){var p=T.T;T.T=null;var x=R.p;try{R.p=8,Fm(a,n,o,d)}finally{R.p=x,T.T=p}}function Fm(a,n,o,d){if(Dc){var p=Hm(d);if(p===null)Mm(a,n,d,Oc,o),xy(a,d);else if(h2(p,a,n,o,d))d.stopPropagation();else if(xy(a,d),n&4&&-1<m2.indexOf(a)){for(;p!==null;){var x=bn(p);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var k=ot(x.pendingLanes);if(k!==0){var P=x;for(P.pendingLanes|=2,P.entangledLanes|=2;k;){var I=1<<31-st(k);P.entanglements[1]|=I,k&=~I}la(x),(at&6)===0&&(gc=Ue()+500,Eo(0))}}break;case 13:P=Mn(x,2),P!==null&&Es(P,x,2),yc(),Im(x,2)}if(x=Hm(d),x===null&&Mm(a,n,d,Oc,o),x===p)break;p=x}p!==null&&d.stopPropagation()}else Mm(a,n,d,null,o)}}function Hm(a){return a=Wd(a),Gm(a)}var Oc=null;function Gm(a){if(Oc=null,a=yn(a),a!==null){var n=c(a);if(n===null)a=null;else{var o=n.tag;if(o===13){if(a=u(n),a!==null)return a;a=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;a=null}else n!==a&&(a=null)}}return Oc=a,null}function gy(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ct()){case us:return 2;case F:return 8;case te:case le:return 32;case be:return 268435456;default:return 32}default:return 32}}var Ym=!1,lr=null,cr=null,dr=null,Po=new Map,Lo=new Map,ur=[],m2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xy(a,n){switch(a){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Po.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(n.pointerId)}}function zo(a,n,o,d,p,x){return a===null||a.nativeEvent!==x?(a={blockedOn:n,domEventName:o,eventSystemFlags:d,nativeEvent:x,targetContainers:[p]},n!==null&&(n=bn(n),n!==null&&py(n)),a):(a.eventSystemFlags|=d,n=a.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),a)}function h2(a,n,o,d,p){switch(n){case"focusin":return lr=zo(lr,a,n,o,d,p),!0;case"dragenter":return cr=zo(cr,a,n,o,d,p),!0;case"mouseover":return dr=zo(dr,a,n,o,d,p),!0;case"pointerover":var x=p.pointerId;return Po.set(x,zo(Po.get(x)||null,a,n,o,d,p)),!0;case"gotpointercapture":return x=p.pointerId,Lo.set(x,zo(Lo.get(x)||null,a,n,o,d,p)),!0}return!1}function yy(a){var n=yn(a.target);if(n!==null){var o=c(n);if(o!==null){if(n=o.tag,n===13){if(n=u(o),n!==null){a.blockedOn=n,iN(a.priority,function(){if(o.tag===13){var d=Cs();d=Ar(d);var p=Mn(o,d);p!==null&&Es(p,o,d),Im(o,d)}});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){a.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Rc(a){if(a.blockedOn!==null)return!1;for(var n=a.targetContainers;0<n.length;){var o=Hm(a.nativeEvent);if(o===null){o=a.nativeEvent;var d=new o.constructor(o.type,o);Xd=d,o.target.dispatchEvent(d),Xd=null}else return n=bn(o),n!==null&&py(n),a.blockedOn=o,!1;n.shift()}return!0}function by(a,n,o){Rc(a)&&o.delete(n)}function f2(){Ym=!1,lr!==null&&Rc(lr)&&(lr=null),cr!==null&&Rc(cr)&&(cr=null),dr!==null&&Rc(dr)&&(dr=null),Po.forEach(by),Lo.forEach(by)}function Pc(a,n){a.blockedOn===n&&(a.blockedOn=null,Ym||(Ym=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,f2)))}var Lc=null;function vy(a){Lc!==a&&(Lc=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Lc===a&&(Lc=null);for(var n=0;n<a.length;n+=3){var o=a[n],d=a[n+1],p=a[n+2];if(typeof d!="function"){if(Gm(d||o)===null)continue;break}var x=bn(o);x!==null&&(a.splice(n,3),n-=3,Gu(x,{pending:!0,data:p,method:o.method,action:d},d,p))}}))}function $o(a){function n(I){return Pc(I,a)}lr!==null&&Pc(lr,a),cr!==null&&Pc(cr,a),dr!==null&&Pc(dr,a),Po.forEach(n),Lo.forEach(n);for(var o=0;o<ur.length;o++){var d=ur[o];d.blockedOn===a&&(d.blockedOn=null)}for(;0<ur.length&&(o=ur[0],o.blockedOn===null);)yy(o),o.blockedOn===null&&ur.shift();if(o=(a.ownerDocument||a).$$reactFormReplay,o!=null)for(d=0;d<o.length;d+=3){var p=o[d],x=o[d+1],k=p[ms]||null;if(typeof x=="function")k||vy(o);else if(k){var P=null;if(x&&x.hasAttribute("formAction")){if(p=x,k=x[ms]||null)P=k.formAction;else if(Gm(p)!==null)continue}else P=k.action;typeof P=="function"?o[d+1]=P:(o.splice(d,3),d-=3),vy(o)}}}function Km(a){this._internalRoot=a}zc.prototype.render=Km.prototype.render=function(a){var n=this._internalRoot;if(n===null)throw Error(i(409));var o=n.current,d=Cs();hy(o,d,a,n,null,null)},zc.prototype.unmount=Km.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var n=a.containerInfo;hy(a.current,2,null,a,null,null),yc(),n[xn]=null}};function zc(a){this._internalRoot=a}zc.prototype.unstable_scheduleHydration=function(a){if(a){var n=z0();a={blockedOn:null,target:a,priority:n};for(var o=0;o<ur.length&&n!==0&&n<ur[o].priority;o++);ur.splice(o,0,a),o===0&&yy(a)}};var jy=s.version;if(jy!=="19.1.0")throw Error(i(527,jy,"19.1.0"));R.findDOMNode=function(a){var n=a._reactInternals;if(n===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=h(n),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var p2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{_e=$c.inject(p2),Le=$c}catch{}}return Uo.createRoot=function(a,n){if(!l(a))throw Error(i(299));var o=!1,d="",p=zg,x=$g,k=Bg,P=null;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(x=n.onCaughtError),n.onRecoverableError!==void 0&&(k=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(P=n.unstable_transitionCallbacks)),n=uy(a,1,!1,null,null,o,d,p,x,k,P,null),a[xn]=n.current,Am(a),new Km(n)},Uo.hydrateRoot=function(a,n,o){if(!l(a))throw Error(i(299));var d=!1,p="",x=zg,k=$g,P=Bg,I=null,se=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(k=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(I=o.unstable_transitionCallbacks),o.formState!==void 0&&(se=o.formState)),n=uy(a,1,!0,n,o??null,d,p,x,k,P,I,se),n.context=my(null),o=n.current,d=Cs(),d=Ar(d),p=Ka(d),p.callback=null,Xa(o,p,d),o=d,n.current.lanes=o,Ia(n,o),la(n),a[xn]=n.current,Am(a),new zc(n)},Uo.version="19.1.0",Uo}var My;function T2(){if(My)return Qm.exports;My=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Qm.exports=E2(),Qm.exports}var k2=T2();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Dy="popstate";function A2(t={}){function s(i,l){let{pathname:c,search:u,hash:m}=i.location;return Oh("",{pathname:c,search:u,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(i,l){return typeof l=="string"?l:rl(l)}return D2(s,r,null,t)}function yt(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Zs(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function M2(){return Math.random().toString(36).substring(2,10)}function Oy(t,s){return{usr:t.state,key:t.key,idx:s}}function Oh(t,s,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof s=="string"?Li(s):s,state:r,key:s&&s.key||i||M2()}}function rl({pathname:t="/",search:s="",hash:r=""}){return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Li(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(s.search=t.substring(i),t=t.substring(0,i)),t&&(s.pathname=t)}return s}function D2(t,s,r,i={}){let{window:l=document.defaultView,v5Compat:c=!1}=i,u=l.history,m="POP",h=null,f=g();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function g(){return(u.state||{idx:null}).idx}function y(){m="POP";let C=g(),M=C==null?null:C-f;f=C,h&&h({action:m,location:j.location,delta:M})}function v(C,M){m="PUSH";let S=Oh(j.location,C,M);f=g()+1;let A=Oy(S,f),E=j.createHref(S);try{u.pushState(A,"",E)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;l.location.assign(E)}c&&h&&h({action:m,location:j.location,delta:1})}function N(C,M){m="REPLACE";let S=Oh(j.location,C,M);f=g();let A=Oy(S,f),E=j.createHref(S);u.replaceState(A,"",E),c&&h&&h({action:m,location:j.location,delta:0})}function _(C){return O2(C)}let j={get action(){return m},get location(){return t(l,u)},listen(C){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(Dy,y),h=C,()=>{l.removeEventListener(Dy,y),h=null}},createHref(C){return s(l,C)},createURL:_,encodeLocation(C){let M=_(C);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:v,replace:N,go(C){return u.go(C)}};return j}function O2(t,s=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),yt(r,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:rl(t);return i=i.replace(/ $/,"%20"),!s&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function ij(t,s,r="/"){return R2(t,s,r,!1)}function R2(t,s,r,i){let l=typeof s=="string"?Li(s):s,c=$a(l.pathname||"/",r);if(c==null)return null;let u=oj(t);P2(u);let m=null;for(let h=0;m==null&&h<u.length;++h){let f=G2(c);m=F2(u[h],f,i)}return m}function oj(t,s=[],r=[],i="",l=!1){let c=(u,m,h=l,f)=>{let g={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:m,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&h)return;yt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let y=za([i,g.relativePath]),v=r.concat(g);u.children&&u.children.length>0&&(yt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),oj(u.children,s,v,y,h)),!(u.path==null&&!u.index)&&s.push({path:y,score:q2(y,u.index),routesMeta:v})};return t.forEach((u,m)=>{var h;if(u.path===""||!((h=u.path)!=null&&h.includes("?")))c(u,m);else for(let f of lj(u.path))c(u,m,!0,f)}),s}function lj(t){let s=t.split("/");if(s.length===0)return[];let[r,...i]=s,l=r.endsWith("?"),c=r.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let u=lj(i.join("/")),m=[];return m.push(...u.map(h=>h===""?c:[c,h].join("/"))),l&&m.push(...u),m.map(h=>t.startsWith("/")&&h===""?"/":h)}function P2(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:I2(s.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var L2=/^:[\w-]+$/,z2=3,$2=2,B2=1,U2=10,V2=-2,Ry=t=>t==="*";function q2(t,s){let r=t.split("/"),i=r.length;return r.some(Ry)&&(i+=V2),s&&(i+=$2),r.filter(l=>!Ry(l)).reduce((l,c)=>l+(L2.test(c)?z2:c===""?B2:U2),i)}function I2(t,s){return t.length===s.length&&t.slice(0,-1).every((i,l)=>i===s[l])?t[t.length-1]-s[s.length-1]:0}function F2(t,s,r=!1){let{routesMeta:i}=t,l={},c="/",u=[];for(let m=0;m<i.length;++m){let h=i[m],f=m===i.length-1,g=c==="/"?s:s.slice(c.length)||"/",y=id({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!y&&f&&r&&!i[i.length-1].route.index&&(y=id({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(l,y.params),u.push({params:l,pathname:za([c,y.pathname]),pathnameBase:W2(za([c,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(c=za([c,y.pathnameBase]))}return u}function id(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=H2(t.path,t.caseSensitive,t.end),l=s.match(r);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let _=m[v]||"";u=c.slice(0,c.length-_.length).replace(/(.)\/+$/,"$1")}const N=m[v];return y&&!N?f[g]=void 0:f[g]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:c,pathnameBase:u,pattern:t}}function H2(t,s=!1,r=!0){Zs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,m,h)=>(i.push({paramName:m,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,s?void 0:"i"),i]}function G2(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Zs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),t}}function $a(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function Y2(t,s="/"){let{pathname:r,search:i="",hash:l=""}=typeof t=="string"?Li(t):t;return{pathname:r?r.startsWith("/")?r:K2(r,s):s,search:Q2(i),hash:Z2(l)}}function K2(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function th(t,s,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${s}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function X2(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Sf(t){let s=X2(t);return s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase)}function Cf(t,s,r,i=!1){let l;typeof t=="string"?l=Li(t):(l={...t},yt(!l.pathname||!l.pathname.includes("?"),th("?","pathname","search",l)),yt(!l.pathname||!l.pathname.includes("#"),th("#","pathname","hash",l)),yt(!l.search||!l.search.includes("#"),th("#","search","hash",l)));let c=t===""||l.pathname==="",u=c?"/":l.pathname,m;if(u==null)m=r;else{let y=s.length-1;if(!i&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),y-=1;l.pathname=v.join("/")}m=y>=0?s[y]:"/"}let h=Y2(l,m),f=u&&u!=="/"&&u.endsWith("/"),g=(c||u===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var za=t=>t.join("/").replace(/\/\/+/g,"/"),W2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Q2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Z2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function J2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var cj=["POST","PUT","PATCH","DELETE"];new Set(cj);var eS=["GET",...cj];new Set(eS);var zi=b.createContext(null);zi.displayName="DataRouter";var Sd=b.createContext(null);Sd.displayName="DataRouterState";b.createContext(!1);var dj=b.createContext({isTransitioning:!1});dj.displayName="ViewTransition";var tS=b.createContext(new Map);tS.displayName="Fetchers";var sS=b.createContext(null);sS.displayName="Await";var ta=b.createContext(null);ta.displayName="Navigation";var pl=b.createContext(null);pl.displayName="Location";var sa=b.createContext({outlet:null,matches:[],isDataRoute:!1});sa.displayName="Route";var Ef=b.createContext(null);Ef.displayName="RouteError";function aS(t,{relative:s}={}){yt($i(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=b.useContext(ta),{hash:l,pathname:c,search:u}=gl(t,{relative:s}),m=c;return r!=="/"&&(m=c==="/"?r:za([r,c])),i.createHref({pathname:m,search:u,hash:l})}function $i(){return b.useContext(pl)!=null}function Va(){return yt($i(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(pl).location}var uj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mj(t){b.useContext(ta).static||b.useLayoutEffect(t)}function Sr(){let{isDataRoute:t}=b.useContext(sa);return t?yS():rS()}function rS(){yt($i(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(zi),{basename:s,navigator:r}=b.useContext(ta),{matches:i}=b.useContext(sa),{pathname:l}=Va(),c=JSON.stringify(Sf(i)),u=b.useRef(!1);return mj(()=>{u.current=!0}),b.useCallback((h,f={})=>{if(Zs(u.current,uj),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=Cf(h,JSON.parse(c),l,f.relative==="path");t==null&&s!=="/"&&(g.pathname=g.pathname==="/"?s:za([s,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[s,r,c,l,t])}var nS=b.createContext(null);function iS(t){let s=b.useContext(sa).outlet;return s&&b.createElement(nS.Provider,{value:t},s)}function gl(t,{relative:s}={}){let{matches:r}=b.useContext(sa),{pathname:i}=Va(),l=JSON.stringify(Sf(r));return b.useMemo(()=>Cf(t,JSON.parse(l),i,s==="path"),[t,l,i,s])}function oS(t,s){return hj(t,s)}function hj(t,s,r,i,l){var S;yt($i(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=b.useContext(ta),{matches:u}=b.useContext(sa),m=u[u.length-1],h=m?m.params:{},f=m?m.pathname:"/",g=m?m.pathnameBase:"/",y=m&&m.route;{let A=y&&y.path||"";fj(f,!y||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let v=Va(),N;if(s){let A=typeof s=="string"?Li(s):s;yt(g==="/"||((S=A.pathname)==null?void 0:S.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${A.pathname}" was given in the \`location\` prop.`),N=A}else N=v;let _=N.pathname||"/",j=_;if(g!=="/"){let A=g.replace(/^\//,"").split("/");j="/"+_.replace(/^\//,"").split("/").slice(A.length).join("/")}let C=ij(t,{pathname:j});Zs(y||C!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Zs(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=mS(C&&C.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:za([g,c.encodeLocation?c.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?g:za([g,c.encodeLocation?c.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),u,r,i,l);return s&&M?b.createElement(pl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},M):M}function lS(){let t=xS(),s=J2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:c},"ErrorBoundary")," or"," ",b.createElement("code",{style:c},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),r?b.createElement("pre",{style:l},r):null,u)}var cS=b.createElement(lS,null),dS=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){this.props.unstable_onError?this.props.unstable_onError(t,s):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?b.createElement(sa.Provider,{value:this.props.routeContext},b.createElement(Ef.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uS({routeContext:t,match:s,children:r}){let i=b.useContext(zi);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(sa.Provider,{value:t},r)}function mS(t,s=[],r=null,i=null,l=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let c=t,u=r==null?void 0:r.errors;if(u!=null){let f=c.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);yt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,f+1))}let m=!1,h=-1;if(r)for(let f=0;f<c.length;f++){let g=c[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:y,errors:v}=r,N=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||N){m=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((f,g,y)=>{let v,N=!1,_=null,j=null;r&&(v=u&&g.route.id?u[g.route.id]:void 0,_=g.route.errorElement||cS,m&&(h<0&&y===0?(fj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,j=null):h===y&&(N=!0,j=g.route.hydrateFallbackElement||null)));let C=s.concat(c.slice(0,y+1)),M=()=>{let S;return v?S=_:N?S=j:g.route.Component?S=b.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=f,b.createElement(uS,{match:g,routeContext:{outlet:f,matches:C,isDataRoute:r!=null},children:S})};return r&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?b.createElement(dS,{location:r.location,revalidation:r.revalidation,component:_,error:v,children:M(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:i}):M()},null)}function Tf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hS(t){let s=b.useContext(zi);return yt(s,Tf(t)),s}function fS(t){let s=b.useContext(Sd);return yt(s,Tf(t)),s}function pS(t){let s=b.useContext(sa);return yt(s,Tf(t)),s}function kf(t){let s=pS(t),r=s.matches[s.matches.length-1];return yt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function gS(){return kf("useRouteId")}function xS(){var i;let t=b.useContext(Ef),s=fS("useRouteError"),r=kf("useRouteError");return t!==void 0?t:(i=s.errors)==null?void 0:i[r]}function yS(){let{router:t}=hS("useNavigate"),s=kf("useNavigate"),r=b.useRef(!1);return mj(()=>{r.current=!0}),b.useCallback(async(l,c={})=>{Zs(r.current,uj),r.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:s,...c}))},[t,s])}var Py={};function fj(t,s,r){!s&&!Py[t]&&(Py[t]=!0,Zs(!1,r))}b.memo(bS);function bS({routes:t,future:s,state:r,unstable_onError:i}){return hj(t,void 0,r,i,s)}function Ti({to:t,replace:s,state:r,relative:i}){yt($i(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=b.useContext(ta);Zs(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=b.useContext(sa),{pathname:u}=Va(),m=Sr(),h=Cf(t,Sf(c),u,i==="path"),f=JSON.stringify(h);return b.useEffect(()=>{m(JSON.parse(f),{replace:s,state:r,relative:i})},[m,f,i,s,r]),null}function vS(t){return iS(t.context)}function gt(t){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jS({basename:t="/",children:s=null,location:r,navigationType:i="POP",navigator:l,static:c=!1}){yt(!$i(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),m=b.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);typeof r=="string"&&(r=Li(r));let{pathname:h="/",search:f="",hash:g="",state:y=null,key:v="default"}=r,N=b.useMemo(()=>{let _=$a(h,u);return _==null?null:{location:{pathname:_,search:f,hash:g,state:y,key:v},navigationType:i}},[u,h,f,g,y,v,i]);return Zs(N!=null,`<Router basename="${u}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:b.createElement(ta.Provider,{value:m},b.createElement(pl.Provider,{children:s,value:N}))}function pj({children:t,location:s}){return oS(Rh(t),s)}function Rh(t,s=[]){let r=[];return b.Children.forEach(t,(i,l)=>{if(!b.isValidElement(i))return;let c=[...s,l];if(i.type===b.Fragment){r.push.apply(r,Rh(i.props.children,c));return}yt(i.type===gt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Rh(i.props.children,c)),r.push(u)}),r}var Qc="get",Zc="application/x-www-form-urlencoded";function Cd(t){return t!=null&&typeof t.tagName=="string"}function wS(t){return Cd(t)&&t.tagName.toLowerCase()==="button"}function NS(t){return Cd(t)&&t.tagName.toLowerCase()==="form"}function _S(t){return Cd(t)&&t.tagName.toLowerCase()==="input"}function SS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CS(t,s){return t.button===0&&(!s||s==="_self")&&!SS(t)}var Uc=null;function ES(){if(Uc===null)try{new FormData(document.createElement("form"),0),Uc=!1}catch{Uc=!0}return Uc}var TS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sh(t){return t!=null&&!TS.has(t)?(Zs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zc}"`),null):t}function kS(t,s){let r,i,l,c,u;if(NS(t)){let m=t.getAttribute("action");i=m?$a(m,s):null,r=t.getAttribute("method")||Qc,l=sh(t.getAttribute("enctype"))||Zc,c=new FormData(t)}else if(wS(t)||_S(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||m.getAttribute("action");if(i=h?$a(h,s):null,r=t.getAttribute("formmethod")||m.getAttribute("method")||Qc,l=sh(t.getAttribute("formenctype"))||sh(m.getAttribute("enctype"))||Zc,c=new FormData(m,t),!ES()){let{name:f,type:g,value:y}=t;if(g==="image"){let v=f?`${f}.`:"";c.append(`${v}x`,"0"),c.append(`${v}y`,"0")}else f&&c.append(f,y)}}else{if(Cd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Qc,i=null,l=Zc,u=t}return c&&l==="text/plain"&&(u=c,c=void 0),{action:i,method:r.toLowerCase(),encType:l,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Af(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function AS(t,s,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${r}`:s&&$a(i.pathname,s)==="/"?i.pathname=`${s.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function MS(t,s){if(t.id in s)return s[t.id];try{let r=await import(t.module);return s[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function OS(t,s,r){let i=await Promise.all(t.map(async l=>{let c=s.routes[l.route.id];if(c){let u=await MS(c,r);return u.links?u.links():[]}return[]}));return zS(i.flat(1).filter(DS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Ly(t,s,r,i,l,c){let u=(h,f)=>r[f]?h.route.id!==r[f].route.id:!0,m=(h,f)=>{var g;return r[f].pathname!==h.pathname||((g=r[f].route.path)==null?void 0:g.endsWith("*"))&&r[f].params["*"]!==h.params["*"]};return c==="assets"?s.filter((h,f)=>u(h,f)||m(h,f)):c==="data"?s.filter((h,f)=>{var y;let g=i.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(u(h,f)||m(h,f))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((y=r[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function RS(t,s,{includeHydrateFallback:r}={}){return PS(t.map(i=>{let l=s.routes[i.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function PS(t){return[...new Set(t)]}function LS(t){let s={},r=Object.keys(t).sort();for(let i of r)s[i]=t[i];return s}function zS(t,s){let r=new Set;return new Set(s),t.reduce((i,l)=>{let c=JSON.stringify(LS(l));return r.has(c)||(r.add(c),i.push({key:c,link:l})),i},[])}function gj(){let t=b.useContext(zi);return Af(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $S(){let t=b.useContext(Sd);return Af(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Mf=b.createContext(void 0);Mf.displayName="FrameworkContext";function xj(){let t=b.useContext(Mf);return Af(t,"You must render this element inside a <HydratedRouter> element"),t}function BS(t,s){let r=b.useContext(Mf),[i,l]=b.useState(!1),[c,u]=b.useState(!1),{onFocus:m,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=s,v=b.useRef(null);b.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let j=M=>{M.forEach(S=>{u(S.isIntersecting)})},C=new IntersectionObserver(j,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[t]),b.useEffect(()=>{if(i){let j=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(j)}}},[i]);let N=()=>{l(!0)},_=()=>{l(!1),u(!1)};return r?t!=="intent"?[c,v,{}]:[c,v,{onFocus:Vo(m,N),onBlur:Vo(h,_),onMouseEnter:Vo(f,N),onMouseLeave:Vo(g,_),onTouchStart:Vo(y,N)}]:[!1,v,{}]}function Vo(t,s){return r=>{t&&t(r),r.defaultPrevented||s(r)}}function US({page:t,...s}){let{router:r}=gj(),i=b.useMemo(()=>ij(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?b.createElement(qS,{page:t,matches:i,...s}):null}function VS(t){let{manifest:s,routeModules:r}=xj(),[i,l]=b.useState([]);return b.useEffect(()=>{let c=!1;return OS(t,s,r).then(u=>{c||l(u)}),()=>{c=!0}},[t,s,r]),i}function qS({page:t,matches:s,...r}){let i=Va(),{manifest:l,routeModules:c}=xj(),{basename:u}=gj(),{loaderData:m,matches:h}=$S(),f=b.useMemo(()=>Ly(t,s,h,l,i,"data"),[t,s,h,l,i]),g=b.useMemo(()=>Ly(t,s,h,l,i,"assets"),[t,s,h,l,i]),y=b.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let _=new Set,j=!1;if(s.forEach(M=>{var A;let S=l.routes[M.route.id];!S||!S.hasLoader||(!f.some(E=>E.route.id===M.route.id)&&M.route.id in m&&((A=c[M.route.id])!=null&&A.shouldRevalidate)||S.hasClientLoader?j=!0:_.add(M.route.id))}),_.size===0)return[];let C=AS(t,u,"data");return j&&_.size>0&&C.searchParams.set("_routes",s.filter(M=>_.has(M.route.id)).map(M=>M.route.id).join(",")),[C.pathname+C.search]},[u,m,i,l,f,s,t,c]),v=b.useMemo(()=>RS(g,l),[g,l]),N=VS(g);return b.createElement(b.Fragment,null,y.map(_=>b.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...r})),v.map(_=>b.createElement("link",{key:_,rel:"modulepreload",href:_,...r})),N.map(({key:_,link:j})=>b.createElement("link",{key:_,nonce:r.nonce,...j})))}function IS(...t){return s=>{t.forEach(r=>{typeof r=="function"?r(s):r!=null&&(r.current=s)})}}var yj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yj&&(window.__reactRouterVersion="7.8.2")}catch{}function FS({basename:t,children:s,window:r}){let i=b.useRef();i.current==null&&(i.current=A2({window:r,v5Compat:!0}));let l=i.current,[c,u]=b.useState({action:l.action,location:l.location}),m=b.useCallback(h=>{b.startTransition(()=>u(h))},[u]);return b.useLayoutEffect(()=>l.listen(m),[l,m]),b.createElement(jS,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:l})}var bj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,da=b.forwardRef(function({onClick:s,discover:r="render",prefetch:i="none",relative:l,reloadDocument:c,replace:u,state:m,target:h,to:f,preventScrollReset:g,viewTransition:y,...v},N){let{basename:_}=b.useContext(ta),j=typeof f=="string"&&bj.test(f),C,M=!1;if(typeof f=="string"&&j&&(C=f,yj))try{let H=new URL(window.location.href),B=f.startsWith("//")?new URL(H.protocol+f):new URL(f),K=$a(B.pathname,_);B.origin===H.origin&&K!=null?f=K+B.search+B.hash:M=!0}catch{Zs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=aS(f,{relative:l}),[A,E,w]=BS(i,v),O=YS(f,{replace:u,state:m,target:h,preventScrollReset:g,relative:l,viewTransition:y});function L(H){s&&s(H),H.defaultPrevented||O(H)}let V=b.createElement("a",{...v,...w,href:C||S,onClick:M||c?s:L,ref:IS(N,E),target:h,"data-discover":!j&&r==="render"?"true":void 0});return A&&!j?b.createElement(b.Fragment,null,V,b.createElement(US,{page:S})):V});da.displayName="Link";var vj=b.forwardRef(function({"aria-current":s="page",caseSensitive:r=!1,className:i="",end:l=!1,style:c,to:u,viewTransition:m,children:h,...f},g){let y=gl(u,{relative:f.relative}),v=Va(),N=b.useContext(Sd),{navigator:_,basename:j}=b.useContext(ta),C=N!=null&&ZS(y)&&m===!0,M=_.encodeLocation?_.encodeLocation(y).pathname:y.pathname,S=v.pathname,A=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;r||(S=S.toLowerCase(),A=A?A.toLowerCase():null,M=M.toLowerCase()),A&&j&&(A=$a(A,j)||A);const E=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let w=S===M||!l&&S.startsWith(M)&&S.charAt(E)==="/",O=A!=null&&(A===M||!l&&A.startsWith(M)&&A.charAt(M.length)==="/"),L={isActive:w,isPending:O,isTransitioning:C},V=w?s:void 0,H;typeof i=="function"?H=i(L):H=[i,w?"active":null,O?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let B=typeof c=="function"?c(L):c;return b.createElement(da,{...f,"aria-current":V,className:H,ref:g,style:B,to:u,viewTransition:m},typeof h=="function"?h(L):h)});vj.displayName="NavLink";var HS=b.forwardRef(({discover:t="render",fetcherKey:s,navigate:r,reloadDocument:i,replace:l,state:c,method:u=Qc,action:m,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:y,...v},N)=>{let _=WS(),j=QS(m,{relative:f}),C=u.toLowerCase()==="get"?"get":"post",M=typeof m=="string"&&bj.test(m),S=A=>{if(h&&h(A),A.defaultPrevented)return;A.preventDefault();let E=A.nativeEvent.submitter,w=(E==null?void 0:E.getAttribute("formmethod"))||u;_(E||A.currentTarget,{fetcherKey:s,method:w,navigate:r,replace:l,state:c,relative:f,preventScrollReset:g,viewTransition:y})};return b.createElement("form",{ref:N,method:C,action:j,onSubmit:i?h:S,...v,"data-discover":!M&&t==="render"?"true":void 0})});HS.displayName="Form";function GS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jj(t){let s=b.useContext(zi);return yt(s,GS(t)),s}function YS(t,{target:s,replace:r,state:i,preventScrollReset:l,relative:c,viewTransition:u}={}){let m=Sr(),h=Va(),f=gl(t,{relative:c});return b.useCallback(g=>{if(CS(g,s)){g.preventDefault();let y=r!==void 0?r:rl(h)===rl(f);m(t,{replace:y,state:i,preventScrollReset:l,relative:c,viewTransition:u})}},[h,m,f,r,i,s,t,l,c,u])}var KS=0,XS=()=>`__${String(++KS)}__`;function WS(){let{router:t}=jj("useSubmit"),{basename:s}=b.useContext(ta),r=gS();return b.useCallback(async(i,l={})=>{let{action:c,method:u,encType:m,formData:h,body:f}=kS(i,s);if(l.navigate===!1){let g=l.fetcherKey||XS();await t.fetch(g,r,l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:f,formMethod:l.method||u,formEncType:l.encType||m,flushSync:l.flushSync})}else await t.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:f,formMethod:l.method||u,formEncType:l.encType||m,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,s,r])}function QS(t,{relative:s}={}){let{basename:r}=b.useContext(ta),i=b.useContext(sa);yt(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),c={...gl(t||".",{relative:s})},u=Va();if(t==null){c.search=u.search;let m=new URLSearchParams(c.search),h=m.getAll("index");if(h.some(g=>g==="")){m.delete("index"),h.filter(y=>y).forEach(y=>m.append("index",y));let g=m.toString();c.search=g?`?${g}`:""}}return(!t||t===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:za([r,c.pathname])),rl(c)}function ZS(t,{relative:s}={}){let r=b.useContext(dj);yt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jj("useViewTransitionState"),l=gl(t,{relative:s});if(!r.isTransitioning)return!1;let c=$a(r.currentLocation.pathname,i)||r.currentLocation.pathname,u=$a(r.nextLocation.pathname,i)||r.nextLocation.pathname;return id(l.pathname,u)!=null||id(l.pathname,c)!=null}const JS="modulepreload",eC=function(t){return"/"+t},zy={},jr=function(s,r,i){let l=Promise.resolve();if(r&&r.length>0){let u=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),h=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));l=u(r.map(f=>{if(f=eC(f),f in zy)return;zy[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":JS,g||(v.as="script"),v.crossOrigin="",v.href=f,h&&v.setAttribute("nonce",h),document.head.appendChild(v),g)return new Promise((N,_)=>{v.addEventListener("load",N),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function c(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return l.then(u=>{for(const m of u||[])m.status==="rejected"&&c(m.reason);return s().catch(c)})},tC=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...r)=>jr(async()=>{const{default:i}=await Promise.resolve().then(()=>Bi);return{default:i}},[]).then(({default:i})=>i(...r)):s=fetch,(...r)=>s(...r)};class Df extends Error{constructor(s,r="FunctionsError",i){super(s),this.name=r,this.context=i}}class sC extends Df{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class $y extends Df{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class By extends Df{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var Ph;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ph||(Ph={}));var aC=function(t,s,r,i){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function m(g){try{f(i.next(g))}catch(y){u(y)}}function h(g){try{f(i.throw(g))}catch(y){u(y)}}function f(g){g.done?c(g.value):l(g.value).then(m,h)}f((i=i.apply(t,s||[])).next())})};class rC{constructor(s,{headers:r={},customFetch:i,region:l=Ph.Any}={}){this.url=s,this.headers=r,this.region=l,this.fetch=tC(i)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,r={}){var i;return aC(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:u}=r;let m={},{region:h}=r;h||(h=this.region);const f=new URL(`${this.url}/${s}`);h&&h!=="any"&&(m["x-region"]=h,f.searchParams.set("forceFunctionRegion",h));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(m["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(m["Content-Type"]="application/json",g=JSON.stringify(u)));const y=yield this.fetch(f.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g}).catch(j=>{throw new sC(j)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new $y(y);if(!y.ok)throw new By(y);let N=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return N==="application/json"?_=yield y.json():N==="application/octet-stream"?_=yield y.blob():N==="text/event-stream"?_=y:N==="multipart/form-data"?_=yield y.formData():_=yield y.text(),{data:_,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof By||l instanceof $y?l.context:void 0}}})}}var Gt={},si={},ai={},ri={},ni={},ii={},nC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ki=nC();const iC=ki.fetch,wj=ki.fetch.bind(ki),Nj=ki.Headers,oC=ki.Request,lC=ki.Response,Bi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Nj,Request:oC,Response:lC,default:wj,fetch:iC},Symbol.toStringTag,{value:"Module"})),cC=b2(Bi);var Vc={},Uy;function _j(){if(Uy)return Vc;Uy=1,Object.defineProperty(Vc,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Vc.default=t,Vc}var Vy;function Sj(){if(Vy)return ii;Vy=1;var t=ii&&ii.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ii,"__esModule",{value:!0});const s=t(cC),r=t(_j());class i{constructor(c){var u,m;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(m=c.isMaybeSingle)!==null&&m!==void 0?m:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let h=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,y,v,N;let _=null,j=null,C=null,M=f.status,S=f.statusText;if(f.ok){if(this.method!=="HEAD"){const O=await f.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?j=O:j=JSON.parse(O))}const E=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),w=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");E&&w&&w.length>1&&(C=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(_={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,C=null,M=406,S="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const E=await f.text();try{_=JSON.parse(E),Array.isArray(_)&&f.status===404&&(j=[],_=null,M=200,S="OK")}catch{f.status===404&&E===""?(M=204,S="No Content"):_={message:E}}if(_&&this.isMaybeSingle&&(!((N=_==null?void 0:_.details)===null||N===void 0)&&N.includes("0 rows"))&&(_=null,M=200,S="OK"),_&&this.shouldThrowOnError)throw new r.default(_)}return{error:_,data:j,count:C,status:M,statusText:S}});return this.shouldThrowOnError||(h=h.catch(f=>{var g,y,v;return{error:{message:`${(g=f==null?void 0:f.name)!==null&&g!==void 0?g:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(y=f==null?void 0:f.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(c,u)}returns(){return this}overrideTypes(){return this}}return ii.default=i,ii}var qy;function Cj(){if(qy)return ni;qy=1;var t=ni&&ni.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ni,"__esModule",{value:!0});const s=t(Sj());class r extends s.default{select(l){let c=!1;const u=(l??"*").split("").map(m=>/\s/.test(m)&&!c?"":(m==='"'&&(c=!c),m)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:u,foreignTable:m,referencedTable:h=m}={}){const f=h?`${h}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${l}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:u=c}={}){const m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(m,`${l}`),this}range(l,c,{foreignTable:u,referencedTable:m=u}={}){const h=typeof m>"u"?"offset":`${m}.offset`,f=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(h,`${l}`),this.url.searchParams.set(f,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:u=!1,buffers:m=!1,wal:h=!1,format:f="text"}={}){var g;const y=[l?"analyze":null,c?"verbose":null,u?"settings":null,m?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${y};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return ni.default=r,ni}var Iy;function Of(){if(Iy)return ri;Iy=1;var t=ri&&ri.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ri,"__esModule",{value:!0});const s=t(Cj());class r extends s.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const u=Array.from(new Set(c)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${u})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:u,type:m}={}){let h="";m==="plain"?h="pl":m==="phrase"?h="ph":m==="websearch"&&(h="w");const f=u===void 0?"":`(${u})`;return this.url.searchParams.append(l,`${h}fts${f}.${c}`),this}match(l){return Object.entries(l).forEach(([c,u])=>{this.url.searchParams.append(c,`eq.${u}`)}),this}not(l,c,u){return this.url.searchParams.append(l,`not.${c}.${u}`),this}or(l,{foreignTable:c,referencedTable:u=c}={}){const m=u?`${u}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,c,u){return this.url.searchParams.append(l,`${c}.${u}`),this}}return ri.default=r,ri}var Fy;function Ej(){if(Fy)return ai;Fy=1;var t=ai&&ai.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ai,"__esModule",{value:!0});const s=t(Of());class r{constructor(l,{headers:c={},schema:u,fetch:m}){this.url=l,this.headers=new Headers(c),this.schema=u,this.fetch=m}select(l,{head:c=!1,count:u}={}){const m=c?"HEAD":"GET";let h=!1;const f=(l??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:u=!0}={}){var m;const h="POST";if(c&&this.headers.append("Prefer",`count=${c}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const f=l.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(f.length>0){const g=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new s.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:u=!1,count:m,defaultToNull:h=!0}={}){var f;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),m&&this.headers.append("Prefer",`count=${m}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((v,N)=>v.concat(Object.keys(N)),[]);if(y.length>0){const v=[...new Set(y)].map(N=>`"${N}"`);this.url.searchParams.set("columns",v.join(","))}}return new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(l,{count:c}={}){var u;const m="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:l}={}){var c;const u="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new s.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return ai.default=r,ai}var Hy;function dC(){if(Hy)return si;Hy=1;var t=si&&si.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(si,"__esModule",{value:!0});const s=t(Ej()),r=t(Of());class i{constructor(c,{headers:u={},schema:m,fetch:h}={}){this.url=c,this.headers=new Headers(u),this.schemaName=m,this.fetch=h}from(c){const u=new URL(`${this.url}/${c}`);return new s.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new i(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:m=!1,get:h=!1,count:f}={}){var g;let y;const v=new URL(`${this.url}/rpc/${c}`);let N;m||h?(y=m?"HEAD":"GET",Object.entries(u).filter(([j,C])=>C!==void 0).map(([j,C])=>[j,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([j,C])=>{v.searchParams.append(j,C)})):(y="POST",N=u);const _=new Headers(this.headers);return f&&_.set("Prefer",`count=${f}`),new r.default({method:y,url:v,headers:_,schema:this.schemaName,body:N,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return si.default=i,si}var Gy;function uC(){if(Gy)return Gt;Gy=1;var t=Gt&&Gt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.PostgrestError=Gt.PostgrestBuilder=Gt.PostgrestTransformBuilder=Gt.PostgrestFilterBuilder=Gt.PostgrestQueryBuilder=Gt.PostgrestClient=void 0;const s=t(dC());Gt.PostgrestClient=s.default;const r=t(Ej());Gt.PostgrestQueryBuilder=r.default;const i=t(Of());Gt.PostgrestFilterBuilder=i.default;const l=t(Cj());Gt.PostgrestTransformBuilder=l.default;const c=t(Sj());Gt.PostgrestBuilder=c.default;const u=t(_j());return Gt.PostgrestError=u.default,Gt.default={PostgrestClient:s.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:u.default},Gt}var mC=uC();const hC=nj(mC),{PostgrestClient:fC,PostgrestQueryBuilder:$R,PostgrestFilterBuilder:BR,PostgrestTransformBuilder:UR,PostgrestBuilder:VR,PostgrestError:qR}=hC;class pC{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let r=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(r+=`

Suggested solution: ${s.workaround}`),new Error(r)}static createWebSocket(s,r){const i=this.getWebSocketConstructor();return new i(s,r)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const gC="2.15.4",xC=`realtime-js/${gC}`,yC="1.0.0",Lh=1e4,bC=1e3,vC=100;var Ko;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ko||(Ko={}));var $t;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})($t||($t={}));var Xs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Xs||(Xs={}));var zh;(function(t){t.websocket="websocket"})(zh||(zh={}));var tn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(tn||(tn={}));class jC{constructor(){this.HEADER_LENGTH=1}decode(s,r){return s.constructor===ArrayBuffer?r(this._binaryDecode(s)):r(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const r=new DataView(s),i=new TextDecoder;return this._decodeBroadcast(s,r,i)}_decodeBroadcast(s,r,i){const l=r.getUint8(1),c=r.getUint8(2);let u=this.HEADER_LENGTH+2;const m=i.decode(s.slice(u,u+l));u=u+l;const h=i.decode(s.slice(u,u+c));u=u+c;const f=JSON.parse(i.decode(s.slice(u,s.byteLength)));return{ref:null,topic:m,event:h,payload:f}}}let Tj=class{constructor(s,r){this.callback=s,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ht;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ht||(ht={}));const Yy=(t,s,r={})=>{var i;const l=(i=r.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(s).reduce((c,u)=>(c[u]=wC(u,t,s,l),c),{})},wC=(t,s,r,i)=>{const l=s.find(m=>m.name===t),c=l==null?void 0:l.type,u=r[t];return c&&!i.includes(c)?kj(c,u):$h(u)},kj=(t,s)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return CC(s,r)}switch(t){case ht.bool:return NC(s);case ht.float4:case ht.float8:case ht.int2:case ht.int4:case ht.int8:case ht.numeric:case ht.oid:return _C(s);case ht.json:case ht.jsonb:return SC(s);case ht.timestamp:return EC(s);case ht.abstime:case ht.date:case ht.daterange:case ht.int4range:case ht.int8range:case ht.money:case ht.reltime:case ht.text:case ht.time:case ht.timestamptz:case ht.timetz:case ht.tsrange:case ht.tstzrange:return $h(s);default:return $h(s)}},$h=t=>t,NC=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},_C=t=>{if(typeof t=="string"){const s=parseFloat(t);if(!Number.isNaN(s))return s}return t},SC=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(s){return console.log(`JSON parse error: ${s}`),t}return t},CC=(t,s)=>{if(typeof t!="string")return t;const r=t.length-1,i=t[r];if(t[0]==="{"&&i==="}"){let c;const u=t.slice(1,r);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(m=>kj(s,m))}return t},EC=t=>typeof t=="string"?t.replace(" ","T"):t,Aj=t=>{let s=t;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class ah{constructor(s,r,i={},l=Lh){this.channel=s,this.event=r,this.payload=i,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,r){var i;return this._hasReceived(s)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:s,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:r}){this.recHooks.filter(i=>i.status===s).forEach(i=>i.callback(r))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Ky;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ky||(Ky={}));class Xo{constructor(s,r){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},l=>{const{onJoin:c,onLeave:u,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xo.syncState(this.state,l,c,u),this.pendingDiffs.forEach(h=>{this.state=Xo.syncDiff(this.state,h,c,u)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},l=>{const{onJoin:c,onLeave:u,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Xo.syncDiff(this.state,l,c,u),m())}),this.onJoin((l,c,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:u})}),this.onLeave((l,c,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,r,i,l){const c=this.cloneDeep(s),u=this.transformState(r),m={},h={};return this.map(c,(f,g)=>{u[f]||(h[f]=g)}),this.map(u,(f,g)=>{const y=c[f];if(y){const v=g.map(C=>C.presence_ref),N=y.map(C=>C.presence_ref),_=g.filter(C=>N.indexOf(C.presence_ref)<0),j=y.filter(C=>v.indexOf(C.presence_ref)<0);_.length>0&&(m[f]=_),j.length>0&&(h[f]=j)}else m[f]=g}),this.syncDiff(c,{joins:m,leaves:h},i,l)}static syncDiff(s,r,i,l){const{joins:c,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),l||(l=()=>{}),this.map(c,(m,h)=>{var f;const g=(f=s[m])!==null&&f!==void 0?f:[];if(s[m]=this.cloneDeep(h),g.length>0){const y=s[m].map(N=>N.presence_ref),v=g.filter(N=>y.indexOf(N.presence_ref)<0);s[m].unshift(...v)}i(m,g,h)}),this.map(u,(m,h)=>{let f=s[m];if(!f)return;const g=h.map(y=>y.presence_ref);f=f.filter(y=>g.indexOf(y.presence_ref)<0),s[m]=f,l(m,f,h),f.length===0&&delete s[m]}),s}static map(s,r){return Object.getOwnPropertyNames(s).map(i=>r(i,s[i]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((r,i)=>{const l=s[i];return"metas"in l?r[i]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[i]=l,r},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xy;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Xy||(Xy={}));var Wo;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wo||(Wo={}));var Pa;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Pa||(Pa={}));class Rf{constructor(s,r={config:{}},i){this.topic=s,this.params=r,this.socket=i,this.bindings={},this.state=$t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ah(this,Xs.join,this.params,this.timeout),this.rejoinTimer=new Tj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$t.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xs.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Xo(this),this.broadcastEndpointURL=Aj(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(s,r=this.timeout){var i,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==$t.closed){const{config:{broadcast:u,presence:m,private:h}}=this.params,f=(l=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(N=>N.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[Wo.PRESENCE]&&this.bindings[Wo.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,y={},v={broadcast:u,presence:Object.assign(Object.assign({},m),{enabled:g}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(N=>s==null?void 0:s(Pa.CHANNEL_ERROR,N)),this._onClose(()=>s==null?void 0:s(Pa.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:N})=>{var _;if(this.socket.setAuth(),N===void 0){s==null||s(Pa.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,C=(_=j==null?void 0:j.length)!==null&&_!==void 0?_:0,M=[];for(let S=0;S<C;S++){const A=j[S],{filter:{event:E,schema:w,table:O,filter:L}}=A,V=N&&N[S];if(V&&V.event===E&&V.schema===w&&V.table===O&&V.filter===L)M.push(Object.assign(Object.assign({},A),{id:V.id}));else{this.unsubscribe(),this.state=$t.errored,s==null||s(Pa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,s&&s(Pa.SUBSCRIBED);return}}).receive("error",N=>{this.state=$t.errored,s==null||s(Pa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Pa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,r={}){return await this.send({type:"presence",event:"track",payload:s},r.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,r,i){return this.state===$t.joined&&s===Wo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,r,i)}async send(s,r={}){var i,l;if(!this._canPush()&&s.type==="broadcast"){const{event:c,payload:u}=s,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((l=f.body)===null||l===void 0?void 0:l.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,m,h;const f=this._push(s.type,s,r.timeout||this.timeout);s.type==="broadcast"&&!(!((h=(m=(u=this.params)===null||u===void 0?void 0:u.config)===null||m===void 0?void 0:m.broadcast)===null||h===void 0)&&h.ack)&&c("ok"),f.receive("ok",()=>c("ok")),f.receive("error",()=>c("error")),f.receive("timeout",()=>c("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=$t.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xs.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(l=>{i=new ah(this,Xs.leave,{},s),i.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$t.closed,this.bindings={}}async _fetchWithTimeout(s,r,i){const l=new AbortController,c=setTimeout(()=>l.abort(),i),u=await this.socket.fetch(s,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),u}_push(s,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new ah(this,s,r,i);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>vC){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(s,r,i){return r}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,r,i){var l,c;const u=s.toLocaleLowerCase(),{close:m,error:h,leave:f,join:g}=Xs;if(i&&[m,h,f,g].indexOf(u)>=0&&i!==this._joinRef())return;let v=this._onMessage(u,r,i);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(N=>{var _,j,C;return((_=N.filter)===null||_===void 0?void 0:_.event)==="*"||((C=(j=N.filter)===null||j===void 0?void 0:j.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(N=>N.callback(v,i)):(c=this.bindings[u])===null||c===void 0||c.filter(N=>{var _,j,C,M,S,A;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in N){const E=N.id,w=(_=N.filter)===null||_===void 0?void 0:_.event;return E&&((j=r.ids)===null||j===void 0?void 0:j.includes(E))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((C=r.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const E=(S=(M=N==null?void 0:N.filter)===null||M===void 0?void 0:M.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return E==="*"||E===((A=r==null?void 0:r.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===u}).map(N=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:j,table:C,commit_timestamp:M,type:S,errors:A}=_;v=Object.assign(Object.assign({},{schema:j,table:C,commit_timestamp:M,eventType:S,new:{},old:{},errors:A}),this._getPayloadRecords(_))}N.callback(v,i)})}_isClosed(){return this.state===$t.closed}_isJoined(){return this.state===$t.joined}_isJoining(){return this.state===$t.joining}_isLeaving(){return this.state===$t.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,r,i){const l=s.toLocaleLowerCase(),c={type:l,filter:r,callback:i};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(s,r){const i=s.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&Rf.isEqual(l.filter,r))})),this}static isEqual(s,r){if(Object.keys(s).length!==Object.keys(r).length)return!1;for(const i in s)if(s[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(Xs.close,{},s)}_onError(s){this._on(Xs.error,{},r=>s(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$t.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const r={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(r.new=Yy(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(r.old=Yy(s.columns,s.old_record)),r}}const rh=()=>{},qc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},TC=[1e3,2e3,5e3,1e4],kC=1e4,AC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MC{constructor(s,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lh,this.transport=null,this.heartbeatIntervalMs=qc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rh,this.ref=0,this.reconnectTimer=null,this.logger=rh,this.conn=null,this.sendBuffer=[],this.serializer=new jC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...u)=>jr(async()=>{const{default:m}=await Promise.resolve().then(()=>Bi);return{default:m}},void 0).then(({default:m})=>m(...u)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...u)=>c(...u)},!(!((i=r==null?void 0:r.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${s}/${zh.websocket}`,this.httpEndpoint=Aj(s),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pC.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const r=s.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yC}))}disconnect(s,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},s?this.conn.close(s,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const r=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const s=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,r,i){this.logger(s,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ko.connecting:return tn.Connecting;case Ko.open:return tn.Open;case Ko.closing:return tn.Closing;default:return tn.Closed}}isConnected(){return this.connectionState()===tn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,r={config:{}}){const i=`realtime:${s}`,l=this.getChannels().find(c=>c.topic===i);if(l)return l;{const c=new Rf(`realtime:${s}`,r,this);return this.channels.push(c),c}}push(s){const{topic:r,event:i,payload:l,ref:c}=s,u=()=>{this.encode(s,m=>{var h;(h=this.conn)===null||h===void 0||h.send(m)})};this.log("push",`${r} ${i} (${c})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(bC,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},qc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let r=this.channels.find(i=>i.topic===s&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${s}"`),r.unsubscribe())}_remove(s){this.channels=this.channels.filter(r=>r.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:l,payload:c,ref:u}=r,m=u?`(${u})`:"",h=c.status||"";this.log("receive",`${h} ${i} ${l} ${m}`.trim(),c),this.channels.filter(f=>f._isMember(i)).forEach(f=>f._trigger(l,c,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(s){var r;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var r;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(Xs.error))}_appendParams(s,r){if(Object.keys(r).length===0)return s;const i=s.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${s}${i}${l}`}_workerObjectUrl(s){let r;if(s)r=s;else{const i=new Blob([AC],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(s,r=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(s=null){let r;s?r=s:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const l={access_token:r,version:xC};r&&i.updateJoinPayload(l),i.joinedOnce&&i._isJoined()&&i._push(Xs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${s}`,r)})}_triggerStateCallbacks(s,r){try{this.stateChangeCallbacks[s].forEach(i=>{try{i(r)}catch(l){this.log("error",`error in ${s} callback`,l)}})}catch(i){this.log("error",`error triggering ${s} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Tj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var r,i,l,c,u,m,h,f,g;if(this.transport=(r=s==null?void 0:s.transport)!==null&&r!==void 0?r:null,this.timeout=(i=s==null?void 0:s.timeout)!==null&&i!==void 0?i:Lh,this.heartbeatIntervalMs=(l=s==null?void 0:s.heartbeatIntervalMs)!==null&&l!==void 0?l:qc.HEARTBEAT_INTERVAL,this.worker=(c=s==null?void 0:s.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=s==null?void 0:s.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(m=s==null?void 0:s.heartbeatCallback)!==null&&m!==void 0?m:rh,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=s==null?void 0:s.reconnectAfterMs)!==null&&h!==void 0?h:y=>TC[y-1]||kC,this.encode=(f=s==null?void 0:s.encode)!==null&&f!==void 0?f:(y,v)=>v(JSON.stringify(y)),this.decode=(g=s==null?void 0:s.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}class Pf extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function Ut(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class DC extends Pf{constructor(s,r,i){super(s),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bh extends Pf{constructor(s,r){super(s),this.name="StorageUnknownError",this.originalError=r}}var OC=function(t,s,r,i){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function m(g){try{f(i.next(g))}catch(y){u(y)}}function h(g){try{f(i.throw(g))}catch(y){u(y)}}function f(g){g.done?c(g.value):l(g.value).then(m,h)}f((i=i.apply(t,s||[])).next())})};const Mj=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...r)=>jr(async()=>{const{default:i}=await Promise.resolve().then(()=>Bi);return{default:i}},void 0).then(({default:i})=>i(...r)):s=fetch,(...r)=>s(...r)},RC=()=>OC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield jr(()=>Promise.resolve().then(()=>Bi),void 0)).Response:Response}),Uh=t=>{if(Array.isArray(t))return t.map(r=>Uh(r));if(typeof t=="function"||t!==Object(t))return t;const s={};return Object.entries(t).forEach(([r,i])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));s[l]=Uh(i)}),s},PC=t=>{if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var hn=function(t,s,r,i){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function m(g){try{f(i.next(g))}catch(y){u(y)}}function h(g){try{f(i.throw(g))}catch(y){u(y)}}function f(g){g.done?c(g.value):l(g.value).then(m,h)}f((i=i.apply(t,s||[])).next())})};const nh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),LC=(t,s,r)=>hn(void 0,void 0,void 0,function*(){const i=yield RC();t instanceof i&&!(r!=null&&r.noResolveJson)?t.json().then(l=>{const c=t.status||500,u=(l==null?void 0:l.statusCode)||c+"";s(new DC(nh(l),c,u))}).catch(l=>{s(new Bh(nh(l),l))}):s(new Bh(nh(t),t))}),zC=(t,s,r,i)=>{const l={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"||!i?l:(PC(i)?(l.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),l.body=JSON.stringify(i)):l.body=i,s!=null&&s.duplex&&(l.duplex=s.duplex),Object.assign(Object.assign({},l),r))};function xl(t,s,r,i,l,c){return hn(this,void 0,void 0,function*(){return new Promise((u,m)=>{t(r,zC(s,i,l,c)).then(h=>{if(!h.ok)throw h;return i!=null&&i.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>LC(h,m,i))})})}function od(t,s,r,i){return hn(this,void 0,void 0,function*(){return xl(t,"GET",s,r,i)})}function ca(t,s,r,i,l){return hn(this,void 0,void 0,function*(){return xl(t,"POST",s,i,l,r)})}function Vh(t,s,r,i,l){return hn(this,void 0,void 0,function*(){return xl(t,"PUT",s,i,l,r)})}function $C(t,s,r,i){return hn(this,void 0,void 0,function*(){return xl(t,"HEAD",s,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function Dj(t,s,r,i,l){return hn(this,void 0,void 0,function*(){return xl(t,"DELETE",s,i,l,r)})}var os=function(t,s,r,i){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function m(g){try{f(i.next(g))}catch(y){u(y)}}function h(g){try{f(i.throw(g))}catch(y){u(y)}}function f(g){g.done?c(g.value):l(g.value).then(m,h)}f((i=i.apply(t,s||[])).next())})};const BC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class UC{constructor(s,r={},i,l){this.url=s,this.headers=r,this.bucketId=i,this.fetch=Mj(l)}uploadOrUpdate(s,r,i,l){return os(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},Wy),l);let m=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),h&&c.append("metadata",this.encodeMetadata(h)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",u.cacheControl),h&&c.append("metadata",this.encodeMetadata(h))):(c=i,m["cache-control"]=`max-age=${u.cacheControl}`,m["content-type"]=u.contentType,h&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),l!=null&&l.headers&&(m=Object.assign(Object.assign({},m),l.headers));const f=this._removeEmptyFolders(r),g=this._getFinalPath(f),y=yield(s=="PUT"?Vh:ca)(this.fetch,`${this.url}/object/${g}`,c,Object.assign({headers:m},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(c){if(Ut(c))return{data:null,error:c};throw c}})}upload(s,r,i){return os(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,r,i)})}uploadToSignedUrl(s,r,i,l){return os(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),m=new URL(this.url+`/object/upload/sign/${u}`);m.searchParams.set("token",r);try{let h;const f=Object.assign({upsert:Wy.upsert},l),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.append("cacheControl",f.cacheControl)):(h=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const y=yield Vh(this.fetch,m.toString(),h,{headers:g});return{data:{path:c,fullPath:y.Key},error:null}}catch(h){if(Ut(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(s,r){return os(this,void 0,void 0,function*(){try{let i=this._getFinalPath(s);const l=Object.assign({},this.headers);r!=null&&r.upsert&&(l["x-upsert"]="true");const c=yield ca(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:l}),u=new URL(this.url+c.url),m=u.searchParams.get("token");if(!m)throw new Pf("No token returned by API");return{data:{signedUrl:u.toString(),path:s,token:m},error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}update(s,r,i){return os(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,r,i)})}move(s,r,i){return os(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(Ut(l))return{data:null,error:l};throw l}})}copy(s,r,i){return os(this,void 0,void 0,function*(){try{return{data:{path:(yield ca(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(Ut(l))return{data:null,error:l};throw l}})}createSignedUrl(s,r,i){return os(this,void 0,void 0,function*(){try{let l=this._getFinalPath(s),c=yield ca(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(l){if(Ut(l))return{data:null,error:l};throw l}})}createSignedUrls(s,r,i){return os(this,void 0,void 0,function*(){try{const l=yield ca(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:s},{headers:this.headers}),c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:l.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(l){if(Ut(l))return{data:null,error:l};throw l}})}download(s,r){return os(this,void 0,void 0,function*(){const l=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),u=c?`?${c}`:"";try{const m=this._getFinalPath(s);return{data:yield(yield od(this.fetch,`${this.url}/${l}/${m}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(Ut(m))return{data:null,error:m};throw m}})}info(s){return os(this,void 0,void 0,function*(){const r=this._getFinalPath(s);try{const i=yield od(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Uh(i),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}exists(s){return os(this,void 0,void 0,function*(){const r=this._getFinalPath(s);try{return yield $C(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Ut(i)&&i instanceof Bh){const l=i.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:i}}throw i}})}getPublicUrl(s,r){const i=this._getFinalPath(s),l=[],c=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&l.push(c);const m=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&l.push(h);let f=l.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${f}`)}}}remove(s){return os(this,void 0,void 0,function*(){try{return{data:yield Dj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}list(s,r,i){return os(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},BC),r),{prefix:s||""});return{data:yield ca(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},i),error:null}}catch(l){if(Ut(l))return{data:null,error:l};throw l}})}listV2(s,r){return os(this,void 0,void 0,function*(){try{const i=Object.assign({},s);return{data:yield ca(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const r=[];return s.width&&r.push(`width=${s.width}`),s.height&&r.push(`height=${s.height}`),s.resize&&r.push(`resize=${s.resize}`),s.format&&r.push(`format=${s.format}`),s.quality&&r.push(`quality=${s.quality}`),r.join("&")}}const VC="2.11.0",qC={"X-Client-Info":`storage-js/${VC}`};var oi=function(t,s,r,i){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function m(g){try{f(i.next(g))}catch(y){u(y)}}function h(g){try{f(i.throw(g))}catch(y){u(y)}}function f(g){g.done?c(g.value):l(g.value).then(m,h)}f((i=i.apply(t,s||[])).next())})};class IC{constructor(s,r={},i,l){const c=new URL(s);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},qC),r),this.fetch=Mj(i)}listBuckets(){return oi(this,void 0,void 0,function*(){try{return{data:yield od(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}getBucket(s){return oi(this,void 0,void 0,function*(){try{return{data:yield od(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}createBucket(s,r={public:!1}){return oi(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}updateBucket(s,r){return oi(this,void 0,void 0,function*(){try{return{data:yield Vh(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}emptyBucket(s){return oi(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}deleteBucket(s){return oi(this,void 0,void 0,function*(){try{return{data:yield Dj(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}}class FC extends IC{constructor(s,r={},i,l){super(s,r,i,l)}from(s){return new UC(this.url,this.headers,s,this.fetch)}}const HC="2.56.1";let Go="";typeof Deno<"u"?Go="deno":typeof document<"u"?Go="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Go="react-native":Go="node";const GC={"X-Client-Info":`supabase-js-${Go}/${HC}`},YC={headers:GC},KC={schema:"public"},XC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WC={};var QC=function(t,s,r,i){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function m(g){try{f(i.next(g))}catch(y){u(y)}}function h(g){try{f(i.throw(g))}catch(y){u(y)}}function f(g){g.done?c(g.value):l(g.value).then(m,h)}f((i=i.apply(t,s||[])).next())})};const ZC=t=>{let s;return t?s=t:typeof fetch>"u"?s=wj:s=fetch,(...r)=>s(...r)},JC=()=>typeof Headers>"u"?Nj:Headers,e4=(t,s,r)=>{const i=ZC(r),l=JC();return(c,u)=>QC(void 0,void 0,void 0,function*(){var m;const h=(m=yield s())!==null&&m!==void 0?m:t;let f=new l(u==null?void 0:u.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),i(c,Object.assign(Object.assign({},u),{headers:f}))})};var t4=function(t,s,r,i){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function m(g){try{f(i.next(g))}catch(y){u(y)}}function h(g){try{f(i.throw(g))}catch(y){u(y)}}function f(g){g.done?c(g.value):l(g.value).then(m,h)}f((i=i.apply(t,s||[])).next())})};function s4(t){return t.endsWith("/")?t:t+"/"}function a4(t,s){var r,i;const{db:l,auth:c,realtime:u,global:m}=t,{db:h,auth:f,realtime:g,global:y}=s,v={db:Object.assign(Object.assign({},h),l),auth:Object.assign(Object.assign({},f),c),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},y),m),{headers:Object.assign(Object.assign({},(r=y==null?void 0:y.headers)!==null&&r!==void 0?r:{}),(i=m==null?void 0:m.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>t4(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}const Oj="2.71.1",yi=30*1e3,qh=3,ih=qh*yi,r4="http://localhost:9999",n4="supabase.auth.token",i4={"X-Client-Info":`gotrue-js/${Oj}`},Ih="X-Supabase-Api-Version",Rj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},o4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,l4=10*60*1e3;class Lf extends Error{constructor(s,r,i){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function Ve(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class c4 extends Lf{constructor(s,r,i){super(s,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function d4(t){return Ve(t)&&t.name==="AuthApiError"}class Pj extends Lf{constructor(s,r){super(s),this.name="AuthUnknownError",this.originalError=r}}class Cr extends Lf{constructor(s,r,i,l){super(s,i,l),this.name=r,this.status=i}}class gr extends Cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function u4(t){return Ve(t)&&t.name==="AuthSessionMissingError"}class Ic extends Cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fc extends Cr{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Hc extends Cr{constructor(s,r=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function m4(t){return Ve(t)&&t.name==="AuthImplicitGrantRedirectError"}class Qy extends Cr{constructor(s,r=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fh extends Cr{constructor(s,r){super(s,"AuthRetryableFetchError",r,void 0)}}function oh(t){return Ve(t)&&t.name==="AuthRetryableFetchError"}class Zy extends Cr{constructor(s,r,i){super(s,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Hh extends Cr{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const ld="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jy=` 	
\r=`.split(""),h4=(()=>{const t=new Array(128);for(let s=0;s<t.length;s+=1)t[s]=-1;for(let s=0;s<Jy.length;s+=1)t[Jy[s].charCodeAt(0)]=-2;for(let s=0;s<ld.length;s+=1)t[ld[s].charCodeAt(0)]=s;return t})();function eb(t,s,r){if(t!==null)for(s.queue=s.queue<<8|t,s.queuedBits+=8;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;r(ld[i]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;r(ld[i]),s.queuedBits-=6}}function Lj(t,s,r){const i=h4[t];if(i>-1)for(s.queue=s.queue<<6|i,s.queuedBits+=6;s.queuedBits>=8;)r(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function tb(t){const s=[],r=u=>{s.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=u=>{g4(u,i,r)};for(let u=0;u<t.length;u+=1)Lj(t.charCodeAt(u),l,c);return s.join("")}function f4(t,s){if(t<=127){s(t);return}else if(t<=2047){s(192|t>>6),s(128|t&63);return}else if(t<=65535){s(224|t>>12),s(128|t>>6&63),s(128|t&63);return}else if(t<=1114111){s(240|t>>18),s(128|t>>12&63),s(128|t>>6&63),s(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function p4(t,s){for(let r=0;r<t.length;r+=1){let i=t.charCodeAt(r);if(i>55295&&i<=56319){const l=(i-55296)*1024&65535;i=(t.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}f4(i,s)}}function g4(t,s,r){if(s.utf8seq===0){if(t<=127){r(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){s.utf8seq=i;break}if(s.utf8seq===2)s.codepoint=t&31;else if(s.utf8seq===3)s.codepoint=t&15;else if(s.utf8seq===4)s.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|t&63,s.utf8seq-=1,s.utf8seq===0&&r(s.codepoint)}}function x4(t){const s=[],r={queue:0,queuedBits:0},i=l=>{s.push(l)};for(let l=0;l<t.length;l+=1)Lj(t.charCodeAt(l),r,i);return new Uint8Array(s)}function y4(t){const s=[];return p4(t,r=>s.push(r)),new Uint8Array(s)}function b4(t){const s=[],r={queue:0,queuedBits:0},i=l=>{s.push(l)};return t.forEach(l=>eb(l,r,i)),eb(null,r,i),s.join("")}function v4(t){return Math.round(Date.now()/1e3)+t}function j4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=Math.random()*16|0;return(t=="x"?s:s&3|8).toString(16)})}const Ys=()=>typeof window<"u"&&typeof document<"u",Kr={tested:!1,writable:!1},zj=()=>{if(!Ys())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kr.tested)return Kr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Kr.tested=!0,Kr.writable=!0}catch{Kr.tested=!0,Kr.writable=!1}return Kr.writable};function w4(t){const s={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{s[c]=l})}catch{}return r.searchParams.forEach((i,l)=>{s[l]=i}),s}const $j=t=>{let s;return t?s=t:typeof fetch>"u"?s=(...r)=>jr(async()=>{const{default:i}=await Promise.resolve().then(()=>Bi);return{default:i}},void 0).then(({default:i})=>i(...r)):s=fetch,(...r)=>s(...r)},N4=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",bi=async(t,s,r)=>{await t.setItem(s,JSON.stringify(r))},Xr=async(t,s)=>{const r=await t.getItem(s);if(!r)return null;try{return JSON.parse(r)}catch{return r}},hr=async(t,s)=>{await t.removeItem(s)};class Ed{constructor(){this.promise=new Ed.promiseConstructor((s,r)=>{this.resolve=s,this.reject=r})}}Ed.promiseConstructor=Promise;function lh(t){const s=t.split(".");if(s.length!==3)throw new Hh("Invalid JWT structure");for(let i=0;i<s.length;i++)if(!o4.test(s[i]))throw new Hh("JWT not in base64url format");return{header:JSON.parse(tb(s[0])),payload:JSON.parse(tb(s[1])),signature:x4(s[2]),raw:{header:s[0],payload:s[1]}}}async function _4(t){return await new Promise(s=>{setTimeout(()=>s(null),t)})}function S4(t,s){return new Promise((i,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await t(c);if(!s(c,null,u)){i(u);return}}catch(u){if(!s(c,u)){l(u);return}}})()})}function C4(t){return("0"+t.toString(16)).substr(-2)}function E4(){const s=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*i));return l}return crypto.getRandomValues(s),Array.from(s,C4).join("")}async function T4(t){const r=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(i);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function k4(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await T4(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function li(t,s,r=!1){const i=E4();let l=i;r&&(l+="/PASSWORD_RECOVERY"),await bi(t,`${s}-code-verifier`,l);const c=await k4(i);return[c,i===c?"plain":"s256"]}const A4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function M4(t){const s=t.headers.get(Ih);if(!s||!s.match(A4))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function D4(t){if(!t)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(t<=s)throw new Error("JWT has expired")}function O4(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const R4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ci(t){if(!R4.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ch(){const t={};return new Proxy(t,{get:(s,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sb(t){return JSON.parse(JSON.stringify(t))}var P4=function(t,s){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(r[i[l]]=t[i[l]]);return r};const Zr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),L4=[502,503,504];async function ab(t){var s;if(!N4(t))throw new Fh(Zr(t),0);if(L4.includes(t.status))throw new Fh(Zr(t),t.status);let r;try{r=await t.json()}catch(c){throw new Pj(Zr(c),c)}let i;const l=M4(t);if(l&&l.getTime()>=Rj["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Zy(Zr(r),t.status,((s=r.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(i==="session_not_found")throw new gr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new Zy(Zr(r),t.status,r.weak_password.reasons);throw new c4(Zr(r),t.status||500,i)}const z4=(t,s,r,i)=>{const l={method:t,headers:(s==null?void 0:s.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),l.body=JSON.stringify(i),Object.assign(Object.assign({},l),r))};async function Xe(t,s,r,i){var l;const c=Object.assign({},i==null?void 0:i.headers);c[Ih]||(c[Ih]=Rj["2024-01-01"].name),i!=null&&i.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(l=i==null?void 0:i.query)!==null&&l!==void 0?l:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const m=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await $4(t,s,r+m,{headers:c,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(h):{data:Object.assign({},h),error:null}}async function $4(t,s,r,i,l,c){const u=z4(s,i,l,c);let m;try{m=await t(r,Object.assign({},u))}catch(h){throw console.error(h),new Fh(Zr(h),0)}if(m.ok||await ab(m),i!=null&&i.noResolveJson)return m;try{return await m.json()}catch(h){await ab(h)}}function Ra(t){var s;let r=null;q4(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=v4(t.expires_in)));const i=(s=t.user)!==null&&s!==void 0?s:t;return{data:{session:r,user:i},error:null}}function rb(t){const s=Ra(t);return!s.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(s.data.weak_password=t.weak_password),s}function yr(t){var s;return{data:{user:(s=t.user)!==null&&s!==void 0?s:t},error:null}}function B4(t){return{data:t,error:null}}function U4(t){const{action_link:s,email_otp:r,hashed_token:i,redirect_to:l,verification_type:c}=t,u=P4(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:s,email_otp:r,hashed_token:i,redirect_to:l,verification_type:c},h=Object.assign({},u);return{data:{properties:m,user:h},error:null}}function V4(t){return t}function q4(t){return t.access_token&&t.refresh_token&&t.expires_in}const dh=["global","local","others"];var I4=function(t,s){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&s.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)s.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(r[i[l]]=t[i[l]]);return r};class F4{constructor({url:s="",headers:r={},fetch:i}){this.url=s,this.headers=r,this.fetch=$j(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,r=dh[0]){if(dh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${dh.join(", ")}`);try{return await Xe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async inviteUserByEmail(s,r={}){try{return await Xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:yr})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async generateLink(s){try{const{options:r}=s,i=I4(s,["options"]),l=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(l.new_email=i==null?void 0:i.newEmail,delete l.newEmail),await Xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:U4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ve(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(s){try{return await Xe(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:yr})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async listUsers(s){var r,i,l,c,u,m,h;try{const f={nextPage:null,lastPage:0,total:0},g=await Xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=s==null?void 0:s.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(c=(l=s==null?void 0:s.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:V4});if(g.error)throw g.error;const y=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,N=(h=(m=g.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&h!==void 0?h:[];return N.length>0&&(N.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(_.split(";")[1].split("=")[1]);f[`${C}Page`]=j}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(Ve(f))return{data:{users:[]},error:f};throw f}}async getUserById(s){ci(s);try{return await Xe(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:yr})}catch(r){if(Ve(r))return{data:{user:null},error:r};throw r}}async updateUserById(s,r){ci(s);try{return await Xe(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:r,headers:this.headers,xform:yr})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async deleteUser(s,r=!1){ci(s);try{return await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:r},xform:yr})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async _listFactors(s){ci(s.userId);try{const{data:r,error:i}=await Xe(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:i}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _deleteFactor(s){ci(s.userId),ci(s.id);try{return{data:await Xe(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}}function nb(t={}){return{getItem:s=>t[s]||null,setItem:(s,r)=>{t[s]=r},removeItem:s=>{delete t[s]}}}function H4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const di={debug:!!(globalThis&&zj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bj extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class G4 extends Bj{}async function Y4(t,s,r){di.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,s);const i=new globalThis.AbortController;return s>0&&setTimeout(()=>{i.abort(),di.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async l=>{if(l){di.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await r()}finally{di.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(s===0)throw di.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new G4(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(di.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}H4();const K4={url:r4,storageKey:n4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:i4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ib(t,s,r){return await r()}const ui={};class nl{constructor(s){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=nl.nextInstanceID,nl.nextInstanceID+=1,this.instanceID>0&&Ys()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},K4),s);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new F4({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=$j(l.fetch),this.lock=l.lock||ib,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Ys()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Y4:this.lock=ib,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:zj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nb(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=nb(this.memoryStorage)),Ys()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var s,r;return(r=(s=ui[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(s){ui[this.storageKey]=Object.assign(Object.assign({},ui[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,r;return(r=(s=ui[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){ui[this.storageKey]=Object.assign(Object.assign({},ui[this.storageKey]),{cachedAt:s})}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Oj}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const r=w4(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),Ys()&&this.detectSessionInUrl&&i!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),m4(c)){const h=(s=c.details)===null||s===void 0?void 0:s.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",m),await this._saveSession(u),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ve(r)?{error:r}:{error:new Pj("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var r,i,l;try{const c=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=s==null?void 0:s.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(l=s==null?void 0:s.options)===null||l===void 0?void 0:l.captchaToken}},xform:Ra}),{data:u,error:m}=c;if(m||!u)return{data:{user:null,session:null},error:m};const h=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(c){if(Ve(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(s){var r,i,l;try{let c;if("email"in s){const{email:g,password:y,options:v}=s;let N=null,_=null;this.flowType==="pkce"&&([N,_]=await li(this.storage,this.storageKey)),c=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:y,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:N,code_challenge_method:_},xform:Ra})}else if("phone"in s){const{phone:g,password:y,options:v}=s;c=await Xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(i=v==null?void 0:v.data)!==null&&i!==void 0?i:{},channel:(l=v==null?void 0:v.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Ra})}else throw new Fc("You must provide either an email or phone number and a password");const{data:u,error:m}=c;if(m||!u)return{data:{user:null,session:null},error:m};const h=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(c){if(Ve(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(s){try{let r;if("email"in s){const{email:c,password:u,options:m}=s;r=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:rb})}else if("phone"in s){const{phone:c,password:u,options:m}=s;r=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:rb})}else throw new Fc("You must provide either an email or phone number and a password");const{data:i,error:l}=r;return l?{data:{user:null,session:null},error:l}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ic}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:l})}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(s){var r,i,l,c;return await this._handleProviderSignIn(s.provider,{redirectTo:(r=s.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=s.options)===null||i===void 0?void 0:i.scopes,queryParams:(l=s.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=s.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:r}=s;if(r==="solana")return await this.signInWithSolana(s);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(s){var r,i,l,c,u,m,h,f,g,y,v,N;let _,j;if("message"in s)_=s.message,j=s.signature;else{const{chain:C,wallet:M,statement:S,options:A}=s;let E;if(Ys())if(typeof M=="object")E=M;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))E=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=M}const w=new URL((r=A==null?void 0:A.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const O=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),S?{statement:S}:null));let L;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")L=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)L=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)_=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),j=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${w.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(l=(i=A==null?void 0:A.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=A==null?void 0:A.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((u=A==null?void 0:A.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((m=A==null?void 0:A.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((h=A==null?void 0:A.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((f=A==null?void 0:A.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((y=(g=A==null?void 0:A.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...A.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const O=await E.signMessage(new TextEncoder().encode(_),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=O}}try{const{data:C,error:M}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:b4(j)},!((v=s.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(N=s.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Ra});if(M)throw M;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Ic}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:M})}catch(C){if(Ve(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(s){const r=await Xr(this.storage,`${this.storageKey}-code-verifier`),[i,l]=(r??"").split("/");try{const{data:c,error:u}=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:i},xform:Ra});if(await hr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Ic}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:u})}catch(c){if(Ve(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(s){try{const{options:r,provider:i,token:l,access_token:c,nonce:u}=s,m=await Xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:l,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ra}),{data:h,error:f}=m;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Ic}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(s){var r,i,l,c,u;try{if("email"in s){const{email:m,options:h}=s;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await li(this.storage,this.storageKey));const{error:y}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(i=h==null?void 0:h.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in s){const{phone:m,options:h}=s,{data:f,error:g}=await Xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=h==null?void 0:h.data)!==null&&l!==void 0?l:{},create_user:(c=h==null?void 0:h.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new Fc("You must provide either an email or phone number.")}catch(m){if(Ve(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(s){var r,i;try{let l,c;"options"in s&&(l=(r=s.options)===null||r===void 0?void 0:r.redirectTo,c=(i=s.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:m}=await Xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Ra});if(m)throw m;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,f=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(l){if(Ve(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(s){var r,i,l;try{let c=null,u=null;return this.flowType==="pkce"&&([c,u]=await li(this.storage,this.storageKey)),await Xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(i=(r=s.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((l=s==null?void 0:s.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:B4})}catch(c){if(Ve(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;if(i)throw i;if(!r)throw new gr;const{error:l}=await Xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:l}})}catch(s){if(Ve(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const r=`${this.url}/resend`;if("email"in s){const{email:i,type:l,options:c}=s,{error:u}=await Xe(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in s){const{phone:i,type:l,options:c}=s,{data:u,error:m}=await Xe(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:m}}throw new Fc("You must provide either an email or phone number and a type")}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(s,r){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await s(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const r=await Xr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?s=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const i=s.expires_at?s.expires_at*1e3-Date.now()<ih:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",s.expires_at),!i){if(this.userStorage){const u=await Xr(this.userStorage,this.storageKey+"-user");u!=null&&u.user?s.user=u.user:s.user=ch()}if(this.storage.isServer&&s.user){let u=this.suppressGetSessionWarning;s=new Proxy(s,{get:(h,f,g)=>(!u&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,f,g))})}return{data:{session:s},error:null}}const{session:l,error:c}=await this._callRefreshToken(s.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:yr}):await this._useSession(async r=>{var i,l,c;const{data:u,error:m}=r;if(m)throw m;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gr}:await Xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:yr})})}catch(r){if(Ve(r))return u4(r)&&(await this._removeSession(),await hr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(s,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,r))}async _updateUser(s,r={}){try{return await this._useSession(async i=>{const{data:l,error:c}=i;if(c)throw c;if(!l.session)throw new gr;const u=l.session;let m=null,h=null;this.flowType==="pkce"&&s.email!=null&&([m,h]=await li(this.storage,this.storageKey));const{data:f,error:g}=await Xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:m,code_challenge_method:h}),jwt:u.access_token,xform:yr});if(g)throw g;return u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new gr;const r=Date.now()/1e3;let i=r,l=!0,c=null;const{payload:u}=lh(s.access_token);if(u.exp&&(i=u.exp,l=i<=r),l){const{session:m,error:h}=await this._callRefreshToken(s.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!m)return{data:{user:null,session:null},error:null};c=m}else{const{data:m,error:h}=await this._getUser(s.access_token);if(h)throw h;c={access_token:s.access_token,refresh_token:s.refresh_token,user:m.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(Ve(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async r=>{var i;if(!s){const{data:u,error:m}=r;if(m)throw m;s=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(s!=null&&s.refresh_token))throw new gr;const{session:l,error:c}=await this._callRefreshToken(s.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ve(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(s,r){try{if(!Ys())throw new Hc("No browser detected.");if(s.error||s.error_description||s.error_code)throw new Hc(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Qy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Qy("No code detected.");const{data:S,error:A}=await this._exchangeCodeForSession(s.code);if(A)throw A;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:l,access_token:c,refresh_token:u,expires_in:m,expires_at:h,token_type:f}=s;if(!c||!m||!u||!f)throw new Hc("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(m);let v=g+y;h&&(v=parseInt(h));const N=v-g;N*1e3<=yi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${y}s`);const _=v-y;g-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,g):g-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,g);const{data:j,error:C}=await this._getUser(c);if(C)throw C;const M={provider_token:i,provider_refresh_token:l,access_token:c,expires_in:y,expires_at:v,refresh_token:u,token_type:f,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:M,redirectType:s.type},error:null}}catch(i){if(Ve(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const r=await Xr(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&r)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:l,error:c}=r;if(c)return{error:c};const u=(i=l.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:m}=await this.admin.signOut(u,s);if(m&&!(d4(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return s!=="others"&&(await this._removeSession(),await hr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const r=j4(),i={id:r,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(s){return await this._useSession(async r=>{var i,l;try{const{data:{session:c},error:u}=r;if(u)throw u;await((i=this.stateChangeEmitters.get(s))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",s,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(s))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",c),console.error(c)}})}async resetPasswordForEmail(s,r={}){let i=null,l=null;this.flowType==="pkce"&&([i,l]=await li(this.storage,this.storageKey,!0));try{return await Xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:i,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(Ve(c))return{data:null,error:c};throw c}}async getUserIdentities(){var s;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(s=r.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async linkIdentity(s){var r;try{const{data:i,error:l}=await this._useSession(async c=>{var u,m,h,f,g;const{data:y,error:v}=c;if(v)throw v;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(u=s.options)===null||u===void 0?void 0:u.redirectTo,scopes:(m=s.options)===null||m===void 0?void 0:m.scopes,queryParams:(h=s.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Xe(this.fetch,"GET",N,{headers:this.headers,jwt:(g=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return Ys()&&!(!((r=s.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:s.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Ve(i))return{data:{provider:s.provider,url:null},error:i};throw i}}async unlinkIdentity(s){try{return await this._useSession(async r=>{var i,l;const{data:c,error:u}=r;if(u)throw u;return await Xe(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(l=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _refreshAccessToken(s){const r=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await S4(async l=>(l>0&&await _4(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:Ra})),(l,c)=>{const u=200*Math.pow(2,l);return c&&oh(c)&&Date.now()+u-i<yi})}catch(i){if(this._debug(r,"error",i),Ve(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",r,"url",i),Ys()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:s,url:i},error:null}}async _recoverAndRefresh(){var s,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const l=await Xr(this.storage,this.storageKey);if(l&&this.userStorage){let u=await Xr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await bi(this.userStorage,this.storageKey+"-user",u)),l.user=(s=u==null?void 0:u.user)!==null&&s!==void 0?s:ch()}else if(l&&!l.user&&!l.user){const u=await Xr(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(l.user=u.user,await hr(this.storage,this.storageKey+"-user"),await bi(this.storage,this.storageKey,l)):l.user=ch()}if(this._debug(i,"session from storage",l),!this._isValidSession(l)){this._debug(i,"session is not valid"),l!==null&&await this._removeSession();return}const c=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ih;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${ih}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),oh(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:m}=await this._getUser(l.access_token);!m&&(u!=null&&u.user)?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(i,"error",l),console.error(l);return}finally{this._debug(i,"end")}}async _callRefreshToken(s){var r,i;if(!s)throw new gr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Ed;const{data:c,error:u}=await this._refreshAccessToken(s);if(u)throw u;if(!c.session)throw new gr;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const m={session:c.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(c){if(this._debug(l,"error",c),Ve(c)){const u={session:null,error:c};return oh(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(s,r,i=!0){const l=`#_notifyAllSubscribers(${s})`;this._debug(l,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:s,session:r});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(s,r)}catch(h){c.push(h)}});if(await Promise.all(u),c.length>0){for(let m=0;m<c.length;m+=1)console.error(c[m]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const r=Object.assign({},s),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await bi(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const c=sb(l);await bi(this.storage,this.storageKey,c)}else{const l=sb(r);await bi(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await hr(this.storage,this.storageKey),await hr(this.storage,this.storageKey+"-code-verifier"),await hr(this.storage,this.storageKey+"-user"),this.userStorage&&await hr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Ys()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),yi);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((i.expires_at*1e3-s)/yi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${yi}ms, refresh threshold is ${qh} ticks`),l<=qh&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof Bj)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ys()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const r=`#_onVisibilityChanged(${s})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,r,i){const l=[`provider=${encodeURIComponent(r)}`];if(i!=null&&i.redirectTo&&l.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&l.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,u]=await li(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(m.toString())}if(i!=null&&i.queryParams){const c=new URLSearchParams(i.queryParams);l.push(c.toString())}return i!=null&&i.skipBrowserRedirect&&l.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${s}?${l.join("&")}`}async _unenroll(s){try{return await this._useSession(async r=>{var i;const{data:l,error:c}=r;return c?{data:null,error:c}:await Xe(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _enroll(s){try{return await this._useSession(async r=>{var i,l;const{data:c,error:u}=r;if(u)return{data:null,error:u};const m=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:{issuer:s.issuer}),{data:h,error:f}=await Xe(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(s.factorType==="totp"&&(!((l=h==null?void 0:h.totp)===null||l===void 0)&&l.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:l,error:c}=r;if(c)return{data:null,error:c};const{data:u,error:m}=await Xe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:m})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:l,error:c}=r;return c?{data:null,error:c}:await Xe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:{channel:s.channel},headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(Ve(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(s){const{data:r,error:i}=await this._challenge({factorId:s.factorId});return i?{data:null,error:i}:await this._verify({factorId:s.factorId,challengeId:r.id,code:s.code})}async _listFactors(){const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const i=(s==null?void 0:s.factors)||[],l=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),c=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var r,i;const{data:{session:l},error:c}=s;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=lh(l.access_token);let m=null;u.aal&&(m=u.aal);let h=m;((i=(r=l.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const g=u.amr||[];return{data:{currentLevel:m,nextLevel:h,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(s,r={keys:[]}){let i=r.keys.find(m=>m.kid===s);if(i)return i;const l=Date.now();if(i=this.jwks.keys.find(m=>m.kid===s),i&&this.jwks_cached_at+l4>l)return i;const{data:c,error:u}=await Xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,i=c.keys.find(m=>m.kid===s),!i)?null:i}async getClaims(s,r={}){try{let i=s;if(!i){const{data:N,error:_}=await this.getSession();if(_||!N.session)return{data:null,error:_};i=N.session.access_token}const{header:l,payload:c,signature:u,raw:{header:m,payload:h}}=lh(i);r!=null&&r.allowExpired||D4(c.exp);const f=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!f){const{error:N}=await this.getUser(i);if(N)throw N;return{data:{claims:c,header:l,signature:u},error:null}}const g=O4(l.alg),y=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,u,y4(`${m}.${h}`)))throw new Hh("Invalid JWT signature");return{data:{claims:c,header:l,signature:u},error:null}}catch(i){if(Ve(i))return{data:null,error:i};throw i}}}nl.nextInstanceID=0;const X4=nl;class W4 extends X4{constructor(s){super(s)}}var Q4=function(t,s,r,i){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function m(g){try{f(i.next(g))}catch(y){u(y)}}function h(g){try{f(i.throw(g))}catch(y){u(y)}}function f(g){g.done?c(g.value):l(g.value).then(m,h)}f((i=i.apply(t,s||[])).next())})};class Z4{constructor(s,r,i){var l,c,u;if(this.supabaseUrl=s,this.supabaseKey=r,!s)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const m=s4(s),h=new URL(m);this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:KC,realtime:WC,auth:Object.assign(Object.assign({},XC),{storageKey:f}),global:YC},y=a4(i??{},g);this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=y.global.headers)!==null&&c!==void 0?c:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=y.auth)!==null&&u!==void 0?u:{},this.headers,y.global.fetch),this.fetch=e4(r,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new fC(new URL("rest/v1",h).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new FC(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new rC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,r={},i={}){return this.rest.rpc(s,r,i)}channel(s,r={config:{}}){return this.realtime.channel(s,r)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,r;return Q4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:r,detectSessionInUrl:i,storage:l,storageKey:c,flowType:u,lock:m,debug:h},f,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new W4({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:c,autoRefreshToken:s,persistSession:r,detectSessionInUrl:i,storage:l,flowType:u,lock:m,debug:h,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(s){return new MC(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(s,r,i){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:s==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Uj=(t,s,r)=>new Z4(t,s,r);function J4(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}J4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zf="https://wznycskqsavpmejwpksp.supabase.co",eE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind6bnljc2txc2F2cG1landwa3NwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2MzA2NjUsImV4cCI6MjA3MjIwNjY2NX0.uYXbBwQDo1pLeBrmtZnBR2M3a3_TsYDa637pcKSVC_8",tE=void 0,Ai=zf.includes(".supabase.co"),sE=tE;Ai||(console.warn(" Supabase credentials not configured. Using mock mode for development."),console.info(" To use real Supabase:"),console.info("1. Update .env.local with your Supabase credentials"),console.info("2. Get credentials from: https://supabase.com/dashboard"));const Vj="https://mock.supabase.co",qj="mock-anon-key",W=Uj(Ai?zf:Vj,Ai?eE:qj),ob=Uj(Ai?zf:Vj,qj,{auth:{autoRefreshToken:!1,persistSession:!1}}),Wr=Ai,qo=Ai&&sE,Ij=b.createContext(void 0),Kt=()=>{const t=b.useContext(Ij);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},aE=({children:t})=>{const[s,r]=b.useState(null),[i,l]=b.useState(null),[c,u]=b.useState(!0),[m,h]=b.useState(!1),f=async()=>{if(!Wr)return h(!1),!0;try{const _=new AbortController,j=setTimeout(()=>_.abort(),5e3),{data:C,error:M}=await W.auth.getSession();clearTimeout(j);const S=!M||M.message!=="Failed to fetch";return h(!S),S}catch(_){return console.log("Verificao de conectividade falhou:",_),h(!0),!1}};b.useEffect(()=>{if(!Wr){u(!1);return}const _=()=>{try{Object.keys(localStorage).forEach(M=>{(M.includes("supabase")||M.includes("sb-"))&&localStorage.removeItem(M)}),console.log(" Tokens corrompidos limpos do localStorage")}catch(C){console.warn("Erro ao limpar localStorage:",C)}};f().then(C=>{if(!C){console.log(" Aplicao em modo offline"),u(!1);return}W.auth.getSession().then(({data:{session:M}})=>{l(M),u(!1)}).catch(M=>{console.warn("Erro ao verificar sesso:",M),(M.message&&M.message.includes("refresh")||M.message&&M.message.includes("Invalid Refresh Token"))&&(console.log(" Detectado token de refresh invlido, limpando tokens..."),_(),W.auth.getSession().then(({data:{session:S}})=>{l(S)}).catch(()=>{console.log(" Usando modo sem autenticao aps limpeza"),l(null)})),u(!1)})});const{data:j}=W.auth.onAuthStateChange((C,M)=>{console.log(" Auth state changed:",C,M?"Session ativa":"Sem sesso"),C==="TOKEN_REFRESHED"&&!M&&(console.log(" Token refresh falhou, limpando tokens..."),_()),l(M)});return()=>{j.subscription.unsubscribe()}},[]),b.useEffect(()=>{Wr&&(i?(console.log("AuthContext: Sesso encontrada, buscando perfil:",i.user.id),W.from("profiles").select("*").eq("id",i.user.id).single().then(({data:_,error:j})=>{if(console.log("AuthContext: Resultado da busca de perfil:",{profile:_,error:j}),j||!_)console.error("Perfil no encontrado ou erro na busca, deslogando.",j),W.auth.signOut();else{const C={id:_.id,name:_.name||i.user.email||"Usurio",email:i.user.email,role:_.role||"employee",avatar:_.avatar_url||`https://api.dicebear.com/8.x/initials/svg?seed=${_.name||i.user.email}`};console.log("AuthContext: Usurio da aplicao criado:",C),r(C)}})):r(null))},[i]);const g=async(_,j)=>{if(!Wr)return console.info(" Usando autenticao mock para desenvolvimento"),_==="demo@clubmanager.com"&&j==="demo123456"?(r({id:"demo-user-id",name:"Usurio Demonstrao",email:"demo@clubmanager.com",role:"admin",avatar:"https://api.dicebear.com/8.x/initials/svg?seed=Demo"}),{success:!0,error:null}):{success:!1,error:"Credenciais invlidas. Use: demo@clubmanager.com / demo123456"};try{const{error:C}=await W.auth.signInWithPassword({email:_,password:j});return{success:!C,error:(C==null?void 0:C.message)||null}}catch(C){return console.error("Erro de conexo com Supabase:",C),{success:!1,error:"Erro de conexo. Verifique a configurao do Supabase."}}},y=async(_,j,C)=>{if(!Wr)return{success:!1,error:"Cadastro no disponvel no modo demonstrao"};try{const{data:M,error:S}=await W.auth.signUp({email:j,password:C,options:{data:{name:_}}});return S?{success:!1,error:S.message}:M.user?(await new Promise(A=>setTimeout(A,500)),console.log(" Usurio registrado com sucesso. Perfil criado automaticamente pelo trigger."),{success:!0,error:null}):{success:!1,error:"Erro desconhecido no cadastro"}}catch(M){return console.error("Erro no cadastro:",M),{success:!1,error:"Erro de conexo. Verifique a configurao do Supabase."}}},v=async()=>g("demo@clubmanager.com","demo123456"),N=async()=>{if(!Wr){r(null);return}await W.auth.signOut()};return e.jsxs(Ij.Provider,{value:{user:s,login:g,register:y,loginAsDemo:v,logout:N,isLoading:c,isOffline:m,checkOnlineStatus:f},children:[!Wr&&e.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500 text-black px-4 py-2 text-sm z-50",children:[" ",e.jsx("strong",{children:"Modo Desenvolvimento:"})," Supabase no configurado. Use: demo@clubmanager.com / demo123456"]}),c?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-white font-semibold",children:"Carregando Sesso..."})]})}):t]})};var Fj=(t=>(t.DASHBOARD="dashboard",t.MONITOR_BAR="monitor_bar",t.ATENDIMENTO_BAR="atendimento_bar",t.MONITOR_COZINHA="monitor_cozinha",t.GESTAO_CAIXA="gestao_caixa",t.CLIENTES="clientes",t.FUNCIONARIOS="funcionarios",t.SOCIOS="socios",t.CONFIGURACOES="configuracoes",t.RELATORIOS="relatorios",t))(Fj||{}),Ke=(t=>(t.SEGURANCA="seguranca",t.SISTEMA="sistema",t.NOTIFICACOES="notificacoes",t.INTEGRACAO="integracao",t))(Ke||{});const Hj=b.createContext(void 0),Gj=()=>{const t=b.useContext(Hj);if(t===void 0)throw new Error("useMultitenantAuth must be used within a MultitenantAuthProvider");return t},rE=({children:t})=>{const[s,r]=b.useState(null),[i,l]=b.useState(null),[c,u]=b.useState({}),[m,h]=b.useState(!0),[f,g]=b.useState(!1),y=async E=>{try{const{data:w,error:O}=await W.from("usuarios_empresa").select("*").eq("user_id",E.id).single();if(O){console.error("Erro ao buscar usurio da empresa:",O);return}const{data:L,error:V}=await W.from("empresas").select("*").eq("id",w.empresa_id).single();if(V){console.error("Erro ao buscar empresa:",V);return}r(w),l(L),g(!0),await v(w.id)}catch(w){console.error("Erro ao carregar dados do usurio:",w)}},v=async E=>{try{const{data:w,error:O}=await W.from("permissoes_usuario").select("*").eq("usuario_empresa_id",E);if(O){console.error("Erro ao carregar permisses:",O);return}const L={};Object.values(Fj).forEach(V=>{L[V]={visualizar:!1,criar:!1,editar:!1,excluir:!1,administrar:!1}}),w==null||w.forEach(V=>{L[V.modulo]=V.permissoes}),u(L)}catch(w){console.error("Erro ao carregar permisses:",w)}},N=async(E,w)=>{try{h(!0);const{data:O,error:L}=await W.auth.signInWithPassword({email:E,password:w});return L?{success:!1,error:L.message}:(O.user&&(await y(O.user),await S("login","auth",{email:E}),await W.from("usuarios_empresa").update({ultimo_login:new Date().toISOString()}).eq("user_id",O.user.id)),{success:!0})}catch(O){return console.error("Erro no login:",O),{success:!1,error:"Erro interno do servidor"}}finally{h(!1)}},_=async()=>{try{s&&await S("logout","auth"),await W.auth.signOut(),r(null),l(null),u({}),g(!1)}catch(E){console.error("Erro no logout:",E)}},j=async E=>{try{if(h(!0),E.senha!==E.confirmar_senha)return{success:!1,error:"As senhas no coincidem"};const{data:w,error:O}=await W.auth.signUp({email:E.email_admin,password:E.senha,options:{data:{nome_completo:E.nome_admin}}});if(O)return{success:!1,error:O.message};if(!w.user)return{success:!1,error:"Erro ao criar usurio"};const{data:L,error:V}=await W.from("empresas").insert({nome:E.nome_empresa,cnpj:E.cnpj,email_admin:E.email_admin,telefone:E.telefone_empresa,endereco:E.endereco,status:"ativo",plano:"basico"}).select().single();if(V)return await W.auth.admin.deleteUser(w.user.id),{success:!1,error:V.message};const{error:H}=await W.from("usuarios_empresa").insert({user_id:w.user.id,empresa_id:L.id,nome_completo:E.nome_admin,email:E.email_admin,telefone:E.telefone_admin,tipo_usuario:"administrador",status:"ativo",senha_provisoria:!1});return H?{success:!1,error:H.message}:{success:!0}}catch(w){return console.error("Erro ao registrar empresa:",w),{success:!1,error:"Erro interno do servidor"}}finally{h(!1)}},C=(E,w)=>!s||!c[E]?!1:s.tipo_usuario==="administrador"?!0:c[E][w]===!0,M=async()=>{s&&await v(s.id)},S=async(E,w,O)=>{if(!(!i||!s))try{await W.rpc("registrar_log_auditoria",{p_empresa_id:i.id,p_usuario_id:s.user_id,p_acao:E,p_recurso:w,p_detalhes:O})}catch(L){console.error("Erro ao registrar log:",L)}};b.useEffect(()=>{const{data:{subscription:E}}=W.auth.onAuthStateChange(async(w,O)=>{h(!0),O!=null&&O.user?await y(O.user):(r(null),l(null),u({}),g(!1)),h(!1)});return()=>E.unsubscribe()},[]);const A={user:s,empresa:i,permissoes:c,isLoading:m,isAuthenticated:f,login:N,logout:_,registrarEmpresa:j,verificarPermissao:C,atualizarPermissoes:M};return e.jsx(Hj.Provider,{value:A,children:t})},uh=t=>({id:t.id,name:t.name,categoryId:t.category_id||void 0,currentStock:t.current_stock,minStock:t.min_stock,unit:t.unit,lastUpdated:new Date(t.last_updated||t.created_at),supplier:t.supplier||void 0,cost:t.cost||0,availableForSale:t.available_for_sale||!1,image_url:t.image_url||void 0}),nE=t=>({id:t.id,name:t.name,description:t.description||void 0,color:t.color||"#6B7280",icon:t.icon||void 0,isActive:t.is_active||!0,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at||t.created_at)}),mh=t=>({id:t.id,name:t.name,email:t.email,phone:t.phone||"",avatar:t.avatar_url||`https://api.dicebear.com/8.x/initials/svg?seed=${t.name}`,status:t.status,joinDate:new Date(t.join_date),membershipType:t.membership_type||"basic"}),hh=t=>{const s=t.item_type==="direct",r=t.inventory_items;return{id:t.id,name:s&&(r!=null&&r.name)?r.name:t.name,description:t.description||"",price:t.price,category:t.category,image_url:s&&(r!=null&&r.image_url)?r.image_url:t.image_url||void 0,available:t.available,preparation_time:t.preparation_time||void 0,item_type:t.item_type||"prepared",direct_inventory_item_id:t.direct_inventory_item_id||void 0}},lb=t=>({id:t.id,tableNumber:t.table_number||void 0,items:t.order_items.map(s=>({id:s.id.toString(),menuItemId:s.menu_item_id,quantity:s.quantity,price:s.price,notes:s.notes||void 0})),status:t.status,total:t.total,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at||t.created_at),employeeId:t.employee_id||"",notes:t.notes||void 0}),Yj=b.createContext(void 0),_t=()=>{const t=b.useContext(Yj);if(t===void 0)throw new Error("useApp must be used within an AppProvider");return t},iE=({children:t})=>{const[s,r]=b.useState([]),[i,l]=b.useState([]),[c,u]=b.useState([]),[m,h]=b.useState([]),[f,g]=b.useState([]),[y,v]=b.useState([]);b.useEffect(()=>{(async()=>{const[z,X,D,q]=await Promise.all([W.from("menu_items").select(`
          *,
          inventory_items!left(name, image_url)
        `).order("name"),W.from("inventory_items").select("*").order("name"),W.from("inventory_categories").select("*").eq("is_active",!0).order("name"),W.from("members").select("*").order("name")]);z.data&&r(z.data.map(hh)),X.data&&u(X.data.map(uh)),D.data&&h(D.data.map(nE)),q.data&&g(q.data.map(mh))})()},[]),b.useEffect(()=>{const R=async D=>{var Z,ie;const{data:q,error:U}=await W.from("orders").select("*, order_items(*)").order("created_at",{ascending:!1});if(U)console.error("Error fetching orders after realtime event:",U);else if(q){const he=q.map(lb);l(he),D.eventType!=="INSERT"&&L(`Pedido #${(ie=(Z=D.new)==null?void 0:Z.id)==null?void 0:ie.slice(0,4)} atualizado para ${D.new.status}`)}},z=W.channel("realtime-orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},R).subscribe();return(async()=>{const{data:D,error:q}=await W.from("orders").select("*, order_items(*)").order("created_at",{ascending:!1});q?console.error("Error fetching initial orders:",q):D&&l(D.map(lb))})(),()=>{W.removeChannel(z)}},[]);const N=async R=>{console.log("=== addMenuItem INICIADO ==="),console.log("Dados recebidos:",R);const z={name:R.name,description:R.description||null,price:R.price,category:R.category,available:R.available,preparation_time:R.preparation_time||null,item_type:R.item_type||"prepared",direct_inventory_item_id:R.direct_inventory_item_id||null,image_url:R.image_url||null};console.log("Dados formatados para Supabase:",z);const{data:X,error:D}=await W.from("menu_items").insert(z).select().single();if(console.log("Resposta do Supabase:"),console.log("- Data:",X),console.log("- Error:",D),D)throw console.error("=== ERRO NO SUPABASE ==="),console.error("Cdigo do erro:",D.code),console.error("Mensagem do erro:",D.message),console.error("Detalhes do erro:",D.details),console.error("Hint do erro:",D.hint),D;X&&(console.log("Item inserido com sucesso, atualizando estado..."),r(q=>[hh(X),...q].sort((U,Z)=>U.name.localeCompare(Z.name))),L(`Novo prato "${X.name}" adicionado ao cardpio!`),console.log("Estado atualizado com sucesso!")),console.log("=== addMenuItem FINALIZADO ===")},_=async R=>{const z={name:R.name,description:R.description,price:R.price,category:R.category,available:R.available,preparation_time:R.preparation_time,item_type:R.item_type||"prepared",direct_inventory_item_id:R.direct_inventory_item_id||null,image_url:R.image_url||null},{data:X,error:D}=await W.from("menu_items").update(z).eq("id",R.id).select().single();if(D){console.error(D);return}X&&(r(q=>q.map(U=>U.id===X.id?hh(X):U).sort((U,Z)=>U.name.localeCompare(Z.name))),L(`Prato "${X.name}" atualizado!`))},j=async R=>{const{error:z}=await W.from("menu_items").delete().eq("id",R);if(z){console.error(z);return}r(X=>X.filter(D=>D.id!==R)),L("Prato removido do cardpio!")},C=async R=>{const{items:z,tableNumber:X,employeeId:D,notes:q,status:U}=R,Z=z.reduce((ue,Te)=>ue+Te.price*Te.quantity,0),ie={table_number:X,employee_id:D,notes:q,status:U,total:Z},{data:he,error:fe}=await W.from("orders").insert(ie).select().single();if(fe||!he){console.error("Error creating order:",fe);return}const Ce=z.map(ue=>({order_id:he.id,menu_item_id:ue.menuItemId,quantity:ue.quantity,price:ue.price,notes:ue.notes})),{error:we}=await W.from("order_items").insert(Ce);we?console.error("Error creating order items:",we):L(`Novo pedido #${he.id.slice(0,4)} criado!`)},M=async(R,z)=>{try{if(console.log(" updateOrderStatus chamado:",{orderId:R,status:z}),R.startsWith("comanda-")){console.log(" Processando comanda com CommandManager");try{const{CommandManager:X}=await jr(async()=>{const{CommandManager:Z}=await import("./command-manager-gqZVBXdh.js");return{CommandManager:Z}},[]),D=X.getInstance(),q=R.replace("comanda-","").split("-").slice(0,5).join("-");console.log(" Buscando comanda:",q);let U=await D.buscarComanda(q);if(U||(console.log(" Comanda no encontrada, criando uma de teste"),U=await D.criarComanda({funcionario_id:"user-demo",quantidade_pessoas:1,observacoes:`Comanda de teste para ${R}`}),await D.adicionarItem(U.id,{produto_id:"prod-001",nome_produto:"Hambrguer Teste",quantidade:1,preco_unitario:25.9,observacoes:"Item de teste"}),U=await D.buscarComanda(U.id)),U!=null&&U.itens){const Z=U.itens.filter(ie=>ie.status==="pendente"||ie.status==="preparando");console.log(` Atualizando ${Z.length} itens da comanda`);for(const ie of Z){let he;switch(z){case"pending":he="pendente";break;case"preparing":he="preparando";break;case"ready":he="pronto";break;case"delivered":he="entregue";break;default:he=z}await D.atualizarStatusItem(U.id,ie.id,he)}console.log(" Itens da comanda atualizados com sucesso!")}console.log(" Atualizando tambm no Supabase para refletir na interface...");try{const{data:Z,error:ie}=await W.from("comanda_items").select("*").eq("comanda_id",q).in("status",["pending","preparing","ready"]);if(ie)console.warn(" Erro ao buscar itens no Supabase:",ie);else if(Z&&Z.length>0){const{error:he}=await W.from("comanda_items").update({status:z}).eq("comanda_id",q).in("status",["pending","preparing","ready"]);he?console.warn(" Erro ao atualizar no Supabase:",he):console.log(" Supabase tambm atualizado!")}else console.log(" Nenhum item encontrado no Supabase para atualizar")}catch(Z){console.warn(" Erro na sincronizao com Supabase:",Z)}console.log(" Atualizando estado local para feedback imediato..."),l(Z=>Z.map(ie=>ie.id===R?{...ie,status:z,updatedAt:new Date}:ie)),console.log(" Recarregando pedidos do servidor..."),await oe(),await ae(),console.log(" Processo completo finalizado!");return}catch(X){console.error(" Erro no CommandManager:",X),console.log(" Continuando com lgica original...")}}if(R.startsWith("balcao-")){const X=R.replace("balcao-","");console.log("Atualizando pedido de balco:",X);let D;switch(z){case"pending":D="paid";break;case"preparing":D="preparing";break;case"ready":D="ready";break;default:D=z}const{error:q}=await W.from("balcao_orders").update({status:D,preparation_started_at:z==="preparing"?new Date().toISOString():void 0,preparation_completed_at:z==="ready"?new Date().toISOString():void 0}).eq("id",X);if(q)throw q;console.log("Pedido de balco atualizado com sucesso")}else{console.log(" Processando comanda com CommandManager");const{CommandManager:X}=await jr(async()=>{const{CommandManager:ie}=await import("./command-manager-gqZVBXdh.js");return{CommandManager:ie}},[]),D=X.getInstance();let q,U;if(R.startsWith("comanda-")){const ie=R.replace("comanda-",""),he=ie.match(/^([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})-(.+)$/i);he?(q=he[1],U=he[2]):(q=ie,U="")}else{const ie=R.split("-");q=ie.slice(0,5).join("-"),U=ie.slice(5).join("-")}if(console.log("Decomposio do ID:",{orderId:R,realComandaId:q,timeKey:U}),!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(q))throw console.error("ID da comanda invlido:",q),new Error(`ID da comanda invlido: ${q}`);if(U){const ie=U.split("-");console.log("Partes do timeKey:",ie);const[he,fe,Ce,we,ue]=ie.map(Number);if(console.log("Valores parseados:",{year:he,month:fe,day:Ce,hour:we,minute:ue}),isNaN(he)||isNaN(fe)||isNaN(Ce)||isNaN(we)||isNaN(ue))throw console.error(" Valores de data invlidos:",{year:he,month:fe,day:Ce,hour:we,minute:ue}),new Error(`Valores de data invlidos no timeKey: ${U}`);const{data:Te,error:ye}=await W.from("comanda_items").select("*").eq("comanda_id",q).in("status",["pending","preparing","ready"]);if(ye)throw console.error("Erro na busca dos itens da comanda:",ye),ye;const Ee=(Te==null?void 0:Te.filter(Oe=>{const Qe=new Date(Oe.added_at),St=`${Qe.getFullYear()}-${Qe.getMonth()}-${Qe.getDate()}-${Qe.getHours()}-${Qe.getMinutes()}`;return U===St}))||[];if(console.log("Itens encontrados para atualizar:",Ee.length),Ee.length>0){const Oe=Ee.map(St=>St.id);console.log("Atualizando itens:",Oe,"para status:",z);const{error:Qe}=await W.from("comanda_items").update({status:z}).in("id",Oe);if(Qe)throw Qe;console.log("Atualizao realizada com sucesso")}else console.log("Nenhum item encontrado para atualizar")}else{const{data:ie,error:he}=await W.from("comanda_items").select("*").eq("comanda_id",q).in("status",["pending","preparing","ready"]).order("added_at",{ascending:!1});if(he)throw console.error("Erro na busca dos itens da comanda:",he),he;if(ie&&ie.length>0){const fe=ie.map(we=>we.id);console.log("Atualizando todos os itens pendentes:",fe,"para status:",z);const{error:Ce}=await W.from("comanda_items").update({status:z}).in("id",fe);if(Ce)throw Ce;console.log("Atualizao realizada com sucesso")}else console.log("Nenhum item encontrado para atualizar")}}await oe(),await ae()}catch(X){console.error("Erro ao atualizar status do pedido:",X)}},S=async R=>{const z={name:R.name,category_id:R.categoryId,current_stock:R.currentStock,min_stock:R.minStock,unit:R.unit,cost:R.cost,supplier:R.supplier,available_for_sale:R.availableForSale||!1,image_url:R.image_url||null},{data:X,error:D}=await W.from("inventory_items").insert(z).select().single();if(D){console.error(D);return}X&&u(q=>[uh(X),...q].sort((U,Z)=>U.name.localeCompare(Z.name)))},A=async R=>{const z={name:R.name,category_id:R.categoryId,current_stock:R.currentStock,min_stock:R.minStock,unit:R.unit,cost:R.cost,supplier:R.supplier,available_for_sale:R.availableForSale||!1,image_url:R.image_url||null,last_updated:new Date().toISOString()},{data:X,error:D}=await W.from("inventory_items").update(z).eq("id",R.id).select().single();if(D){console.error(D);return}X&&u(q=>q.map(U=>U.id===X.id?uh(X):U).sort((U,Z)=>U.name.localeCompare(Z.name)))},E=async R=>{const{error:z}=await W.from("inventory_items").delete().eq("id",R);if(z){console.error(z);return}u(X=>X.filter(D=>D.id!==R))},w=async R=>{const z={name:R.name,email:R.email,phone:R.phone,avatar_url:R.avatar,status:R.status,membership_type:R.membershipType},{data:X,error:D}=await W.from("members").insert(z).select().single();if(D){console.error(D);return}X&&g(q=>[mh(X),...q].sort((U,Z)=>U.name.localeCompare(Z.name)))},O=async R=>{const z={name:R.name,email:R.email,phone:R.phone,avatar_url:R.avatar,status:R.status,membership_type:R.membershipType},{data:X,error:D}=await W.from("members").update(z).eq("id",R.id).select().single();if(D){console.error(D);return}X&&g(q=>q.map(U=>U.id===X.id?mh(X):U).sort((U,Z)=>U.name.localeCompare(Z.name)))},L=R=>{v(z=>[R,...z].slice(0,10))},V=()=>v([]),[H,B]=b.useState([]),[K,G]=b.useState([]),ae=async()=>{try{const{data:R,error:z}=await W.from("comanda_items").select(`
          *,
          comanda:comandas(
            id,
            table_id,
            customer_name,
            opened_at,
            status,
            table:bar_tables(number)
          ),
          menu_item:menu_items(
            *,
            inventory_items!left(name, image_url)
          )
        `).in("status",["pending","preparing","ready"]).order("added_at",{ascending:!0});if(z)throw z;const{data:X,error:D}=await W.from("balcao_order_items").select(`
          *,
          balcao_order:balcao_orders!inner(
            id,
            order_number,
            customer_name,
            status,
            created_at
          ),
          menu_item:menu_items(
            *,
            inventory_items!left(name, image_url)
          )
        `).in("balcao_order.status",["paid","preparing","ready"]).order("created_at",{ascending:!0});if(D)throw D;const q=new Map;R==null||R.forEach(U=>{var we,ue,Te,ye,Ee,Oe,Qe;const Z=(we=U.comanda)==null?void 0:we.id;if(!Z)return;const ie=new Date(U.added_at),he=`${ie.getUTCFullYear()}-${ie.getUTCMonth()}-${ie.getUTCDate()}-${ie.getUTCHours()}-${ie.getUTCMinutes()}`,fe=`comanda-${Z}-${he}`;q.has(fe)||q.set(fe,{id:fe,tableNumber:(Te=(ue=U.comanda)==null?void 0:ue.table)==null?void 0:Te.number,items:[],status:U.status,total:0,createdAt:new Date(U.added_at),updatedAt:new Date(U.created_at),employeeId:"",notes:`Mesa ${(Ee=(ye=U.comanda)==null?void 0:ye.table)==null?void 0:Ee.number} - ${((Oe=U.comanda)==null?void 0:Oe.customer_name)||"Cliente"}`});const Ce=q.get(fe);Ce.items.push({id:U.id,menuItemId:U.menu_item_id,quantity:U.quantity,price:U.price,notes:U.notes,menuItem:U.menu_item?{id:U.menu_item.id,name:U.menu_item.item_type==="direct"&&((Qe=U.menu_item.inventory_items)!=null&&Qe.name)?U.menu_item.inventory_items.name:U.menu_item.name,category:U.menu_item.category,preparationTime:U.menu_item.preparation_time,item_type:U.menu_item.item_type}:void 0}),Ce.total+=U.price*U.quantity}),X==null||X.forEach(U=>{var fe,Ce;const Z=(fe=U.balcao_order)==null?void 0:fe.id;if(!Z)return;const ie=`balcao-${Z}`;q.has(ie)||q.set(ie,{id:ie,tableNumber:"Balco",items:[],status:U.balcao_order.status==="paid"?"pending":U.balcao_order.status==="preparing"?"preparing":"ready",total:0,createdAt:new Date(U.balcao_order.created_at),updatedAt:new Date(U.created_at),employeeId:"",notes:`Pedido Balco #${U.balcao_order.order_number}${U.balcao_order.customer_name?` - ${U.balcao_order.customer_name}`:""}`});const he=q.get(ie);he.items.push({id:U.id,menuItemId:U.menu_item_id,quantity:U.quantity,price:U.unit_price,notes:U.notes,menuItem:U.menu_item?{id:U.menu_item.id,name:U.menu_item.item_type==="direct"&&((Ce=U.menu_item.inventory_items)!=null&&Ce.name)?U.menu_item.inventory_items.name:U.menu_item.name,category:U.menu_item.category,preparationTime:U.menu_item.preparation_time,item_type:U.menu_item.item_type}:void 0}),he.total+=U.unit_price*U.quantity}),G(Array.from(q.values()))}catch(R){console.error("Erro ao buscar pedidos do bar:",R)}},oe=async()=>{try{const{data:R,error:z}=await W.from("comanda_items").select(`
          *,
          comanda:comandas(
            id,
            table_id,
            customer_name,
            opened_at,
            status,
            table:bar_tables(number)
          ),
          menu_item:menu_items!inner(*)
        `).in("status",["pending","preparing"]).neq("menu_item.item_type","direct").order("added_at",{ascending:!0});if(z)throw z;const{data:X,error:D}=await W.from("balcao_order_items").select(`
          *,
          balcao_order:balcao_orders!inner(
            id,
            order_number,
            customer_name,
            status,
            created_at
          ),
          menu_item:menu_items!inner(*)
        `).in("balcao_order.status",["paid","preparing"]).neq("menu_item.item_type","direct").order("created_at",{ascending:!0});if(D)throw D;const q=new Map;R==null||R.forEach(U=>{var we,ue,Te,ye,Ee,Oe;const Z=(we=U.comanda)==null?void 0:we.id;if(!Z)return;const ie=new Date(U.added_at),he=`${ie.getUTCFullYear()}-${ie.getUTCMonth()}-${ie.getUTCDate()}-${ie.getUTCHours()}-${ie.getUTCMinutes()}`,fe=`comanda-${Z}-${he}`;q.has(fe)||q.set(fe,{id:fe,tableNumber:(Te=(ue=U.comanda)==null?void 0:ue.table)==null?void 0:Te.number,items:[],status:U.status,total:0,createdAt:new Date(U.added_at),updatedAt:new Date(U.created_at),employeeId:"",notes:`Mesa ${(Ee=(ye=U.comanda)==null?void 0:ye.table)==null?void 0:Ee.number} - ${((Oe=U.comanda)==null?void 0:Oe.customer_name)||"Cliente"}`});const Ce=q.get(fe);Ce.items.push({id:U.id,menuItemId:U.menu_item_id,quantity:U.quantity,price:U.price,notes:U.notes,menuItem:U.menu_item?{id:U.menu_item.id,name:U.menu_item.name,category:U.menu_item.category,preparationTime:U.menu_item.preparation_time}:void 0}),Ce.total+=U.price*U.quantity}),X==null||X.forEach(U=>{var fe;const Z=(fe=U.balcao_order)==null?void 0:fe.id;if(!Z)return;const ie=`balcao-${Z}`;q.has(ie)||q.set(ie,{id:ie,tableNumber:"Balco",items:[],status:U.balcao_order.status==="paid"?"pending":"preparing",total:0,createdAt:new Date(U.balcao_order.created_at),updatedAt:new Date(U.created_at),employeeId:"",notes:`Pedido Balco #${U.balcao_order.order_number}${U.balcao_order.customer_name?` - ${U.balcao_order.customer_name}`:""}`});const he=q.get(ie);he.items.push({id:U.id,menuItemId:U.menu_item_id,quantity:U.quantity,price:U.unit_price,notes:U.notes,menuItem:U.menu_item?{id:U.menu_item.id,name:U.menu_item.name,category:U.menu_item.category,preparationTime:U.menu_item.preparation_time}:void 0}),he.total+=U.unit_price*U.quantity}),B(Array.from(q.values()))}catch(R){console.error("Erro ao buscar pedidos da cozinha:",R)}};b.useEffect(()=>{oe(),ae();const R=W.channel("kitchen-orders-realtime").on("postgres_changes",{event:"*",schema:"public",table:"comanda_items"},z=>{console.log(" SUBSCRIPTION ATIVADA - comanda_items:",z),console.log("Event Type:",z.eventType),console.log("New data:",z.new),console.log("Old data:",z.old),setTimeout(()=>{console.log(" Recarregando pedidos da cozinha e bar..."),oe(),ae()},100),z.eventType==="INSERT"?console.log(" Novo item inserido na comanda"):z.eventType==="UPDATE"?console.log(" Item da comanda atualizado"):z.eventType==="DELETE"&&console.log(" Item da comanda removido")}).on("postgres_changes",{event:"*",schema:"public",table:"comandas"},z=>{console.log(" SUBSCRIPTION ATIVADA - comandas:",z),setTimeout(()=>{console.log(" Recarregando pedidos da cozinha e bar (comandas)..."),oe(),ae()},100)}).on("postgres_changes",{event:"*",schema:"public",table:"balcao_orders"},z=>{var X,D;console.log(" SUBSCRIPTION ATIVADA - balcao_orders:",z),console.log("Event Type:",z.eventType),console.log("New data:",z.new),console.log("Old data:",z.old),z.eventType==="UPDATE"&&((X=z.old)==null?void 0:X.status)==="pending_payment"&&((D=z.new)==null?void 0:D.status)==="paid"&&(console.log(" PEDIDO PAGO DETECTADO! Forando atualizao imediata..."),oe(),ae()),setTimeout(()=>{console.log(" Recarregando pedidos da cozinha e bar (balco)..."),oe(),ae()},1e3)}).on("postgres_changes",{event:"*",schema:"public",table:"balcao_order_items"},z=>{console.log(" SUBSCRIPTION ATIVADA - balcao_order_items:",z),console.log("Event Type:",z.eventType),setTimeout(()=>{console.log(" Recarregando pedidos da cozinha e bar (itens balco)..."),oe(),ae()},500)}).subscribe(z=>{console.log(" Status da subscription kitchen-orders:",z),z==="SUBSCRIBED"?console.log(" Subscription ativa e funcionando!"):z==="CHANNEL_ERROR"&&console.error(" Erro na subscription!")});return()=>{console.log(" Desconectando subscription kitchen-orders"),R.unsubscribe()}},[]);const $=H.filter(R=>R.items.length>0),T=K.filter(R=>R.items.length>0);return e.jsx(Yj.Provider,{value:{menuItems:s,addMenuItem:N,updateMenuItem:_,removeMenuItem:j,orders:i,addOrder:C,updateOrderStatus:M,kitchenOrders:$,barOrders:T,refreshKitchenOrders:oe,refreshBarOrders:ae,inventory:c,inventoryCategories:m,addInventoryItem:S,updateInventoryItem:A,removeInventoryItem:E,members:f,addMember:w,updateMember:O,notifications:y,addNotification:L,clearNotifications:V},children:t})},$f=b.createContext({});function Bf(t){const s=b.useRef(null);return s.current===null&&(s.current=t()),s.current}const Uf=typeof window<"u",Kj=Uf?b.useLayoutEffect:b.useEffect,Td=b.createContext(null);function Vf(t,s){t.indexOf(s)===-1&&t.push(s)}function qf(t,s){const r=t.indexOf(s);r>-1&&t.splice(r,1)}const Ba=(t,s,r)=>r>s?s:r<t?t:r;let If=()=>{};const Ua={},Xj=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Wj(t){return typeof t=="object"&&t!==null}const Qj=t=>/^0[^.\s]+$/u.test(t);function Ff(t){let s;return()=>(s===void 0&&(s=t()),s)}const qs=t=>t,oE=(t,s)=>r=>s(t(r)),yl=(...t)=>t.reduce(oE),il=(t,s,r)=>{const i=s-t;return i===0?1:(r-t)/i};class Hf{constructor(){this.subscriptions=[]}add(s){return Vf(this.subscriptions,s),()=>qf(this.subscriptions,s)}notify(s,r,i){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](s,r,i);else for(let c=0;c<l;c++){const u=this.subscriptions[c];u&&u(s,r,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fa=t=>t*1e3,pa=t=>t/1e3;function Zj(t,s){return s?t*(1e3/s):0}const Jj=(t,s,r)=>(((1-3*r+3*s)*t+(3*r-6*s))*t+3*s)*t,lE=1e-7,cE=12;function dE(t,s,r,i,l){let c,u,m=0;do u=s+(r-s)/2,c=Jj(u,i,l)-t,c>0?r=u:s=u;while(Math.abs(c)>lE&&++m<cE);return u}function bl(t,s,r,i){if(t===s&&r===i)return qs;const l=c=>dE(c,0,1,t,r);return c=>c===0||c===1?c:Jj(l(c),s,i)}const ew=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,tw=t=>s=>1-t(1-s),sw=bl(.33,1.53,.69,.99),Gf=tw(sw),aw=ew(Gf),rw=t=>(t*=2)<1?.5*Gf(t):.5*(2-Math.pow(2,-10*(t-1))),Yf=t=>1-Math.sin(Math.acos(t)),nw=tw(Yf),iw=ew(Yf),uE=bl(.42,0,1,1),mE=bl(0,0,.58,1),ow=bl(.42,0,.58,1),hE=t=>Array.isArray(t)&&typeof t[0]!="number",lw=t=>Array.isArray(t)&&typeof t[0]=="number",fE={linear:qs,easeIn:uE,easeInOut:ow,easeOut:mE,circIn:Yf,circInOut:iw,circOut:nw,backIn:Gf,backInOut:aw,backOut:sw,anticipate:rw},pE=t=>typeof t=="string",cb=t=>{if(lw(t)){If(t.length===4);const[s,r,i,l]=t;return bl(s,r,i,l)}else if(pE(t))return fE[t];return t},Gc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function gE(t,s){let r=new Set,i=new Set,l=!1,c=!1;const u=new WeakSet;let m={delta:0,timestamp:0,isProcessing:!1};function h(g){u.has(g)&&(f.schedule(g),t()),g(m)}const f={schedule:(g,y=!1,v=!1)=>{const _=v&&l?r:i;return y&&u.add(g),_.has(g)||_.add(g),g},cancel:g=>{i.delete(g),u.delete(g)},process:g=>{if(m=g,l){c=!0;return}l=!0,[r,i]=[i,r],r.forEach(h),r.clear(),l=!1,c&&(c=!1,f.process(g))}};return f}const xE=40;function cw(t,s){let r=!1,i=!0;const l={delta:0,timestamp:0,isProcessing:!1},c=()=>r=!0,u=Gc.reduce((A,E)=>(A[E]=gE(c),A),{}),{setup:m,read:h,resolveKeyframes:f,preUpdate:g,update:y,preRender:v,render:N,postRender:_}=u,j=()=>{const A=Ua.useManualTiming?l.timestamp:performance.now();r=!1,Ua.useManualTiming||(l.delta=i?1e3/60:Math.max(Math.min(A-l.timestamp,xE),1)),l.timestamp=A,l.isProcessing=!0,m.process(l),h.process(l),f.process(l),g.process(l),y.process(l),v.process(l),N.process(l),_.process(l),l.isProcessing=!1,r&&s&&(i=!1,t(j))},C=()=>{r=!0,i=!0,l.isProcessing||t(j)};return{schedule:Gc.reduce((A,E)=>{const w=u[E];return A[E]=(O,L=!1,V=!1)=>(r||C(),w.schedule(O,L,V)),A},{}),cancel:A=>{for(let E=0;E<Gc.length;E++)u[Gc[E]].cancel(A)},state:l,steps:u}}const{schedule:xt,cancel:wr,state:Jt,steps:fh}=cw(typeof requestAnimationFrame<"u"?requestAnimationFrame:qs,!0);let Jc;function yE(){Jc=void 0}const bs={now:()=>(Jc===void 0&&bs.set(Jt.isProcessing||Ua.useManualTiming?Jt.timestamp:performance.now()),Jc),set:t=>{Jc=t,queueMicrotask(yE)}},dw=t=>s=>typeof s=="string"&&s.startsWith(t),Kf=dw("--"),bE=dw("var(--"),Xf=t=>bE(t)?vE.test(t.split("/*")[0].trim()):!1,vE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ui={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ol={...Ui,transform:t=>Ba(0,1,t)},Yc={...Ui,default:1},Qo=t=>Math.round(t*1e5)/1e5,Wf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jE(t){return t==null}const wE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qf=(t,s)=>r=>!!(typeof r=="string"&&wE.test(r)&&r.startsWith(t)||s&&!jE(r)&&Object.prototype.hasOwnProperty.call(r,s)),uw=(t,s,r)=>i=>{if(typeof i!="string")return i;const[l,c,u,m]=i.match(Wf);return{[t]:parseFloat(l),[s]:parseFloat(c),[r]:parseFloat(u),alpha:m!==void 0?parseFloat(m):1}},NE=t=>Ba(0,255,t),ph={...Ui,transform:t=>Math.round(NE(t))},rn={test:Qf("rgb","red"),parse:uw("red","green","blue"),transform:({red:t,green:s,blue:r,alpha:i=1})=>"rgba("+ph.transform(t)+", "+ph.transform(s)+", "+ph.transform(r)+", "+Qo(ol.transform(i))+")"};function _E(t){let s="",r="",i="",l="";return t.length>5?(s=t.substring(1,3),r=t.substring(3,5),i=t.substring(5,7),l=t.substring(7,9)):(s=t.substring(1,2),r=t.substring(2,3),i=t.substring(3,4),l=t.substring(4,5),s+=s,r+=r,i+=i,l+=l),{red:parseInt(s,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:l?parseInt(l,16)/255:1}}const Gh={test:Qf("#"),parse:_E,transform:rn.transform},vl=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),xr=vl("deg"),ga=vl("%"),Be=vl("px"),SE=vl("vh"),CE=vl("vw"),db={...ga,parse:t=>ga.parse(t)/100,transform:t=>ga.transform(t*100)},vi={test:Qf("hsl","hue"),parse:uw("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:r,alpha:i=1})=>"hsla("+Math.round(t)+", "+ga.transform(Qo(s))+", "+ga.transform(Qo(r))+", "+Qo(ol.transform(i))+")"},Pt={test:t=>rn.test(t)||Gh.test(t)||vi.test(t),parse:t=>rn.test(t)?rn.parse(t):vi.test(t)?vi.parse(t):Gh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rn.transform(t):vi.transform(t),getAnimatableNone:t=>{const s=Pt.parse(t);return s.alpha=0,Pt.transform(s)}},EE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function TE(t){var s,r;return isNaN(t)&&typeof t=="string"&&(((s=t.match(Wf))==null?void 0:s.length)||0)+(((r=t.match(EE))==null?void 0:r.length)||0)>0}const mw="number",hw="color",kE="var",AE="var(",ub="${}",ME=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ll(t){const s=t.toString(),r=[],i={color:[],number:[],var:[]},l=[];let c=0;const m=s.replace(ME,h=>(Pt.test(h)?(i.color.push(c),l.push(hw),r.push(Pt.parse(h))):h.startsWith(AE)?(i.var.push(c),l.push(kE),r.push(h)):(i.number.push(c),l.push(mw),r.push(parseFloat(h))),++c,ub)).split(ub);return{values:r,split:m,indexes:i,types:l}}function fw(t){return ll(t).values}function pw(t){const{split:s,types:r}=ll(t),i=s.length;return l=>{let c="";for(let u=0;u<i;u++)if(c+=s[u],l[u]!==void 0){const m=r[u];m===mw?c+=Qo(l[u]):m===hw?c+=Pt.transform(l[u]):c+=l[u]}return c}}const DE=t=>typeof t=="number"?0:Pt.test(t)?Pt.getAnimatableNone(t):t;function OE(t){const s=fw(t);return pw(t)(s.map(DE))}const Nr={test:TE,parse:fw,createTransformer:pw,getAnimatableNone:OE};function gh(t,s,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(s-t)*6*r:r<1/2?s:r<2/3?t+(s-t)*(2/3-r)*6:t}function RE({hue:t,saturation:s,lightness:r,alpha:i}){t/=360,s/=100,r/=100;let l=0,c=0,u=0;if(!s)l=c=u=r;else{const m=r<.5?r*(1+s):r+s-r*s,h=2*r-m;l=gh(h,m,t+1/3),c=gh(h,m,t),u=gh(h,m,t-1/3)}return{red:Math.round(l*255),green:Math.round(c*255),blue:Math.round(u*255),alpha:i}}function cd(t,s){return r=>r>0?s:t}const vt=(t,s,r)=>t+(s-t)*r,xh=(t,s,r)=>{const i=t*t,l=r*(s*s-i)+i;return l<0?0:Math.sqrt(l)},PE=[Gh,rn,vi],LE=t=>PE.find(s=>s.test(t));function mb(t){const s=LE(t);if(!s)return!1;let r=s.parse(t);return s===vi&&(r=RE(r)),r}const hb=(t,s)=>{const r=mb(t),i=mb(s);if(!r||!i)return cd(t,s);const l={...r};return c=>(l.red=xh(r.red,i.red,c),l.green=xh(r.green,i.green,c),l.blue=xh(r.blue,i.blue,c),l.alpha=vt(r.alpha,i.alpha,c),rn.transform(l))},Yh=new Set(["none","hidden"]);function zE(t,s){return Yh.has(t)?r=>r<=0?t:s:r=>r>=1?s:t}function $E(t,s){return r=>vt(t,s,r)}function Zf(t){return typeof t=="number"?$E:typeof t=="string"?Xf(t)?cd:Pt.test(t)?hb:VE:Array.isArray(t)?gw:typeof t=="object"?Pt.test(t)?hb:BE:cd}function gw(t,s){const r=[...t],i=r.length,l=t.map((c,u)=>Zf(c)(c,s[u]));return c=>{for(let u=0;u<i;u++)r[u]=l[u](c);return r}}function BE(t,s){const r={...t,...s},i={};for(const l in r)t[l]!==void 0&&s[l]!==void 0&&(i[l]=Zf(t[l])(t[l],s[l]));return l=>{for(const c in i)r[c]=i[c](l);return r}}function UE(t,s){const r=[],i={color:0,var:0,number:0};for(let l=0;l<s.values.length;l++){const c=s.types[l],u=t.indexes[c][i[c]],m=t.values[u]??0;r[l]=m,i[c]++}return r}const VE=(t,s)=>{const r=Nr.createTransformer(s),i=ll(t),l=ll(s);return i.indexes.var.length===l.indexes.var.length&&i.indexes.color.length===l.indexes.color.length&&i.indexes.number.length>=l.indexes.number.length?Yh.has(t)&&!l.values.length||Yh.has(s)&&!i.values.length?zE(t,s):yl(gw(UE(i,l),l.values),r):cd(t,s)};function xw(t,s,r){return typeof t=="number"&&typeof s=="number"&&typeof r=="number"?vt(t,s,r):Zf(t)(t,s)}const qE=t=>{const s=({timestamp:r})=>t(r);return{start:(r=!0)=>xt.update(s,r),stop:()=>wr(s),now:()=>Jt.isProcessing?Jt.timestamp:bs.now()}},yw=(t,s,r=10)=>{let i="";const l=Math.max(Math.round(s/r),2);for(let c=0;c<l;c++)i+=Math.round(t(c/(l-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},dd=2e4;function Jf(t){let s=0;const r=50;let i=t.next(s);for(;!i.done&&s<dd;)s+=r,i=t.next(s);return s>=dd?1/0:s}function IE(t,s=100,r){const i=r({...t,keyframes:[0,s]}),l=Math.min(Jf(i),dd);return{type:"keyframes",ease:c=>i.next(l*c).value/s,duration:pa(l)}}const FE=5;function bw(t,s,r){const i=Math.max(s-FE,0);return Zj(r-t(i),s-i)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},yh=.001;function HE({duration:t=Nt.duration,bounce:s=Nt.bounce,velocity:r=Nt.velocity,mass:i=Nt.mass}){let l,c,u=1-s;u=Ba(Nt.minDamping,Nt.maxDamping,u),t=Ba(Nt.minDuration,Nt.maxDuration,pa(t)),u<1?(l=f=>{const g=f*u,y=g*t,v=g-r,N=Kh(f,u),_=Math.exp(-y);return yh-v/N*_},c=f=>{const y=f*u*t,v=y*r+r,N=Math.pow(u,2)*Math.pow(f,2)*t,_=Math.exp(-y),j=Kh(Math.pow(f,2),u);return(-l(f)+yh>0?-1:1)*((v-N)*_)/j}):(l=f=>{const g=Math.exp(-f*t),y=(f-r)*t+1;return-yh+g*y},c=f=>{const g=Math.exp(-f*t),y=(r-f)*(t*t);return g*y});const m=5/t,h=YE(l,c,m);if(t=fa(t),isNaN(h))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:u*2*Math.sqrt(i*f),duration:t}}}const GE=12;function YE(t,s,r){let i=r;for(let l=1;l<GE;l++)i=i-t(i)/s(i);return i}function Kh(t,s){return t*Math.sqrt(1-s*s)}const KE=["duration","bounce"],XE=["stiffness","damping","mass"];function fb(t,s){return s.some(r=>t[r]!==void 0)}function WE(t){let s={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...t};if(!fb(t,XE)&&fb(t,KE))if(t.visualDuration){const r=t.visualDuration,i=2*Math.PI/(r*1.2),l=i*i,c=2*Ba(.05,1,1-(t.bounce||0))*Math.sqrt(l);s={...s,mass:Nt.mass,stiffness:l,damping:c}}else{const r=HE(t);s={...s,...r,mass:Nt.mass},s.isResolvedFromDuration=!0}return s}function ud(t=Nt.visualDuration,s=Nt.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:i,restDelta:l}=r;const c=r.keyframes[0],u=r.keyframes[r.keyframes.length-1],m={done:!1,value:c},{stiffness:h,damping:f,mass:g,duration:y,velocity:v,isResolvedFromDuration:N}=WE({...r,velocity:-pa(r.velocity||0)}),_=v||0,j=f/(2*Math.sqrt(h*g)),C=u-c,M=pa(Math.sqrt(h/g)),S=Math.abs(C)<5;i||(i=S?Nt.restSpeed.granular:Nt.restSpeed.default),l||(l=S?Nt.restDelta.granular:Nt.restDelta.default);let A;if(j<1){const w=Kh(M,j);A=O=>{const L=Math.exp(-j*M*O);return u-L*((_+j*M*C)/w*Math.sin(w*O)+C*Math.cos(w*O))}}else if(j===1)A=w=>u-Math.exp(-M*w)*(C+(_+M*C)*w);else{const w=M*Math.sqrt(j*j-1);A=O=>{const L=Math.exp(-j*M*O),V=Math.min(w*O,300);return u-L*((_+j*M*C)*Math.sinh(V)+w*C*Math.cosh(V))/w}}const E={calculatedDuration:N&&y||null,next:w=>{const O=A(w);if(N)m.done=w>=y;else{let L=w===0?_:0;j<1&&(L=w===0?fa(_):bw(A,w,O));const V=Math.abs(L)<=i,H=Math.abs(u-O)<=l;m.done=V&&H}return m.value=m.done?u:O,m},toString:()=>{const w=Math.min(Jf(E),dd),O=yw(L=>E.next(w*L).value,w,30);return w+"ms "+O},toTransition:()=>{}};return E}ud.applyToOptions=t=>{const s=IE(t,100,ud);return t.ease=s.ease,t.duration=fa(s.duration),t.type="keyframes",t};function Xh({keyframes:t,velocity:s=0,power:r=.8,timeConstant:i=325,bounceDamping:l=10,bounceStiffness:c=500,modifyTarget:u,min:m,max:h,restDelta:f=.5,restSpeed:g}){const y=t[0],v={done:!1,value:y},N=V=>m!==void 0&&V<m||h!==void 0&&V>h,_=V=>m===void 0?h:h===void 0||Math.abs(m-V)<Math.abs(h-V)?m:h;let j=r*s;const C=y+j,M=u===void 0?C:u(C);M!==C&&(j=M-y);const S=V=>-j*Math.exp(-V/i),A=V=>M+S(V),E=V=>{const H=S(V),B=A(V);v.done=Math.abs(H)<=f,v.value=v.done?M:B};let w,O;const L=V=>{N(v.value)&&(w=V,O=ud({keyframes:[v.value,_(v.value)],velocity:bw(A,V,v.value),damping:l,stiffness:c,restDelta:f,restSpeed:g}))};return L(0),{calculatedDuration:null,next:V=>{let H=!1;return!O&&w===void 0&&(H=!0,E(V),L(V)),w!==void 0&&V>=w?O.next(V-w):(!H&&E(V),v)}}}function QE(t,s,r){const i=[],l=r||Ua.mix||xw,c=t.length-1;for(let u=0;u<c;u++){let m=l(t[u],t[u+1]);if(s){const h=Array.isArray(s)?s[u]||qs:s;m=yl(h,m)}i.push(m)}return i}function ZE(t,s,{clamp:r=!0,ease:i,mixer:l}={}){const c=t.length;if(If(c===s.length),c===1)return()=>s[0];if(c===2&&s[0]===s[1])return()=>s[1];const u=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),s=[...s].reverse());const m=QE(s,i,l),h=m.length,f=g=>{if(u&&g<t[0])return s[0];let y=0;if(h>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const v=il(t[y],t[y+1],g);return m[y](v)};return r?g=>f(Ba(t[0],t[c-1],g)):f}function JE(t,s){const r=t[t.length-1];for(let i=1;i<=s;i++){const l=il(0,s,i);t.push(vt(r,1,l))}}function eT(t){const s=[0];return JE(s,t.length-1),s}function tT(t,s){return t.map(r=>r*s)}function sT(t,s){return t.map(()=>s||ow).splice(0,t.length-1)}function Zo({duration:t=300,keyframes:s,times:r,ease:i="easeInOut"}){const l=hE(i)?i.map(cb):cb(i),c={done:!1,value:s[0]},u=tT(r&&r.length===s.length?r:eT(s),t),m=ZE(u,s,{ease:Array.isArray(l)?l:sT(s,l)});return{calculatedDuration:t,next:h=>(c.value=m(h),c.done=h>=t,c)}}const aT=t=>t!==null;function e0(t,{repeat:s,repeatType:r="loop"},i,l=1){const c=t.filter(aT),m=l<0||s&&r!=="loop"&&s%2===1?0:c.length-1;return!m||i===void 0?c[m]:i}const rT={decay:Xh,inertia:Xh,tween:Zo,keyframes:Zo,spring:ud};function vw(t){typeof t.type=="string"&&(t.type=rT[t.type])}class t0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,r){return this.finished.then(s,r)}}const nT=t=>t/100;class s0 extends t0{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,l;const{motionValue:r}=this.options;r&&r.updatedAt!==bs.now()&&this.tick(bs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(l=(i=this.options).onStop)==null||l.call(i))},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;vw(s);const{type:r=Zo,repeat:i=0,repeatDelay:l=0,repeatType:c,velocity:u=0}=s;let{keyframes:m}=s;const h=r||Zo;h!==Zo&&typeof m[0]!="number"&&(this.mixKeyframes=yl(nT,xw(m[0],m[1])),m=[0,100]);const f=h({...s,keyframes:m});c==="mirror"&&(this.mirroredGenerator=h({...s,keyframes:[...m].reverse(),velocity:-u})),f.calculatedDuration===null&&(f.calculatedDuration=Jf(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+l,this.totalDuration=this.resolvedDuration*(i+1)-l,this.generator=f}updateTime(s){const r=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(s,r=!1){const{generator:i,totalDuration:l,mixKeyframes:c,mirroredGenerator:u,resolvedDuration:m,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:y,repeatType:v,repeatDelay:N,type:_,onUpdate:j,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-l/this.speed,this.startTime)),r?this.currentTime=s:this.updateTime(s);const M=this.currentTime-f*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?M<0:M>l;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let A=this.currentTime,E=i;if(y){const V=Math.min(this.currentTime,l)/m;let H=Math.floor(V),B=V%1;!B&&V>=1&&(B=1),B===1&&H--,H=Math.min(H,y+1),!!(H%2)&&(v==="reverse"?(B=1-B,N&&(B-=N/m)):v==="mirror"&&(E=u)),A=Ba(0,1,B)*m}const w=S?{done:!1,value:g[0]}:E.next(A);c&&(w.value=c(w.value));let{done:O}=w;!S&&h!==null&&(O=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return L&&_!==Xh&&(w.value=e0(g,this.options,C,this.speed)),j&&j(w.value),L&&this.finish(),w}then(s,r){return this.finished.then(s,r)}get duration(){return pa(this.calculatedDuration)}get time(){return pa(this.currentTime)}set time(s){var r;s=fa(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(bs.now());const r=this.playbackSpeed!==s;this.playbackSpeed=s,r&&(this.time=pa(this.currentTime))}play(){var l,c;if(this.isStopped)return;const{driver:s=qE,startTime:r}=this.options;this.driver||(this.driver=s(u=>this.tick(u))),(c=(l=this.options).onPlay)==null||c.call(l);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=r??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var s,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(s=this.options).onComplete)==null||r.call(s)}cancel(){var s,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(s=this.options).onCancel)==null||r.call(s)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),s.observe(this)}}function iT(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const nn=t=>t*180/Math.PI,Wh=t=>{const s=nn(Math.atan2(t[1],t[0]));return Qh(s)},oT={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Wh,rotateZ:Wh,skewX:t=>nn(Math.atan(t[1])),skewY:t=>nn(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Qh=t=>(t=t%360,t<0&&(t+=360),t),pb=Wh,gb=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),xb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),lT={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gb,scaleY:xb,scale:t=>(gb(t)+xb(t))/2,rotateX:t=>Qh(nn(Math.atan2(t[6],t[5]))),rotateY:t=>Qh(nn(Math.atan2(-t[2],t[0]))),rotateZ:pb,rotate:pb,skewX:t=>nn(Math.atan(t[4])),skewY:t=>nn(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Zh(t){return t.includes("scale")?1:0}function Jh(t,s){if(!t||t==="none")return Zh(s);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,l;if(r)i=lT,l=r;else{const m=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=oT,l=m}if(!l)return Zh(s);const c=i[s],u=l[1].split(",").map(dT);return typeof c=="function"?c(u):u[c]}const cT=(t,s)=>{const{transform:r="none"}=getComputedStyle(t);return Jh(r,s)};function dT(t){return parseFloat(t.trim())}const Vi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qi=new Set(Vi),yb=t=>t===Ui||t===Be,uT=new Set(["x","y","z"]),mT=Vi.filter(t=>!uT.has(t));function hT(t){const s=[];return mT.forEach(r=>{const i=t.getValue(r);i!==void 0&&(s.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),s}const ln={width:({x:t},{paddingLeft:s="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),height:({y:t},{paddingTop:s="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>Jh(s,"x"),y:(t,{transform:s})=>Jh(s,"y")};ln.translateX=ln.x;ln.translateY=ln.y;const cn=new Set;let ef=!1,tf=!1,sf=!1;function jw(){if(tf){const t=Array.from(cn).filter(i=>i.needsMeasurement),s=new Set(t.map(i=>i.element)),r=new Map;s.forEach(i=>{const l=hT(i);l.length&&(r.set(i,l),i.render())}),t.forEach(i=>i.measureInitialState()),s.forEach(i=>{i.render();const l=r.get(i);l&&l.forEach(([c,u])=>{var m;(m=i.getValue(c))==null||m.set(u)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}tf=!1,ef=!1,cn.forEach(t=>t.complete(sf)),cn.clear()}function ww(){cn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(tf=!0)})}function fT(){sf=!0,ww(),jw(),sf=!1}class a0{constructor(s,r,i,l,c,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=r,this.name=i,this.motionValue=l,this.element=c,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(cn.add(this),ef||(ef=!0,xt.read(ww),xt.resolveKeyframes(jw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:r,element:i,motionValue:l}=this;if(s[0]===null){const c=l==null?void 0:l.get(),u=s[s.length-1];if(c!==void 0)s[0]=c;else if(i&&r){const m=i.readValue(r,u);m!=null&&(s[0]=m)}s[0]===void 0&&(s[0]=u),l&&c===void 0&&l.set(s[0])}iT(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),cn.delete(this)}cancel(){this.state==="scheduled"&&(cn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const pT=t=>t.startsWith("--");function gT(t,s,r){pT(s)?t.style.setProperty(s,r):t.style[s]=r}const xT=Ff(()=>window.ScrollTimeline!==void 0),yT={};function bT(t,s){const r=Ff(t);return()=>yT[s]??r()}const Nw=bT(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yo=([t,s,r,i])=>`cubic-bezier(${t}, ${s}, ${r}, ${i})`,bb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yo([0,.65,.55,1]),circOut:Yo([.55,0,1,.45]),backIn:Yo([.31,.01,.66,-.59]),backOut:Yo([.33,1.53,.69,.99])};function _w(t,s){if(t)return typeof t=="function"?Nw()?yw(t,s):"ease-out":lw(t)?Yo(t):Array.isArray(t)?t.map(r=>_w(r,s)||bb.easeOut):bb[t]}function vT(t,s,r,{delay:i=0,duration:l=300,repeat:c=0,repeatType:u="loop",ease:m="easeOut",times:h}={},f=void 0){const g={[s]:r};h&&(g.offset=h);const y=_w(m,l);Array.isArray(y)&&(g.easing=y);const v={delay:i,duration:l,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:c+1,direction:u==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),t.animate(g,v)}function Sw(t){return typeof t=="function"&&"applyToOptions"in t}function jT({type:t,...s}){return Sw(t)&&Nw()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class wT extends t0{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:r,name:i,keyframes:l,pseudoElement:c,allowFlatten:u=!1,finalKeyframe:m,onComplete:h}=s;this.isPseudoElement=!!c,this.allowFlatten=u,this.options=s,If(typeof s.type!="string");const f=jT(s);this.animation=vT(r,i,l,f,c),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const g=e0(l,this.options,m,this.speed);this.updateMotionValue?this.updateMotionValue(g):gT(r,i,g),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var s,r;(r=(s=this.animation).finish)==null||r.call(s)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,r;this.isPseudoElement||(r=(s=this.animation).commitStyles)==null||r.call(s)}get duration(){var r,i;const s=((i=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:i.call(r).duration)||0;return pa(Number(s))}get time(){return pa(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=fa(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:r}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,s&&xT()?(this.animation.timeline=s,qs):r(this)}}const Cw={anticipate:rw,backInOut:aw,circInOut:iw};function NT(t){return t in Cw}function _T(t){typeof t.ease=="string"&&NT(t.ease)&&(t.ease=Cw[t.ease])}const vb=10;class ST extends wT{constructor(s){_T(s),vw(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:r,onUpdate:i,onComplete:l,element:c,...u}=this.options;if(!r)return;if(s!==void 0){r.set(s);return}const m=new s0({...u,autoplay:!1}),h=fa(this.finishedTime??this.time);r.setWithVelocity(m.sample(h-vb).value,m.sample(h).value,vb),m.stop()}}const jb=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Nr.test(t)||t==="0")&&!t.startsWith("url("));function CT(t){const s=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==s)return!0}function ET(t,s,r,i){const l=t[0];if(l===null)return!1;if(s==="display"||s==="visibility")return!0;const c=t[t.length-1],u=jb(l,s),m=jb(c,s);return!u||!m?!1:CT(t)||(r==="spring"||Sw(r))&&i}function af(t){t.duration=0,t.type}const TT=new Set(["opacity","clipPath","filter","transform"]),kT=Ff(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function AT(t){var g;const{motionValue:s,name:r,repeatDelay:i,repeatType:l,damping:c,type:u}=t;if(!(((g=s==null?void 0:s.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=s.owner.getProps();return kT()&&r&&TT.has(r)&&(r!=="transform"||!f)&&!h&&!i&&l!=="mirror"&&c!==0&&u!=="inertia"}const MT=40;class DT extends t0{constructor({autoplay:s=!0,delay:r=0,type:i="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",keyframes:m,name:h,motionValue:f,element:g,...y}){var _;super(),this.stop=()=>{var j,C;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=bs.now();const v={autoplay:s,delay:r,type:i,repeat:l,repeatDelay:c,repeatType:u,name:h,motionValue:f,element:g,...y},N=(g==null?void 0:g.KeyframeResolver)||a0;this.keyframeResolver=new N(m,(j,C,M)=>this.onKeyframesResolved(j,C,v,!M),h,f,g),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(s,r,i,l){this.keyframeResolver=void 0;const{name:c,type:u,velocity:m,delay:h,isHandoff:f,onUpdate:g}=i;this.resolvedAt=bs.now(),ET(s,c,u,m)||((Ua.instantAnimations||!h)&&(g==null||g(e0(s,i,r))),s[0]=s[s.length-1],af(i),i.repeat=0);const v={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>MT?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...i,keyframes:s},N=!f&&AT(v)?new ST({...v,element:v.motionValue.owner.current}):new s0(v);N.finished.then(()=>this.notifyFinished()).catch(qs),this.pendingTimeline&&(this.stopTimeline=N.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=N}get finished(){return this._animation?this.animation.finished:this._finished}then(s,r){return this.finished.finally(s).then(()=>{})}get animation(){var s;return this._animation||((s=this.keyframeResolver)==null||s.resume(),fT()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var s;this._animation&&this.animation.cancel(),(s=this.keyframeResolver)==null||s.cancel()}}const OT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function RT(t){const s=OT.exec(t);if(!s)return[,];const[,r,i,l]=s;return[`--${r??i}`,l]}function Ew(t,s,r=1){const[i,l]=RT(t);if(!i)return;const c=window.getComputedStyle(s).getPropertyValue(i);if(c){const u=c.trim();return Xj(u)?parseFloat(u):u}return Xf(l)?Ew(l,s,r+1):l}function r0(t,s){return(t==null?void 0:t[s])??(t==null?void 0:t.default)??t}const Tw=new Set(["width","height","top","left","right","bottom",...Vi]),PT={test:t=>t==="auto",parse:t=>t},kw=t=>s=>s.test(t),Aw=[Ui,Be,ga,xr,CE,SE,PT],wb=t=>Aw.find(kw(t));function LT(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Qj(t):!0}const zT=new Set(["brightness","contrast","saturate","opacity"]);function $T(t){const[s,r]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[i]=r.match(Wf)||[];if(!i)return t;const l=r.replace(i,"");let c=zT.has(s)?1:0;return i!==r&&(c*=100),s+"("+c+l+")"}const BT=/\b([a-z-]*)\(.*?\)/gu,rf={...Nr,getAnimatableNone:t=>{const s=t.match(BT);return s?s.map($T).join(" "):t}},Nb={...Ui,transform:Math.round},UT={rotate:xr,rotateX:xr,rotateY:xr,rotateZ:xr,scale:Yc,scaleX:Yc,scaleY:Yc,scaleZ:Yc,skew:xr,skewX:xr,skewY:xr,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:ol,originX:db,originY:db,originZ:Be},n0={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...UT,zIndex:Nb,fillOpacity:ol,strokeOpacity:ol,numOctaves:Nb},VT={...n0,color:Pt,backgroundColor:Pt,outlineColor:Pt,fill:Pt,stroke:Pt,borderColor:Pt,borderTopColor:Pt,borderRightColor:Pt,borderBottomColor:Pt,borderLeftColor:Pt,filter:rf,WebkitFilter:rf},Mw=t=>VT[t];function Dw(t,s){let r=Mw(t);return r!==rf&&(r=Nr),r.getAnimatableNone?r.getAnimatableNone(s):void 0}const qT=new Set(["auto","none","0"]);function IT(t,s,r){let i=0,l;for(;i<t.length&&!l;){const c=t[i];typeof c=="string"&&!qT.has(c)&&ll(c).values.length&&(l=t[i]),i++}if(l&&r)for(const c of s)t[c]=Dw(r,l)}class FT extends a0{constructor(s,r,i,l,c){super(s,r,i,l,c,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:r,name:i}=this;if(!r||!r.current)return;super.readKeyframes();for(let h=0;h<s.length;h++){let f=s[h];if(typeof f=="string"&&(f=f.trim(),Xf(f))){const g=Ew(f,r.current);g!==void 0&&(s[h]=g),h===s.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Tw.has(i)||s.length!==2)return;const[l,c]=s,u=wb(l),m=wb(c);if(u!==m)if(yb(u)&&yb(m))for(let h=0;h<s.length;h++){const f=s[h];typeof f=="string"&&(s[h]=parseFloat(f))}else ln[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:r}=this,i=[];for(let l=0;l<s.length;l++)(s[l]===null||LT(s[l]))&&i.push(l);i.length&&IT(s,i,r)}measureInitialState(){const{element:s,unresolvedKeyframes:r,name:i}=this;if(!s||!s.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ln[i](s.measureViewportBox(),window.getComputedStyle(s.current)),r[0]=this.measuredOrigin;const l=r[r.length-1];l!==void 0&&s.getValue(i,l).jump(l,!1)}measureEndState(){var m;const{element:s,name:r,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const l=s.getValue(r);l&&l.jump(this.measuredOrigin,!1);const c=i.length-1,u=i[c];i[c]=ln[r](s.measureViewportBox(),window.getComputedStyle(s.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(m=this.removedTransforms)!=null&&m.length&&this.removedTransforms.forEach(([h,f])=>{s.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function HT(t,s,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const l=(r==null?void 0:r[t])??i.querySelectorAll(t);return l?Array.from(l):[]}return Array.from(t)}const Ow=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function Rw(t){return Wj(t)&&"offsetHeight"in t}const _b=30,GT=t=>!isNaN(parseFloat(t));class YT{constructor(s,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var c;const l=bs.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=r.owner}setCurrent(s){this.current=s,this.updatedAt=bs.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=GT(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,r){this.events[s]||(this.events[s]=new Hf);const i=this.events[s].add(r);return s==="change"?()=>{i(),xt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,r){this.passiveEffect=s,this.stopPassiveEffect=r}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,r,i){this.set(r),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-i}jump(s,r=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var s;(s=this.events.change)==null||s.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=bs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>_b)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,_b);return Zj(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(s){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=s(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var s,r;(s=this.dependents)==null||s.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mi(t,s){return new YT(t,s)}const{schedule:i0}=cw(queueMicrotask,!1),Ks={x:!1,y:!1};function Pw(){return Ks.x||Ks.y}function KT(t){return t==="x"||t==="y"?Ks[t]?null:(Ks[t]=!0,()=>{Ks[t]=!1}):Ks.x||Ks.y?null:(Ks.x=Ks.y=!0,()=>{Ks.x=Ks.y=!1})}function Lw(t,s){const r=HT(t),i=new AbortController,l={passive:!0,...s,signal:i.signal};return[r,l,()=>i.abort()]}function Sb(t){return!(t.pointerType==="touch"||Pw())}function XT(t,s,r={}){const[i,l,c]=Lw(t,r),u=m=>{if(!Sb(m))return;const{target:h}=m,f=s(h,m);if(typeof f!="function"||!h)return;const g=y=>{Sb(y)&&(f(y),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,l)};return i.forEach(m=>{m.addEventListener("pointerenter",u,l)}),c}const zw=(t,s)=>s?t===s?!0:zw(t,s.parentElement):!1,o0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,WT=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QT(t){return WT.has(t.tagName)||t.tabIndex!==-1}const ed=new WeakSet;function Cb(t){return s=>{s.key==="Enter"&&t(s)}}function bh(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const ZT=(t,s)=>{const r=t.currentTarget;if(!r)return;const i=Cb(()=>{if(ed.has(r))return;bh(r,"down");const l=Cb(()=>{bh(r,"up")}),c=()=>bh(r,"cancel");r.addEventListener("keyup",l,s),r.addEventListener("blur",c,s)});r.addEventListener("keydown",i,s),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),s)};function Eb(t){return o0(t)&&!Pw()}function JT(t,s,r={}){const[i,l,c]=Lw(t,r),u=m=>{const h=m.currentTarget;if(!Eb(m))return;ed.add(h);const f=s(h,m),g=(N,_)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),ed.has(h)&&ed.delete(h),Eb(N)&&typeof f=="function"&&f(N,{success:_})},y=N=>{g(N,h===window||h===document||r.useGlobalTarget||zw(h,N.target))},v=N=>{g(N,!1)};window.addEventListener("pointerup",y,l),window.addEventListener("pointercancel",v,l)};return i.forEach(m=>{(r.useGlobalTarget?window:m).addEventListener("pointerdown",u,l),Rw(m)&&(m.addEventListener("focus",f=>ZT(f,l)),!QT(m)&&!m.hasAttribute("tabindex")&&(m.tabIndex=0))}),c}function $w(t){return Wj(t)&&"ownerSVGElement"in t}function e6(t){return $w(t)&&t.tagName==="svg"}const rs=t=>!!(t&&t.getVelocity),t6=[...Aw,Pt,Nr],s6=t=>t6.find(kw(t)),l0=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class a6 extends b.Component{getSnapshotBeforeUpdate(s){const r=this.props.childRef.current;if(r&&s.isPresent&&!this.props.isPresent){const i=r.offsetParent,l=Rw(i)&&i.offsetWidth||0,c=this.props.sizeRef.current;c.height=r.offsetHeight||0,c.width=r.offsetWidth||0,c.top=r.offsetTop,c.left=r.offsetLeft,c.right=l-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function r6({children:t,isPresent:s,anchorX:r,root:i}){const l=b.useId(),c=b.useRef(null),u=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=b.useContext(l0);return b.useInsertionEffect(()=>{const{width:h,height:f,top:g,left:y,right:v}=u.current;if(s||!c.current||!h||!f)return;const N=r==="left"?`left: ${y}`:`right: ${v}`;c.current.dataset.motionPopId=l;const _=document.createElement("style");m&&(_.nonce=m);const j=i??document.head;return j.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${N}px !important;
            top: ${g}px !important;
          }
        `),()=>{j.contains(_)&&j.removeChild(_)}},[s]),e.jsx(a6,{isPresent:s,childRef:c,sizeRef:u,children:b.cloneElement(t,{ref:c})})}const n6=({children:t,initial:s,isPresent:r,onExitComplete:i,custom:l,presenceAffectsLayout:c,mode:u,anchorX:m,root:h})=>{const f=Bf(i6),g=b.useId();let y=!0,v=b.useMemo(()=>(y=!1,{id:g,initial:s,isPresent:r,custom:l,onExitComplete:N=>{f.set(N,!0);for(const _ of f.values())if(!_)return;i&&i()},register:N=>(f.set(N,!1),()=>f.delete(N))}),[r,f,i]);return c&&y&&(v={...v}),b.useMemo(()=>{f.forEach((N,_)=>f.set(_,!1))},[r]),b.useEffect(()=>{!r&&!f.size&&i&&i()},[r]),u==="popLayout"&&(t=e.jsx(r6,{isPresent:r,anchorX:m,root:h,children:t})),e.jsx(Td.Provider,{value:v,children:t})};function i6(){return new Map}function Bw(t=!0){const s=b.useContext(Td);if(s===null)return[!0,null];const{isPresent:r,onExitComplete:i,register:l}=s,c=b.useId();b.useEffect(()=>{if(t)return l(c)},[t]);const u=b.useCallback(()=>t&&i&&i(c),[c,i,t]);return!r&&i?[!1,u]:[!0]}const Kc=t=>t.key||"";function Tb(t){const s=[];return b.Children.forEach(t,r=>{b.isValidElement(r)&&s.push(r)}),s}const fn=({children:t,custom:s,initial:r=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:c="sync",propagate:u=!1,anchorX:m="left",root:h})=>{const[f,g]=Bw(u),y=b.useMemo(()=>Tb(t),[t]),v=u&&!f?[]:y.map(Kc),N=b.useRef(!0),_=b.useRef(y),j=Bf(()=>new Map),[C,M]=b.useState(y),[S,A]=b.useState(y);Kj(()=>{N.current=!1,_.current=y;for(let O=0;O<S.length;O++){const L=Kc(S[O]);v.includes(L)?j.delete(L):j.get(L)!==!0&&j.set(L,!1)}},[S,v.length,v.join("-")]);const E=[];if(y!==C){let O=[...y];for(let L=0;L<S.length;L++){const V=S[L],H=Kc(V);v.includes(H)||(O.splice(L,0,V),E.push(V))}return c==="wait"&&E.length&&(O=E),A(Tb(O)),M(y),null}const{forceRender:w}=b.useContext($f);return e.jsx(e.Fragment,{children:S.map(O=>{const L=Kc(O),V=u&&!f?!1:y===S||v.includes(L),H=()=>{if(j.has(L))j.set(L,!0);else return;let B=!0;j.forEach(K=>{K||(B=!1)}),B&&(w==null||w(),A(_.current),u&&(g==null||g()),i&&i())};return e.jsx(n6,{isPresent:V,initial:!N.current||r?void 0:!1,custom:s,presenceAffectsLayout:l,mode:c,root:h,onExitComplete:V?void 0:H,anchorX:m,children:O},L)})})},Uw=b.createContext({strict:!1}),kb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Di={};for(const t in kb)Di[t]={isEnabled:s=>kb[t].some(r=>!!s[r])};function o6(t){for(const s in t)Di[s]={...Di[s],...t[s]}}const l6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function md(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||l6.has(t)}let Vw=t=>!md(t);function c6(t){typeof t=="function"&&(Vw=s=>s.startsWith("on")?!md(s):t(s))}try{c6(require("@emotion/is-prop-valid").default)}catch{}function d6(t,s,r){const i={};for(const l in t)l==="values"&&typeof t.values=="object"||(Vw(l)||r===!0&&md(l)||!s&&!md(l)||t.draggable&&l.startsWith("onDrag"))&&(i[l]=t[l]);return i}const kd=b.createContext({});function Ad(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function cl(t){return typeof t=="string"||Array.isArray(t)}const c0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],d0=["initial",...c0];function Md(t){return Ad(t.animate)||d0.some(s=>cl(t[s]))}function qw(t){return!!(Md(t)||t.variants)}function u6(t,s){if(Md(t)){const{initial:r,animate:i}=t;return{initial:r===!1||cl(r)?r:void 0,animate:cl(i)?i:void 0}}return t.inherit!==!1?s:{}}function m6(t){const{initial:s,animate:r}=u6(t,b.useContext(kd));return b.useMemo(()=>({initial:s,animate:r}),[Ab(s),Ab(r)])}function Ab(t){return Array.isArray(t)?t.join(" "):t}const dl={};function h6(t){for(const s in t)dl[s]=t[s],Kf(s)&&(dl[s].isCSSVariable=!0)}function Iw(t,{layout:s,layoutId:r}){return qi.has(t)||t.startsWith("origin")||(s||r!==void 0)&&(!!dl[t]||t==="opacity")}const f6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},p6=Vi.length;function g6(t,s,r){let i="",l=!0;for(let c=0;c<p6;c++){const u=Vi[c],m=t[u];if(m===void 0)continue;let h=!0;if(typeof m=="number"?h=m===(u.startsWith("scale")?1:0):h=parseFloat(m)===0,!h||r){const f=Ow(m,n0[u]);if(!h){l=!1;const g=f6[u]||u;i+=`${g}(${f}) `}r&&(s[u]=f)}}return i=i.trim(),r?i=r(s,l?"":i):l&&(i="none"),i}function u0(t,s,r){const{style:i,vars:l,transformOrigin:c}=t;let u=!1,m=!1;for(const h in s){const f=s[h];if(qi.has(h)){u=!0;continue}else if(Kf(h)){l[h]=f;continue}else{const g=Ow(f,n0[h]);h.startsWith("origin")?(m=!0,c[h]=g):i[h]=g}}if(s.transform||(u||r?i.transform=g6(s,t.transform,r):i.transform&&(i.transform="none")),m){const{originX:h="50%",originY:f="50%",originZ:g=0}=c;i.transformOrigin=`${h} ${f} ${g}`}}const m0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Fw(t,s,r){for(const i in s)!rs(s[i])&&!Iw(i,r)&&(t[i]=s[i])}function x6({transformTemplate:t},s){return b.useMemo(()=>{const r=m0();return u0(r,s,t),Object.assign({},r.vars,r.style)},[s])}function y6(t,s){const r=t.style||{},i={};return Fw(i,r,t),Object.assign(i,x6(t,s)),i}function b6(t,s){const r={},i=y6(t,s);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const v6={offset:"stroke-dashoffset",array:"stroke-dasharray"},j6={offset:"strokeDashoffset",array:"strokeDasharray"};function w6(t,s,r=1,i=0,l=!0){t.pathLength=1;const c=l?v6:j6;t[c.offset]=Be.transform(-i);const u=Be.transform(s),m=Be.transform(r);t[c.array]=`${u} ${m}`}function Hw(t,{attrX:s,attrY:r,attrScale:i,pathLength:l,pathSpacing:c=1,pathOffset:u=0,...m},h,f,g){if(u0(t,m,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v}=t;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),s!==void 0&&(y.x=s),r!==void 0&&(y.y=r),i!==void 0&&(y.scale=i),l!==void 0&&w6(y,l,c,u,!1)}const Gw=()=>({...m0(),attrs:{}}),Yw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function N6(t,s,r,i){const l=b.useMemo(()=>{const c=Gw();return Hw(c,s,Yw(i),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[s]);if(t.style){const c={};Fw(c,t.style,t),l.style={...c,...l.style}}return l}const _6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function h0(t){return typeof t!="string"||t.includes("-")?!1:!!(_6.indexOf(t)>-1||/[A-Z]/u.test(t))}function S6(t,s,r,{latestValues:i},l,c=!1){const m=(h0(t)?N6:b6)(s,i,l,t),h=d6(s,typeof t=="string",c),f=t!==b.Fragment?{...h,...m,ref:r}:{},{children:g}=s,y=b.useMemo(()=>rs(g)?g.get():g,[g]);return b.createElement(t,{...f,children:y})}function Mb(t){const s=[{},{}];return t==null||t.values.forEach((r,i)=>{s[0][i]=r.get(),s[1][i]=r.getVelocity()}),s}function f0(t,s,r,i){if(typeof s=="function"){const[l,c]=Mb(i);s=s(r!==void 0?r:t.custom,l,c)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[l,c]=Mb(i);s=s(r!==void 0?r:t.custom,l,c)}return s}function td(t){return rs(t)?t.get():t}function C6({scrapeMotionValuesFromProps:t,createRenderState:s},r,i,l){return{latestValues:E6(r,i,l,t),renderState:s()}}function E6(t,s,r,i){const l={},c=i(t,{});for(const v in c)l[v]=td(c[v]);let{initial:u,animate:m}=t;const h=Md(t),f=qw(t);s&&f&&!h&&t.inherit!==!1&&(u===void 0&&(u=s.initial),m===void 0&&(m=s.animate));let g=r?r.initial===!1:!1;g=g||u===!1;const y=g?m:u;if(y&&typeof y!="boolean"&&!Ad(y)){const v=Array.isArray(y)?y:[y];for(let N=0;N<v.length;N++){const _=f0(t,v[N]);if(_){const{transitionEnd:j,transition:C,...M}=_;for(const S in M){let A=M[S];if(Array.isArray(A)){const E=g?A.length-1:0;A=A[E]}A!==null&&(l[S]=A)}for(const S in j)l[S]=j[S]}}}return l}const Kw=t=>(s,r)=>{const i=b.useContext(kd),l=b.useContext(Td),c=()=>C6(t,s,i,l);return r?c():Bf(c)};function p0(t,s,r){var c;const{style:i}=t,l={};for(const u in i)(rs(i[u])||s.style&&rs(s.style[u])||Iw(u,t)||((c=r==null?void 0:r.getValue(u))==null?void 0:c.liveStyle)!==void 0)&&(l[u]=i[u]);return l}const T6=Kw({scrapeMotionValuesFromProps:p0,createRenderState:m0});function Xw(t,s,r){const i=p0(t,s,r);for(const l in t)if(rs(t[l])||rs(s[l])){const c=Vi.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;i[c]=t[l]}return i}const k6=Kw({scrapeMotionValuesFromProps:Xw,createRenderState:Gw}),A6=Symbol.for("motionComponentSymbol");function ji(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function M6(t,s,r){return b.useCallback(i=>{i&&t.onMount&&t.onMount(i),s&&(i?s.mount(i):s.unmount()),r&&(typeof r=="function"?r(i):ji(r)&&(r.current=i))},[s])}const g0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),D6="framerAppearId",Ww="data-"+g0(D6),Qw=b.createContext({});function O6(t,s,r,i,l){var j,C;const{visualElement:c}=b.useContext(kd),u=b.useContext(Uw),m=b.useContext(Td),h=b.useContext(l0).reducedMotion,f=b.useRef(null);i=i||u.renderer,!f.current&&i&&(f.current=i(t,{visualState:s,parent:c,props:r,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,y=b.useContext(Qw);g&&!g.projection&&l&&(g.type==="html"||g.type==="svg")&&R6(f.current,r,l,y);const v=b.useRef(!1);b.useInsertionEffect(()=>{g&&v.current&&g.update(r,m)});const N=r[Ww],_=b.useRef(!!N&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,N))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,N)));return Kj(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),_.current&&g.animationState&&g.animationState.animateChanges())}),b.useEffect(()=>{g&&(!_.current&&g.animationState&&g.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,N)}),_.current=!1),g.enteringChildren=void 0)}),g}function R6(t,s,r,i){const{layoutId:l,layout:c,drag:u,dragConstraints:m,layoutScroll:h,layoutRoot:f,layoutCrossfade:g}=s;t.projection=new r(t.latestValues,s["data-framer-portal-id"]?void 0:Zw(t.parent)),t.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||m&&ji(m),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:h,layoutRoot:f})}function Zw(t){if(t)return t.options.allowProjection!==!1?t.projection:Zw(t.parent)}function vh(t,{forwardMotionProps:s=!1}={},r,i){r&&o6(r);const l=h0(t)?k6:T6;function c(m,h){let f;const g={...b.useContext(l0),...m,layoutId:P6(m)},{isStatic:y}=g,v=m6(m),N=l(m,y);if(!y&&Uf){L6();const _=z6(g);f=_.MeasureLayout,v.visualElement=O6(t,N,g,i,_.ProjectionNode)}return e.jsxs(kd.Provider,{value:v,children:[f&&v.visualElement?e.jsx(f,{visualElement:v.visualElement,...g}):null,S6(t,m,M6(N,v.visualElement,h),N,y,s)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=b.forwardRef(c);return u[A6]=t,u}function P6({layoutId:t}){const s=b.useContext($f).id;return s&&t!==void 0?s+"-"+t:t}function L6(t,s){b.useContext(Uw).strict}function z6(t){const{drag:s,layout:r}=Di;if(!s&&!r)return{};const i={...s,...r};return{MeasureLayout:s!=null&&s.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function $6(t,s){if(typeof Proxy>"u")return vh;const r=new Map,i=(c,u)=>vh(c,u,t,s),l=(c,u)=>i(c,u);return new Proxy(l,{get:(c,u)=>u==="create"?i:(r.has(u)||r.set(u,vh(u,void 0,t,s)),r.get(u))})}function Jw({top:t,left:s,right:r,bottom:i}){return{x:{min:s,max:r},y:{min:t,max:i}}}function B6({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function U6(t,s){if(!s)return t;const r=s({x:t.left,y:t.top}),i=s({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}function jh(t){return t===void 0||t===1}function nf({scale:t,scaleX:s,scaleY:r}){return!jh(t)||!jh(s)||!jh(r)}function Jr(t){return nf(t)||e1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function e1(t){return Db(t.x)||Db(t.y)}function Db(t){return t&&t!=="0%"}function hd(t,s,r){const i=t-r,l=s*i;return r+l}function Ob(t,s,r,i,l){return l!==void 0&&(t=hd(t,l,i)),hd(t,r,i)+s}function of(t,s=0,r=1,i,l){t.min=Ob(t.min,s,r,i,l),t.max=Ob(t.max,s,r,i,l)}function t1(t,{x:s,y:r}){of(t.x,s.translate,s.scale,s.originPoint),of(t.y,r.translate,r.scale,r.originPoint)}const Rb=.999999999999,Pb=1.0000000000001;function V6(t,s,r,i=!1){const l=r.length;if(!l)return;s.x=s.y=1;let c,u;for(let m=0;m<l;m++){c=r[m],u=c.projectionDelta;const{visualElement:h}=c.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ni(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),u&&(s.x*=u.x.scale,s.y*=u.y.scale,t1(t,u)),i&&Jr(c.latestValues)&&Ni(t,c.latestValues))}s.x<Pb&&s.x>Rb&&(s.x=1),s.y<Pb&&s.y>Rb&&(s.y=1)}function wi(t,s){t.min=t.min+s,t.max=t.max+s}function Lb(t,s,r,i,l=.5){const c=vt(t.min,t.max,l);of(t,s,r,c,i)}function Ni(t,s){Lb(t.x,s.x,s.scaleX,s.scale,s.originX),Lb(t.y,s.y,s.scaleY,s.scale,s.originY)}function s1(t,s){return Jw(U6(t.getBoundingClientRect(),s))}function q6(t,s,r){const i=s1(t,r),{scroll:l}=s;return l&&(wi(i.x,l.offset.x),wi(i.y,l.offset.y)),i}const zb=()=>({translate:0,scale:1,origin:0,originPoint:0}),_i=()=>({x:zb(),y:zb()}),$b=()=>({min:0,max:0}),kt=()=>({x:$b(),y:$b()}),lf={current:null},a1={current:!1};function I6(){if(a1.current=!0,!!Uf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>lf.current=t.matches;t.addEventListener("change",s),s()}else lf.current=!1}const F6=new WeakMap;function H6(t,s,r){for(const i in s){const l=s[i],c=r[i];if(rs(l))t.addValue(i,l);else if(rs(c))t.addValue(i,Mi(l,{owner:t}));else if(c!==l)if(t.hasValue(i)){const u=t.getValue(i);u.liveStyle===!0?u.jump(l):u.hasAnimated||u.set(l)}else{const u=t.getStaticValue(i);t.addValue(i,Mi(u!==void 0?u:l,{owner:t}))}}for(const i in r)s[i]===void 0&&t.removeValue(i);return s}const Bb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class G6{scrapeMotionValuesFromProps(s,r,i){return{}}constructor({parent:s,props:r,presenceContext:i,reducedMotionConfig:l,blockInitialAnimation:c,visualState:u},m={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=a0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=bs.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,xt.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=u;this.latestValues=h,this.baseTarget={...h},this.initialValues=r.initial?{...h}:{},this.renderState=f,this.parent=s,this.props=r,this.presenceContext=i,this.depth=s?s.depth+1:0,this.reducedMotionConfig=l,this.options=m,this.blockInitialAnimation=!!c,this.isControllingVariants=Md(r),this.isVariantNode=qw(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(r,{},this);for(const v in y){const N=y[v];h[v]!==void 0&&rs(N)&&N.set(h[v])}}mount(s){var r;this.current=s,F6.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,l)=>this.bindToMotionValue(l,i)),a1.current||I6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lf.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var s;this.projection&&this.projection.unmount(),wr(this.notifyUpdate),wr(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(s=this.parent)==null||s.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const i=this.features[r];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,r){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const i=qi.has(s);i&&this.onBindTransform&&this.onBindTransform();const l=r.on("change",u=>{this.latestValues[s]=u,this.props.onUpdate&&xt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,s,r)),this.valueSubscriptions.set(s,()=>{l(),c&&c(),r.owner&&r.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Di){const r=Di[s];if(!r)continue;const{isEnabled:i,Feature:l}=r;if(!this.features[s]&&l&&i(this.props)&&(this.features[s]=new l(this)),this.features[s]){const c=this.features[s];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kt()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,r){this.latestValues[s]=r}update(s,r){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let i=0;i<Bb.length;i++){const l=Bb[i];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const c="on"+l,u=s[c];u&&(this.propEventSubscriptions[l]=this.on(l,u))}this.prevMotionValues=H6(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(s),()=>r.variantChildren.delete(s)}addValue(s,r){const i=this.values.get(s);r!==i&&(i&&this.removeValue(s),this.bindToMotionValue(s,r),this.values.set(s,r),this.latestValues[s]=r.get())}removeValue(s){this.values.delete(s);const r=this.valueSubscriptions.get(s);r&&(r(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,r){if(this.props.values&&this.props.values[s])return this.props.values[s];let i=this.values.get(s);return i===void 0&&r!==void 0&&(i=Mi(r===null?void 0:r,{owner:this}),this.addValue(s,i)),i}readValue(s,r){let i=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return i!=null&&(typeof i=="string"&&(Xj(i)||Qj(i))?i=parseFloat(i):!s6(i)&&Nr.test(r)&&(i=Dw(s,r)),this.setBaseTarget(s,rs(i)?i.get():i)),rs(i)?i.get():i}setBaseTarget(s,r){this.baseTarget[s]=r}getBaseTarget(s){var c;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const u=f0(this.props,r,(c=this.presenceContext)==null?void 0:c.custom);u&&(i=u[s])}if(r&&i!==void 0)return i;const l=this.getBaseTargetFromProps(this.props,s);return l!==void 0&&!rs(l)?l:this.initialValues[s]!==void 0&&i===void 0?void 0:this.baseTarget[s]}on(s,r){return this.events[s]||(this.events[s]=new Hf),this.events[s].add(r)}notify(s,...r){this.events[s]&&this.events[s].notify(...r)}scheduleRenderMicrotask(){i0.render(this.render)}}class r1 extends G6{constructor(){super(...arguments),this.KeyframeResolver=FT}sortInstanceNodePosition(s,r){return s.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(s,r){return s.style?s.style[r]:void 0}removeValueFromRenderState(s,{vars:r,style:i}){delete r[s],delete i[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;rs(s)&&(this.childSubscription=s.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function n1(t,{style:s,vars:r},i,l){const c=t.style;let u;for(u in s)c[u]=s[u];l==null||l.applyProjectionStyles(c,i);for(u in r)c.setProperty(u,r[u])}function Y6(t){return window.getComputedStyle(t)}class K6 extends r1{constructor(){super(...arguments),this.type="html",this.renderInstance=n1}readValueFromInstance(s,r){var i;if(qi.has(r))return(i=this.projection)!=null&&i.isProjecting?Zh(r):cT(s,r);{const l=Y6(s),c=(Kf(r)?l.getPropertyValue(r):l[r])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(s,{transformPagePoint:r}){return s1(s,r)}build(s,r,i){u0(s,r,i.transformTemplate)}scrapeMotionValuesFromProps(s,r,i){return p0(s,r,i)}}const i1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function X6(t,s,r,i){n1(t,s,void 0,i);for(const l in s.attrs)t.setAttribute(i1.has(l)?l:g0(l),s.attrs[l])}class W6 extends r1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=kt}getBaseTargetFromProps(s,r){return s[r]}readValueFromInstance(s,r){if(qi.has(r)){const i=Mw(r);return i&&i.default||0}return r=i1.has(r)?r:g0(r),s.getAttribute(r)}scrapeMotionValuesFromProps(s,r,i){return Xw(s,r,i)}build(s,r,i){Hw(s,r,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(s,r,i,l){X6(s,r,i,l)}mount(s){this.isSVGTag=Yw(s.tagName),super.mount(s)}}const Q6=(t,s)=>h0(t)?new W6(s):new K6(s,{allowProjection:t!==b.Fragment});function Si(t,s,r){const i=t.getProps();return f0(i,s,r!==void 0?r:i.custom,t)}const cf=t=>Array.isArray(t);function Z6(t,s,r){t.hasValue(s)?t.getValue(s).set(r):t.addValue(s,Mi(r))}function J6(t){return cf(t)?t[t.length-1]||0:t}function e3(t,s){const r=Si(t,s);let{transitionEnd:i={},transition:l={},...c}=r||{};c={...c,...i};for(const u in c){const m=J6(c[u]);Z6(t,u,m)}}function t3(t){return!!(rs(t)&&t.add)}function df(t,s){const r=t.getValue("willChange");if(t3(r))return r.add(s);if(!r&&Ua.WillChange){const i=new Ua.WillChange("auto");t.addValue("willChange",i),i.add(s)}}function o1(t){return t.props[Ww]}const s3=t=>t!==null;function a3(t,{repeat:s,repeatType:r="loop"},i){const l=t.filter(s3),c=s&&r!=="loop"&&s%2===1?0:l.length-1;return l[c]}const r3={type:"spring",stiffness:500,damping:25,restSpeed:10},n3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),i3={type:"keyframes",duration:.8},o3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l3=(t,{keyframes:s})=>s.length>2?i3:qi.has(t)?t.startsWith("scale")?n3(s[1]):r3:o3;function c3({when:t,delay:s,delayChildren:r,staggerChildren:i,staggerDirection:l,repeat:c,repeatType:u,repeatDelay:m,from:h,elapsed:f,...g}){return!!Object.keys(g).length}const x0=(t,s,r,i={},l,c)=>u=>{const m=r0(i,t)||{},h=m.delay||i.delay||0;let{elapsed:f=0}=i;f=f-fa(h);const g={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:s.getVelocity(),...m,delay:-f,onUpdate:v=>{s.set(v),m.onUpdate&&m.onUpdate(v)},onComplete:()=>{u(),m.onComplete&&m.onComplete()},name:t,motionValue:s,element:c?void 0:l};c3(m)||Object.assign(g,l3(t,g)),g.duration&&(g.duration=fa(g.duration)),g.repeatDelay&&(g.repeatDelay=fa(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(af(g),g.delay===0&&(y=!0)),(Ua.instantAnimations||Ua.skipAnimations)&&(y=!0,af(g),g.delay=0),g.allowFlatten=!m.type&&!m.ease,y&&!c&&s.get()!==void 0){const v=a3(g.keyframes,m);if(v!==void 0){xt.update(()=>{g.onUpdate(v),g.onComplete()});return}}return m.isSync?new s0(g):new DT(g)};function d3({protectedKeys:t,needsAnimating:s},r){const i=t.hasOwnProperty(r)&&s[r]!==!0;return s[r]=!1,i}function l1(t,s,{delay:r=0,transitionOverride:i,type:l}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:u,...m}=s;i&&(c=i);const h=[],f=l&&t.animationState&&t.animationState.getState()[l];for(const g in m){const y=t.getValue(g,t.latestValues[g]??null),v=m[g];if(v===void 0||f&&d3(f,g))continue;const N={delay:r,...r0(c||{},g)},_=y.get();if(_!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===_&&!N.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const M=o1(t);if(M){const S=window.MotionHandoffAnimation(M,g,xt);S!==null&&(N.startTime=S,j=!0)}}df(t,g),y.start(x0(g,y,v,t.shouldReduceMotion&&Tw.has(g)?{type:!1}:N,t,j));const C=y.animation;C&&h.push(C)}return u&&Promise.all(h).then(()=>{xt.update(()=>{u&&e3(t,u)})}),h}function c1(t,s,r,i=0,l=1){const c=Array.from(t).sort((f,g)=>f.sortNodePosition(g)).indexOf(s),u=t.size,m=(u-1)*i;return typeof r=="function"?r(c,u):l===1?c*i:m-c*i}function uf(t,s,r={}){var h;const i=Si(t,s,r.type==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);let{transition:l=t.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(l=r.transitionOverride);const c=i?()=>Promise.all(l1(t,i,r)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:v}=l;return u3(t,s,f,g,y,v,r)}:()=>Promise.resolve(),{when:m}=l;if(m){const[f,g]=m==="beforeChildren"?[c,u]:[u,c];return f().then(()=>g())}else return Promise.all([c(),u(r.delay)])}function u3(t,s,r=0,i=0,l=0,c=1,u){const m=[];for(const h of t.variantChildren)h.notify("AnimationStart",s),m.push(uf(h,s,{...u,delay:r+(typeof i=="function"?0:i)+c1(t.variantChildren,h,i,l,c)}).then(()=>h.notify("AnimationComplete",s)));return Promise.all(m)}function m3(t,s,r={}){t.notify("AnimationStart",s);let i;if(Array.isArray(s)){const l=s.map(c=>uf(t,c,r));i=Promise.all(l)}else if(typeof s=="string")i=uf(t,s,r);else{const l=typeof s=="function"?Si(t,s,r.custom):s;i=Promise.all(l1(t,l,r))}return i.then(()=>{t.notify("AnimationComplete",s)})}function d1(t,s){if(!Array.isArray(s))return!1;const r=s.length;if(r!==t.length)return!1;for(let i=0;i<r;i++)if(s[i]!==t[i])return!1;return!0}const h3=d0.length;function u1(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?u1(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const s={};for(let r=0;r<h3;r++){const i=d0[r],l=t.props[i];(cl(l)||l===!1)&&(s[i]=l)}return s}const f3=[...c0].reverse(),p3=c0.length;function g3(t){return s=>Promise.all(s.map(({animation:r,options:i})=>m3(t,r,i)))}function x3(t){let s=g3(t),r=Ub(),i=!0;const l=h=>(f,g)=>{var v;const y=Si(t,g,h==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:N,transitionEnd:_,...j}=y;f={...f,...j,..._}}return f};function c(h){s=h(t)}function u(h){const{props:f}=t,g=u1(t.parent)||{},y=[],v=new Set;let N={},_=1/0;for(let C=0;C<p3;C++){const M=f3[C],S=r[M],A=f[M]!==void 0?f[M]:g[M],E=cl(A),w=M===h?S.isActive:null;w===!1&&(_=C);let O=A===g[M]&&A!==f[M]&&E;if(O&&i&&t.manuallyAnimateOnMount&&(O=!1),S.protectedKeys={...N},!S.isActive&&w===null||!A&&!S.prevProp||Ad(A)||typeof A=="boolean")continue;const L=y3(S.prevProp,A);let V=L||M===h&&S.isActive&&!O&&E||C>_&&E,H=!1;const B=Array.isArray(A)?A:[A];let K=B.reduce(l(M),{});w===!1&&(K={});const{prevResolvedValues:G={}}=S,ae={...G,...K},oe=R=>{V=!0,v.has(R)&&(H=!0,v.delete(R)),S.needsAnimating[R]=!0;const z=t.getValue(R);z&&(z.liveStyle=!1)};for(const R in ae){const z=K[R],X=G[R];if(N.hasOwnProperty(R))continue;let D=!1;cf(z)&&cf(X)?D=!d1(z,X):D=z!==X,D?z!=null?oe(R):v.add(R):z!==void 0&&v.has(R)?oe(R):S.protectedKeys[R]=!0}S.prevProp=A,S.prevResolvedValues=K,S.isActive&&(N={...N,...K}),i&&t.blockInitialAnimation&&(V=!1);const $=O&&L;V&&(!$||H)&&y.push(...B.map(R=>{const z={type:M};if(typeof R=="string"&&i&&!$&&t.manuallyAnimateOnMount&&t.parent){const{parent:X}=t,D=Si(X,R);if(X.enteringChildren&&D){const{delayChildren:q}=D.transition||{};z.delay=c1(X.enteringChildren,t,q)}}return{animation:R,options:z}}))}if(v.size){const C={};if(typeof f.initial!="boolean"){const M=Si(t,Array.isArray(f.initial)?f.initial[0]:f.initial);M&&M.transition&&(C.transition=M.transition)}v.forEach(M=>{const S=t.getBaseTarget(M),A=t.getValue(M);A&&(A.liveStyle=!0),C[M]=S??null}),y.push({animation:C})}let j=!!y.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(j=!1),i=!1,j?s(y):Promise.resolve()}function m(h,f){var y;if(r[h].isActive===f)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(v=>{var N;return(N=v.animationState)==null?void 0:N.setActive(h,f)}),r[h].isActive=f;const g=u(h);for(const v in r)r[v].protectedKeys={};return g}return{animateChanges:u,setActive:m,setAnimateFunction:c,getState:()=>r,reset:()=>{r=Ub(),i=!0}}}function y3(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!d1(s,t):!1}function Qr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ub(){return{animate:Qr(!0),whileInView:Qr(),whileHover:Qr(),whileTap:Qr(),whileDrag:Qr(),whileFocus:Qr(),exit:Qr()}}class Er{constructor(s){this.isMounted=!1,this.node=s}update(){}}class b3 extends Er{constructor(s){super(s),s.animationState||(s.animationState=x3(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Ad(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:r}=this.node.prevProps||{};s!==r&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)==null||s.call(this)}}let v3=0;class j3 extends Er{constructor(){super(...arguments),this.id=v3++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===i)return;const l=this.node.animationState.setActive("exit",!s);r&&!s&&l.then(()=>{r(this.id)})}mount(){const{register:s,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const w3={animation:{Feature:b3},exit:{Feature:j3}};function ul(t,s,r,i={passive:!0}){return t.addEventListener(s,r,i),()=>t.removeEventListener(s,r)}function jl(t){return{point:{x:t.pageX,y:t.pageY}}}const N3=t=>s=>o0(s)&&t(s,jl(s));function Jo(t,s,r,i){return ul(t,s,N3(r),i)}const m1=1e-4,_3=1-m1,S3=1+m1,h1=.01,C3=0-h1,E3=0+h1;function cs(t){return t.max-t.min}function T3(t,s,r){return Math.abs(t-s)<=r}function Vb(t,s,r,i=.5){t.origin=i,t.originPoint=vt(s.min,s.max,t.origin),t.scale=cs(r)/cs(s),t.translate=vt(r.min,r.max,t.origin)-t.originPoint,(t.scale>=_3&&t.scale<=S3||isNaN(t.scale))&&(t.scale=1),(t.translate>=C3&&t.translate<=E3||isNaN(t.translate))&&(t.translate=0)}function el(t,s,r,i){Vb(t.x,s.x,r.x,i?i.originX:void 0),Vb(t.y,s.y,r.y,i?i.originY:void 0)}function qb(t,s,r){t.min=r.min+s.min,t.max=t.min+cs(s)}function k3(t,s,r){qb(t.x,s.x,r.x),qb(t.y,s.y,r.y)}function Ib(t,s,r){t.min=s.min-r.min,t.max=t.min+cs(s)}function tl(t,s,r){Ib(t.x,s.x,r.x),Ib(t.y,s.y,r.y)}function Vs(t){return[t("x"),t("y")]}const f1=({current:t})=>t?t.ownerDocument.defaultView:null,Fb=(t,s)=>Math.abs(t-s);function A3(t,s){const r=Fb(t.x,s.x),i=Fb(t.y,s.y);return Math.sqrt(r**2+i**2)}class p1{constructor(s,r,{transformPagePoint:i,contextWindow:l=window,dragSnapToOrigin:c=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Nh(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,_=A3(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!_)return;const{point:j}=v,{timestamp:C}=Jt;this.history.push({...j,timestamp:C});const{onStart:M,onMove:S}=this.handlers;N||(M&&M(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,v)},this.handlePointerMove=(v,N)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=wh(N,this.transformPagePoint),xt.update(this.updatePoint,!0)},this.handlePointerUp=(v,N)=>{this.end();const{onEnd:_,onSessionEnd:j,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Nh(v.type==="pointercancel"?this.lastMoveEventInfo:wh(N,this.transformPagePoint),this.history);this.startEvent&&_&&_(v,M),j&&j(v,M)},!o0(s))return;this.dragSnapToOrigin=c,this.handlers=r,this.transformPagePoint=i,this.distanceThreshold=u,this.contextWindow=l||window;const m=jl(s),h=wh(m,this.transformPagePoint),{point:f}=h,{timestamp:g}=Jt;this.history=[{...f,timestamp:g}];const{onSessionStart:y}=r;y&&y(s,Nh(h,this.history)),this.removeListeners=yl(Jo(this.contextWindow,"pointermove",this.handlePointerMove),Jo(this.contextWindow,"pointerup",this.handlePointerUp),Jo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),wr(this.updatePoint)}}function wh(t,s){return s?{point:s(t.point)}:t}function Hb(t,s){return{x:t.x-s.x,y:t.y-s.y}}function Nh({point:t},s){return{point:t,delta:Hb(t,g1(s)),offset:Hb(t,M3(s)),velocity:D3(s,.1)}}function M3(t){return t[0]}function g1(t){return t[t.length-1]}function D3(t,s){if(t.length<2)return{x:0,y:0};let r=t.length-1,i=null;const l=g1(t);for(;r>=0&&(i=t[r],!(l.timestamp-i.timestamp>fa(s)));)r--;if(!i)return{x:0,y:0};const c=pa(l.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const u={x:(l.x-i.x)/c,y:(l.y-i.y)/c};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function O3(t,{min:s,max:r},i){return s!==void 0&&t<s?t=i?vt(s,t,i.min):Math.max(t,s):r!==void 0&&t>r&&(t=i?vt(r,t,i.max):Math.min(t,r)),t}function Gb(t,s,r){return{min:s!==void 0?t.min+s:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function R3(t,{top:s,left:r,bottom:i,right:l}){return{x:Gb(t.x,r,l),y:Gb(t.y,s,i)}}function Yb(t,s){let r=s.min-t.min,i=s.max-t.max;return s.max-s.min<t.max-t.min&&([r,i]=[i,r]),{min:r,max:i}}function P3(t,s){return{x:Yb(t.x,s.x),y:Yb(t.y,s.y)}}function L3(t,s){let r=.5;const i=cs(t),l=cs(s);return l>i?r=il(s.min,s.max-i,t.min):i>l&&(r=il(t.min,t.max-l,s.min)),Ba(0,1,r)}function z3(t,s){const r={};return s.min!==void 0&&(r.min=s.min-t.min),s.max!==void 0&&(r.max=s.max-t.min),r}const mf=.35;function $3(t=mf){return t===!1?t=0:t===!0&&(t=mf),{x:Kb(t,"left","right"),y:Kb(t,"top","bottom")}}function Kb(t,s,r){return{min:Xb(t,s),max:Xb(t,r)}}function Xb(t,s){return typeof t=="number"?t:t[s]||0}const B3=new WeakMap;class U3{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:r=!1,distanceThreshold:i}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const c=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(jl(y).point)},u=(y,v)=>{const{drag:N,dragPropagation:_,onDragStart:j}=this.getProps();if(N&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KT(N),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vs(M=>{let S=this.getAxisMotionValue(M).get()||0;if(ga.test(S)){const{projection:A}=this.visualElement;if(A&&A.layout){const E=A.layout.layoutBox[M];E&&(S=cs(E)*(parseFloat(S)/100))}}this.originPoint[M]=S}),j&&xt.postRender(()=>j(y,v)),df(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},m=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:N,dragDirectionLock:_,onDirectionLock:j,onDrag:C}=this.getProps();if(!N&&!this.openDragLock)return;const{offset:M}=v;if(_&&this.currentDirection===null){this.currentDirection=V3(M),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",v.point,M),this.updateAxis("y",v.point,M),this.visualElement.render(),C&&C(y,v)},h=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Vs(y=>{var v;return this.getAnimationState(y)==="paused"&&((v=this.getAxisMotionValue(y).animation)==null?void 0:v.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new p1(s,{onSessionStart:c,onStart:u,onMove:m,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:f1(this.visualElement)})}stop(s,r){const i=s||this.latestPointerEvent,l=r||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!l||!i)return;const{velocity:u}=l;this.startAnimation(u);const{onDragEnd:m}=this.getProps();m&&xt.postRender(()=>m(i,l))}cancel(){this.isDragging=!1;const{projection:s,animationState:r}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(s,r,i){const{drag:l}=this.getProps();if(!i||!Xc(s,l,this.currentDirection))return;const c=this.getAxisMotionValue(s);let u=this.originPoint[s]+i[s];this.constraints&&this.constraints[s]&&(u=O3(u,this.constraints[s],this.elastic[s])),c.set(u)}resolveConstraints(){var c;const{dragConstraints:s,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(c=this.visualElement.projection)==null?void 0:c.layout,l=this.constraints;s&&ji(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=R3(i.layoutBox,s):this.constraints=!1,this.elastic=$3(r),l!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Vs(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=z3(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:r}=this.getProps();if(!s||!ji(s))return!1;const i=s.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const c=q6(i,l.root,this.visualElement.getTransformPagePoint());let u=P3(l.layout.layoutBox,c);if(r){const m=r(B6(u));this.hasMutatedConstraints=!!m,m&&(u=Jw(m))}return u}startAnimation(s){const{drag:r,dragMomentum:i,dragElastic:l,dragTransition:c,dragSnapToOrigin:u,onDragTransitionEnd:m}=this.getProps(),h=this.constraints||{},f=Vs(g=>{if(!Xc(g,r,this.currentDirection))return;let y=h&&h[g]||{};u&&(y={min:0,max:0});const v=l?200:1e6,N=l?40:1e7,_={type:"inertia",velocity:i?s[g]:0,bounceStiffness:v,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10,...c,...y};return this.startAxisValueAnimation(g,_)});return Promise.all(f).then(m)}startAxisValueAnimation(s,r){const i=this.getAxisMotionValue(s);return df(this.visualElement,s),i.start(x0(s,i,0,r,this.visualElement,!1))}stopAnimation(){Vs(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){Vs(s=>{var r;return(r=this.getAxisMotionValue(s).animation)==null?void 0:r.pause()})}getAnimationState(s){var r;return(r=this.getAxisMotionValue(s).animation)==null?void 0:r.state}getAxisMotionValue(s){const r=`_drag${s.toUpperCase()}`,i=this.visualElement.getProps(),l=i[r];return l||this.visualElement.getValue(s,(i.initial?i.initial[s]:void 0)||0)}snapToCursor(s){Vs(r=>{const{drag:i}=this.getProps();if(!Xc(r,i,this.currentDirection))return;const{projection:l}=this.visualElement,c=this.getAxisMotionValue(r);if(l&&l.layout){const{min:u,max:m}=l.layout.layoutBox[r];c.set(s[r]-vt(u,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:r}=this.getProps(),{projection:i}=this.visualElement;if(!ji(r)||!i||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Vs(u=>{const m=this.getAxisMotionValue(u);if(m&&this.constraints!==!1){const h=m.get();l[u]=L3({min:h,max:h},this.constraints[u])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Vs(u=>{if(!Xc(u,s,null))return;const m=this.getAxisMotionValue(u),{min:h,max:f}=this.constraints[u];m.set(vt(h,f,l[u]))})}addListeners(){if(!this.visualElement.current)return;B3.set(this.visualElement,this);const s=this.visualElement.current,r=Jo(s,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();ji(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,c=l.addEventListener("measure",i);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),xt.read(i);const u=ul(window,"resize",()=>this.scalePositionWithinConstraints()),m=l.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Vs(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=h[g].translate,y.set(y.get()+h[g].translate))}),this.visualElement.render())});return()=>{u(),r(),c(),m&&m()}}getProps(){const s=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:i=!1,dragPropagation:l=!1,dragConstraints:c=!1,dragElastic:u=mf,dragMomentum:m=!0}=s;return{...s,drag:r,dragDirectionLock:i,dragPropagation:l,dragConstraints:c,dragElastic:u,dragMomentum:m}}}function Xc(t,s,r){return(s===!0||s===t)&&(r===null||r===t)}function V3(t,s=10){let r=null;return Math.abs(t.y)>s?r="y":Math.abs(t.x)>s&&(r="x"),r}class q3 extends Er{constructor(s){super(s),this.removeGroupControls=qs,this.removeListeners=qs,this.controls=new U3(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qs}unmount(){this.removeGroupControls(),this.removeListeners()}}const Wb=t=>(s,r)=>{t&&xt.postRender(()=>t(s,r))};class I3 extends Er{constructor(){super(...arguments),this.removePointerDownListener=qs}onPointerDown(s){this.session=new p1(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:f1(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:r,onPan:i,onPanEnd:l}=this.node.getProps();return{onSessionStart:Wb(s),onStart:Wb(r),onMove:i,onEnd:(c,u)=>{delete this.session,l&&xt.postRender(()=>l(c,u))}}}mount(){this.removePointerDownListener=Jo(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qb(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Io={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(Be.test(t))t=parseFloat(t);else return t;const r=Qb(t,s.target.x),i=Qb(t,s.target.y);return`${r}% ${i}%`}},F3={correct:(t,{treeScale:s,projectionDelta:r})=>{const i=t,l=Nr.parse(t);if(l.length>5)return i;const c=Nr.createTransformer(t),u=typeof l[0]!="number"?1:0,m=r.x.scale*s.x,h=r.y.scale*s.y;l[0+u]/=m,l[1+u]/=h;const f=vt(m,h,.5);return typeof l[2+u]=="number"&&(l[2+u]/=f),typeof l[3+u]=="number"&&(l[3+u]/=f),c(l)}};let _h=!1;class H3 extends b.Component{componentDidMount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:i,layoutId:l}=this.props,{projection:c}=s;h6(G3),c&&(r.group&&r.group.add(c),i&&i.register&&l&&i.register(c),_h&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),sd.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:r,visualElement:i,drag:l,isPresent:c}=this.props,{projection:u}=i;return u&&(u.isPresent=c,_h=!0,l||s.layoutDependency!==r||r===void 0||s.isPresent!==c?u.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?u.promote():u.relegate()||xt.postRender(()=>{const m=u.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),i0.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:i}=this.props,{projection:l}=s;_h=!0,l&&(l.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(l),i&&i.deregister&&i.deregister(l))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function x1(t){const[s,r]=Bw(),i=b.useContext($f);return e.jsx(H3,{...t,layoutGroup:i,switchLayoutGroup:b.useContext(Qw),isPresent:s,safeToRemove:r})}const G3={borderRadius:{...Io,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Io,borderTopRightRadius:Io,borderBottomLeftRadius:Io,borderBottomRightRadius:Io,boxShadow:F3};function Y3(t,s,r){const i=rs(t)?t:Mi(t);return i.start(x0("",i,s,r)),i.animation}const K3=(t,s)=>t.depth-s.depth;class X3{constructor(){this.children=[],this.isDirty=!1}add(s){Vf(this.children,s),this.isDirty=!0}remove(s){qf(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(K3),this.isDirty=!1,this.children.forEach(s)}}function W3(t,s){const r=bs.now(),i=({timestamp:l})=>{const c=l-r;c>=s&&(wr(i),t(c-s))};return xt.setup(i,!0),()=>wr(i)}const y1=["TopLeft","TopRight","BottomLeft","BottomRight"],Q3=y1.length,Zb=t=>typeof t=="string"?parseFloat(t):t,Jb=t=>typeof t=="number"||Be.test(t);function Z3(t,s,r,i,l,c){l?(t.opacity=vt(0,r.opacity??1,J3(i)),t.opacityExit=vt(s.opacity??1,0,ek(i))):c&&(t.opacity=vt(s.opacity??1,r.opacity??1,i));for(let u=0;u<Q3;u++){const m=`border${y1[u]}Radius`;let h=ev(s,m),f=ev(r,m);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Jb(h)===Jb(f)?(t[m]=Math.max(vt(Zb(h),Zb(f),i),0),(ga.test(f)||ga.test(h))&&(t[m]+="%")):t[m]=f}(s.rotate||r.rotate)&&(t.rotate=vt(s.rotate||0,r.rotate||0,i))}function ev(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const J3=b1(0,.5,nw),ek=b1(.5,.95,qs);function b1(t,s,r){return i=>i<t?0:i>s?1:r(il(t,s,i))}function tv(t,s){t.min=s.min,t.max=s.max}function Us(t,s){tv(t.x,s.x),tv(t.y,s.y)}function sv(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function av(t,s,r,i,l){return t-=s,t=hd(t,1/r,i),l!==void 0&&(t=hd(t,1/l,i)),t}function tk(t,s=0,r=1,i=.5,l,c=t,u=t){if(ga.test(s)&&(s=parseFloat(s),s=vt(u.min,u.max,s/100)-u.min),typeof s!="number")return;let m=vt(c.min,c.max,i);t===c&&(m-=s),t.min=av(t.min,s,r,m,l),t.max=av(t.max,s,r,m,l)}function rv(t,s,[r,i,l],c,u){tk(t,s[r],s[i],s[l],s.scale,c,u)}const sk=["x","scaleX","originX"],ak=["y","scaleY","originY"];function nv(t,s,r,i){rv(t.x,s,sk,r?r.x:void 0,i?i.x:void 0),rv(t.y,s,ak,r?r.y:void 0,i?i.y:void 0)}function iv(t){return t.translate===0&&t.scale===1}function v1(t){return iv(t.x)&&iv(t.y)}function ov(t,s){return t.min===s.min&&t.max===s.max}function rk(t,s){return ov(t.x,s.x)&&ov(t.y,s.y)}function lv(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function j1(t,s){return lv(t.x,s.x)&&lv(t.y,s.y)}function cv(t){return cs(t.x)/cs(t.y)}function dv(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class nk{constructor(){this.members=[]}add(s){Vf(this.members,s),s.scheduleRender()}remove(s){if(qf(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(s){const r=this.members.findIndex(l=>s===l);if(r===0)return!1;let i;for(let l=r;l>=0;l--){const c=this.members[l];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(s,r){const i=this.lead;if(s!==i&&(this.prevLead=i,this.lead=s,s.show(),i)){i.instance&&i.scheduleRender(),s.scheduleRender(),s.resumeFrom=i,r&&(s.resumeFrom.preserveOpacity=!0),i.snapshot&&(s.snapshot=i.snapshot,s.snapshot.latestValues=i.animationValues||i.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:l}=s.options;l===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:r,resumingFrom:i}=s;r.onExitComplete&&r.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ik(t,s,r){let i="";const l=t.x.translate/s.x,c=t.y.translate/s.y,u=(r==null?void 0:r.z)||0;if((l||c||u)&&(i=`translate3d(${l}px, ${c}px, ${u}px) `),(s.x!==1||s.y!==1)&&(i+=`scale(${1/s.x}, ${1/s.y}) `),r){const{transformPerspective:f,rotate:g,rotateX:y,rotateY:v,skewX:N,skewY:_}=r;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),y&&(i+=`rotateX(${y}deg) `),v&&(i+=`rotateY(${v}deg) `),N&&(i+=`skewX(${N}deg) `),_&&(i+=`skewY(${_}deg) `)}const m=t.x.scale*s.x,h=t.y.scale*s.y;return(m!==1||h!==1)&&(i+=`scale(${m}, ${h})`),i||"none"}const Sh=["","X","Y","Z"],ok=1e3;let lk=0;function Ch(t,s,r,i){const{latestValues:l}=s;l[t]&&(r[t]=l[t],s.setStaticValue(t,0),i&&(i[t]=0))}function w1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const r=o1(s);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:l,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",xt,!(l||c))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&w1(i)}function N1({attachResizeListener:t,defaultParent:s,measureScroll:r,checkIsScrollRoot:i,resetTransform:l}){return class{constructor(u={},m=s==null?void 0:s()){this.id=lk++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(uk),this.nodes.forEach(pk),this.nodes.forEach(gk),this.nodes.forEach(mk)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new X3)}addEventListener(u,m){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Hf),this.eventHandlers.get(u).add(m)}notifyListeners(u,...m){const h=this.eventHandlers.get(u);h&&h.notify(...m)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=$w(u)&&!e6(u),this.instance=u;const{layoutId:m,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||m)&&(this.isLayoutDirty=!0),t){let g,y=0;const v=()=>this.root.updateBlockedByResize=!1;xt.read(()=>{y=window.innerWidth}),t(u,()=>{const N=window.innerWidth;N!==y&&(y=N,this.root.updateBlockedByResize=!0,g&&g(),g=W3(v,250),sd.hasAnimatedSinceResize&&(sd.hasAnimatedSinceResize=!1,this.nodes.forEach(hv)))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&f&&(m||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||f.getDefaultTransition()||jk,{onLayoutAnimationStart:j,onLayoutAnimationComplete:C}=f.getProps(),M=!this.targetLayout||!j1(this.targetLayout,N),S=!y&&v;if(this.options.layoutRoot||this.resumeFrom||S||y&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...r0(_,"layout"),onPlay:j,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(g,S)}else y||hv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xk),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&w1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:m,layout:h}=this.options;if(m===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(uv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(fk),this.nodes.forEach(ck),this.nodes.forEach(dk)):this.nodes.forEach(mv),this.clearAllSnapshots();const m=bs.now();Jt.delta=Ba(0,1e3/60,m-Jt.timestamp),Jt.timestamp=m,Jt.isProcessing=!0,fh.update.process(Jt),fh.preRender.process(Jt),fh.render.process(Jt),Jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,i0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hk),this.sharedNodes.forEach(yk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cs(this.snapshot.measuredBox.x)&&!cs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let m=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(m=!1),m&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:h,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!l)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,m=this.projectionDelta&&!v1(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;u&&this.instance&&(m||Jr(this.latestValues)||g)&&(l(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const m=this.measurePageBox();let h=this.removeElementScroll(m);return u&&(h=this.removeTransform(h)),wk(h),{animationId:this.root.animationId,measuredBox:m,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:u}=this.options;if(!u)return kt();const m=u.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(Nk))){const{scroll:g}=this.root;g&&(wi(m.x,g.offset.x),wi(m.y,g.offset.y))}return m}removeElementScroll(u){var h;const m=kt();if(Us(m,u),(h=this.scroll)!=null&&h.wasRoot)return m;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:y,options:v}=g;g!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&Us(m,u),wi(m.x,y.offset.x),wi(m.y,y.offset.y))}return m}applyTransform(u,m=!1){const h=kt();Us(h,u);for(let f=0;f<this.path.length;f++){const g=this.path[f];!m&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ni(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Jr(g.latestValues)&&Ni(h,g.latestValues)}return Jr(this.latestValues)&&Ni(h,this.latestValues),h}removeTransform(u){const m=kt();Us(m,u);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Jr(f.latestValues))continue;nf(f.latestValues)&&f.updateSnapshot();const g=kt(),y=f.measurePageBox();Us(g,y),nv(m,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Jr(this.latestValues)&&nv(m,this.latestValues),m}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var v;const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==m;if(!(u||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Jt.timestamp,!this.targetDelta&&!this.relativeTarget){const N=this.getClosestProjectingParent();N&&N.layout&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),tl(this.relativeTargetOrigin,this.layout.layoutBox,N.layout.layoutBox),Us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=kt(),this.targetWithTransforms=kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),k3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Us(this.target,this.layout.layoutBox),t1(this.target,this.targetDelta)):Us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const N=this.getClosestProjectingParent();N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),tl(this.relativeTargetOrigin,this.target,N.target),Us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||nf(this.parent.latestValues)||e1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const u=this.getLead(),m=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(h=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Jt.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;Us(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;V6(this.layoutCorrected,this.treeScale,this.path,m),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=kt());const{target:N}=u;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sv(this.prevProjectionDelta.x,this.projectionDelta.x),sv(this.prevProjectionDelta.y,this.projectionDelta.y)),el(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!dv(this.projectionDelta.x,this.prevProjectionDelta.x)||!dv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var m;if((m=this.options.visualElement)==null||m.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_i(),this.projectionDelta=_i(),this.projectionDeltaWithTransform=_i()}setAnimationOrigin(u,m=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},y=_i();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const v=kt(),N=h?h.source:void 0,_=this.layout?this.layout.source:void 0,j=N!==_,C=this.getStack(),M=!C||C.members.length<=1,S=!!(j&&!M&&this.options.crossfade===!0&&!this.path.some(vk));this.animationProgress=0;let A;this.mixTargetDelta=E=>{const w=E/1e3;fv(y.x,u.x,w),fv(y.y,u.y,w),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tl(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bk(this.relativeTarget,this.relativeTargetOrigin,v,w),A&&rk(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=kt()),Us(A,this.relativeTarget)),j&&(this.animationValues=g,Z3(g,f,this.latestValues,w,S,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var m,h,f;this.notifyListeners("animationStart"),(m=this.currentAnimation)==null||m.stop(),(f=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||f.stop(),this.pendingAnimation&&(wr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xt.update(()=>{sd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Mi(0)),this.currentAnimation=Y3(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),u.onUpdate&&u.onUpdate(g)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ok),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:m,target:h,layout:f,latestValues:g}=u;if(!(!m||!h||!f)){if(this!==u&&this.layout&&f&&_1(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||kt();const y=cs(this.layout.layoutBox.x);h.x.min=u.target.x.min,h.x.max=h.x.min+y;const v=cs(this.layout.layoutBox.y);h.y.min=u.target.y.min,h.y.max=h.y.min+v}Us(m,h),Ni(m,g),el(this.projectionDeltaWithTransform,this.layoutCorrected,m,g)}}registerSharedNode(u,m){this.sharedNodes.has(u)||this.sharedNodes.set(u,new nk),this.sharedNodes.get(u).add(m);const f=m.options.initialPromotionConfig;m.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(m):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var m;const{layoutId:u}=this.options;return u?((m=this.getStack())==null?void 0:m.lead)||this:this}getPrevLead(){var m;const{layoutId:u}=this.options;return u?(m=this.getStack())==null?void 0:m.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:m,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),u&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let m=!1;const{latestValues:h}=u;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(m=!0),!m)return;const f={};h.z&&Ch("z",u,f,this.animationValues);for(let g=0;g<Sh.length;g++)Ch(`rotate${Sh[g]}`,u,f,this.animationValues),Ch(`skew${Sh[g]}`,u,f,this.animationValues);u.render();for(const g in f)u.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);u.scheduleRender()}applyProjectionStyles(u,m){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=td(m==null?void 0:m.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=td(m==null?void 0:m.pointerEvents)||""),this.hasProjected&&!Jr(this.latestValues)&&(u.transform=h?h({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=ik(this.projectionDeltaWithTransform,this.treeScale,g);h&&(y=h(g,y)),u.transform=y;const{x:v,y:N}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${N.origin*100}% 0`,f.animationValues?u.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const _ in dl){if(g[_]===void 0)continue;const{correct:j,applyTo:C,isCSSVariable:M}=dl[_],S=y==="none"?g[_]:j(g[_],f);if(C){const A=C.length;for(let E=0;E<A;E++)u[C[E]]=S}else M?this.options.visualElement.renderState.vars[_]=S:u[_]=S}this.options.layoutId&&(u.pointerEvents=f===this?td(m==null?void 0:m.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var m;return(m=u.currentAnimation)==null?void 0:m.stop()}),this.root.nodes.forEach(uv),this.root.sharedNodes.clear()}}}function ck(t){t.updateLayout()}function dk(t){var r;const s=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:l}=t.layout,{animationType:c}=t.options,u=s.source!==t.layout.source;c==="size"?Vs(y=>{const v=u?s.measuredBox[y]:s.layoutBox[y],N=cs(v);v.min=i[y].min,v.max=v.min+N}):_1(c,s.layoutBox,i)&&Vs(y=>{const v=u?s.measuredBox[y]:s.layoutBox[y],N=cs(i[y]);v.max=v.min+N,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+N)});const m=_i();el(m,i,s.layoutBox);const h=_i();u?el(h,t.applyTransform(l,!0),s.measuredBox):el(h,i,s.layoutBox);const f=!v1(m);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:N}=y;if(v&&N){const _=kt();tl(_,s.layoutBox,v.layoutBox);const j=kt();tl(j,i,N.layoutBox),j1(_,j)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=_,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:s,delta:h,layoutDelta:m,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function uk(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function mk(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function hk(t){t.clearSnapshot()}function uv(t){t.clearMeasurements()}function mv(t){t.isLayoutDirty=!1}function fk(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function hv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function pk(t){t.resolveTargetDelta()}function gk(t){t.calcProjection()}function xk(t){t.resetSkewAndRotation()}function yk(t){t.removeLeadSnapshot()}function fv(t,s,r){t.translate=vt(s.translate,0,r),t.scale=vt(s.scale,1,r),t.origin=s.origin,t.originPoint=s.originPoint}function pv(t,s,r,i){t.min=vt(s.min,r.min,i),t.max=vt(s.max,r.max,i)}function bk(t,s,r,i){pv(t.x,s.x,r.x,i),pv(t.y,s.y,r.y,i)}function vk(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jk={duration:.45,ease:[.4,0,.1,1]},gv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),xv=gv("applewebkit/")&&!gv("chrome/")?Math.round:qs;function yv(t){t.min=xv(t.min),t.max=xv(t.max)}function wk(t){yv(t.x),yv(t.y)}function _1(t,s,r){return t==="position"||t==="preserve-aspect"&&!T3(cv(s),cv(r),.2)}function Nk(t){var s;return t!==t.root&&((s=t.scroll)==null?void 0:s.wasRoot)}const _k=N1({attachResizeListener:(t,s)=>ul(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Eh={current:void 0},S1=N1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Eh.current){const t=new _k({});t.mount(window),t.setOptions({layoutScroll:!0}),Eh.current=t}return Eh.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Sk={pan:{Feature:I3},drag:{Feature:q3,ProjectionNode:S1,MeasureLayout:x1}};function bv(t,s,r){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",r==="Start");const l="onHover"+r,c=i[l];c&&xt.postRender(()=>c(s,jl(s)))}class Ck extends Er{mount(){const{current:s}=this.node;s&&(this.unmount=XT(s,(r,i)=>(bv(this.node,i,"Start"),l=>bv(this.node,l,"End"))))}unmount(){}}class Ek extends Er{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yl(ul(this.node.current,"focus",()=>this.onFocus()),ul(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vv(t,s,r){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",r==="Start");const l="onTap"+(r==="End"?"":r),c=i[l];c&&xt.postRender(()=>c(s,jl(s)))}class Tk extends Er{mount(){const{current:s}=this.node;s&&(this.unmount=JT(s,(r,i)=>(vv(this.node,i,"Start"),(l,{success:c})=>vv(this.node,l,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hf=new WeakMap,Th=new WeakMap,kk=t=>{const s=hf.get(t.target);s&&s(t)},Ak=t=>{t.forEach(kk)};function Mk({root:t,...s}){const r=t||document;Th.has(r)||Th.set(r,{});const i=Th.get(r),l=JSON.stringify(s);return i[l]||(i[l]=new IntersectionObserver(Ak,{root:t,...s})),i[l]}function Dk(t,s,r){const i=Mk(s);return hf.set(t,r),i.observe(t),()=>{hf.delete(t),i.unobserve(t)}}const Ok={some:0,all:1};class Rk extends Er{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:r,margin:i,amount:l="some",once:c}=s,u={root:r?r.current:void 0,rootMargin:i,threshold:typeof l=="number"?l:Ok[l]},m=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,c&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),v=f?g:y;v&&v(h)};return Dk(this.node.current,u,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:r}=this.node;["amount","margin","root"].some(Pk(s,r))&&this.startObserver()}unmount(){}}function Pk({viewport:t={}},{viewport:s={}}={}){return r=>t[r]!==s[r]}const Lk={inView:{Feature:Rk},tap:{Feature:Tk},focus:{Feature:Ek},hover:{Feature:Ck}},zk={layout:{ProjectionNode:S1,MeasureLayout:x1}},$k={...w3,...Lk,...Sk,...zk},Ne=$6($k,Q6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uk=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,i)=>i?i.toUpperCase():r.toLowerCase()),jv=t=>{const s=Uk(t);return s.charAt(0).toUpperCase()+s.slice(1)},C1=(...t)=>t.filter((s,r,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===r).join(" ").trim(),Vk=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=b.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:u,...m},h)=>b.createElement("svg",{ref:h,...qk,width:s,height:s,stroke:t,strokeWidth:i?Number(r)*24/Number(s):r,className:C1("lucide",l),...!c&&!Vk(m)&&{"aria-hidden":"true"},...m},[...u.map(([f,g])=>b.createElement(f,g)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(t,s)=>{const r=b.forwardRef(({className:i,...l},c)=>b.createElement(Ik,{ref:c,iconNode:s,className:C1(`lucide-${Bk(jv(t))}`,`lucide-${t}`,i),...l}));return r.displayName=jv(t),r};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Dd=je("arrow-left",Fk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],fd=je("arrow-right-left",Hk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wv=je("arrow-right",Gk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Kk=je("arrow-up-down",Yk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Wk=je("arrow-up",Xk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]],Zk=je("badge",Qk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],eA=je("banknote",Jk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],sA=je("bell-ring",tA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],y0=je("bell",aA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],nA=je("building-2",rA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],oA=je("building",iA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Nv=je("calculator",lA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Tr=je("calendar",cA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],E1=je("chart-column",dA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mA=je("check",uA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],ff=je("chef-hat",hA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pA=je("chevron-down",fA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xA=je("chevron-right",gA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Oi=je("circle-alert",yA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ml=je("circle-check-big",bA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_v=je("circle-x",vA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Vt=je("clock",jA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],NA=je("coffee",wA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],br=je("copy",_A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],pn=je("credit-card",SA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Yt=je("dollar-sign",CA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],b0=je("download",EA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_r=je("eye-off",TA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Is=je("eye",kA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],T1=je("file-text",AA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],k1=je("funnel",MA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Sv=je("info",DA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Cv=je("key",OA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],PA=je("layout-dashboard",RA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],pf=je("lock",LA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$A=je("log-out",zA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],v0=je("mail",BA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],wl=je("map-pin",UA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ri=je("minus",VA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],IA=je("move",qA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],un=je("package",FA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],pd=je("phone",HA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ks=je("plus",GA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],KA=je("receipt",YA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gf=je("refresh-cw",XA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],j0=je("rotate-ccw",WA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gd=je("save",QA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qa=je("search",ZA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],e5=je("send",JA);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],w0=je("settings",t5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],a5=je("share-2",s5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Wc=je("shield",r5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],xf=je("shopping-bag",n5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],hl=je("shopping-cart",i5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],mn=je("smartphone",o5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Nl=je("square-pen",l5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],yf=je("star",c5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Ev=je("timer",d5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_l=je("trash-2",u5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Tv=je("trending-down",m5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Pi=je("trending-up",h5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],As=je("triangle-alert",f5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],A1=je("user-check",p5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],x5=je("user-plus",g5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Js=je("user",y5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ea=je("users",b5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bf=je("wifi-off",v5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],N0=je("wifi",j5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],vf=je("wine",w5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],it=je("x",N5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xd=je("zap",_5),S5=()=>{const[t,s]=b.useState(""),[r,i]=b.useState(""),[l,c]=b.useState(!1),[u,m]=b.useState(""),{login:h,loginAsDemo:f,isLoading:g}=Kt(),y=async N=>{if(N.preventDefault(),m(""),!t||!r){m("Por favor, preencha todos os campos");return}await h(t,r)||m("Erro ao fazer login. Tente novamente.")},v=()=>{f()};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ea,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ClubManager Pro"}),e.jsx("p",{className:"text-gray-600",children:"Sistema de Gesto de Clubes"})]}),e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-lg font-semibold text-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 flex items-center justify-center space-x-2 mb-6 shadow-lg",children:[e.jsx(xd,{className:"w-5 h-5"}),e.jsx("span",{children:" Entrar como Demo"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"ou faa login tradicional"})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(v0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:t,onChange:N=>s(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Digite seu email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(pf,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:l?"text":"password",value:r,onChange:N=>i(N.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Digite sua senha"}),e.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?e.jsx(_r,{size:20}):e.jsx(Is,{size:20})})]})]}),u&&e.jsx(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-lg border border-red-200",children:u}),e.jsx(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Entrando..."})]}):"Entrar"})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-blue-100",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2 text-center",children:" Acesso Demo Rpido"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Mdulo Bar:"})," Pedidos, comandas e vendas"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Mdulo Cozinha:"})," Gesto de cardpio e pedidos"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Dashboard:"})," Mtricas e relatrios"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Estoque:"})," Controle de inventrio"]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:[" ",e.jsx("strong",{children:"Dica:"})," Use o boto verde acima para acesso instantneo!"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["No tem uma conta?"," ",e.jsx(da,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Cadastre-se aqui"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"ClubManager Pro v1.0 - Sistema Demonstrao"})})]})})},C5=()=>{const t=Sr(),{register:s}=Kt(),[r,i]=b.useState({name:"",email:"",password:"",confirmPassword:""}),[l,c]=b.useState(!1),[u,m]=b.useState(!1),[h,f]=b.useState(""),[g,y]=b.useState(""),[v,N]=b.useState(!1),_=(M,S)=>{i(A=>({...A,[M]:S})),f("")},j=()=>r.name.trim()?r.email.trim()?r.password.length<6?(f("Senha deve ter pelo menos 6 caracteres"),!1):r.password!==r.confirmPassword?(f("Senhas no coincidem"),!1):!0:(f("Email  obrigatrio"),!1):(f("Nome  obrigatrio"),!1),C=async M=>{if(M.preventDefault(),f(""),y(""),!j())return;N(!0);const S=await s(r.name,r.email,r.password);S.success?(y("Cadastro realizado com sucesso! Verifique seu email para confirmar a conta."),i({name:"",email:"",password:"",confirmPassword:""}),setTimeout(()=>{t("/login")},2e3)):f(S.error||"Erro no cadastro. Tente novamente."),N(!1)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ea,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Criar Conta"}),e.jsx("p",{className:"text-gray-600",children:"ClubManager Pro"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo"}),e.jsxs("div",{className:"relative",children:[e.jsx(Js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:r.name,onChange:M=>_("name",M.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Digite seu nome completo",disabled:v})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(v0,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:r.email,onChange:M=>_("email",M.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Digite seu email",disabled:v})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(pf,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:l?"text":"password",value:r.password,onChange:M=>_("password",M.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Digite sua senha",disabled:v}),e.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:v,children:l?e.jsx(_r,{size:20}):e.jsx(Is,{size:20})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(pf,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:u?"text":"password",value:r.confirmPassword,onChange:M=>_("confirmPassword",M.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Confirme sua senha",disabled:v}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:v,children:u?e.jsx(_r,{size:20}):e.jsx(Is,{size:20})})]})]}),h&&e.jsx(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-lg border border-red-200",children:h}),g&&e.jsx(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-green-600 text-sm text-center bg-green-50 p-3 rounded-lg border border-green-200",children:g}),e.jsx(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:v,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Criando conta..."})]}):"Criar Conta"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(da,{to:"/login",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[e.jsx(Dd,{size:16}),e.jsx("span",{children:"Voltar para o Login"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"ClubManager Pro v1.0 - Sistema Demonstrao"})})]})})},E5=()=>{const{user:t,logout:s}=Kt(),r=[{name:"Dashboard",icon:PA,path:"/"},{name:"Monitor Bar",icon:vf,path:"/bar"},{name:"Atendimento Bar",icon:NA,path:"/bar/attendance"},{name:"Monitor Cozinha",icon:ff,path:"/kitchen"},{name:"Gesto de Caixa",icon:Yt,path:"/cash"},{name:"Clientes",icon:ea,path:"/bar-customers"},{name:"Funcionrios",icon:A1,path:"/bar-employees"},{name:"Estoque",icon:un,path:"/inventory"},{name:"Scios",icon:ea,path:"/members"},{name:"Configuraes",icon:w0,path:"/settings"}],i=(t==null?void 0:t.email)==="demo@clubmanager.com";return e.jsxs(Ne.aside,{initial:{x:-280},animate:{x:0},transition:{duration:.3},className:"bg-slate-900 text-white w-64 h-full p-4 flex flex-col overflow-y-auto scrollbar-hide",style:{overscrollBehavior:"contain"},children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-blue-400",children:"ClubManager"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Sistema de Gesto"}),i&&e.jsxs("div",{className:"mt-2 flex items-center space-x-1 text-xs text-green-400",children:[e.jsx(xd,{size:12}),e.jsx("span",{children:"Modo Demo"})]})]}),t&&e.jsxs("div",{className:`mb-6 p-3 rounded-lg ${i?"bg-green-800 border border-green-600":"bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:t.avatar||`https://api.dicebear.com/8.x/initials/svg?seed=${t.name}`,alt:t.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:t.name}),e.jsx("p",{className:"text-slate-400 text-xs capitalize",children:t.role}),t.department&&e.jsx("p",{className:"text-slate-300 text-xs",children:t.department})]})]}),i&&e.jsx("div",{className:"mt-2 text-xs text-green-300",children:" Explorando funcionalidades"})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx("ul",{className:"space-y-2",children:r.map(l=>e.jsx("li",{children:e.jsxs(vj,{to:l.path,className:({isActive:c})=>`flex items-center space-x-3 p-3 rounded-lg transition-colors ${c?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(l.icon,{size:20}),e.jsx("span",{children:l.name})]})},l.name))})}),i&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-900 rounded-lg border border-blue-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-200 mb-2",children:" Teste Agora:"}),e.jsxs("ul",{className:"text-xs text-blue-300 space-y-1",children:[e.jsx("li",{children:" Criar pedidos no Bar"}),e.jsx("li",{children:" Sistema de Atendimento"}),e.jsx("li",{children:" Gerenciar cozinha"}),e.jsx("li",{children:" Ver mtricas em tempo real"}),e.jsx("li",{children:" Controlar estoque"})]})]}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-3 p-3 rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white transition-colors mt-4",children:[e.jsx($A,{size:20}),e.jsx("span",{children:i?"Sair do Demo":"Sair"})]})]})},T5=()=>{const{notifications:t,clearNotifications:s}=_t(),[r,i]=We.useState(!1);return e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(qa,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!r),className:"relative p-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(y0,{size:20}),t.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t.length})]}),e.jsx(fn,{children:r&&e.jsxs(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Notificaes"}),t.length>0&&e.jsx("button",{onClick:s,className:"text-sm text-blue-600 hover:text-blue-800",children:"Limpar todas"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:t.length===0?e.jsx("p",{className:"p-4 text-gray-500 text-center",children:"Nenhuma notificao"}):t.map((l,c)=>e.jsx("div",{className:"p-3 border-b border-gray-100 last:border-b-0",children:e.jsx("p",{className:"text-sm text-gray-700",children:l})},c))})]})})]})]})]})})},k5=()=>e.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[e.jsx(E5,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(T5,{}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",style:{overscrollBehavior:"none"},children:e.jsx(vS,{})})]})]}),M1=6048e5,A5=864e5,kv=Symbol.for("constructDateFrom");function xa(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&kv in t?t[kv](s):t instanceof Date?new t.constructor(s):new Date(s)}function vs(t,s){return xa(s||t,t)}function M5(t,s,r){const i=vs(t,r==null?void 0:r.in);if(isNaN(s))return xa(t,NaN);const l=i.getDate(),c=xa(t,i.getTime());c.setMonth(i.getMonth()+s+1,0);const u=c.getDate();return l>=u?c:(i.setFullYear(c.getFullYear(),c.getMonth(),l),i)}let D5={};function Od(){return D5}function fl(t,s){var m,h,f,g;const r=Od(),i=(s==null?void 0:s.weekStartsOn)??((h=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:h.weekStartsOn)??r.weekStartsOn??((g=(f=r.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,l=vs(t,s==null?void 0:s.in),c=l.getDay(),u=(c<i?7:0)+c-i;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function yd(t,s){return fl(t,{...s,weekStartsOn:1})}function D1(t,s){const r=vs(t,s==null?void 0:s.in),i=r.getFullYear(),l=xa(r,0);l.setFullYear(i+1,0,4),l.setHours(0,0,0,0);const c=yd(l),u=xa(r,0);u.setFullYear(i,0,4),u.setHours(0,0,0,0);const m=yd(u);return r.getTime()>=c.getTime()?i+1:r.getTime()>=m.getTime()?i:i-1}function Av(t){const s=vs(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function O5(t,...s){const r=xa.bind(null,s.find(i=>typeof i=="object"));return s.map(r)}function Mv(t,s){const r=vs(t,s==null?void 0:s.in);return r.setHours(0,0,0,0),r}function R5(t,s,r){const[i,l]=O5(r==null?void 0:r.in,t,s),c=Mv(i),u=Mv(l),m=+c-Av(c),h=+u-Av(u);return Math.round((m-h)/A5)}function P5(t,s){const r=D1(t,s),i=xa(t,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),yd(i)}function L5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function z5(t){return!(!L5(t)&&typeof t!="number"||isNaN(+vs(t)))}function $5(t,s){const r=vs(t,s==null?void 0:s.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const B5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},U5=(t,s,r)=>{let i;const l=B5[t];return typeof l=="string"?i=l:s===1?i=l.one:i=l.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Ci(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const V5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},q5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},I5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},F5={date:Ci({formats:V5,defaultWidth:"full"}),time:Ci({formats:q5,defaultWidth:"full"}),dateTime:Ci({formats:I5,defaultWidth:"full"})},H5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},G5=(t,s,r,i)=>H5[t];function ua(t){return(s,r)=>{const i=r!=null&&r.context?String(r.context):"standalone";let l;if(i==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,m=r!=null&&r.width?String(r.width):u;l=t.formattingValues[m]||t.formattingValues[u]}else{const u=t.defaultWidth,m=r!=null&&r.width?String(r.width):t.defaultWidth;l=t.values[m]||t.values[u]}const c=t.argumentCallback?t.argumentCallback(s):s;return l[c]}}const Y5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},K5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},X5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},W5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Q5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Z5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},J5=(t,s)=>{const r=Number(t),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},eM={ordinalNumber:J5,era:ua({values:Y5,defaultWidth:"wide"}),quarter:ua({values:K5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ua({values:X5,defaultWidth:"wide"}),day:ua({values:W5,defaultWidth:"wide"}),dayPeriod:ua({values:Q5,defaultWidth:"wide",formattingValues:Z5,defaultFormattingWidth:"wide"})};function ma(t){return(s,r={})=>{const i=r.width,l=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],c=s.match(l);if(!c)return null;const u=c[0],m=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(m)?sM(m,y=>y.test(u)):tM(m,y=>y.test(u));let f;f=t.valueCallback?t.valueCallback(h):h,f=r.valueCallback?r.valueCallback(f):f;const g=s.slice(u.length);return{value:f,rest:g}}}function tM(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function sM(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function O1(t){return(s,r={})=>{const i=s.match(t.matchPattern);if(!i)return null;const l=i[0],c=s.match(t.parsePattern);if(!c)return null;let u=t.valueCallback?t.valueCallback(c[0]):c[0];u=r.valueCallback?r.valueCallback(u):u;const m=s.slice(l.length);return{value:u,rest:m}}}const aM=/^(\d+)(th|st|nd|rd)?/i,rM=/\d+/i,nM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iM={any:[/^b/i,/^(a|c)/i]},oM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lM={any:[/1/i,/2/i,/3/i,/4/i]},cM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pM={ordinalNumber:O1({matchPattern:aM,parsePattern:rM,valueCallback:t=>parseInt(t,10)}),era:ma({matchPatterns:nM,defaultMatchWidth:"wide",parsePatterns:iM,defaultParseWidth:"any"}),quarter:ma({matchPatterns:oM,defaultMatchWidth:"wide",parsePatterns:lM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ma({matchPatterns:cM,defaultMatchWidth:"wide",parsePatterns:dM,defaultParseWidth:"any"}),day:ma({matchPatterns:uM,defaultMatchWidth:"wide",parsePatterns:mM,defaultParseWidth:"any"}),dayPeriod:ma({matchPatterns:hM,defaultMatchWidth:"any",parsePatterns:fM,defaultParseWidth:"any"})},gM={code:"en-US",formatDistance:U5,formatLong:F5,formatRelative:G5,localize:eM,match:pM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xM(t,s){const r=vs(t,s==null?void 0:s.in);return R5(r,$5(r))+1}function yM(t,s){const r=vs(t,s==null?void 0:s.in),i=+yd(r)-+P5(r);return Math.round(i/M1)+1}function R1(t,s){var g,y,v,N;const r=vs(t,s==null?void 0:s.in),i=r.getFullYear(),l=Od(),c=(s==null?void 0:s.firstWeekContainsDate)??((y=(g=s==null?void 0:s.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??l.firstWeekContainsDate??((N=(v=l.locale)==null?void 0:v.options)==null?void 0:N.firstWeekContainsDate)??1,u=xa((s==null?void 0:s.in)||t,0);u.setFullYear(i+1,0,c),u.setHours(0,0,0,0);const m=fl(u,s),h=xa((s==null?void 0:s.in)||t,0);h.setFullYear(i,0,c),h.setHours(0,0,0,0);const f=fl(h,s);return+r>=+m?i+1:+r>=+f?i:i-1}function bM(t,s){var m,h,f,g;const r=Od(),i=(s==null?void 0:s.firstWeekContainsDate)??((h=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(f=r.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,l=R1(t,s),c=xa((s==null?void 0:s.in)||t,0);return c.setFullYear(l,0,i),c.setHours(0,0,0,0),fl(c,s)}function vM(t,s){const r=vs(t,s==null?void 0:s.in),i=+fl(r,s)-+bM(r,s);return Math.round(i/M1)+1}function nt(t,s){const r=t<0?"-":"",i=Math.abs(t).toString().padStart(s,"0");return r+i}const fr={y(t,s){const r=t.getFullYear(),i=r>0?r:1-r;return nt(s==="yy"?i%100:i,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):nt(r+1,2)},d(t,s){return nt(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return nt(t.getHours()%12||12,s.length)},H(t,s){return nt(t.getHours(),s.length)},m(t,s){return nt(t.getMinutes(),s.length)},s(t,s){return nt(t.getSeconds(),s.length)},S(t,s){const r=s.length,i=t.getMilliseconds(),l=Math.trunc(i*Math.pow(10,r-3));return nt(l,s.length)}},mi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Dv={G:function(t,s,r){const i=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const i=t.getFullYear(),l=i>0?i:1-i;return r.ordinalNumber(l,{unit:"year"})}return fr.y(t,s)},Y:function(t,s,r,i){const l=R1(t,i),c=l>0?l:1-l;if(s==="YY"){const u=c%100;return nt(u,2)}return s==="Yo"?r.ordinalNumber(c,{unit:"year"}):nt(c,s.length)},R:function(t,s){const r=D1(t);return nt(r,s.length)},u:function(t,s){const r=t.getFullYear();return nt(r,s.length)},Q:function(t,s,r){const i=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(i);case"QQ":return nt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,s,r){const i=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(i);case"qq":return nt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,s,r){const i=t.getMonth();switch(s){case"M":case"MM":return fr.M(t,s);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(t,s,r){const i=t.getMonth();switch(s){case"L":return String(i+1);case"LL":return nt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(t,s,r,i){const l=vM(t,i);return s==="wo"?r.ordinalNumber(l,{unit:"week"}):nt(l,s.length)},I:function(t,s,r){const i=yM(t);return s==="Io"?r.ordinalNumber(i,{unit:"week"}):nt(i,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):fr.d(t,s)},D:function(t,s,r){const i=xM(t);return s==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):nt(i,s.length)},E:function(t,s,r){const i=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(t,s,r,i){const l=t.getDay(),c=(l-i.weekStartsOn+8)%7||7;switch(s){case"e":return String(c);case"ee":return nt(c,2);case"eo":return r.ordinalNumber(c,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(t,s,r,i){const l=t.getDay(),c=(l-i.weekStartsOn+8)%7||7;switch(s){case"c":return String(c);case"cc":return nt(c,s.length);case"co":return r.ordinalNumber(c,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(t,s,r){const i=t.getDay(),l=i===0?7:i;switch(s){case"i":return String(l);case"ii":return nt(l,s.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(t,s,r){const l=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(t,s,r){const i=t.getHours();let l;switch(i===12?l=mi.noon:i===0?l=mi.midnight:l=i/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(t,s,r){const i=t.getHours();let l;switch(i>=17?l=mi.evening:i>=12?l=mi.afternoon:i>=4?l=mi.morning:l=mi.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let i=t.getHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return fr.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):fr.H(t,s)},K:function(t,s,r){const i=t.getHours()%12;return s==="Ko"?r.ordinalNumber(i,{unit:"hour"}):nt(i,s.length)},k:function(t,s,r){let i=t.getHours();return i===0&&(i=24),s==="ko"?r.ordinalNumber(i,{unit:"hour"}):nt(i,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):fr.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):fr.s(t,s)},S:function(t,s){return fr.S(t,s)},X:function(t,s,r){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(s){case"X":return Rv(i);case"XXXX":case"XX":return en(i);case"XXXXX":case"XXX":default:return en(i,":")}},x:function(t,s,r){const i=t.getTimezoneOffset();switch(s){case"x":return Rv(i);case"xxxx":case"xx":return en(i);case"xxxxx":case"xxx":default:return en(i,":")}},O:function(t,s,r){const i=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Ov(i,":");case"OOOO":default:return"GMT"+en(i,":")}},z:function(t,s,r){const i=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Ov(i,":");case"zzzz":default:return"GMT"+en(i,":")}},t:function(t,s,r){const i=Math.trunc(+t/1e3);return nt(i,s.length)},T:function(t,s,r){return nt(+t,s.length)}};function Ov(t,s=""){const r=t>0?"-":"+",i=Math.abs(t),l=Math.trunc(i/60),c=i%60;return c===0?r+String(l):r+String(l)+s+nt(c,2)}function Rv(t,s){return t%60===0?(t>0?"-":"+")+nt(Math.abs(t)/60,2):en(t,s)}function en(t,s=""){const r=t>0?"-":"+",i=Math.abs(t),l=nt(Math.trunc(i/60),2),c=nt(i%60,2);return r+l+s+c}const Pv=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},P1=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},jM=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],i=r[1],l=r[2];if(!l)return Pv(t,s);let c;switch(i){case"P":c=s.dateTime({width:"short"});break;case"PP":c=s.dateTime({width:"medium"});break;case"PPP":c=s.dateTime({width:"long"});break;case"PPPP":default:c=s.dateTime({width:"full"});break}return c.replace("{{date}}",Pv(i,s)).replace("{{time}}",P1(l,s))},wM={p:P1,P:jM},NM=/^D+$/,_M=/^Y+$/,SM=["D","DD","YY","YYYY"];function CM(t){return NM.test(t)}function EM(t){return _M.test(t)}function TM(t,s,r){const i=kM(t,s,r);if(console.warn(i),SM.includes(t))throw new RangeError(i)}function kM(t,s,r){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${i} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const AM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DM=/^'([^]*?)'?$/,OM=/''/g,RM=/[a-zA-Z]/;function es(t,s,r){var g,y,v,N,_,j,C,M;const i=Od(),l=(r==null?void 0:r.locale)??i.locale??gM,c=(r==null?void 0:r.firstWeekContainsDate)??((y=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((N=(v=i.locale)==null?void 0:v.options)==null?void 0:N.firstWeekContainsDate)??1,u=(r==null?void 0:r.weekStartsOn)??((j=(_=r==null?void 0:r.locale)==null?void 0:_.options)==null?void 0:j.weekStartsOn)??i.weekStartsOn??((M=(C=i.locale)==null?void 0:C.options)==null?void 0:M.weekStartsOn)??0,m=vs(t,r==null?void 0:r.in);if(!z5(m))throw new RangeError("Invalid time value");let h=s.match(MM).map(S=>{const A=S[0];if(A==="p"||A==="P"){const E=wM[A];return E(S,l.formatLong)}return S}).join("").match(AM).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const A=S[0];if(A==="'")return{isToken:!1,value:PM(S)};if(Dv[A])return{isToken:!0,value:S};if(A.match(RM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:S}});l.localize.preprocessor&&(h=l.localize.preprocessor(m,h));const f={firstWeekContainsDate:c,weekStartsOn:u,locale:l};return h.map(S=>{if(!S.isToken)return S.value;const A=S.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&EM(A)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&CM(A))&&TM(A,s,String(t));const E=Dv[A[0]];return E(m,A,l.localize,f)}).join("")}function PM(t){const s=t.match(DM);return s?s[1].replace(OM,"'"):t}function LM(t,s){return+vs(t)>+vs(s)}function zM(t,s,r){return M5(t,-1,r)}const $M={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},BM=(t,s,r)=>{let i;const l=$M[t];return typeof l=="string"?i=l:s===1?i=l.one:i=l.other.replace("{{count}}",String(s)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"em "+i:"h "+i:i},UM={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},VM={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},qM={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},IM={date:Ci({formats:UM,defaultWidth:"full"}),time:Ci({formats:VM,defaultWidth:"full"}),dateTime:Ci({formats:qM,defaultWidth:"full"})},FM={lastWeek:t=>{const s=t.getDay();return"'"+(s===0||s===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},HM=(t,s,r,i)=>{const l=FM[t];return typeof l=="function"?l(s):l},GM={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},YM={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},KM={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},XM={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},WM={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},QM={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},ZM=(t,s)=>{const r=Number(t);return(s==null?void 0:s.unit)==="week"?r+"":r+""},JM={ordinalNumber:ZM,era:ua({values:GM,defaultWidth:"wide"}),quarter:ua({values:YM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ua({values:KM,defaultWidth:"wide"}),day:ua({values:XM,defaultWidth:"wide"}),dayPeriod:ua({values:WM,defaultWidth:"wide",formattingValues:QM,defaultFormattingWidth:"wide"})},eD=/^(\d+)[o]?/i,tD=/\d+/i,sD={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},aD={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},rD={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},nD={any:[/1/i,/2/i,/3/i,/4/i]},iD={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},oD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},lD={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},cD={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},dD={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},uD={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},mD={ordinalNumber:O1({matchPattern:eD,parsePattern:tD,valueCallback:t=>parseInt(t,10)}),era:ma({matchPatterns:sD,defaultMatchWidth:"wide",parsePatterns:aD,defaultParseWidth:"any"}),quarter:ma({matchPatterns:rD,defaultMatchWidth:"wide",parsePatterns:nD,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ma({matchPatterns:iD,defaultMatchWidth:"wide",parsePatterns:oD,defaultParseWidth:"any"}),day:ma({matchPatterns:lD,defaultMatchWidth:"wide",parsePatterns:cD,defaultParseWidth:"any"}),dayPeriod:ma({matchPatterns:dD,defaultMatchWidth:"any",parsePatterns:uD,defaultParseWidth:"any"})},ds={code:"pt-BR",formatDistance:BM,formatLong:IM,formatRelative:HM,localize:JM,match:mD,options:{weekStartsOn:0,firstWeekContainsDate:1}},hD=()=>{const t=Sr(),{orders:s,inventory:r,notifications:i}=_t(),{user:l}=Kt(),c=s.filter(y=>y.status==="delivered"&&es(y.updatedAt,"yyyy-MM-dd")===es(new Date,"yyyy-MM-dd")),u=c.reduce((y,v)=>y+v.total,0),m=s.filter(y=>y.status==="pending").length,h=r.filter(y=>y.currentStock<=y.minStock).length,f=(l==null?void 0:l.email)==="demo@clubmanager.com",g=[{title:"Faturamento Hoje",value:`R$ ${u.toFixed(2)}`,icon:Yt,color:"text-green-600",bgColor:"bg-green-100"},{title:"Pedidos Pendentes",value:m,icon:Vt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Vendas Hoje",value:c.length,icon:hl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Estoque Baixo",value:h,icon:As,color:"text-red-600",bgColor:"bg-red-100"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:["Dashboard Executivo",f&&e.jsx("span",{className:"ml-3 text-lg text-green-600 font-normal",children:" Modo Demo Ativo"})]}),e.jsx("p",{className:"text-gray-600",children:"Viso geral das operaes do clube"})]}),f&&e.jsxs(Ne.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-gradient-to-r from-green-500 to-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[e.jsx(xd,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Teste todas as funcionalidades!"})]})]})}),f&&e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-gradient-to-r from-blue-50 to-green-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-full",children:e.jsx(xd,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:" Bem-vindo ao ClubManager Demo!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Explore todos os mdulos e funcionalidades do sistema. Voc pode criar pedidos, gerenciar a cozinha, controlar estoque e muito mais!"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(da,{to:"/bar",className:"flex items-center justify-between p-3 bg-white rounded-lg border border-blue-200 hover:border-blue-400 transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vf,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Testar Mdulo Bar"})]}),e.jsx(wv,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors"})]}),e.jsxs(da,{to:"/kitchen",className:"flex items-center justify-between p-3 bg-white rounded-lg border border-green-200 hover:border-green-400 transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ff,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Testar Mdulo Cozinha"})]}),e.jsx(wv,{className:"w-4 h-4 text-gray-400 group-hover:text-green-600 transition-colors"})]})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((y,v)=>{const N=y.title==="Estoque Baixo";return e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:v*.1},className:`bg-white rounded-lg shadow-md p-6 ${N?"cursor-pointer hover:shadow-lg transition-shadow":""}`,onClick:N?()=>t("/inventory/estoque-baixo"):void 0,whileHover:N?{scale:1.02}:{},whileTap:N?{scale:.98}:{},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:y.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:y.value})]}),e.jsx("div",{className:`p-3 rounded-full ${y.bgColor}`,children:e.jsx(y.icon,{className:`w-6 h-6 ${y.color}`})})]})},y.title)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pedidos Recentes"}),e.jsxs("div",{className:"space-y-3",children:[s.slice(0,5).map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:y.tableNumber?`Mesa ${y.tableNumber}`:"Balco"}),e.jsx("p",{className:"text-sm text-gray-600",children:es(y.createdAt,"HH:mm",{locale:ds})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-800",children:["R$ ",y.total.toFixed(2)]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${y.status==="pending"?"bg-yellow-100 text-yellow-800":y.status==="preparing"?"bg-blue-100 text-blue-800":y.status==="ready"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:y.status==="pending"?"Pendente":y.status==="preparing"?"Preparando":y.status==="ready"?"Pronto":"Entregue"})]})]},y.id)),s.length===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhum pedido ainda"}),f&&e.jsx(da,{to:"/bar",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Criar primeiro pedido "})]})]})]}),e.jsxs(Ne.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Alertas de Estoque"}),e.jsxs("div",{className:"space-y-3",children:[r.filter(y=>y.currentStock<=y.minStock).slice(0,5).map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:y.name}),e.jsx("p",{className:"text-sm text-gray-600",children:y.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-red-600",children:[y.currentStock," ",y.unit]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Mn: ",y.minStock]})]})]},y.id)),r.filter(y=>y.currentStock<=y.minStock).length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Todos os itens com estoque adequado"})]})]})]}),e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Mdulos Disponveis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(da,{to:"/bar",className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(vf,{className:"w-5 h-5 text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-800 group-hover:text-blue-600 transition-colors",children:"Mdulo Bar"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gesto completa de pedidos, comandas e vendas do bar"})]}),e.jsxs(da,{to:"/cash",className:"p-4 border border-gray-200 rounded-lg hover:border-green-300 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Yt,{className:"w-5 h-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-800 group-hover:text-green-600 transition-colors",children:"Gesto de Caixa"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Controle financeiro, fechamento de caixa e relatrios"})]}),e.jsxs(da,{to:"/kitchen",className:"p-4 border border-gray-200 rounded-lg hover:border-orange-300 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ff,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-gray-800 group-hover:text-orange-600 transition-colors",children:"Mdulo Cozinha"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Controle de cardpio, pedidos e gesto da cozinha"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(un,{className:"w-5 h-5 text-gray-400"}),e.jsx("h4",{className:"font-medium text-gray-500",children:"Mdulos Futuros"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Quadras, Piscina, Eventos, RH e mais"})]})]})]})]})},L1=({onCustomerSelected:t,onClose:s})=>{const[r,i]=b.useState({phone:"",name:"",email:""}),[l,c]=b.useState(null),[u,m]=b.useState(!1),[h,f]=b.useState(!1),[g,y]=b.useState(null),v=async S=>{if(!(S.length<10)){f(!0),y(null);try{const{data:A,error:E}=await W.rpc("get_bar_customer_by_phone",{customer_phone:S});if(E)throw E;if(A&&A.length>0){const w=A[0];c(w),i({phone:w.phone,name:w.name,email:w.email||""})}else c(null),i(w=>({...w,name:"",email:""}))}catch(A){console.error("Erro ao buscar cliente:",A),y("Erro ao buscar cliente")}finally{f(!1)}}},N=S=>{const A=S.replace(/\D/g,"");return A.length<=11?A.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):S},_=S=>{const A=S.target.value,E=N(A);i(O=>({...O,phone:E}));const w=A.replace(/\D/g,"");w.length===11?v(w):c(null)},j=async()=>{m(!0),y(null);try{const S=r.phone.replace(/\D/g,""),{data:A,error:E}=await W.from("bar_customers").insert({phone:S,name:r.name,email:r.email||null,status:"active",is_vip:!1,loyalty_points:0,credit_limit:0,current_balance:0}).select().single();if(E)throw E;t(A)}catch(S){console.error("Erro ao criar cliente:",S),y("Erro ao criar cliente")}finally{m(!1)}},C=()=>{l&&t(l)},M=S=>{if(S.preventDefault(),!r.phone||!r.name){y("Telefone e nome so obrigatrios");return}l?C():j()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?"Cliente Encontrado":"Cadastro de Cliente"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:""})]}),g&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:g}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r.phone,onChange:_,placeholder:"(11) 99999-9999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:15,required:!0}),h&&e.jsx("div",{className:"absolute right-3 top-2.5",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome *"}),e.jsx("input",{type:"text",value:r.name,onChange:S=>i(A=>({...A,name:S.target.value})),placeholder:"Nome completo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!!l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (opcional)"}),e.jsx("input",{type:"email",value:r.email,onChange:S=>i(A=>({...A,email:S.target.value})),placeholder:"email@exemplo.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!!l})]}),l&&e.jsx("div",{className:"p-3 bg-green-100 border border-green-400 rounded",children:e.jsxs("p",{className:"text-green-700 text-sm",children:[e.jsx("strong",{children:"Cliente encontrado!"}),e.jsx("br",{}),"ltima visita: ",l.last_visit?new Date(l.last_visit).toLocaleDateString("pt-BR"):"Primeira visita",e.jsx("br",{}),"Pontos de fidelidade: ",l.loyalty_points,l.is_vip&&e.jsx("span",{className:"ml-2 text-yellow-600",children:" VIP"})]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:u||!r.phone||!r.name,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processando..."]}):l?"Selecionar Cliente":"Cadastrar Cliente"})]})]})]})})},fD=({isOpen:t,onClose:s,menuItems:r})=>{const{addOrder:i}=_t(),{user:l}=Kt(),[c,u]=b.useState([]),[m,h]=b.useState(""),[f,g]=b.useState(""),[y,v]=b.useState(!1),[N,_]=b.useState(null),[j,C]=b.useState(!1),M=L=>{if(c.find(H=>H.menuItemId===L.id))u(H=>H.map(B=>B.menuItemId===L.id?{...B,quantity:B.quantity+1}:B));else{const H={id:`item-${Date.now()}`,menuItemId:L.id,quantity:1,price:L.price};u(B=>[...B,H])}},S=L=>{u(V=>V.filter(H=>H.menuItemId!==L))},A=(L,V)=>{if(V<=0){S(L);return}u(H=>H.map(B=>B.menuItemId===L?{...B,quantity:V}:B))},E=c.reduce((L,V)=>L+V.price*V.quantity,0),w=L=>{_(L),C(!1)},O=async L=>{if(L.preventDefault(),!(c.length===0||y)){if(!N){alert("Por favor, selecione um cliente antes de finalizar o pedido.");return}v(!0);try{await i({tableNumber:m||void 0,items:c.map(({id:V,...H})=>H),status:"pending",employeeId:l.id,customerId:N.id,notes:f||void 0}),u([]),h(""),g(""),_(null),s()}catch(V){console.error("Falha ao criar o pedido:",V)}finally{v(!1)}}};return e.jsx(fn,{children:t&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:[e.jsxs(Ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Novo Pedido"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(it,{size:24})})]}),e.jsxs("div",{className:"flex h-[70vh]",children:[e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Cardpio"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(L=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:L.name}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",L.price.toFixed(2)]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:L.description}),e.jsx("button",{onClick:()=>M(L),disabled:!L.available||y,className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:L.available?"Adicionar":"Indisponvel"})]},L.id))})]}),e.jsxs("div",{className:"w-1/3 bg-gray-50 p-6 border-l border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pedido"}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),N?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:N.name}),e.jsx("p",{className:"text-sm text-green-600",children:N.phone}),N.is_vip&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 mt-1",children:" VIP"})]}),e.jsx("button",{type:"button",onClick:()=>_(null),className:"text-green-600 hover:text-green-800",disabled:y,children:e.jsx(it,{size:16})})]})}):e.jsxs("button",{type:"button",onClick:()=>C(!0),className:"w-full flex items-center justify-center px-3 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors",disabled:y,children:[e.jsx(Js,{size:20,className:"mr-2"}),"Selecionar Cliente"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero da Mesa"}),e.jsx("input",{type:"text",value:m,onChange:L=>h(L.target.value),placeholder:"Ex: 5",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:y})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:c.map(L=>{const V=r.find(H=>H.id===L.menuItemId);return e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:V==null?void 0:V.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["R$ ",L.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>A(L.menuItemId,L.quantity-1),className:"text-gray-400 hover:text-gray-600",disabled:y,children:e.jsx(Ri,{size:16})}),e.jsx("span",{className:"w-8 text-center",children:L.quantity}),e.jsx("button",{type:"button",onClick:()=>A(L.menuItemId,L.quantity+1),className:"text-gray-400 hover:text-gray-600",disabled:y,children:e.jsx(ks,{size:16})})]})]},L.id)})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:f,onChange:L=>g(L.target.value),placeholder:"Observaes especiais...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:y})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total:"}),e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["R$ ",E.toFixed(2)]})]}),e.jsx("button",{type:"submit",disabled:c.length===0||y||!N,className:"w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed transition-colors",children:y?"Confirmando...":"Confirmar Pedido"})]})]})]})]})]}),j&&e.jsx(L1,{onCustomerSelected:w,onClose:()=>C(!1)})]})})},pD=({order:t,menuItems:s,hasMultipleOrders:r=!1,orderNumber:i})=>{const{updateOrderStatus:l}=_t(),c=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"preparing":return"bg-blue-100 text-blue-800 border-blue-200";case"ready":return"bg-green-100 text-green-800 border-green-200";case"delivered":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=y=>{switch(y){case"pending":return"Pendente";case"preparing":return"Preparando";case"ready":return"Pronto";case"delivered":return"Entregue";case"cancelled":return"Cancelado";default:return y}},h=(y=>{switch(y){case"pending":return"preparing";case"preparing":return"ready";case"ready":return"delivered";default:return null}})(t.status),f=y=>y.id.startsWith("balcao-"),g=y=>y.id.startsWith("comanda-");return e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow ${r?"ring-2 ring-orange-300 ring-offset-2":""} ${f(t)?"border-green-400 bg-green-50 shadow-lg":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wl,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-800",children:t.tableNumber?`Mesa ${t.tableNumber}`:"Balco"}),i&&e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",i]}),f(t)&&e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:" PAGO"}),g(t)&&e.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"AGUARDA PAGTO"})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${c(t.status)}`,children:u(t.status)})]}),e.jsx("div",{className:"space-y-2 mb-4",children:t.items.map(y=>{const v=s.find(N=>N.id===y.menuItemId);return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[y.quantity,"x ",v==null?void 0:v.name]}),e.jsxs("span",{className:"text-gray-800",children:["R$ ",(y.price*y.quantity).toFixed(2)]})]},y.id)})}),t.notes&&e.jsx("div",{className:"mb-4 p-2 bg-yellow-50 rounded border border-yellow-200",children:e.jsx("p",{className:"text-xs text-yellow-800",children:t.notes})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Vt,{size:12}),e.jsx("span",{children:es(t.createdAt,"HH:mm",{locale:ds})})]}),e.jsxs("span",{className:"font-medium text-gray-800",children:["R$ ",t.total.toFixed(2)]})]}),h&&e.jsxs("button",{onClick:()=>l(t.id,h),className:`w-full py-2 rounded-lg text-sm font-medium transition-colors ${f(t)?t.status==="pending"?"bg-green-600 text-white hover:bg-green-700":t.status==="preparing"?"bg-green-700 text-white hover:bg-green-800":"bg-green-800 text-white hover:bg-green-900":g(t)?t.status==="pending"?"bg-yellow-600 text-white hover:bg-yellow-700":t.status==="preparing"?"bg-yellow-700 text-white hover:bg-yellow-800":"bg-yellow-800 text-white hover:bg-yellow-900":t.status==="pending"?"bg-blue-600 text-white hover:bg-blue-700":t.status==="preparing"?"bg-blue-700 text-white hover:bg-blue-800":"bg-blue-800 text-white hover:bg-blue-900"}`,children:[h==="preparing"&&"Iniciar Preparo",h==="ready"&&"Marcar como Pronto",h==="delivered"&&"Marcar como Entregue"]})]})},gD=()=>{const{orders:t,barOrders:s,menuItems:r}=_t(),[i,l]=b.useState(!1),[c,u]=b.useState("all"),[m,h]=b.useState(""),[f,g]=b.useState("all"),y=r,N=(()=>{const S=new Map;return s.forEach(A=>{const E=A.tableNumber||"Balco";S.has(E)||S.set(E,[]),S.get(E).push(A)}),S})(),_=S=>(N.get(S)||[]).length>1,j=S=>S.id.slice(-4).toUpperCase(),C=s.filter(S=>{var O,L;const A=c==="all"||S.status===c,E=f==="all"||(S.tableNumber||"Balco")===f,w=((O=S.tableNumber)==null?void 0:O.toLowerCase().includes(m.toLowerCase()))||S.id.toLowerCase().includes(m.toLowerCase())||((L=S.notes)==null?void 0:L.toLowerCase().includes(m.toLowerCase()));return A&&E&&w}),M=s.filter(S=>S.status==="delivered").reduce((S,A)=>S+A.total,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mdulo Bar"}),e.jsx("p",{className:"text-gray-600",children:"Gesto completa de pedidos e vendas"})]}),e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ks,{size:20}),e.jsx("span",{children:"Novo Pedido"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Receita Total"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["R$ ",M.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Pedidos Hoje"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.length})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Pedidos Pendentes"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:s.filter(S=>S.status==="pending").length})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Pedidos"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[Array.from(N.entries()).filter(([S,A])=>A.length>1).length>0&&e.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:[Array.from(N.entries()).filter(([S,A])=>A.length>1).length," mesa(s) com mltiplos pedidos"]}),f!=="all"&&e.jsxs("button",{onClick:()=>g("all"),className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[e.jsxs("span",{children:["Filtro: ",f]}),e.jsx("span",{className:"text-blue-600",children:""})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(qa,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar pedidos...",value:m,onChange:S=>h(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:c,onChange:S=>u(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"pending",children:"Pendente"}),e.jsx("option",{value:"preparing",children:"Preparando"}),e.jsx("option",{value:"ready",children:"Pronto"}),e.jsx("option",{value:"delivered",children:"Entregue"})]})]})]}),Array.from(N.entries()).filter(([S,A])=>A.length>1).length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:" Mesas com Mltiplos Pedidos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(N.entries()).filter(([S,A])=>A.length>1).map(([S,A])=>e.jsxs("button",{onClick:()=>g(S),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors hover:shadow-md transform hover:scale-105 ${f===S?"bg-orange-400 text-white":"bg-orange-200 text-orange-800 hover:bg-orange-300"}`,title:`Filtrar pedidos da ${S}`,children:["Mesa ",S,": ",A.length," pedidos"]},S))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(S=>e.jsx(pD,{order:S,menuItems:r,hasMultipleOrders:_(S.tableNumber||"Balco"),orderNumber:j(S)},S.id))}),C.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum pedido encontrado"})})]}),i&&e.jsx(fD,{isOpen:i,onClose:()=>l(!1),menuItems:y})]})},xD=()=>{const[t,s]=b.useState([]),[r,i]=b.useState(!0),[l,c]=b.useState(""),[u,m]=b.useState("all"),[h,f]=b.useState(!1),[g,y]=b.useState(null),[v,N]=b.useState(!1),_=async()=>{i(!0);try{const{data:w,error:O}=await W.from("bar_customers").select("*").order("created_at",{ascending:!1});if(O)throw O;s(w||[])}catch(w){console.error("Erro ao carregar clientes:",w)}finally{i(!1)}};b.useEffect(()=>{_()},[]);const j=t.filter(w=>{const O=w.name.toLowerCase().includes(l.toLowerCase())||w.phone.includes(l)||w.email&&w.email.toLowerCase().includes(l.toLowerCase()),L=u==="all"||w.status===u;return O&&L}),C={total:t.length,active:t.filter(w=>w.status==="active").length,vip:t.filter(w=>w.is_vip).length,totalLoyaltyPoints:t.reduce((w,O)=>w+O.loyalty_points,0)},M=w=>{s(O=>[w,...O]),f(!1)},S=w=>{y(w),N(!0)},A=w=>{const O=w.replace(/\D/g,"");return O.length===11?`(${O.slice(0,2)}) ${O.slice(2,7)}-${O.slice(7)}`:w},E=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Clientes do Bar"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie os clientes e suas informaes"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ks,{size:20}),e.jsx("span",{children:"Novo Cliente"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Clientes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.total})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(pd,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clientes Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:C.active})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(Tr,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clientes VIP"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:C.vip})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(yf,{className:"h-6 w-6 text-yellow-600"})})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pontos Totais"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:C.totalLoyaltyPoints.toLocaleString()})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(Yt,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, telefone ou email...",value:l,onChange:w=>c(w.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs("select",{value:u,onChange:w=>m(w.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"}),e.jsx("option",{value:"blocked",children:"Bloqueado"})]})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando clientes..."})]}):j.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(pd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum cliente encontrado"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pontos"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltima Visita"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(w=>e.jsxs(Ne.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:w.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name}),w.is_vip&&e.jsx(yf,{className:"ml-2 h-4 w-4 text-yellow-500 fill-current"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:w.cpf||"CPF no informado"})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:A(w.phone)}),e.jsx("div",{className:"text-sm text-gray-500",children:w.email||"Email no informado"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w.status==="active"?"bg-green-100 text-green-800":w.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:w.status==="active"?"Ativo":w.status==="inactive"?"Inativo":"Bloqueado"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[w.loyalty_points.toLocaleString()," pts"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w.last_visit?new Date(w.last_visit).toLocaleDateString("pt-BR"):"Nunca"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>S(w),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Is,{size:16})}),e.jsx("button",{className:"text-gray-600 hover:text-gray-900",children:e.jsx(Nl,{size:16})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:e.jsx(_l,{size:16})})]})})]},w.id))})]})})}),h&&e.jsx(L1,{onCustomerSelected:M,onClose:()=>f(!1)}),v&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Detalhes do Cliente"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:A(g.phone)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.email||"No informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CPF"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.cpf||"No informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g.status==="active"?"bg-green-100 text-green-800":g.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:g.status==="active"?"Ativo":g.status==="inactive"?"Inativo":"Bloqueado"}),g.is_vip&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:" VIP"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pontos de Fidelidade"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[g.loyalty_points.toLocaleString()," pontos"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Limite de Crdito"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:E(g.credit_limit)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Saldo Atual"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:E(g.current_balance)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ltima Visita"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.last_visit?new Date(g.last_visit).toLocaleDateString("pt-BR"):"Nunca"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cadastrado em"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(g.created_at).toLocaleDateString("pt-BR")})]})]}),g.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaes"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g.notes})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Fechar"})})]})})]})},yD=()=>{const[t,s]=b.useState([]),[r,i]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{i(!0),c(null);const{data:_,error:j}=await W.from("bar_employees").select("*").order("created_at",{ascending:!1});if(j)throw console.error("Erro na consulta bar_employees:",j),new Error(`Erro ao consultar banco de dados: ${j.message}`);const C=(_||[]).map(M=>{const S=M.notes||"",A=S.match(/Nome: ([^,]+)/),E=S.match(/CPF: ([^,]+)/),w=S.match(/Email: ([^,]+)/),O=S.match(/Telefone: ([^,]+)/);return{id:M.id,employee_id:M.employee_id||"",bar_role:M.bar_role,shift_preference:M.shift_preference,specialties:M.specialties||[],commission_rate:M.commission_rate||0,status:M.is_active?"active":"inactive",start_date:M.start_date,end_date:M.end_date,notes:M.notes,created_at:M.created_at,updated_at:M.updated_at,employee:{id:M.id,name:A?A[1]:"Nome no informado",cpf:E?E[1]:void 0,email:w?w[1]:void 0,phone:O?O[1]:void 0,hire_date:M.start_date,status:M.is_active?"active":"inactive"}}});console.log("Funcionrios carregados:",C.length),s(C)}catch(_){console.error("Erro ao buscar funcionrios:",_),c(_ instanceof Error?_.message:"Erro ao buscar funcionrios")}finally{i(!1)}},[]),m=b.useCallback(async _=>{try{c(null);const{data:j,error:C}=await W.from("bar_employees").insert([{employee_id:null,bar_role:_.bar_role,shift_preference:_.shift_preference||"qualquer",specialties:_.specialties||[],commission_rate:_.commission_rate||0,is_active:!0,start_date:new Date().toISOString().split("T")[0],notes:`Nome: ${_.name}${_.cpf?`, CPF: ${_.cpf}`:""}${_.email?`, Email: ${_.email}`:""}${_.phone?`, Telefone: ${_.phone}`:""}${_.notes?`, Observaes: ${_.notes}`:""}`}]).select().single();if(C)throw C;return await u(),j.id}catch(j){console.error("Erro ao criar funcionrio:",j);const C=j instanceof Error?j.message:"Erro ao criar funcionrio";throw c(C),new Error(C)}},[u]),h=b.useCallback(async(_,j)=>{try{c(null);const{data:C,error:M}=await W.from("bar_employees").select("notes").eq("id",_).single();if(M)throw M;let S=(C==null?void 0:C.notes)||"";j.name!==void 0&&(S=S.replace(/Nome: [^,]+/,`Nome: ${j.name}`),S.includes("Nome:")||(S=`Nome: ${j.name}, ${S}`)),j.cpf!==void 0&&(S=S.replace(/CPF: [^,]+/,`CPF: ${j.cpf}`),!S.includes("CPF:")&&j.cpf&&(S+=`, CPF: ${j.cpf}`)),j.email!==void 0&&(S=S.replace(/Email: [^,]+/,`Email: ${j.email}`),!S.includes("Email:")&&j.email&&(S+=`, Email: ${j.email}`)),j.phone!==void 0&&(S=S.replace(/Telefone: [^,]+/,`Telefone: ${j.phone}`),!S.includes("Telefone:")&&j.phone&&(S+=`, Telefone: ${j.phone}`));const A={updated_at:new Date().toISOString()};j.bar_role!==void 0&&(A.bar_role=j.bar_role),j.shift_preference!==void 0&&(A.shift_preference=j.shift_preference),j.specialties!==void 0&&(A.specialties=j.specialties),j.commission_rate!==void 0&&(A.commission_rate=j.commission_rate),j.is_active!==void 0&&(A.is_active=j.is_active),j.notes!==void 0&&(S+=j.notes?`, Observaes: ${j.notes}`:""),A.notes=S;const{error:E}=await W.from("bar_employees").update(A).eq("id",_);if(E)throw E;await u()}catch(C){console.error("Erro ao atualizar funcionrio:",C);const M=C instanceof Error?C.message:"Erro ao atualizar funcionrio";throw c(M),new Error(M)}},[u]),f=b.useCallback(async _=>{try{await h(_,{is_active:!1})}catch(j){throw console.error("Erro ao desativar funcionrio:",j),j}},[h]),g=b.useCallback(async _=>{try{await h(_,{is_active:!0})}catch(j){throw console.error("Erro ao reativar funcionrio:",j),j}},[h]),y=b.useCallback(async _=>{try{const{data:j,error:C}=await W.from("bar_employees").select("*").eq("id",_).single();if(C)throw C;if(!j)return null;const M=j.notes||"",S=M.match(/Nome: ([^,]+)/),A=M.match(/CPF: ([^,]+)/),E=M.match(/Email: ([^,]+)/),w=M.match(/Telefone: ([^,]+)/);return{id:j.id,employee_id:j.employee_id||"",bar_role:j.bar_role,shift_preference:j.shift_preference,specialties:j.specialties||[],commission_rate:j.commission_rate||0,status:j.is_active?"active":"inactive",start_date:j.start_date||"",end_date:j.end_date||void 0,notes:j.notes||void 0,created_at:j.created_at||"",updated_at:j.updated_at||"",employee:{id:j.id,name:S?S[1]:"Nome no informado",cpf:A?A[1]:void 0,email:E?E[1]:void 0,phone:w?w[1]:void 0,hire_date:j.start_date||void 0,status:j.is_active?"active":"inactive"}}}catch(j){return console.error("Erro ao buscar funcionrio:",j),null}},[]),v=b.useCallback((_="",j="all",C="all")=>t.filter(M=>{var O,L,V;const S=M.employee;if(!S)return!1;const A=S.name.toLowerCase().includes(_.toLowerCase())||((O=S.phone)==null?void 0:O.includes(_))||((L=S.email)==null?void 0:L.toLowerCase().includes(_.toLowerCase()))||((V=S.cpf)==null?void 0:V.includes(_)),E=j==="all"||M.bar_role===j,w=C==="all"||M.status===C;return A&&E&&w}),[t]),N=b.useCallback(()=>({total:t.length,active:t.filter(_=>_.status==="active").length,inactive:t.filter(_=>_.status==="inactive").length,byRole:{atendente:t.filter(_=>_.bar_role==="atendente").length,garcom:t.filter(_=>_.bar_role==="garcom").length,cozinheiro:t.filter(_=>_.bar_role==="cozinheiro").length,barman:t.filter(_=>_.bar_role==="barman").length,gerente:t.filter(_=>_.bar_role==="gerente").length}}),[t]);return b.useEffect(()=>{u()},[u]),{employees:t,loading:r,error:l,createEmployee:m,updateEmployee:h,deactivateEmployee:f,reactivateEmployee:g,getEmployeeById:y,filterEmployees:v,getStats:N,refetch:u}},bD=[{feature:"tables",level:"full"},{feature:"orders",level:"full"},{feature:"menu",level:"read"},{feature:"customers",level:"write"},{feature:"payments",level:"read"}],vr={waiter:{role:"waiter",description:"Garom - Atendimento e pedidos",permissions:[{id:"bar-view",module:"bar",action:"view"},{id:"bar-create-orders",module:"bar",action:"create",resource:"orders"},{id:"bar-edit-own-orders",module:"bar",action:"edit",resource:"own_orders"},{id:"customers-view",module:"customers",action:"view"},{id:"customers-create",module:"customers",action:"create"},{id:"app-garcom-access",module:"app-garcom",action:"access"},{id:"app-garcom-tables",module:"app-garcom",action:"manage",resource:"tables"},{id:"app-garcom-orders",module:"app-garcom",action:"manage",resource:"orders"}]},cook:{role:"cook",description:"Cozinheiro - Preparo e cozinha",permissions:[{id:"kitchen-view",module:"kitchen",action:"view"},{id:"kitchen-edit-status",module:"kitchen",action:"edit",resource:"order_status"},{id:"inventory-view",module:"inventory",action:"view"},{id:"bar-view-orders",module:"bar",action:"view",resource:"orders"}]},cashier:{role:"cashier",description:"Caixa - Pagamentos e fechamento",permissions:[{id:"cashier-view",module:"cashier",action:"view"},{id:"cashier-manage",module:"cashier",action:"manage"},{id:"bar-view-orders",module:"bar",action:"view",resource:"orders"},{id:"reports-view-daily",module:"reports",action:"view",resource:"daily_sales"}]},supervisor:{role:"supervisor",description:"Supervisor - Superviso operacional",permissions:[{id:"bar-manage",module:"bar",action:"manage"},{id:"kitchen-manage",module:"kitchen",action:"manage"},{id:"cashier-view",module:"cashier",action:"view"},{id:"reports-view",module:"reports",action:"view"},{id:"inventory-view",module:"inventory",action:"view"},{id:"customers-manage",module:"customers",action:"manage"}]},manager:{role:"manager",description:"Gerente - Gesto completa",permissions:[{id:"bar-manage",module:"bar",action:"manage"},{id:"kitchen-manage",module:"kitchen",action:"manage"},{id:"cashier-manage",module:"cashier",action:"manage"},{id:"reports-manage",module:"reports",action:"manage"},{id:"inventory-manage",module:"inventory",action:"manage"},{id:"customers-manage",module:"customers",action:"manage"},{id:"settings-view",module:"settings",action:"view"}]},admin:{role:"admin",description:"Administrador - Acesso total",permissions:[{id:"bar-manage",module:"bar",action:"manage"},{id:"kitchen-manage",module:"kitchen",action:"manage"},{id:"cashier-manage",module:"cashier",action:"manage"},{id:"reports-manage",module:"reports",action:"manage"},{id:"inventory-manage",module:"inventory",action:"manage"},{id:"customers-manage",module:"customers",action:"manage"},{id:"settings-manage",module:"settings",action:"manage"}]}},Lv=t=>({waiter:"Garom",cook:"Cozinheiro",cashier:"Caixa",supervisor:"Supervisor",manager:"Gerente",admin:"Administrador"})[t],vD=t=>({bar:"Bar/Atendimento",kitchen:"Cozinha",cashier:"Caixa",reports:"Relatrios",inventory:"Estoque",customers:"Clientes",settings:"Configuraes","app-garcom":"App Garom"})[t]||t,jD=t=>({view:"Visualizar",create:"Criar",edit:"Editar",delete:"Excluir",manage:"Gerenciar",access:"Acessar"})[t]||t,wD=t=>{const s=t.replace(/\D/g,"");if(s.length!==11||/^(\d)\1{10}$/.test(s))return!1;let r=0;for(let l=0;l<9;l++)r+=parseInt(s.charAt(l))*(10-l);let i=r*10%11;if((i===10||i===11)&&(i=0),i!==parseInt(s.charAt(9)))return!1;r=0;for(let l=0;l<10;l++)r+=parseInt(s.charAt(l))*(11-l);return i=r*10%11,(i===10||i===11)&&(i=0),i===parseInt(s.charAt(10))},ND=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),_D=t=>{const s=t.replace(/\D/g,"");return s.length===10||s.length===11},SD=t=>t.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),CD=t=>{const s=t.replace(/\D/g,"");return s.length===11?s.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):s.length===10?s.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):t},zv=t=>{var r,i,l;const s=[];return(r=t.name)!=null&&r.trim()?t.name.trim().length<2&&s.push({field:"name",message:"Nome deve ter pelo menos 2 caracteres",type:"format"}):s.push({field:"name",message:"Nome  obrigatrio",type:"required"}),(i=t.cpf)!=null&&i.trim()?wD(t.cpf)||s.push({field:"cpf",message:"CPF invlido",type:"format"}):s.push({field:"cpf",message:"CPF  obrigatrio",type:"required"}),(l=t.email)!=null&&l.trim()?ND(t.email)||s.push({field:"email",message:"Email invlido",type:"format"}):s.push({field:"email",message:"Email  obrigatrio",type:"required"}),t.phone&&!_D(t.phone)&&s.push({field:"phone",message:"Telefone invlido",type:"format"}),t.role||s.push({field:"role",message:"Funo  obrigatria",type:"required"}),t.hire_date?t.hire_date>new Date&&s.push({field:"hire_date",message:"Data de contratao no pode ser futura",type:"format"}):s.push({field:"hire_date",message:"Data de contratao  obrigatria",type:"required"}),s},ED=()=>{const[t,s]=b.useState({fields:[]}),r=b.useCallback(h=>{const f=zv(h);return s({fields:f,general:f.length>0?"Por favor, corrija os erros antes de continuar":void 0}),f.length===0},[]),i=b.useCallback((h,f,g)=>{const y={...g,[h]:f},N=zv(y).find(_=>_.field===h);return s(_=>({..._,fields:[..._.fields.filter(j=>j.field!==h),...N?[N]:[]]})),N||null},[]),l=b.useCallback(()=>{s({fields:[]})},[]),c=b.useCallback(h=>{s(f=>({...f,fields:f.fields.filter(g=>g.field!==h)}))},[]),u=b.useCallback(h=>t.fields.find(f=>f.field===h),[t.fields]),m=t.fields.length>0||!!t.general;return{errors:t,validateForm:r,validateField:i,clearErrors:l,clearFieldError:c,getFieldError:u,hasErrors:m}},TD=()=>{const[t,s]=b.useState([]);return b.useEffect(()=>{const c=localStorage.getItem("offline_employees");if(c)try{const u=JSON.parse(c);s(u)}catch(u){console.error("Erro ao carregar dados offline:",u)}},[]),{offlineEmployees:t,saveOffline:c=>{const u={...c,id:`offline_${Date.now()}`,_offline:!0,_timestamp:Date.now()},m=[...t,u];return s(m),localStorage.setItem("offline_employees",JSON.stringify(m)),u},syncOfflineData:async c=>{const u=[...t];for(const m of u)try{const{_offline:h,_timestamp:f,...g}=m;await c(g);const y=t.filter(v=>v.id!==m.id);s(y),localStorage.setItem("offline_employees",JSON.stringify(y)),console.log(` Funcionrio ${m.name} sincronizado`)}catch(h){console.error(` Erro ao sincronizar ${m.name}:`,h)}},clearOfflineData:()=>{s([]),localStorage.removeItem("offline_employees")},hasOfflineData:t.length>0}},_0=()=>{const[t,s]=b.useState(navigator.onLine),[r,i]=b.useState(!1);return b.useEffect(()=>{const l=()=>{s(!0),r&&console.log(" Conexo restaurada")},c=()=>{s(!1),i(!0),console.log(" Conexo perdida")};return window.addEventListener("online",l),window.addEventListener("offline",c),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",c)}},[r]),{isOnline:t,wasOffline:r}},kD=()=>{const[t,s]=b.useState(0),[r,i]=b.useState(!1),l=b.useCallback(async(u,m={maxRetries:2,retryDelay:3e3,timeoutDuration:45e3})=>{const{maxRetries:h,retryDelay:f,timeoutDuration:g}=m;for(let y=0;y<=h;y++)try{s(y),y>0&&(i(!0),await new Promise(_=>setTimeout(_,f)));const v=new Promise((_,j)=>setTimeout(()=>j(new Error(`Timeout na tentativa ${y+1}`)),g)),N=await Promise.race([u(),v]);return s(0),i(!1),N}catch(v){if(console.log(`Tentativa ${y+1} falhou:`,v),y===h||v instanceof Error&&!v.message.includes("Timeout"))throw s(0),i(!1),v}throw new Error("Todas as tentativas falharam")},[]),c=b.useCallback(()=>{s(0),i(!1)},[]);return{executeWithRetry:l,retryCount:t,isRetrying:r,reset:c}},z1=()=>{const[t,s]=b.useState({});b.useEffect(()=>{const u=localStorage.getItem("employee_custom_permissions");if(u)try{const m=JSON.parse(u);s(m)}catch(m){console.error("Erro ao carregar permisses customizadas:",m)}},[]);const r=b.useCallback((u,m)=>{const h={...t,[u]:m};s(h),localStorage.setItem("employee_custom_permissions",JSON.stringify(h))},[t]),i=b.useCallback((u,m)=>t[u]||m,[t]),l=b.useCallback(u=>!!t[u],[t]),c=b.useCallback(u=>{const m={...t};delete m[u],s(m),localStorage.setItem("employee_custom_permissions",JSON.stringify(m))},[t]);return{saveCustomPermissions:r,getEmployeePermissions:i,hasCustomPermissions:l,resetToDefaultPermissions:c}},sn=class sn{constructor(){Bc(this,"storageKey","local_employee_credentials")}static getInstance(){return sn.instance||(sn.instance=new sn),sn.instance}async saveEmployeeCredentials(s,r){try{const i=this.getStoredCredentials();if(i.some(h=>h.email===r.email))return{success:!1,error:`Email ${r.email} j est em uso`};if(i.some(h=>h.username===r.username))return{success:!1,error:`Nome de usurio ${r.username} j est em uso`};const u={employeeId:s.id||`temp_${Date.now()}`,email:r.email,username:r.username,password:r.password,temporaryPassword:r.temporaryPassword,createdAt:new Date().toISOString()},m=[...i,u];return localStorage.setItem(this.storageKey,JSON.stringify(m)),console.log(" Credenciais salvas localmente:",{email:r.email,username:r.username}),{success:!0,userId:u.employeeId,needsPasswordChange:r.temporaryPassword}}catch(i){return console.error(" Erro ao salvar credenciais localmente:",i),{success:!1,error:`Erro interno: ${i instanceof Error?i.message:"Erro desconhecido"}`}}}async checkEmailExists(s){return this.getStoredCredentials().some(i=>i.email===s)}async checkUsernameExists(s){return this.getStoredCredentials().some(i=>i.username===s)}async validateLogin(s,r){return this.getStoredCredentials().find(c=>(c.email===s||c.username===s)&&c.password===r)||null}listAllCredentials(){return this.getStoredCredentials()}async removeEmployeeCredentials(s){try{const i=this.getStoredCredentials().filter(l=>l.employeeId!==s);return localStorage.setItem(this.storageKey,JSON.stringify(i)),console.log(" Credenciais removidas localmente:",s),!0}catch(r){return console.error(" Erro ao remover credenciais:",r),!1}}async updatePassword(s,r,i=!1){try{const l=this.getStoredCredentials(),c=l.findIndex(u=>u.employeeId===s);return c===-1?!1:(l[c].password=r,l[c].temporaryPassword=i,localStorage.setItem(this.storageKey,JSON.stringify(l)),console.log(" Senha atualizada localmente:",s),!0)}catch(l){return console.error(" Erro ao atualizar senha:",l),!1}}clearAllCredentials(){localStorage.removeItem(this.storageKey),console.log(" Todas as credenciais locais foram removidas")}exportCredentials(){const s=this.getStoredCredentials();return JSON.stringify(s,null,2)}importCredentials(s){try{const r=JSON.parse(s);if(!Array.isArray(r))throw new Error("Formato invlido");return localStorage.setItem(this.storageKey,JSON.stringify(r)),console.log(" Credenciais importadas com sucesso"),!0}catch(r){return console.error(" Erro ao importar credenciais:",r),!1}}getStoredCredentials(){try{const s=localStorage.getItem(this.storageKey);return s?JSON.parse(s):[]}catch(s){return console.error(" Erro ao ler credenciais locais:",s),[]}}generateReport(){const s=this.getStoredCredentials();return`
 RELATRIO DE CREDENCIAIS LOCAIS
================================

Total de funcionrios: ${s.length}

Funcionrios cadastrados:
${s.map((i,l)=>`
${l+1}. ${i.username} (${i.email})
   - ID: ${i.employeeId}
   - Senha temporria: ${i.temporaryPassword?"Sim":"No"}
   - Criado em: ${new Date(i.createdAt).toLocaleString("pt-BR")}
`).join("")}

 IMPORTANTE: Estas credenciais so apenas para desenvolvimento local.
Em produo, use o Supabase Auth configurando a VITE_SUPABASE_SERVICE_ROLE_KEY.
    `.trim()}};Bc(sn,"instance");let Ei=sn;const an=class an{static getInstance(){return an.instance||(an.instance=new an),an.instance}async createEmployeeUser(s,r){try{if(console.log(" Criando usurio para funcionrio:",{email:r.email,username:r.username}),!qo){console.warn(" Service Role Key no configurada. Usando armazenamento local para desenvolvimento.");const h=await Ei.getInstance().saveEmployeeCredentials(s,r);return h.success&&console.log(" Credenciais salvas localmente com sucesso"),h}const{data:i,error:l}=await ob.auth.admin.createUser({email:r.email,password:r.password,email_confirm:!0,user_metadata:{username:r.username,employee_id:s.id,role:s.role,temporary_password:r.temporaryPassword,created_by:"system",created_at:new Date().toISOString()}});if(l)return console.error(" Erro ao criar usurio no Auth:",l),{success:!1,error:`Erro ao criar usurio: ${l.message}`};if(!i.user)return{success:!1,error:"Usurio no foi criado corretamente"};console.log(" Usurio criado no Auth:",i.user.id);const c=await this.createUserProfile(i.user.id,s,r);return c.success?((await this.createUserPermissions(i.user.id,s)).success||console.warn(" Erro ao criar permisses, mas usurio foi criado"),{success:!0,userId:i.user.id,needsPasswordChange:r.temporaryPassword}):c}catch(i){return console.error(" Erro geral ao criar usurio:",i),{success:!1,error:`Erro interno: ${i instanceof Error?i.message:"Erro desconhecido"}`}}}async createUserProfile(s,r,i){try{const{error:l}=await W.from("profiles").insert({id:s,email:i.email,username:i.username,full_name:r.name,employee_id:r.id,role:r.role,status:r.status,temporary_password:i.temporaryPassword,password_expires_at:i.temporaryPassword?new Date(Date.now()+6048e5).toISOString():null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return l?(console.error(" Erro ao criar perfil:",l),{success:!1,error:`Erro ao criar perfil: ${l.message}`}):(console.log(" Perfil criado com sucesso"),{success:!0})}catch(l){return console.error(" Erro ao criar perfil:",l),{success:!1,error:`Erro interno ao criar perfil: ${l instanceof Error?l.message:"Erro desconhecido"}`}}}async createUserPermissions(s,r){try{if(!r.permissions||r.permissions.length===0)return console.log(" Nenhuma permisso para criar"),{success:!0};const i=r.permissions.map(c=>({user_id:s,employee_id:r.id,module:c.module,action:c.action,resource:c.resource,granted_at:new Date().toISOString(),granted_by:"system"})),{error:l}=await W.from("user_permissions").insert(i);return l?(console.error(" Erro ao criar permisses:",l),{success:!1,error:`Erro ao criar permisses: ${l.message}`}):(console.log(" Permisses criadas com sucesso"),{success:!0})}catch(i){return console.error(" Erro ao criar permisses:",i),{success:!1,error:`Erro interno ao criar permisses: ${i instanceof Error?i.message:"Erro desconhecido"}`}}}async deleteAuthUser(s){}async updateEmployeeCredentials(s,r){try{const{data:i,error:l}=await W.from("profiles").select("id, email").eq("employee_id",s).single();if(l||!i)return{success:!1,error:"Usurio no encontrado"};if(r.email||r.password){const m={};r.email&&(m.email=r.email),r.password&&(m.password=r.password);const{error:h}=await ob.auth.admin.updateUserById(i.id,m);if(h)return{success:!1,error:`Erro ao atualizar credenciais: ${h.message}`}}const c={updated_at:new Date().toISOString()};r.email&&(c.email=r.email),r.username&&(c.username=r.username),r.temporaryPassword!==void 0&&(c.temporary_password=r.temporaryPassword,c.password_expires_at=r.temporaryPassword?new Date(Date.now()+7*24*60*60*1e3).toISOString():null);const{error:u}=await W.from("profiles").update(c).eq("id",i.id);return u?{success:!1,error:`Erro ao atualizar perfil: ${u.message}`}:{success:!0}}catch(i){return console.error(" Erro ao atualizar credenciais:",i),{success:!1,error:`Erro interno: ${i instanceof Error?i.message:"Erro desconhecido"}`}}}async checkEmailExists(s){try{if(!qo)return await Ei.getInstance().checkEmailExists(s);const{data:r,error:i}=await W.from("profiles").select("id").eq("email",s).limit(1);return i?(console.error("Erro ao verificar email:",i),!1):r&&r.length>0}catch(r){return console.error("Erro ao verificar email:",r),!1}}async checkUsernameExists(s){try{if(!qo)return await Ei.getInstance().checkUsernameExists(s);const{data:r,error:i}=await W.from("profiles").select("id").eq("username",s).limit(1);return i?(console.error("Erro ao verificar username:",i),!1):r&&r.length>0}catch(r){return console.error("Erro ao verificar username:",r),!1}}async forcePasswordChange(s){try{const{error:r}=await W.from("profiles").update({temporary_password:!0,password_expires_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("employee_id",s);return r?{success:!1,error:`Erro ao forar alterao de senha: ${r.message}`}:{success:!0}}catch(r){return{success:!1,error:`Erro interno: ${r instanceof Error?r.message:"Erro desconhecido"}`}}}};Bc(an,"instance");let bd=an;const AD=Object.freeze(Object.defineProperty({__proto__:null,EmployeeAuthService:bd},Symbol.toStringTag,{value:"Module"})),MD=({initialEmployee:t,onSave:s,onClose:r})=>{const{validateForm:i,errors:l,clearErrors:c}=ED(),{saveOffline:u}=TD(),{isOnline:m}=_0(),{executeWithRetry:h}=kD(),{saveCustomPermissions:f,getEmployeePermissions:g}=z1(),[y,v]=b.useState(null),[N,_]=b.useState({loading:!1,saving:!1,errors:{fields:[]},isDirty:!1,isValid:!1}),[j,C]=b.useState(()=>{const B={name:"",email:"",cpf:"",phone:"",role:"waiter",permissions:[],status:"active",hire_date:new Date,observations:""};return t?{...B,...t}:B});b.useEffect(()=>{_(B=>({...B,errors:l,isValid:!l.fields.length&&!l.general}))},[l]),b.useEffect(()=>{if(t){const B=t.permissions||[],K=t.id?g(t.id,B):B;C({name:"",email:"",cpf:"",phone:"",role:"waiter",permissions:[],status:"active",hire_date:new Date,observations:"",...t,permissions:K})}},[t,g]),b.useEffect(()=>{if(j.role&&!t&&(!j.permissions||j.permissions.length===0)){const B=vr[j.role];B&&C(K=>({...K,permissions:[...B.permissions]}))}},[j.role,t]);const M=b.useCallback(B=>{C(K=>({...K,...B})),_(K=>({...K,isDirty:!0}))},[]),S=b.useCallback((B,K)=>{M({[B]:K})},[M]),A=b.useCallback(B=>{C(K=>{const G=K.permissions||[],ae=G.some($=>$.id===B);let oe;if(ae)oe=G.filter($=>$.id!==B);else{const $=vr[K.role],T=$==null?void 0:$.permissions.find(R=>R.id===B);T?oe=[...G,T]:oe=G}return{...K,permissions:oe}}),_(K=>({...K,isDirty:!0}))},[]),E=async(B,K,G)=>{console.log("Configurando acesso mobile:",{employeeId:B,appName:K,permissions:G})},w=async(B,K)=>{if(!K||!K.system)return console.log(" Nenhuma credencial fornecida, pulando criao de usurio Auth"),{success:!0};const G=bd.getInstance();console.log(" Criando usurio de autenticao para funcionrio:",B.name);const ae=await G.createEmployeeUser(B,{email:K.system.email,password:K.system.password,username:K.system.username,temporaryPassword:K.system.temporaryPassword});if(!ae.success)throw new Error(`Erro ao criar usurio de autenticao: ${ae.error}`);return console.log(" Usurio de autenticao criado com sucesso"),ae},O=b.useCallback(async()=>{if(i(j)){_(B=>({...B,saving:!0}));try{const B=j;if(!m){const G=u(B);_(ae=>({...ae,isDirty:!1})),c(),_(ae=>({...ae,errors:{general:` Funcionrio ${B.name} salvo offline. Ser sincronizado quando a conexo for restaurada.`,fields:[]}})),setTimeout(()=>{r()},2e3);return}if(await h(()=>s(B,y),{maxRetries:t?1:2,retryDelay:3e3,timeoutDuration:t?6e4:45e3}),!t&&y)try{await w(B,y)}catch(G){console.error("Erro ao criar usurio de autenticao:",G),_(ae=>({...ae,errors:{general:`Funcionrio cadastrado, mas houve erro ao criar usurio de login: ${G instanceof Error?G.message:"Erro desconhecido"}`,fields:[]}}))}if(t&&B.id&&B.permissions&&f(B.id,B.permissions),j.role==="waiter"&&B.id)try{await E(B.id,"app-garcom",bD)}catch(G){console.warn("Erro ao configurar acesso mobile (no crtico):",G)}_(G=>({...G,isDirty:!1})),c(),r()}catch(B){console.error("Erro ao salvar funcionrio:",B);let K="Erro ao salvar funcionrio. Tente novamente.";if(B instanceof TypeError&&B.message.includes("fetch"))K="Erro de conexo. Os dados foram salvos offline e sero sincronizados quando a conexo for restaurada.",u(j),setTimeout(()=>{r()},3e3);else if(B instanceof Error&&B.message.includes("Timeout")){const G=!!t;K=`Operao demorou muito (${G?"60s":"45s"}). ${G?"A edio":"O cadastro"} pode ter sido processada mesmo assim. Verifique a lista de funcionrios e tente novamente se necessrio.`,G&&(u(employeeToSave),K+=" Os dados foram salvos offline como backup.")}else B instanceof Error&&B.message.includes("NetworkError")&&(K="Erro de rede. Os dados foram salvos offline.",u(j),setTimeout(()=>{r()},3e3));_(G=>({...G,errors:{general:K,fields:[]}}))}finally{_(B=>({...B,saving:!1}))}}},[j,i,s,r,c,m,u]),L=b.useCallback(()=>{N.isDirty&&!window.confirm("H alteraes no salvas. Deseja realmente cancelar?")||(c(),r())},[N.isDirty,c,r]),V=b.useCallback(()=>{C({name:"",email:"",cpf:"",phone:"",role:"waiter",permissions:[],status:"active",hire_date:new Date,observations:""}),_({loading:!1,saving:!1,errors:{fields:[]},isDirty:!1,isValid:!1}),c()},[c]),H=b.useCallback(B=>{v(B)},[]);return{employee:j,state:N,updateEmployee:M,updateField:S,togglePermission:A,handleSave:O,handleCancel:L,resetForm:V,setEmployeeCredentials:H}},DD=({employee:t,onUpdate:s,errors:r})=>{var u,m,h,f,g;const i=y=>r.fields.find(v=>v.field===y),l=y=>{const v=y.replace(/\D/g,"").slice(0,11);s("cpf",v)},c=y=>{const v=y.replace(/\D/g,"").slice(0,11);s("phone",v)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Js,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dados Pessoais"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),e.jsx("input",{id:"name",type:"text",value:t.name||"",onChange:y=>s("name",y.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${i("name")?"border-red-500":"border-gray-300"}`,placeholder:"Digite o nome completo"}),i("name")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:(u=i("name"))==null?void 0:u.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cpf",className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF *"}),e.jsx("input",{id:"cpf",type:"text",value:t.cpf?SD(t.cpf):"",onChange:y=>l(y.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${i("cpf")?"border-red-500":"border-gray-300"}`,placeholder:"000.000.000-00",maxLength:14}),i("cpf")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:(m=i("cpf"))==null?void 0:m.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),e.jsx("input",{id:"phone",type:"text",value:t.phone?CD(t.phone):"",onChange:y=>c(y.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${i("phone")?"border-red-500":"border-gray-300"}`,placeholder:"(11) 99999-9999",maxLength:15}),i("phone")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:(h=i("phone"))==null?void 0:h.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{id:"email",type:"email",value:t.email||"",onChange:y=>s("email",y.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${i("email")?"border-red-500":"border-gray-300"}`,placeholder:"email@exemplo.com"}),i("email")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:(f=i("email"))==null?void 0:f.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"hire_date",className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Tr,{className:"inline h-4 w-4 mr-1"}),"Data de Contratao *"]}),e.jsx("input",{id:"hire_date",type:"date",value:t.hire_date?t.hire_date.toISOString().split("T")[0]:"",onChange:y=>s("hire_date",new Date(y.target.value)),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${i("hire_date")?"border-red-500":"border-gray-300"}`}),i("hire_date")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:(g=i("hire_date"))==null?void 0:g.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"observations",className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{id:"observations",value:t.observations||"",onChange:y=>s("observations",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Observaes adicionais sobre o funcionrio (opcional)"})]})]})]})},OD=({employee:t,onUpdate:s,errors:r})=>{var m;const i=h=>r.fields.find(f=>f.field===h),l=h=>{s("role",h);const f=vr[h];f&&s("permissions",[...f.permissions])},c=h=>({waiter:"",cook:"",cashier:"",supervisor:"",manager:"",admin:""})[h],u=h=>({waiter:"bg-green-100 text-green-800 border-green-200",cook:"bg-orange-100 text-orange-800 border-orange-200",cashier:"bg-blue-100 text-blue-800 border-blue-200",supervisor:"bg-purple-100 text-purple-800 border-purple-200",manager:"bg-red-100 text-red-800 border-red-200",admin:"bg-gray-100 text-gray-800 border-gray-200"})[h];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Zk,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Funo e Cargo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Selecione a Funo *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(vr).map(([h,f])=>{const g=h,y=t.role===g;return e.jsxs("div",{onClick:()=>l(g),className:`
                  relative cursor-pointer rounded-lg border-2 p-4 transition-all duration-200
                  ${y?`${u(g)} border-current shadow-md`:"border-gray-200 hover:border-gray-300 hover:shadow-sm"}
                `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:c(g)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:Lv(g)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f.description})]}),y&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"w-3 h-3 bg-current rounded-full"})})]}),g==="waiter"&&e.jsx("div",{className:"mt-3 pt-3 border-t border-current border-opacity-20",children:e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx(Sv,{className:"h-3 w-3"}),e.jsx("span",{children:"Inclui acesso ao App Garom"})]})})]},g)})}),i("role")&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:(m=i("role"))==null?void 0:m.message})]}),t.role&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Sv,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-blue-900",children:["Permisses para ",Lv(t.role)]}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:vr[t.role].description}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-xs text-blue-600",children:"As permisses sero aplicadas automaticamente. Voc pode personaliz-las na seo seguinte."})})]})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{id:"status",value:t.status||"active",onChange:h=>s("status",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"}),e.jsx("option",{value:"suspended",children:"Suspenso"})]})]})]})},RD=({employee:t,onTogglePermission:s,mode:r="create"})=>{const[i,l]=b.useState(new Set(["app-garcom"])),{hasCustomPermissions:c,resetToDefaultPermissions:u}=z1(),m=M=>{const S=new Set(i);S.has(M)?S.delete(M):S.add(M),l(S)},h=M=>{var S;return((S=t.permissions)==null?void 0:S.some(A=>A.id===M))||!1},f=()=>{var M;return t.role?((M=vr[t.role])==null?void 0:M.permissions)||[]:[]},g=M=>{const S={};return M.forEach(A=>{S[A.module]||(S[A.module]=[]),S[A.module].push(A)}),S},y=f(),v=g(y),N=r==="edit"&&t.id&&c(t.id),_=()=>{t.id&&t.role&&confirm("Tem certeza que deseja resetar as permisses para o padro da funo?")&&(u(t.id),vr[t.role]&&alert("Permisses resetadas! Feche e abra o modal novamente para ver as mudanas."))},j=M=>({bar:"",kitchen:"",cashier:"",reports:"",inventory:"",customers:"",settings:"","app-garcom":""})[M]||"",C=M=>({bar:"bg-amber-50 border-amber-200",kitchen:"bg-orange-50 border-orange-200",cashier:"bg-green-50 border-green-200",reports:"bg-blue-50 border-blue-200",inventory:"bg-purple-50 border-purple-200",customers:"bg-pink-50 border-pink-200",settings:"bg-gray-50 border-gray-200","app-garcom":"bg-indigo-50 border-indigo-200"})[M]||"bg-gray-50 border-gray-200";return t.role?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wc,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Permisses"}),N&&e.jsxs("div",{className:"flex items-center space-x-1 bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs",children:[e.jsx(w0,{className:"h-3 w-3"}),e.jsx("span",{children:"Customizado"})]})]}),N&&e.jsxs("button",{onClick:_,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-md transition-colors",children:[e.jsx(j0,{className:"h-3 w-3"}),e.jsx("span",{children:"Resetar"})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"text-yellow-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-900",children:"Permisses Personalizveis"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"As permisses abaixo foram aplicadas automaticamente baseadas na funo selecionada. Voc pode personalizar marcando/desmarcando as opes conforme necessrio."})]})]})}),e.jsx("div",{className:"space-y-4",children:Object.entries(v).map(([M,S])=>{const A=i.has(M),E=S.filter(L=>h(L.id)),w=S.length,O=E.length;return e.jsxs("div",{className:`border rounded-lg ${C(M)}`,children:[e.jsxs("div",{onClick:()=>m(M),className:"flex items-center justify-between p-4 cursor-pointer hover:bg-opacity-80 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xl",children:j(M)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:vD(M)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[O," de ",w," permisses ativas"]})]}),M==="app-garcom"&&t.role==="waiter"&&e.jsxs("div",{className:"flex items-center space-x-1 bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-xs",children:[e.jsx(mn,{className:"h-3 w-3"}),e.jsx("span",{children:"App Mobile"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[Math.round(O/w*100),"%"]}),A?e.jsx(pA,{className:"h-5 w-5 text-gray-400"}):e.jsx(xA,{className:"h-5 w-5 text-gray-400"})]})]}),A&&e.jsxs("div",{className:"border-t border-current border-opacity-20 p-4 bg-white bg-opacity-50",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.map(L=>{const V=h(L.id);return e.jsxs("div",{onClick:()=>s(L.id),className:`
                            flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all
                            ${V?"bg-white border-2 border-blue-200 shadow-sm":"bg-gray-50 border border-gray-200 hover:bg-gray-100"}
                          `,children:[e.jsx("div",{className:`
                            flex items-center justify-center w-5 h-5 rounded border-2 transition-colors
                            ${V?"bg-blue-600 border-blue-600":"border-gray-300"}
                          `,children:V&&e.jsx(mA,{className:"h-3 w-3 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:jD(L.action)}),L.resource&&e.jsx("div",{className:"text-sm text-gray-600",children:L.resource.replace(/_/g," ")})]})]},L.id)})}),M==="app-garcom"&&t.role==="waiter"&&e.jsx("div",{className:"mt-4 p-3 bg-indigo-100 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(mn,{className:"h-5 w-5 text-indigo-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-indigo-900",children:"Acesso ao App Garom"}),e.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Este funcionrio ter acesso ao aplicativo mobile para garons, permitindo gerenciar mesas, pedidos e atendimento diretamente pelo celular."}),e.jsxs("div",{className:"mt-2 text-xs text-indigo-600",children:[" Limite de 2 dispositivos simultneos",e.jsx("br",{})," Sincronizao automtica com o sistema principal",e.jsx("br",{})," Acesso offline limitado para consultas"]})]})]})})]})]},M)})}),y.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Wc,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Nenhuma permisso disponvel para esta funo"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Wc,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Permisses"})]}),e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Wc,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"Selecione uma funo para configurar as permisses"})]})]})},$v=(t,s)=>{const i=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z\s]/g,"").trim().split(" ").filter(u=>u.length>0);if(i.length===0)return s?`user${s.slice(-4)}`:`user${Date.now()}`;let l="";i.length===1?l=i[0]:i.length===2?l=`${i[0]}.${i[1]}`:l=`${i[0]}.${i[i.length-1]}`;const c=Date.now().toString().slice(-3);return l.length>15&&(l=l.substring(0,12)+c),l},PD=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="abcdefghijklmnopqrstuvwxyz",r="0123456789",i="!@#$%&*";let l="";l+=t[Math.floor(Math.random()*t.length)],l+=s[Math.floor(Math.random()*s.length)],l+=r[Math.floor(Math.random()*r.length)],l+=i[Math.floor(Math.random()*i.length)];const c=t+s+r+i;for(let u=4;u<8;u++)l+=c[Math.floor(Math.random()*c.length)];return l.split("").sort(()=>Math.random()-.5).join("")},$1=async t=>{let s=$v(t.name,t.cpf);const r=PD(),{EmployeeAuthService:i}=await jr(async()=>{const{EmployeeAuthService:h}=await Promise.resolve().then(()=>AD);return{EmployeeAuthService:h}},void 0),l=i.getInstance();let c=0;const u=5;for(;c<u&&await l.checkUsernameExists(s);){c++;const f=c.toString().padStart(2,"0");s=`${$v(t.name,t.cpf)}${f}`}if(await l.checkEmailExists(t.email))throw new Error(`Email ${t.email} j est em uso por outro funcionrio`);return{username:s,password:r,email:t.email,temporaryPassword:!0}},Bv=t=>t.length<3?{valid:!1,message:"Nome de usurio deve ter pelo menos 3 caracteres"}:t.length>20?{valid:!1,message:"Nome de usurio deve ter no mximo 20 caracteres"}:/^[a-z0-9._-]+$/.test(t)?t.startsWith(".")||t.endsWith(".")?{valid:!1,message:"Nome de usurio no pode comear ou terminar com ponto"}:{valid:!0}:{valid:!1,message:"Nome de usurio pode conter apenas letras minsculas, nmeros, pontos, hfens e underscores"},Uv=t=>{const s=[];let r=0;t.length>=8?r+=2:t.length>=6?r+=1:s.push("Use pelo menos 8 caracteres"),/[A-Z]/.test(t)?r+=1:s.push("Adicione letras maisculas"),/[a-z]/.test(t)?r+=1:s.push("Adicione letras minsculas"),/\d/.test(t)?r+=1:s.push("Adicione nmeros"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(t)?r+=1:s.push("Adicione smbolos especiais"),new Set(t).size>=t.length*.7?r+=1:s.push("Use caracteres mais variados");let i;return r>=6?i="strong":r>=4?i="medium":i="weak",{strength:i,score:r,feedback:s}},LD=t=>`
 Email: ${t.email}
 Usurio: ${t.username}
 Senha: ${t.password}

 Esta  uma senha temporria. O funcionrio deve alter-la no primeiro acesso.
  `.trim(),zD=async t=>{const s=await $1(t);return{system:s,mobile:t.role==="waiter"?{...s,appId:`garcom_${s.username}`,deviceLimit:2}:null,firstAccessToken:$D(),passwordExpiry:new Date(Date.now()+7*24*60*60*1e3)}},$D=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let s="";for(let r=0;r<8;r++)s+=t[Math.floor(Math.random()*t.length)];return s},BD=({employee:t,onCredentialsGenerated:s,mode:r})=>{const[i,l]=b.useState(null),[c,u]=b.useState(!1),[m,h]=b.useState(""),[f,g]=b.useState(""),[y,v]=b.useState(!1),[N,_]=b.useState(!1),j=async()=>{if(!t.name){alert("Preencha o nome do funcionrio primeiro");return}try{const A=await $1(t);l(A);const E=await zD(t);s(E)}catch(A){console.error("Erro ao gerar credenciais:",A),alert(`Erro ao gerar credenciais: ${A instanceof Error?A.message:"Erro desconhecido"}`)}},C=()=>{if(!m||!f){alert("Preencha usurio e senha personalizados");return}const A=Bv(m);if(!A.valid){alert(A.message);return}const E=Uv(f);if(E.strength==="weak"&&!window.confirm(`Senha fraca detectada. Sugestes:
${E.feedback.join(`
`)}

Deseja continuar mesmo assim?`))return;const w={username:m,password:f,email:t.email||"",temporaryPassword:!1};l(w),s({system:w,mobile:t.role==="waiter"?{...w,appId:`garcom_${m}`,deviceLimit:2}:null,passwordExpiry:null})},M=async()=>{if(!i)return;const A=LD(i);try{await navigator.clipboard.writeText(A),_(!0),setTimeout(()=>_(!1),2e3)}catch{const w=document.createElement("textarea");w.value=A,document.body.appendChild(w),w.select(),document.execCommand("copy"),document.body.removeChild(w),_(!0),setTimeout(()=>_(!1),2e3)}},S=f?Uv(f):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Cv,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Credenciais de Acesso"})]}),r==="create"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Js,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Gerao de Credenciais"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Gere automaticamente usurio e senha para o funcionrio acessar o sistema.",t.role==="waiter"&&e.jsxs("span",{className:"block mt-1",children:[e.jsx(mn,{className:"inline h-4 w-4 mr-1"}),"Como garom, tambm receber acesso ao app mobile."]})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:!y,onChange:()=>v(!1),className:"text-blue-600"}),e.jsx("span",{children:"Gerar automaticamente"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:y,onChange:()=>v(!0),className:"text-blue-600"}),e.jsx("span",{children:"Definir manualmente"})]})]}),y?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome de Usurio"}),e.jsx("input",{type:"text",value:m,onChange:A=>h(A.target.value.toLowerCase()),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"usuario.exemplo"}),m&&(()=>{const A=Bv(m);return A.valid?e.jsx("p",{className:"mt-1 text-sm text-green-600",children:" Nome de usurio vlido"}):e.jsx("p",{className:"mt-1 text-sm text-red-600",children:A.message})})()]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",value:f,onChange:A=>g(A.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite uma senha segura"}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?e.jsx(_r,{className:"h-4 w-4"}):e.jsx(Is,{className:"h-4 w-4"})})]}),S&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:`text-sm font-medium ${S.strength==="strong"?"text-green-600":S.strength==="medium"?"text-yellow-600":"text-red-600"}`,children:["Fora: ",S.strength==="strong"?"Forte":S.strength==="medium"?"Mdia":"Fraca"]}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${S.strength==="strong"?"bg-green-500":S.strength==="medium"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${S.score/7*100}%`}})})]}),S.feedback.length>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Sugestes:"}),e.jsx("ul",{className:"text-xs text-gray-600 list-disc list-inside",children:S.feedback.map((A,E)=>e.jsx("li",{children:A},E))})]})]})]}),e.jsxs("button",{onClick:C,disabled:!m||!f,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Cv,{className:"h-4 w-4"}),e.jsx("span",{children:"Definir Credenciais"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:j,disabled:!t.name,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(gf,{className:"h-4 w-4"}),e.jsx("span",{children:"Gerar Credenciais"})]}),!t.name&&e.jsx("p",{className:"text-sm text-gray-500",children:"Preencha o nome do funcionrio para gerar credenciais"})]})]}),i&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Credenciais Geradas"}),e.jsxs("button",{onClick:M,className:`flex items-center space-x-1 px-3 py-1 rounded text-sm transition-colors ${N?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(br,{className:"h-3 w-3"}),e.jsx("span",{children:N?"Copiado!":"Copiar"})]})]}),e.jsxs("div",{className:"space-y-2 font-mono text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"ml-2 font-semibold",children:i.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Usurio:"}),e.jsx("span",{className:"ml-2 font-semibold",children:i.username})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Senha:"}),e.jsx("span",{className:"ml-2 font-semibold",children:c?i.password:""}),e.jsx("button",{onClick:()=>u(!c),className:"ml-2 text-gray-400 hover:text-gray-600",children:c?e.jsx(_r,{className:"h-3 w-3"}):e.jsx(Is,{className:"h-3 w-3"})})]})]}),i.temporaryPassword&&e.jsx("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(As,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-900",children:"Senha Temporria"}),e.jsx("p",{className:"text-yellow-700",children:"O funcionrio deve alterar esta senha no primeiro acesso. A senha expira em 7 dias."})]})]})}),t.role==="waiter"&&e.jsx("div",{className:"mt-3 p-2 bg-indigo-50 border border-indigo-200 rounded",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(mn,{className:"h-4 w-4 text-indigo-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-indigo-900",children:"Acesso ao App Garom"}),e.jsx("p",{className:"text-indigo-700",children:"Estas credenciais tambm funcionam no aplicativo mobile. Limite: 2 dispositivos simultneos."})]})]})})]})]})},UD=({isVisible:t,mode:s,isOnline:r,retryCount:i=0,isRetrying:l=!1})=>{const[c,u]=b.useState(0);if(b.useEffect(()=>{if(!t){u(0);return}const y=Date.now(),v=setInterval(()=>{u(Math.floor((Date.now()-y)/1e3))},1e3);return()=>clearInterval(v)},[t]),!t)return null;const m=s==="edit"?60:45,h=Math.min(c/m*100,100),f=()=>l?`Tentativa ${i+1} - Tentando novamente...`:i>0?`Tentativa ${i+1} em andamento...`:c<5?s==="edit"?"Salvando alteraes...":"Cadastrando funcionrio...":c<15?"Processando dados...":c<30?"Aguarde, operao em andamento...":c<m?"Operao est demorando mais que o esperado...":"Timeout em breve. Verifique sua conexo.",g=()=>c<15?"bg-blue-500":c<30?"bg-yellow-500":"bg-red-500";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:f()}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-1000 ${g()}`,style:{width:`${h}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsxs("span",{children:[c,"s / ",m,"s"]})]}),e.jsxs("div",{className:`flex items-center space-x-1 ${r?"text-green-600":"text-red-600"}`,children:[e.jsx(N0,{className:"h-4 w-4"}),e.jsx("span",{children:r?"Online":"Offline"})]})]}),c>20&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:" A operao est demorando mais que o normal. Isso pode indicar lentido na conexo ou no servidor."})}),c>m-10&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800",children:[" Timeout em ",m-c," segundos. A operao pode ter sido processada mesmo assim."]})})]})})})},Vv=({isOpen:t,onClose:s,onSave:r,employee:i,mode:l})=>{const{employee:c,state:u,updateField:m,togglePermission:h,handleSave:f,handleCancel:g,resetForm:y,setEmployeeCredentials:v}=MD({initialEmployee:i,onSave:r,onClose:s}),{isOnline:N}=_0();return b.useEffect(()=>{t&&l==="create"&&!i&&y()},[t,l,i,y]),b.useEffect(()=>{if(!t)return;const _=j=>{j.key==="Escape"&&g()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[t,g]),b.useEffect(()=>{if(!t)return;const _=document.getElementById("employee-modal");if(_){const j=_.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),C=j[0],M=j[j.length-1],S=A=>{A.key==="Tab"&&(A.shiftKey?document.activeElement===C&&(M.focus(),A.preventDefault()):document.activeElement===M&&(C.focus(),A.preventDefault()))};return document.addEventListener("keydown",S),C==null||C.focus(),()=>document.removeEventListener("keydown",S)}},[t]),t?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:g}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{id:"employee-modal",role:"dialog","aria-modal":"true","aria-labelledby":"employee-modal-title","aria-describedby":"employee-modal-description",className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",style:{maxHeight:"90vh"},children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 px-6 py-4 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{id:"employee-modal-title",className:"text-xl font-bold text-gray-900",children:l==="create"?"Novo Funcionrio":"Editar Funcionrio"}),e.jsx("p",{id:"employee-modal-description",className:"text-sm text-gray-600 mt-1",children:l==="create"?"Cadastre um novo funcionrio e configure suas permisses":"Edite as informaes e permisses do funcionrio"})]}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Fechar modal",children:e.jsx(it,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[u.isDirty&&e.jsxs("div",{className:"text-xs text-amber-600 flex items-center space-x-1",children:[e.jsx(Oi,{className:"h-3 w-3"}),e.jsx("span",{children:"H alteraes no salvas"})]}),e.jsx("div",{className:`text-xs flex items-center space-x-1 ${N?"text-green-600":"text-red-600"}`,children:N?e.jsxs(e.Fragment,{children:[e.jsx(N0,{className:"h-3 w-3"}),e.jsx("span",{children:"Online"})]}):e.jsxs(e.Fragment,{children:[e.jsx(bf,{className:"h-3 w-3"}),e.jsx("span",{children:"Sem conexo"})]})})]})]}),e.jsxs("div",{className:"overflow-y-auto px-6 py-6 space-y-8",style:{maxHeight:"calc(90vh - 140px)"},"data-testid":"modal-body",children:[!N&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(bf,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-800 font-medium",children:"Sem conexo com a internet"}),e.jsx("p",{className:"text-orange-700 text-sm",children:"Verifique sua conexo antes de tentar salvar o funcionrio."})]})]})}),u.errors.general&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oi,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"text-red-800",children:u.errors.general})]})}),e.jsx(DD,{employee:c,onUpdate:m,errors:u.errors}),e.jsx(OD,{employee:c,onUpdate:m,errors:u.errors}),e.jsx(RD,{employee:c,onTogglePermission:h,mode:l}),l==="create"&&e.jsx(BD,{employee:c,onCredentialsGenerated:v,mode:l})]}),e.jsx("div",{className:"sticky bottom-0 z-10 bg-white border-t border-gray-200 px-6 py-4 rounded-b-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:u.errors.fields.length>0&&e.jsxs("span",{className:"text-red-600",children:[u.errors.fields.length," erro(s) encontrado(s)"]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:g,disabled:u.saving,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:f,disabled:u.saving||!u.isValid||u.errors.fields.length>0,className:`px-6 py-2 rounded-md transition-colors disabled:opacity-50 flex items-center space-x-2 ${N?"bg-blue-600 hover:bg-blue-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white"}`,title:N?"":"Salvar offline e sincronizar quando a conexo for restaurada",children:u.saving?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:l==="edit"?"Salvando alteraes...":"Cadastrando funcionrio..."})]}):N?e.jsxs(e.Fragment,{children:[e.jsx(gd,{className:"h-4 w-4"}),e.jsx("span",{children:l==="create"?"Cadastrar":"Salvar"})]}):e.jsxs(e.Fragment,{children:[e.jsx(gd,{className:"h-4 w-4"}),e.jsx("span",{children:"Salvar Offline"})]})})]})]})})]})}),e.jsx(UD,{isVisible:u.saving,mode:l,isOnline:N})]}):null},VD=()=>{const{isOnline:t,wasOffline:s}=_0(),[r,i]=b.useState(!1);return b.useEffect(()=>{if(t&&s){i(!0);const l=setTimeout(()=>{i(!1)},5e3);return()=>clearTimeout(l)}},[t,s]),r?e.jsx("div",{className:"fixed top-4 right-4 z-50 bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg max-w-sm",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(N0,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Conexo Restaurada"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Voc est online novamente. Pode continuar salvando dados."})]}),e.jsx("button",{onClick:()=>i(!1),className:"text-green-400 hover:text-green-600",children:e.jsx(it,{className:"h-4 w-4"})})]})}):t?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg max-w-sm",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(bf,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-red-900",children:"Sem Conexo"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Verifique sua internet. Algumas funcionalidades podem no funcionar."})]})]})})},qD=({isOpen:t,onClose:s,credentials:r,employeeName:i})=>{const[l,c]=b.useState(!1),[u,m]=b.useState(null);if(!t)return null;const h=async(g,y)=>{try{await navigator.clipboard.writeText(g),m(y),setTimeout(()=>m(null),2e3)}catch(v){console.error("Erro ao copiar:",v)}},f=()=>`
CREDENCIAIS DE ACESSO - ${i.toUpperCase()}

 Email: ${r.system.email}
 Usurio: ${r.system.username}
 Senha: ${r.system.password}

${r.system.temporaryPassword?" IMPORTANTE: Esta  uma senha temporria que deve ser alterada no primeiro acesso.":""}
${r.mobile?`
 APP GAROM:
- Mesmo usurio e senha
- Limite: ${r.mobile.deviceLimit} dispositivos`:""}
${r.firstAccessToken?`
 Token de primeiro acesso: ${r.firstAccessToken}`:""}
${r.passwordExpiry?`
 Senha expira em: ${r.passwordExpiry.toLocaleDateString("pt-BR")}`:""}

---
Entregue estas informaes ao funcionrio de forma segura.
    `.trim();return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:s}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Credenciais Geradas"}),e.jsx("p",{className:"text-sm text-gray-600",children:i})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(it,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ml,{className:"h-5 w-5 text-green-600"}),e.jsx("p",{className:"text-green-800 font-medium",children:"Funcionrio cadastrado com sucesso!"})]})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Js,{className:"h-4 w-4 text-gray-600"}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Acesso ao Sistema"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-sm",children:r.system.email}),e.jsx("button",{onClick:()=>h(r.system.email,"email"),className:"text-gray-400 hover:text-gray-600",children:e.jsx(br,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Usurio:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-sm",children:r.system.username}),e.jsx("button",{onClick:()=>h(r.system.username,"username"),className:"text-gray-400 hover:text-gray-600",children:e.jsx(br,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Senha:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-sm",children:l?r.system.password:""}),e.jsx("button",{onClick:()=>c(!l),className:"text-gray-400 hover:text-gray-600",children:l?e.jsx(_r,{className:"h-3 w-3"}):e.jsx(Is,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>h(r.system.password,"password"),className:"text-gray-400 hover:text-gray-600",children:e.jsx(br,{className:"h-3 w-3"})})]})]})]})]}),r.mobile&&e.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(mn,{className:"h-4 w-4 text-indigo-600"}),e.jsx("h3",{className:"font-medium text-indigo-900",children:"App Garom"})]}),e.jsxs("div",{className:"text-sm text-indigo-700",children:[e.jsx("p",{children:" Mesmo usurio e senha funcionam no app mobile"}),e.jsxs("p",{children:[" Limite: ",r.mobile.deviceLimit," dispositivos simultneos"]}),e.jsx("p",{children:" Sincronizao automtica com o sistema"})]})]}),r.system.temporaryPassword&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(As,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-900",children:"Senha Temporria"}),e.jsxs("p",{className:"text-yellow-700",children:["O funcionrio deve alterar esta senha no primeiro acesso.",r.passwordExpiry&&e.jsxs("span",{className:"block mt-1",children:["Expira em: ",r.passwordExpiry.toLocaleDateString("pt-BR")]})]})]})]})}),r.firstAccessToken&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Token de Primeiro Acesso"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Para validao adicional"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-mono text-lg font-bold text-blue-900",children:r.firstAccessToken}),e.jsx("button",{onClick:()=>h(r.firstAccessToken,"token"),className:"text-blue-400 hover:text-blue-600",children:e.jsx(br,{className:"h-3 w-3"})})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>h(f(),"all"),className:`flex items-center space-x-2 px-4 py-2 rounded-md transition-colors ${u==="all"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(br,{className:"h-4 w-4"}),e.jsx("span",{children:u==="all"?"Copiado!":"Copiar Tudo"})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Fechar"})]})]})})]})},ID=()=>{const[t,s]=b.useState([]),[r,i]=b.useState(!1),[l,c]=b.useState({username:"",password:""}),[u,m]=b.useState(null),h=Ei.getInstance(),f=()=>{const j=h.listAllCredentials();s(j)};b.useEffect(()=>{f()},[]);const g=async()=>{if(!l.username||!l.password){m(" Preencha usurio e senha");return}const j=await h.validateLogin(l.username,l.password);m(j?` Login vlido! Funcionrio: ${j.employeeId}`:" Credenciais invlidas"),setTimeout(()=>m(null),5e3)},y=async j=>{const C=`Email: ${j.email}
Usurio: ${j.username}
Senha: ${j.password}`;try{await navigator.clipboard.writeText(C),alert("Credenciais copiadas!")}catch(M){console.error("Erro ao copiar:",M)}},v=()=>{const j=h.exportCredentials(),C=new Blob([j],{type:"application/json"}),M=URL.createObjectURL(C),S=document.createElement("a");S.href=M,S.download=`credenciais-locais-${new Date().toISOString().split("T")[0]}.json`,S.click(),URL.revokeObjectURL(M)},N=()=>{confirm("Tem certeza que deseja remover TODAS as credenciais locais?")&&(h.clearAllCredentials(),f())},_=()=>{const j=h.generateReport();console.log(j),alert("Relatrio gerado no console. Abra o DevTools para ver.")};return e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:" Debug: Credenciais Locais"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Service Role Key no configurada. Credenciais so armazenadas localmente para desenvolvimento."})]}),e.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg border",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Teste de Login"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Email ou usurio",value:l.username,onChange:j=>c(C=>({...C,username:j.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"password",placeholder:"Senha",value:l.password,onChange:j=>c(C=>({...C,password:j.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Testar Login"})]}),u&&e.jsx("div",{className:"mt-2 text-sm font-medium",children:u})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Credenciais Cadastradas (",t.length,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>i(!r),className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800",children:[r?e.jsx(_r,{className:"h-4 w-4"}):e.jsx(Is,{className:"h-4 w-4"}),e.jsxs("span",{children:[r?"Ocultar":"Mostrar"," Senhas"]})]}),e.jsxs("button",{onClick:f,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800",children:[e.jsx(gf,{className:"h-4 w-4"}),e.jsx("span",{children:"Atualizar"})]})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"Nenhuma credencial cadastrada ainda."}),e.jsx("p",{className:"text-sm mt-1",children:"Cadastre um funcionrio para ver as credenciais aqui."})]}):e.jsx("div",{className:"space-y-3",children:t.map((j,C)=>e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Email:"}),e.jsx("div",{className:"font-mono",children:j.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Usurio:"}),e.jsx("div",{className:"font-mono",children:j.username})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Senha:"}),e.jsx("div",{className:"font-mono",children:r?j.password:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j.temporaryPassword&&e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs",children:"Temporria"}),e.jsx("button",{onClick:()=>y(j),className:"text-blue-600 hover:text-blue-800",title:"Copiar credenciais",children:e.jsx(br,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["ID: ",j.employeeId," | Criado: ",new Date(j.createdAt).toLocaleString("pt-BR")]})]},C))})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:v,className:"flex items-center space-x-1 bg-green-600 text-white px-3 py-2 rounded-md hover:bg-green-700 text-sm",children:[e.jsx(b0,{className:"h-4 w-4"}),e.jsx("span",{children:"Exportar"})]}),e.jsxs("button",{onClick:_,className:"flex items-center space-x-1 bg-blue-600 text-white px-3 py-2 rounded-md hover:bg-blue-700 text-sm",children:[e.jsx(gf,{className:"h-4 w-4"}),e.jsx("span",{children:"Relatrio"})]}),t.length>0&&e.jsxs("button",{onClick:N,className:"flex items-center space-x-1 bg-red-600 text-white px-3 py-2 rounded-md hover:bg-red-700 text-sm",children:[e.jsx(_l,{className:"h-4 w-4"}),e.jsx("span",{children:"Limpar Tudo"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" Para usar Supabase Auth em produo:"}),e.jsx("br",{}),"1. Configure VITE_SUPABASE_SERVICE_ROLE_KEY no arquivo .env",e.jsx("br",{}),"2. Crie as tabelas necessrias (profiles, user_permissions)",e.jsx("br",{}),"3. As credenciais sero criadas automaticamente no Supabase Auth"]})})]})},FD=()=>{var we;const{loading:t,error:s,createEmployee:r,updateEmployee:i,deactivateEmployee:l,reactivateEmployee:c,filterEmployees:u,getStats:m}=yD(),[h,f]=b.useState(""),[g,y]=b.useState("all"),[v,N]=b.useState("all"),[_,j]=b.useState(null),[C,M]=b.useState(!1),[S,A]=b.useState(!1),[E,w]=b.useState(!1),[O,L]=b.useState(!1),[V,H]=b.useState(!1),[B,K]=b.useState(null),[G,ae]=b.useState(""),oe=u(h,g,v),$=m(),T=ue=>{const Te={waiter:"garcom",cook:"cozinheiro",cashier:"atendente",supervisor:"gerente",manager:"gerente",admin:"gerente"};return{name:ue.name,cpf:ue.cpf,email:ue.email,phone:ue.phone,bar_role:Te[ue.role]||"atendente",shift_preference:"qualquer",specialties:[],commission_rate:0,notes:ue.observations||""}},R=ue=>{var ye,Ee,Oe,Qe,St,Me;const Te={garcom:"waiter",cozinheiro:"cook",atendente:"cashier",barman:"cashier",gerente:"manager"};return{id:ue.id,name:((ye=ue.employee)==null?void 0:ye.name)||"",email:((Ee=ue.employee)==null?void 0:Ee.email)||"",cpf:((Oe=ue.employee)==null?void 0:Oe.cpf)||"",phone:((Qe=ue.employee)==null?void 0:Qe.phone)||"",role:Te[ue.bar_role]||"waiter",permissions:((St=vr[Te[ue.bar_role]||"waiter"])==null?void 0:St.permissions)||[],status:ue.status==="active"?"active":"inactive",hire_date:(Me=ue.employee)!=null&&Me.hire_date?new Date(ue.employee.hire_date):new Date,observations:ue.notes||""}},z=async(ue,Te)=>{const ye=T(ue);L(!0);try{await r(ye),Te?(K(Te),ae(ue.name),H(!0)):alert("Funcionrio cadastrado com sucesso!")}catch(Ee){throw console.error("Erro ao criar funcionrio:",Ee),Ee}finally{L(!1)}},X=ue=>{j(ue),w(!0)},D=async(ue,Te)=>{if(!_)return;const ye=T(ue);L(!0);try{await i(_.id,ye),j(null),alert("Funcionrio atualizado com sucesso!")}catch(Ee){throw console.error("Erro ao atualizar funcionrio:",Ee),Ee}finally{L(!1)}},q=async ue=>{var ye;if(confirm(`Tem certeza que deseja desativar o funcionrio ${(ye=ue.employee)==null?void 0:ye.name}?`))try{await l(ue.id),alert("Funcionrio desativado com sucesso!")}catch(Ee){console.error("Erro ao desativar funcionrio:",Ee),alert("Erro ao desativar funcionrio. Tente novamente.")}},U=async ue=>{var ye;if(confirm(`Tem certeza que deseja reativar o funcionrio ${(ye=ue.employee)==null?void 0:ye.name}?`))try{await c(ue.id),alert("Funcionrio reativado com sucesso!")}catch(Ee){console.error("Erro ao reativar funcionrio:",Ee),alert("Erro ao reativar funcionrio. Tente novamente.")}},Z=ue=>{j(ue),M(!0)},ie=ue=>{if(!ue)return"No informado";const Te=ue.replace(/\D/g,"");return Te.length===11?`(${Te.slice(0,2)}) ${Te.slice(2,7)}-${Te.slice(7)}`:ue},he=ue=>{switch(ue){case"atendente":return"";case"garcom":return"";case"cozinheiro":return"";case"barman":return"";case"gerente":return"";default:return""}},fe=ue=>{switch(ue){case"atendente":return"bg-blue-100 text-blue-800";case"garcom":return"bg-green-100 text-green-800";case"cozinheiro":return"bg-orange-100 text-orange-800";case"barman":return"bg-purple-100 text-purple-800";case"gerente":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ce=ue=>{switch(ue){case"atendente":return"Atendente";case"garcom":return"Garom";case"cozinheiro":return"Cozinheiro";case"barman":return"Barman";case"gerente":return"Gerente";default:return ue}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(VD,{}),s&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-red-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("p",{className:"text-red-800",children:s})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Funcionrios do Bar"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie a equipe do bar e suas funes"})]}),e.jsxs("button",{onClick:()=>A(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ks,{size:20}),e.jsx("span",{children:"Novo Funcionrio"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:$.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:$.active}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ativos"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[" ",$.byRole.atendente]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Atendentes"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[" ",$.byRole.garcom]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Garons"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[" ",$.byRole.cozinheiro]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Cozinheiros"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-purple-600",children:[" ",$.byRole.barman]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Barmans"})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, telefone ou email...",value:h,onChange:ue=>f(ue.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("select",{value:g,onChange:ue=>y(ue.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas as Funes"}),e.jsx("option",{value:"atendente",children:"Atendente"}),e.jsx("option",{value:"garcom",children:"Garom"}),e.jsx("option",{value:"cozinheiro",children:"Cozinheiro"}),e.jsx("option",{value:"barman",children:"Barman"}),e.jsx("option",{value:"gerente",children:"Gerente"})]}),e.jsxs("select",{value:v,onChange:ue=>N(ue.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:t?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando funcionrios..."})]}):oe.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Js,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum funcionrio encontrado"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funo no Bar"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data de Contratao"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.map(ue=>{const Te=ue.employee;return Te?e.jsxs(Ne.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-600",children:Te.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Te.name}),e.jsx("div",{className:"text-sm text-gray-500",children:Te.cpf||"CPF no informado"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${fe(ue.bar_role)}`,children:[e.jsx("span",{className:"mr-1",children:he(ue.bar_role)}),Ce(ue.bar_role)]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:ie(Te.phone||null)}),e.jsx("div",{className:"text-sm text-gray-500",children:Te.email||"Email no informado"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ue.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:ue.status==="active"?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Te.hire_date?new Date(Te.hire_date).toLocaleDateString("pt-BR"):"No informado"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Z(ue),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Is,{size:16})}),e.jsx("button",{onClick:()=>X(ue),className:"text-gray-600 hover:text-gray-900",title:"Editar funcionrio",children:e.jsx(Nl,{size:16})}),ue.status==="active"?e.jsx("button",{onClick:()=>q(ue),className:"text-red-600 hover:text-red-900",title:"Desativar funcionrio",children:e.jsx(_l,{size:16})}):e.jsx("button",{onClick:()=>U(ue),className:"text-green-600 hover:text-green-900",title:"Reativar funcionrio",children:e.jsx(Js,{size:16})})]})})]},ue.id):null})})]})})}),C&&_&&_.employee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Detalhes do Funcionrio"}),e.jsx("button",{onClick:()=>M(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.employee.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Funo no Bar"}),e.jsx("p",{className:"mt-1",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${fe(_.bar_role)}`,children:[e.jsx("span",{className:"mr-1",children:he(_.bar_role)}),Ce(_.bar_role)]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:ie(((we=_.employee)==null?void 0:we.phone)||null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.employee.email||"No informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CPF"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.employee.cpf||"No informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.status==="active"?"Ativo":"Inativo"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Contratao"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.employee.hire_date?new Date(_.employee.hire_date).toLocaleDateString("pt-BR"):"No informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cadastrado no Bar em"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(_.created_at).toLocaleDateString("pt-BR")})]})]}),_.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaes"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.notes})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Fechar"})})]})}),e.jsx(Vv,{isOpen:S,onClose:()=>A(!1),onSave:z,mode:"create"}),e.jsx(Vv,{isOpen:E,onClose:()=>w(!1),onSave:ue=>D(ue),employee:_?R(_):void 0,mode:"edit"}),B&&e.jsx(qD,{isOpen:V,onClose:()=>{H(!1),K(null),ae("")},credentials:B,employeeName:G}),e.jsx(ID,{})]})};var Sl=t=>t.type==="checkbox",on=t=>t instanceof Date,ls=t=>t==null;const B1=t=>typeof t=="object";var Mt=t=>!ls(t)&&!Array.isArray(t)&&B1(t)&&!on(t),U1=t=>Mt(t)&&t.target?Sl(t.target)?t.target.checked:t.target.value:t,HD=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,V1=(t,s)=>t.has(HD(s)),GD=t=>{const s=t.constructor&&t.constructor.prototype;return Mt(s)&&s.hasOwnProperty("isPrototypeOf")},S0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Bt(t){let s;const r=Array.isArray(t),i=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(S0&&(t instanceof Blob||i))&&(r||Mt(t)))if(s=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!GD(t))s=t;else for(const l in t)t.hasOwnProperty(l)&&(s[l]=Bt(t[l]));else return t;return s}var Rd=t=>/^\w*$/.test(t),At=t=>t===void 0,C0=t=>Array.isArray(t)?t.filter(Boolean):[],E0=t=>C0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ve=(t,s,r)=>{if(!s||!Mt(t))return r;const i=(Rd(s)?[s]:E0(s)).reduce((l,c)=>ls(l)?l:l[c],t);return At(i)||i===t?At(t[s])?r:t[s]:i},Ts=t=>typeof t=="boolean",ft=(t,s,r)=>{let i=-1;const l=Rd(s)?[s]:E0(s),c=l.length,u=c-1;for(;++i<c;){const m=l[i];let h=r;if(i!==u){const f=t[m];h=Mt(f)||Array.isArray(f)?f:isNaN(+l[i+1])?{}:[]}if(m==="__proto__"||m==="constructor"||m==="prototype")return;t[m]=h,t=t[m]}};const vd={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ws={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Oa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},q1=We.createContext(null);q1.displayName="HookFormContext";const T0=()=>We.useContext(q1);var I1=(t,s,r,i=!0)=>{const l={defaultValues:s._defaultValues};for(const c in t)Object.defineProperty(l,c,{get:()=>{const u=c;return s._proxyFormState[u]!==Ws.all&&(s._proxyFormState[u]=!i||Ws.all),r&&(r[u]=!0),t[u]}});return l};const k0=typeof window<"u"?We.useLayoutEffect:We.useEffect;function YD(t){const s=T0(),{control:r=s.control,disabled:i,name:l,exact:c}=t||{},[u,m]=We.useState(r._formState),h=We.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return k0(()=>r._subscribe({name:l,formState:h.current,exact:c,callback:f=>{!i&&m({...r._formState,...f})}}),[l,i,c]),We.useEffect(()=>{h.current.isValid&&r._setValid(!0)},[r]),We.useMemo(()=>I1(u,r,h.current,!1),[u,r])}var ha=t=>typeof t=="string",F1=(t,s,r,i,l)=>ha(t)?(i&&s.watch.add(t),ve(r,t,l)):Array.isArray(t)?t.map(c=>(i&&s.watch.add(c),ve(r,c))):(i&&(s.watchAll=!0),r),jf=t=>ls(t)||!B1(t);function La(t,s,r=new WeakSet){if(jf(t)||jf(s))return t===s;if(on(t)&&on(s))return t.getTime()===s.getTime();const i=Object.keys(t),l=Object.keys(s);if(i.length!==l.length)return!1;if(r.has(t)||r.has(s))return!0;r.add(t),r.add(s);for(const c of i){const u=t[c];if(!l.includes(c))return!1;if(c!=="ref"){const m=s[c];if(on(u)&&on(m)||Mt(u)&&Mt(m)||Array.isArray(u)&&Array.isArray(m)?!La(u,m,r):u!==m)return!1}}return!0}function KD(t){const s=T0(),{control:r=s.control,name:i,defaultValue:l,disabled:c,exact:u,compute:m}=t||{},h=We.useRef(l),f=We.useRef(m),g=We.useRef(void 0);f.current=m;const y=We.useMemo(()=>r._getWatch(i,h.current),[r,i]),[v,N]=We.useState(f.current?f.current(y):y);return k0(()=>r._subscribe({name:i,formState:{values:!0},exact:u,callback:_=>{if(!c){const j=F1(i,r._names,_.values||r._formValues,!1,h.current);if(f.current){const C=f.current(j);La(C,g.current)||(N(C),g.current=C)}else N(j)}}}),[r,c,i,u]),We.useEffect(()=>r._removeUnmounted()),v}function XD(t){const s=T0(),{name:r,disabled:i,control:l=s.control,shouldUnregister:c,defaultValue:u}=t,m=V1(l._names.array,r),h=We.useMemo(()=>ve(l._formValues,r,ve(l._defaultValues,r,u)),[l,r,u]),f=KD({control:l,name:r,defaultValue:h,exact:!0}),g=YD({control:l,name:r,exact:!0}),y=We.useRef(t),v=We.useRef(l.register(r,{...t.rules,value:f,...Ts(t.disabled)?{disabled:t.disabled}:{}}));y.current=t;const N=We.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ve(g.errors,r)},isDirty:{enumerable:!0,get:()=>!!ve(g.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ve(g.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ve(g.validatingFields,r)},error:{enumerable:!0,get:()=>ve(g.errors,r)}}),[g,r]),_=We.useCallback(S=>v.current.onChange({target:{value:U1(S),name:r},type:vd.CHANGE}),[r]),j=We.useCallback(()=>v.current.onBlur({target:{value:ve(l._formValues,r),name:r},type:vd.BLUR}),[r,l._formValues]),C=We.useCallback(S=>{const A=ve(l._fields,r);A&&S&&(A._f.ref={focus:()=>S.focus&&S.focus(),select:()=>S.select&&S.select(),setCustomValidity:E=>S.setCustomValidity(E),reportValidity:()=>S.reportValidity()})},[l._fields,r]),M=We.useMemo(()=>({name:r,value:f,...Ts(i)||g.disabled?{disabled:g.disabled||i}:{},onChange:_,onBlur:j,ref:C}),[r,i,g.disabled,_,j,C,f]);return We.useEffect(()=>{const S=l._options.shouldUnregister||c;l.register(r,{...y.current.rules,...Ts(y.current.disabled)?{disabled:y.current.disabled}:{}});const A=(E,w)=>{const O=ve(l._fields,E);O&&O._f&&(O._f.mount=w)};if(A(r,!0),S){const E=Bt(ve(l._options.defaultValues,r));ft(l._defaultValues,r,E),At(ve(l._formValues,r))&&ft(l._formValues,r,E)}return!m&&l.register(r),()=>{(m?S&&!l._state.action:S)?l.unregister(r):A(r,!1)}},[r,l,m,c]),We.useEffect(()=>{l._setDisabledField({disabled:i,name:r})},[i,r,l]),We.useMemo(()=>({field:M,formState:g,fieldState:N}),[M,g,N])}const dn=t=>t.render(XD(t));var WD=(t,s,r,i,l)=>s?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[i]:l||!0}}:{},sl=t=>Array.isArray(t)?t:[t],qv=()=>{let t=[];return{get observers(){return t},next:l=>{for(const c of t)c.next&&c.next(l)},subscribe:l=>(t.push(l),{unsubscribe:()=>{t=t.filter(c=>c!==l)}}),unsubscribe:()=>{t=[]}}},xs=t=>Mt(t)&&!Object.keys(t).length,A0=t=>t.type==="file",Qs=t=>typeof t=="function",jd=t=>{if(!S0)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},H1=t=>t.type==="select-multiple",M0=t=>t.type==="radio",QD=t=>M0(t)||Sl(t),kh=t=>jd(t)&&t.isConnected;function ZD(t,s){const r=s.slice(0,-1).length;let i=0;for(;i<r;)t=At(t)?i++:t[s[i++]];return t}function JD(t){for(const s in t)if(t.hasOwnProperty(s)&&!At(t[s]))return!1;return!0}function Rt(t,s){const r=Array.isArray(s)?s:Rd(s)?[s]:E0(s),i=r.length===1?t:ZD(t,r),l=r.length-1,c=r[l];return i&&delete i[c],l!==0&&(Mt(i)&&xs(i)||Array.isArray(i)&&JD(i))&&Rt(t,r.slice(0,-1)),t}var G1=t=>{for(const s in t)if(Qs(t[s]))return!0;return!1};function wd(t,s={}){const r=Array.isArray(t);if(Mt(t)||r)for(const i in t)Array.isArray(t[i])||Mt(t[i])&&!G1(t[i])?(s[i]=Array.isArray(t[i])?[]:{},wd(t[i],s[i])):ls(t[i])||(s[i]=!0);return s}function Y1(t,s,r){const i=Array.isArray(t);if(Mt(t)||i)for(const l in t)Array.isArray(t[l])||Mt(t[l])&&!G1(t[l])?At(s)||jf(r[l])?r[l]=Array.isArray(t[l])?wd(t[l],[]):{...wd(t[l])}:Y1(t[l],ls(s)?{}:s[l],r[l]):r[l]=!La(t[l],s[l]);return r}var Fo=(t,s)=>Y1(t,s,wd(s));const Iv={value:!1,isValid:!1},Fv={value:!0,isValid:!0};var K1=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!At(t[0].attributes.value)?At(t[0].value)||t[0].value===""?Fv:{value:t[0].value,isValid:!0}:Fv:Iv}return Iv},X1=(t,{valueAsNumber:s,valueAsDate:r,setValueAs:i})=>At(t)?t:s?t===""?NaN:t&&+t:r&&ha(t)?new Date(t):i?i(t):t;const Hv={isValid:!1,value:null};var W1=t=>Array.isArray(t)?t.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,Hv):Hv;function Gv(t){const s=t.ref;return A0(s)?s.files:M0(s)?W1(t.refs).value:H1(s)?[...s.selectedOptions].map(({value:r})=>r):Sl(s)?K1(t.refs).value:X1(At(s.value)?t.ref.value:s.value,t)}var eO=(t,s,r,i)=>{const l={};for(const c of t){const u=ve(s,c);u&&ft(l,c,u._f)}return{criteriaMode:r,names:[...t],fields:l,shouldUseNativeValidation:i}},Nd=t=>t instanceof RegExp,Ho=t=>At(t)?t:Nd(t)?t.source:Mt(t)?Nd(t.value)?t.value.source:t.value:t,Yv=t=>({isOnSubmit:!t||t===Ws.onSubmit,isOnBlur:t===Ws.onBlur,isOnChange:t===Ws.onChange,isOnAll:t===Ws.all,isOnTouch:t===Ws.onTouched});const Kv="AsyncFunction";var tO=t=>!!t&&!!t.validate&&!!(Qs(t.validate)&&t.validate.constructor.name===Kv||Mt(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===Kv)),sO=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Xv=(t,s,r)=>!r&&(s.watchAll||s.watch.has(t)||[...s.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const al=(t,s,r,i)=>{for(const l of r||Object.keys(t)){const c=ve(t,l);if(c){const{_f:u,...m}=c;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],l)&&!i)return!0;if(u.ref&&s(u.ref,u.name)&&!i)return!0;if(al(m,s))break}else if(Mt(m)&&al(m,s))break}}};function Wv(t,s,r){const i=ve(t,r);if(i||Rd(r))return{error:i,name:r};const l=r.split(".");for(;l.length;){const c=l.join("."),u=ve(s,c),m=ve(t,c);if(u&&!Array.isArray(u)&&r!==c)return{name:r};if(m&&m.type)return{name:c,error:m};if(m&&m.root&&m.root.type)return{name:`${c}.root`,error:m.root};l.pop()}return{name:r}}var aO=(t,s,r,i)=>{r(t);const{name:l,...c}=t;return xs(c)||Object.keys(c).length>=Object.keys(s).length||Object.keys(c).find(u=>s[u]===(!i||Ws.all))},rO=(t,s,r)=>!t||!s||t===s||sl(t).some(i=>i&&(r?i===s:i.startsWith(s)||s.startsWith(i))),nO=(t,s,r,i,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(s||t):(r?i.isOnBlur:l.isOnBlur)?!t:(r?i.isOnChange:l.isOnChange)?t:!0,iO=(t,s)=>!C0(ve(t,s)).length&&Rt(t,s),oO=(t,s,r)=>{const i=sl(ve(t,r));return ft(i,"root",s[r]),ft(t,r,i),t},ad=t=>ha(t);function Qv(t,s,r="validate"){if(ad(t)||Array.isArray(t)&&t.every(ad)||Ts(t)&&!t)return{type:r,message:ad(t)?t:"",ref:s}}var hi=t=>Mt(t)&&!Nd(t)?t:{value:t,message:""},Zv=async(t,s,r,i,l,c)=>{const{ref:u,refs:m,required:h,maxLength:f,minLength:g,min:y,max:v,pattern:N,validate:_,name:j,valueAsNumber:C,mount:M}=t._f,S=ve(r,j);if(!M||s.has(j))return{};const A=m?m[0]:u,E=G=>{l&&A.reportValidity&&(A.setCustomValidity(Ts(G)?"":G||""),A.reportValidity())},w={},O=M0(u),L=Sl(u),V=O||L,H=(C||A0(u))&&At(u.value)&&At(S)||jd(u)&&u.value===""||S===""||Array.isArray(S)&&!S.length,B=WD.bind(null,j,i,w),K=(G,ae,oe,$=Oa.maxLength,T=Oa.minLength)=>{const R=G?ae:oe;w[j]={type:G?$:T,message:R,ref:u,...B(G?$:T,R)}};if(c?!Array.isArray(S)||!S.length:h&&(!V&&(H||ls(S))||Ts(S)&&!S||L&&!K1(m).isValid||O&&!W1(m).isValid)){const{value:G,message:ae}=ad(h)?{value:!!h,message:h}:hi(h);if(G&&(w[j]={type:Oa.required,message:ae,ref:A,...B(Oa.required,ae)},!i))return E(ae),w}if(!H&&(!ls(y)||!ls(v))){let G,ae;const oe=hi(v),$=hi(y);if(!ls(S)&&!isNaN(S)){const T=u.valueAsNumber||S&&+S;ls(oe.value)||(G=T>oe.value),ls($.value)||(ae=T<$.value)}else{const T=u.valueAsDate||new Date(S),R=D=>new Date(new Date().toDateString()+" "+D),z=u.type=="time",X=u.type=="week";ha(oe.value)&&S&&(G=z?R(S)>R(oe.value):X?S>oe.value:T>new Date(oe.value)),ha($.value)&&S&&(ae=z?R(S)<R($.value):X?S<$.value:T<new Date($.value))}if((G||ae)&&(K(!!G,oe.message,$.message,Oa.max,Oa.min),!i))return E(w[j].message),w}if((f||g)&&!H&&(ha(S)||c&&Array.isArray(S))){const G=hi(f),ae=hi(g),oe=!ls(G.value)&&S.length>+G.value,$=!ls(ae.value)&&S.length<+ae.value;if((oe||$)&&(K(oe,G.message,ae.message),!i))return E(w[j].message),w}if(N&&!H&&ha(S)){const{value:G,message:ae}=hi(N);if(Nd(G)&&!S.match(G)&&(w[j]={type:Oa.pattern,message:ae,ref:u,...B(Oa.pattern,ae)},!i))return E(ae),w}if(_){if(Qs(_)){const G=await _(S,r),ae=Qv(G,A);if(ae&&(w[j]={...ae,...B(Oa.validate,ae.message)},!i))return E(ae.message),w}else if(Mt(_)){let G={};for(const ae in _){if(!xs(G)&&!i)break;const oe=Qv(await _[ae](S,r),A,ae);oe&&(G={...oe,...B(ae,oe.message)},E(oe.message),i&&(w[j]=G))}if(!xs(G)&&(w[j]={ref:A,...G},!i))return w}}return E(!0),w};const lO={mode:Ws.onSubmit,reValidateMode:Ws.onChange,shouldFocusError:!0};function cO(t={}){let s={...lO,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Qs(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},l=Mt(s.defaultValues)||Mt(s.values)?Bt(s.defaultValues||s.values)||{}:{},c=s.shouldUnregister?{}:Bt(l),u={action:!1,mount:!1,watch:!1},m={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,f=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...g};const v={array:qv(),state:qv()},N=s.criteriaMode===Ws.all,_=F=>te=>{clearTimeout(f),f=setTimeout(F,te)},j=async F=>{if(!s.disabled&&(g.isValid||y.isValid||F)){const te=s.resolver?xs((await L()).errors):await H(i,!0);te!==r.isValid&&v.state.next({isValid:te})}},C=(F,te)=>{!s.disabled&&(g.isValidating||g.validatingFields||y.isValidating||y.validatingFields)&&((F||Array.from(m.mount)).forEach(le=>{le&&(te?ft(r.validatingFields,le,te):Rt(r.validatingFields,le))}),v.state.next({validatingFields:r.validatingFields,isValidating:!xs(r.validatingFields)}))},M=(F,te=[],le,be,xe=!0,pe=!0)=>{if(be&&le&&!s.disabled){if(u.action=!0,pe&&Array.isArray(ve(i,F))){const _e=le(ve(i,F),be.argA,be.argB);xe&&ft(i,F,_e)}if(pe&&Array.isArray(ve(r.errors,F))){const _e=le(ve(r.errors,F),be.argA,be.argB);xe&&ft(r.errors,F,_e),iO(r.errors,F)}if((g.touchedFields||y.touchedFields)&&pe&&Array.isArray(ve(r.touchedFields,F))){const _e=le(ve(r.touchedFields,F),be.argA,be.argB);xe&&ft(r.touchedFields,F,_e)}(g.dirtyFields||y.dirtyFields)&&(r.dirtyFields=Fo(l,c)),v.state.next({name:F,isDirty:K(F,te),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ft(c,F,te)},S=(F,te)=>{ft(r.errors,F,te),v.state.next({errors:r.errors})},A=F=>{r.errors=F,v.state.next({errors:r.errors,isValid:!1})},E=(F,te,le,be)=>{const xe=ve(i,F);if(xe){const pe=ve(c,F,At(le)?ve(l,F):le);At(pe)||be&&be.defaultChecked||te?ft(c,F,te?pe:Gv(xe._f)):oe(F,pe),u.mount&&j()}},w=(F,te,le,be,xe)=>{let pe=!1,_e=!1;const Le={name:F};if(!s.disabled){if(!le||be){(g.isDirty||y.isDirty)&&(_e=r.isDirty,r.isDirty=Le.isDirty=K(),pe=_e!==Le.isDirty);const qe=La(ve(l,F),te);_e=!!ve(r.dirtyFields,F),qe?Rt(r.dirtyFields,F):ft(r.dirtyFields,F,!0),Le.dirtyFields=r.dirtyFields,pe=pe||(g.dirtyFields||y.dirtyFields)&&_e!==!qe}if(le){const qe=ve(r.touchedFields,F);qe||(ft(r.touchedFields,F,le),Le.touchedFields=r.touchedFields,pe=pe||(g.touchedFields||y.touchedFields)&&qe!==le)}pe&&xe&&v.state.next(Le)}return pe?Le:{}},O=(F,te,le,be)=>{const xe=ve(r.errors,F),pe=(g.isValid||y.isValid)&&Ts(te)&&r.isValid!==te;if(s.delayError&&le?(h=_(()=>S(F,le)),h(s.delayError)):(clearTimeout(f),h=null,le?ft(r.errors,F,le):Rt(r.errors,F)),(le?!La(xe,le):xe)||!xs(be)||pe){const _e={...be,...pe&&Ts(te)?{isValid:te}:{},errors:r.errors,name:F};r={...r,..._e},v.state.next(_e)}},L=async F=>{C(F,!0);const te=await s.resolver(c,s.context,eO(F||m.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return C(F),te},V=async F=>{const{errors:te}=await L(F);if(F)for(const le of F){const be=ve(te,le);be?ft(r.errors,le,be):Rt(r.errors,le)}else r.errors=te;return te},H=async(F,te,le={valid:!0})=>{for(const be in F){const xe=F[be];if(xe){const{_f:pe,..._e}=xe;if(pe){const Le=m.array.has(pe.name),qe=xe._f&&tO(xe._f);qe&&g.validatingFields&&C([be],!0);const st=await Zv(xe,m.disabled,c,N,s.shouldUseNativeValidation&&!te,Le);if(qe&&g.validatingFields&&C([be]),st[pe.name]&&(le.valid=!1,te))break;!te&&(ve(st,pe.name)?Le?oO(r.errors,st,pe.name):ft(r.errors,pe.name,st[pe.name]):Rt(r.errors,pe.name))}!xs(_e)&&await H(_e,te,le)}}return le.valid},B=()=>{for(const F of m.unMount){const te=ve(i,F);te&&(te._f.refs?te._f.refs.every(le=>!kh(le)):!kh(te._f.ref))&&Ce(F)}m.unMount=new Set},K=(F,te)=>!s.disabled&&(F&&te&&ft(c,F,te),!La(D(),l)),G=(F,te,le)=>F1(F,m,{...u.mount?c:At(te)?l:ha(F)?{[F]:te}:te},le,te),ae=F=>C0(ve(u.mount?c:l,F,s.shouldUnregister?ve(l,F,[]):[])),oe=(F,te,le={})=>{const be=ve(i,F);let xe=te;if(be){const pe=be._f;pe&&(!pe.disabled&&ft(c,F,X1(te,pe)),xe=jd(pe.ref)&&ls(te)?"":te,H1(pe.ref)?[...pe.ref.options].forEach(_e=>_e.selected=xe.includes(_e.value)):pe.refs?Sl(pe.ref)?pe.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(xe)?_e.checked=!!xe.find(Le=>Le===_e.value):_e.checked=xe===_e.value||!!xe)}):pe.refs.forEach(_e=>_e.checked=_e.value===xe):A0(pe.ref)?pe.ref.value="":(pe.ref.value=xe,pe.ref.type||v.state.next({name:F,values:Bt(c)})))}(le.shouldDirty||le.shouldTouch)&&w(F,xe,le.shouldTouch,le.shouldDirty,!0),le.shouldValidate&&X(F)},$=(F,te,le)=>{for(const be in te){if(!te.hasOwnProperty(be))return;const xe=te[be],pe=F+"."+be,_e=ve(i,pe);(m.array.has(F)||Mt(xe)||_e&&!_e._f)&&!on(xe)?$(pe,xe,le):oe(pe,xe,le)}},T=(F,te,le={})=>{const be=ve(i,F),xe=m.array.has(F),pe=Bt(te);ft(c,F,pe),xe?(v.array.next({name:F,values:Bt(c)}),(g.isDirty||g.dirtyFields||y.isDirty||y.dirtyFields)&&le.shouldDirty&&v.state.next({name:F,dirtyFields:Fo(l,c),isDirty:K(F,pe)})):be&&!be._f&&!ls(pe)?$(F,pe,le):oe(F,pe,le),Xv(F,m)&&v.state.next({...r,name:F}),v.state.next({name:u.mount?F:void 0,values:Bt(c)})},R=async F=>{u.mount=!0;const te=F.target;let le=te.name,be=!0;const xe=ve(i,le),pe=qe=>{be=Number.isNaN(qe)||on(qe)&&isNaN(qe.getTime())||La(qe,ve(c,le,qe))},_e=Yv(s.mode),Le=Yv(s.reValidateMode);if(xe){let qe,st;const ge=te.type?Gv(xe._f):U1(F),Ze=F.type===vd.BLUR||F.type===vd.FOCUS_OUT,J=!sO(xe._f)&&!s.resolver&&!ve(r.errors,le)&&!xe._f.deps||nO(Ze,ve(r.touchedFields,le),r.isSubmitted,Le,_e),De=Xv(le,m,Ze);ft(c,le,ge),Ze?(!te||!te.readOnly)&&(xe._f.onBlur&&xe._f.onBlur(F),h&&h(0)):xe._f.onChange&&xe._f.onChange(F);const ze=w(le,ge,Ze),ot=!xs(ze)||De;if(!Ze&&v.state.next({name:le,type:F.type,values:Bt(c)}),J)return(g.isValid||y.isValid)&&(s.mode==="onBlur"?Ze&&j():Ze||j()),ot&&v.state.next({name:le,...De?{}:ze});if(!Ze&&De&&v.state.next({...r}),s.resolver){const{errors:Xt}=await L([le]);if(pe(ge),be){const ns=Wv(r.errors,i,le),aa=Wv(Xt,i,ns.name||le);qe=aa.error,le=aa.name,st=xs(Xt)}}else C([le],!0),qe=(await Zv(xe,m.disabled,c,N,s.shouldUseNativeValidation))[le],C([le]),pe(ge),be&&(qe?st=!1:(g.isValid||y.isValid)&&(st=await H(i,!0)));be&&(xe._f.deps&&X(xe._f.deps),O(le,st,qe,ze))}},z=(F,te)=>{if(ve(r.errors,te)&&F.focus)return F.focus(),1},X=async(F,te={})=>{let le,be;const xe=sl(F);if(s.resolver){const pe=await V(At(F)?F:xe);le=xs(pe),be=F?!xe.some(_e=>ve(pe,_e)):le}else F?(be=(await Promise.all(xe.map(async pe=>{const _e=ve(i,pe);return await H(_e&&_e._f?{[pe]:_e}:_e)}))).every(Boolean),!(!be&&!r.isValid)&&j()):be=le=await H(i);return v.state.next({...!ha(F)||(g.isValid||y.isValid)&&le!==r.isValid?{}:{name:F},...s.resolver||!F?{isValid:le}:{},errors:r.errors}),te.shouldFocus&&!be&&al(i,z,F?xe:m.mount),be},D=F=>{const te={...u.mount?c:l};return At(F)?te:ha(F)?ve(te,F):F.map(le=>ve(te,le))},q=(F,te)=>({invalid:!!ve((te||r).errors,F),isDirty:!!ve((te||r).dirtyFields,F),error:ve((te||r).errors,F),isValidating:!!ve(r.validatingFields,F),isTouched:!!ve((te||r).touchedFields,F)}),U=F=>{F&&sl(F).forEach(te=>Rt(r.errors,te)),v.state.next({errors:F?r.errors:{}})},Z=(F,te,le)=>{const be=(ve(i,F,{_f:{}})._f||{}).ref,xe=ve(r.errors,F)||{},{ref:pe,message:_e,type:Le,...qe}=xe;ft(r.errors,F,{...qe,...te,ref:be}),v.state.next({name:F,errors:r.errors,isValid:!1}),le&&le.shouldFocus&&be&&be.focus&&be.focus()},ie=(F,te)=>Qs(F)?v.state.subscribe({next:le=>"values"in le&&F(G(void 0,te),le)}):G(F,te,!0),he=F=>v.state.subscribe({next:te=>{rO(F.name,te.name,F.exact)&&aO(te,F.formState||g,Ue,F.reRenderRoot)&&F.callback({values:{...c},...r,...te,defaultValues:l})}}).unsubscribe,fe=F=>(u.mount=!0,y={...y,...F.formState},he({...F,formState:y})),Ce=(F,te={})=>{for(const le of F?sl(F):m.mount)m.mount.delete(le),m.array.delete(le),te.keepValue||(Rt(i,le),Rt(c,le)),!te.keepError&&Rt(r.errors,le),!te.keepDirty&&Rt(r.dirtyFields,le),!te.keepTouched&&Rt(r.touchedFields,le),!te.keepIsValidating&&Rt(r.validatingFields,le),!s.shouldUnregister&&!te.keepDefaultValue&&Rt(l,le);v.state.next({values:Bt(c)}),v.state.next({...r,...te.keepDirty?{isDirty:K()}:{}}),!te.keepIsValid&&j()},we=({disabled:F,name:te})=>{(Ts(F)&&u.mount||F||m.disabled.has(te))&&(F?m.disabled.add(te):m.disabled.delete(te))},ue=(F,te={})=>{let le=ve(i,F);const be=Ts(te.disabled)||Ts(s.disabled);return ft(i,F,{...le||{},_f:{...le&&le._f?le._f:{ref:{name:F}},name:F,mount:!0,...te}}),m.mount.add(F),le?we({disabled:Ts(te.disabled)?te.disabled:s.disabled,name:F}):E(F,!0,te.value),{...be?{disabled:te.disabled||s.disabled}:{},...s.progressive?{required:!!te.required,min:Ho(te.min),max:Ho(te.max),minLength:Ho(te.minLength),maxLength:Ho(te.maxLength),pattern:Ho(te.pattern)}:{},name:F,onChange:R,onBlur:R,ref:xe=>{if(xe){ue(F,te),le=ve(i,F);const pe=At(xe.value)&&xe.querySelectorAll&&xe.querySelectorAll("input,select,textarea")[0]||xe,_e=QD(pe),Le=le._f.refs||[];if(_e?Le.find(qe=>qe===pe):pe===le._f.ref)return;ft(i,F,{_f:{...le._f,..._e?{refs:[...Le.filter(kh),pe,...Array.isArray(ve(l,F))?[{}]:[]],ref:{type:pe.type,name:F}}:{ref:pe}}}),E(F,!1,void 0,pe)}else le=ve(i,F,{}),le._f&&(le._f.mount=!1),(s.shouldUnregister||te.shouldUnregister)&&!(V1(m.array,F)&&u.action)&&m.unMount.add(F)}}},Te=()=>s.shouldFocusError&&al(i,z,m.mount),ye=F=>{Ts(F)&&(v.state.next({disabled:F}),al(i,(te,le)=>{const be=ve(i,le);be&&(te.disabled=be._f.disabled||F,Array.isArray(be._f.refs)&&be._f.refs.forEach(xe=>{xe.disabled=be._f.disabled||F}))},0,!1))},Ee=(F,te)=>async le=>{let be;le&&(le.preventDefault&&le.preventDefault(),le.persist&&le.persist());let xe=Bt(c);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:pe,values:_e}=await L();r.errors=pe,xe=Bt(_e)}else await H(i);if(m.disabled.size)for(const pe of m.disabled)Rt(xe,pe);if(Rt(r.errors,"root"),xs(r.errors)){v.state.next({errors:{}});try{await F(xe,le)}catch(pe){be=pe}}else te&&await te({...r.errors},le),Te(),setTimeout(Te);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xs(r.errors)&&!be,submitCount:r.submitCount+1,errors:r.errors}),be)throw be},Oe=(F,te={})=>{ve(i,F)&&(At(te.defaultValue)?T(F,Bt(ve(l,F))):(T(F,te.defaultValue),ft(l,F,Bt(te.defaultValue))),te.keepTouched||Rt(r.touchedFields,F),te.keepDirty||(Rt(r.dirtyFields,F),r.isDirty=te.defaultValue?K(F,Bt(ve(l,F))):K()),te.keepError||(Rt(r.errors,F),g.isValid&&j()),v.state.next({...r}))},Qe=(F,te={})=>{const le=F?Bt(F):l,be=Bt(le),xe=xs(F),pe=xe?l:be;if(te.keepDefaultValues||(l=le),!te.keepValues){if(te.keepDirtyValues){const _e=new Set([...m.mount,...Object.keys(Fo(l,c))]);for(const Le of Array.from(_e))ve(r.dirtyFields,Le)?ft(pe,Le,ve(c,Le)):T(Le,ve(pe,Le))}else{if(S0&&At(F))for(const _e of m.mount){const Le=ve(i,_e);if(Le&&Le._f){const qe=Array.isArray(Le._f.refs)?Le._f.refs[0]:Le._f.ref;if(jd(qe)){const st=qe.closest("form");if(st){st.reset();break}}}}if(te.keepFieldsRef)for(const _e of m.mount)T(_e,ve(pe,_e));else i={}}c=s.shouldUnregister?te.keepDefaultValues?Bt(l):{}:Bt(pe),v.array.next({values:{...pe}}),v.state.next({values:{...pe}})}m={mount:te.keepDirtyValues?m.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!te.keepIsValid||!!te.keepDirtyValues,u.watch=!!s.shouldUnregister,v.state.next({submitCount:te.keepSubmitCount?r.submitCount:0,isDirty:xe?!1:te.keepDirty?r.isDirty:!!(te.keepDefaultValues&&!La(F,l)),isSubmitted:te.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:xe?{}:te.keepDirtyValues?te.keepDefaultValues&&c?Fo(l,c):r.dirtyFields:te.keepDefaultValues&&F?Fo(l,F):te.keepDirty?r.dirtyFields:{},touchedFields:te.keepTouched?r.touchedFields:{},errors:te.keepErrors?r.errors:{},isSubmitSuccessful:te.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},St=(F,te)=>Qe(Qs(F)?F(c):F,te),Me=(F,te={})=>{const le=ve(i,F),be=le&&le._f;if(be){const xe=be.refs?be.refs[0]:be.ref;xe.focus&&(xe.focus(),te.shouldSelect&&Qs(xe.select)&&xe.select())}},Ue=F=>{r={...r,...F}},us={control:{register:ue,unregister:Ce,getFieldState:q,handleSubmit:Ee,setError:Z,_subscribe:he,_runSchema:L,_focusError:Te,_getWatch:G,_getDirty:K,_setValid:j,_setFieldArray:M,_setDisabledField:we,_setErrors:A,_getFieldArray:ae,_reset:Qe,_resetDefaultValues:()=>Qs(s.defaultValues)&&s.defaultValues().then(F=>{St(F,s.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:B,_disableForm:ye,_subjects:v,_proxyFormState:g,get _fields(){return i},get _formValues(){return c},get _state(){return u},set _state(F){u=F},get _defaultValues(){return l},get _names(){return m},set _names(F){m=F},get _formState(){return r},get _options(){return s},set _options(F){s={...s,...F}}},subscribe:fe,trigger:X,register:ue,handleSubmit:Ee,watch:ie,setValue:T,getValues:D,reset:St,resetField:Oe,clearErrors:U,unregister:Ce,setError:Z,setFocus:Me,getFieldState:q};return{...us,formControl:us}}function D0(t={}){const s=We.useRef(void 0),r=We.useRef(void 0),[i,l]=We.useState({isDirty:!1,isValidating:!1,isLoading:Qs(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Qs(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:i},t.defaultValues&&!Qs(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:u,...m}=cO(t);s.current={...m,formState:i}}const c=s.current.control;return c._options=t,k0(()=>{const u=c._subscribe({formState:c._proxyFormState,callback:()=>l({...c._formState}),reRenderRoot:!0});return l(m=>({...m,isReady:!0})),c._formState.isReady=!0,u},[c]),We.useEffect(()=>c._disableForm(t.disabled),[c,t.disabled]),We.useEffect(()=>{t.mode&&(c._options.mode=t.mode),t.reValidateMode&&(c._options.reValidateMode=t.reValidateMode)},[c,t.mode,t.reValidateMode]),We.useEffect(()=>{t.errors&&(c._setErrors(t.errors),c._focusError())},[c,t.errors]),We.useEffect(()=>{t.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[c,t.shouldUnregister]),We.useEffect(()=>{if(c._proxyFormState.isDirty){const u=c._getDirty();u!==i.isDirty&&c._subjects.state.next({isDirty:u})}},[c,i.isDirty]),We.useEffect(()=>{t.values&&!La(t.values,r.current)?(c._reset(t.values,{keepFieldsRef:!0,...c._options.resetOptions}),r.current=t.values,l(u=>({...u}))):c._resetDefaultValues()},[c,t.values]),We.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),s.current.formState=I1(i,c),s.current}const dO=({isOpen:t,onClose:s,item:r})=>{const{addMenuItem:i,updateMenuItem:l}=_t(),{register:c,handleSubmit:u,control:m,reset:h,formState:{errors:f}}=D0(),[g,y]=b.useState(!1);b.useEffect(()=>{h(r?{name:r.name,description:r.description||"",price:r.price,category:r.category,preparationTime:r.preparation_time||0,available:r.available,image_url:r.image_url||""}:{name:"",description:"",price:"",category:"food",preparationTime:"",available:!0,image_url:""})},[r,h]);const v=async _=>{console.log("=== INCIO DO SUBMIT ==="),console.log("Dados recebidos do formulrio:",_),y(!0);try{const j={..._,description:_.description||"",preparationTime:_.preparationTime||void 0};console.log("Dados processados para envio:",j),r?(console.log("Modo: Edio de item existente"),await l({...r,...j})):(console.log("Modo: Criao de novo item"),await i(j)),console.log("Item salvo com sucesso!"),r||h({name:"",description:"",price:"",category:"food",preparationTime:"",available:!0,image_url:""}),s()}catch(j){console.error("=== ERRO DETALHADO ==="),console.error("Tipo do erro:",typeof j),console.error("Erro completo:",j),console.error("Stack trace:",j instanceof Error?j.stack:"N/A"),j&&typeof j=="object"&&"message"in j&&console.error("Mensagem do erro:",j.message),alert(`Erro ao salvar o prato: ${j instanceof Error?j.message:"Erro desconhecido"}`)}finally{y(!1),console.log("=== FIM DO SUBMIT ===")}},N=[{value:"food",label:"Pratos Principais"},{value:"snacks",label:"Petiscos"},{value:"drinks",label:"Bebidas"}];return e.jsx(fn,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gray-50 rounded-t-xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r?"Editar Prato":"Novo Prato"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r?"Atualize as informaes do prato":"Adicione um novo prato ao cardpio"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-200 p-2 rounded-lg transition-colors duration-200",disabled:g,title:"Fechar modal","aria-label":"Fechar modal",children:e.jsx(it,{size:24})})]}),e.jsxs("form",{onSubmit:u(v),className:"p-6 space-y-6",children:[e.jsx(fi,{label:"Nome do Prato",error:f.name,children:e.jsx("input",{...c("name",{required:"Nome  obrigatrio"}),className:"form-input",placeholder:"Digite o nome do prato",disabled:g})}),e.jsx(fi,{label:"Descrio",error:f.description,children:e.jsx("textarea",{...c("description"),className:"form-input min-h-[80px] resize-none",placeholder:"Descreva o prato...",disabled:g})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fi,{label:"Categoria",error:f.category,children:e.jsx(dn,{name:"category",control:m,rules:{required:"Categoria  obrigatria"},render:({field:_})=>e.jsx("select",{..._,className:"form-select",disabled:g,children:N.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})})}),e.jsx(fi,{label:"Preo (R$)",error:f.price,children:e.jsx("input",{type:"number",step:"0.01",...c("price",{required:"Preo  obrigatrio",valueAsNumber:!0,min:{value:.01,message:"Valor deve ser maior que 0"}}),className:"form-input",placeholder:"Digite o preo",disabled:g})})]}),e.jsxs(fi,{label:"URL da Imagem (opcional)",error:f.image_url,children:[e.jsx("input",{...c("image_url"),className:"form-input",placeholder:"https://exemplo.com/imagem.jpg",disabled:g}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole aqui o link da imagem do prato. Recomendamos imagens com proporo 1:1 (quadrada)."})]}),e.jsx(fi,{label:"Tempo de Preparo (min)",error:f.preparationTime,children:e.jsx("input",{type:"number",...c("preparationTime",{setValueAs:_=>_===""||_===null?void 0:Number(_),min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"Digite o tempo em minutos",disabled:g})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(dn,{name:"available",control:m,render:({field:_})=>e.jsx("input",{type:"checkbox",onChange:_.onChange,onBlur:_.onBlur,name:_.name,ref:_.ref,checked:_.value,className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2",disabled:g,title:"Marcar como disponvel","aria-label":"Marcar prato como disponvel para pedidos"})}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Prato disponvel para pedidos"})]}),e.jsxs("div",{className:"pt-6 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-secondary",disabled:g,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center justify-center space-x-2",disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Salvando..."})]}):e.jsx("span",{children:r?"Salvar Alteraes":"Adicionar Prato"})})]})]})]})})})},fi=({label:t,children:s,error:r})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:t}),s,r&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center space-x-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})}),e.jsx("span",{children:r.message})]})]}),uO=({menuItems:t})=>{const{removeMenuItem:s}=_t(),[r,i]=b.useState(""),[l,c]=b.useState(!1),[u,m]=b.useState(null),h=t.filter(N=>{const _=N.name.toLowerCase().includes(r.toLowerCase()),j=N.item_type!=="direct";return _&&j}),f=()=>{m(null),c(!0)},g=N=>{m(N),c(!0)},y=()=>{c(!1),m(null)},v=async N=>{window.confirm(`Tem certeza que deseja remover "${N.name}" do cardpio?`)&&await s(N.id)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Gesto de Cardpio"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Gerencie apenas pratos que precisam de preparo na cozinha.",e.jsx("br",{}),e.jsx("span",{className:"text-blue-600 font-medium",children:'Produtos prontos do estoque aparecem automaticamente no balco quando marcados como "Disponvel para venda" no mdulo Estoque.'})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(ks,{size:20}),e.jsx("span",{children:"Novo Prato"})]})})]}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6",children:e.jsx("input",{type:"text",placeholder:"Buscar pratos...",value:r,onChange:N=>i(N.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(N=>e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[N.image_url&&e.jsx("div",{className:"aspect-video w-full bg-gray-100 overflow-hidden",children:e.jsx("img",{src:N.image_url,alt:N.name,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",onError:_=>{_.currentTarget.style.display="none"}})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:N.name}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>g(N),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Editar prato","aria-label":"Editar prato",children:e.jsx(Nl,{size:16})}),e.jsx("button",{onClick:()=>v(N),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Excluir prato","aria-label":"Excluir prato",children:e.jsx(_l,{size:16})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:N.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-gray-600",children:[e.jsx(Vt,{size:14}),e.jsxs("span",{children:[N.preparation_time||0,"min"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[e.jsx(Yt,{size:14}),e.jsxs("span",{className:"font-semibold",children:["R$ ",N.price.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${N.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.available?"Disponvel":"Indisponvel"}),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:N.category==="Prato Principal"?"Prato Principal":N.category==="Petiscos"?"Petiscos":"Bebidas"})]})]})]},N.id))}),h.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum prato encontrado"})}),e.jsx(dO,{isOpen:l,onClose:y,item:u})]})},Pd=t=>{if(!t)return"000";if(t.includes("-")){const s=t.split("-"),r=s[s.length-1];if(/^\d+$/.test(r))return r.padStart(3,"0");for(const i of s.reverse())if(/^\d+$/.test(i)&&i.length>=3)return i}return t.length>10?t.slice(-6).toUpperCase():t.toUpperCase()},O0=t=>t?`Mesa ${t}`:"Balco",Q1=t=>{let s=t.match(/Pedido Balco #(\d+)/);if(s)return`#${s[1]}`;if(s=t.match(/Pedido de balco #([a-f0-9-]+)/),s){const i=s[1].replace(/-/g,"").slice(-4);return`#${(parseInt(i,16)%1e4).toString().padStart(4,"0")}`}return null},mO=({orders:t,menuItems:s})=>{const{updateOrderStatus:r}=_t(),[i,l]=b.useState(new Set),[c,u]=b.useState("all"),h=(()=>{const S=new Map;return t.forEach(A=>{const E=A.tableNumber||"Balco";S.has(E)||S.set(E,[]),S.get(E).push(A)}),S})(),f=S=>S.items.reduce((A,E)=>{const w=s.find(L=>L.id===E.menuItemId)||E.menuItem,O=(w==null?void 0:w.preparation_time)||(w==null?void 0:w.preparationTime)||0;return A+O},0),g=S=>{const A=(new Date().getTime()-S.createdAt.getTime())/6e4;return A>20?"high":A>10?"medium":"low"},y=S=>{switch(S){case"high":return"border-red-400 bg-red-50";case"medium":return"border-yellow-400 bg-yellow-50";case"low":return"border-green-400 bg-green-50";default:return"border-gray-200 bg-white"}},v=S=>S.id.slice(-4).toUpperCase(),N=S=>S.id.startsWith("balcao-"),_=S=>S.id.startsWith("comanda-"),j=async(S,A)=>{console.log(" Cozinha - Atualizando status:",{orderId:S,newStatus:A,isComandaOrder:_({id:S})}),l(E=>new Set([...E,S]));try{await r(S,A),console.log(` Status do pedido ${S} atualizado para ${A}`)}catch(E){console.error(" Erro ao atualizar status:",E)}finally{setTimeout(()=>{l(E=>{const w=new Set(E);return w.delete(S),w})},1e3)}},C=S=>(h.get(S)||[]).length>1,M=t.filter(S=>c==="all"?!0:(S.tableNumber||"Balco")===c);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Pedidos da Cozinha"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[Array.from(h.entries()).filter(([S,A])=>A.length>1).length>0&&e.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:[Array.from(h.entries()).filter(([S,A])=>A.length>1).length," mesa(s) com mltiplos pedidos"]}),c!=="all"&&e.jsxs("button",{onClick:()=>u("all"),className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[e.jsxs("span",{children:["Filtro: ",c]}),e.jsx("span",{className:"text-blue-600",children:""})]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[M.length," de ",t.length," pedidos"]})]}),Array.from(h.entries()).filter(([S,A])=>A.length>1).length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:" Mesas com Mltiplos Pedidos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(h.entries()).filter(([S,A])=>A.length>1).map(([S,A])=>e.jsxs("button",{onClick:()=>u(S),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors hover:shadow-md transform hover:scale-105 ${c===S?"bg-orange-400 text-white":"bg-orange-200 text-orange-800 hover:bg-orange-300"}`,title:`Filtrar pedidos da ${S}`,children:["Mesa ",S,": ",A.length," pedidos"]},S))})]}),M.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:c!=="all"?`Nenhum pedido encontrado para ${c}`:"Nenhum pedido pendente na cozinha"})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:M.map(S=>{const A=g(S),E=f(S),w=S.items.filter(L=>{const V=s.find(H=>H.id===L.menuItemId)||L.menuItem;return V&&V.item_type!=="direct"}),O=C(S.tableNumber||"Balco");return e.jsxs(Ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`border-2 rounded-lg p-4 ${y(A)} ${O?"ring-2 ring-orange-300 ring-offset-2":""} ${N(S)?"border-green-400 bg-green-50 shadow-lg":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wl,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"font-bold text-lg",children:O0(S.tableNumber)}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",v(S)]}),N(S)&&e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:" PAGO"}),_(S)&&e.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"AGUARDA PAGTO"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(Vt,{size:14}),e.jsx("span",{children:es(S.createdAt,"HH:mm",{locale:ds})})]})]}),e.jsx("div",{className:"space-y-2 mb-4",children:w.map(L=>{const V=s.find(H=>H.id===L.menuItemId)||L.menuItem;return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[L.quantity,"x ",(V==null?void 0:V.name)||"Item no encontrado"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[(V==null?void 0:V.preparation_time)||(V==null?void 0:V.preparationTime)||0,"min"]})]},L.id)})}),S.notes&&e.jsx("div",{className:"mb-4 p-2 bg-yellow-100 rounded border",children:e.jsx("p",{className:"text-sm text-yellow-800",children:S.notes})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Tempo estimado: ",E,"min"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${A==="high"?"bg-red-200 text-red-800":A==="medium"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:A==="high"?"Urgente":A==="medium"?"Mdio":"Normal"})]}),e.jsxs("div",{className:"space-y-2",children:[S.status==="pending"&&e.jsx("button",{onClick:()=>j(S.id,"preparing"),disabled:i.has(S.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(S.id)?"bg-blue-300 text-blue-700 cursor-not-allowed animate-pulse scale-95":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(S.id)?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-700 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Iniciando..."})]}):"Iniciar Preparo"}),S.status==="preparing"&&e.jsx("button",{onClick:()=>j(S.id,"ready"),disabled:i.has(S.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(S.id)?"bg-green-300 text-green-700 cursor-not-allowed animate-pulse scale-95":"bg-green-600 text-white hover:bg-green-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(S.id)?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Finalizando..."})]}):"Marcar como Pronto"}),S.status==="ready"&&e.jsx("div",{className:"w-full py-2 rounded-lg font-medium bg-green-100 text-green-800 border-2 border-green-300 text-center animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:""})}),e.jsx("span",{children:"Pronto para Entrega"})]})})]})]},S.id)})})]})},hO=()=>{const{kitchenOrders:t,menuItems:s}=_t(),[r,i]=b.useState("orders"),l=t.filter(m=>m.status==="pending"||m.status==="preparing"),c=s.filter(m=>m.item_type!=="direct"),u=c.filter(m=>m.preparationTime).reduce((m,h)=>m+(h.preparationTime||0),0)/c.filter(m=>m.preparationTime).length||0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mdulo Cozinha"}),e.jsx("p",{className:"text-gray-600",children:"Gesto completa da cozinha e cardpio"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>i("orders"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="orders"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Pedidos"}),e.jsx("button",{onClick:()=>i("menu"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="menu"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cardpio"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Pedidos Pendentes"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:l.length})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:e.jsx(Vt,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Tempo Mdio"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[u.toFixed(0),"min"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Vt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Pratos Disponveis"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:c.filter(m=>m.available).length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(Oi,{className:"w-6 h-6 text-green-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md",children:r==="orders"?e.jsx(mO,{orders:l,menuItems:c}):e.jsx(uO,{menuItems:c})})]})},fO=({isOpen:t,onClose:s,item:r})=>{const{addInventoryItem:i,updateInventoryItem:l,inventoryCategories:c}=_t(),{register:u,handleSubmit:m,control:h,reset:f,formState:{errors:g}}=D0(),[y,v]=b.useState(!1);b.useEffect(()=>{f(r?{name:r.name,categoryId:r.categoryId,currentStock:r.currentStock,minStock:r.minStock,unit:r.unit,cost:r.cost,supplier:r.supplier,availableForSale:r.availableForSale,image_url:r.image_url}:{name:"",categoryId:"",currentStock:void 0,minStock:void 0,unit:"unidades",cost:void 0,supplier:"",availableForSale:!1,image_url:""})},[r,f]);const N=async j=>{v(!0);try{r?await l({...r,...j}):await i(j),s()}catch(C){console.error("Falha ao salvar o item:",C)}finally{v(!1)}},_=["unidades","kg","litros","garrafas"];return e.jsx(fn,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 bg-gray-50 rounded-t-xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r?"Editar Item":"Novo Item no Estoque"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r?"Atualize as informaes do item":"Adicione um novo item ao inventrio"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-200 p-2 rounded-lg transition-colors duration-200",disabled:y,children:e.jsx(it,{size:24})})]}),e.jsxs("form",{onSubmit:m(N),className:"p-6 space-y-6",children:[e.jsx(pr,{label:"Nome do Item",error:g.name,children:e.jsx("input",{...u("name",{required:"Nome  obrigatrio"}),className:"form-input",placeholder:"Digite o nome do item",disabled:y})}),e.jsx(pr,{label:"Categoria",error:g.categoryId,children:e.jsx(dn,{name:"categoryId",control:h,rules:{required:"Categoria  obrigatria"},render:({field:j})=>e.jsxs("select",{...j,className:"form-select",disabled:y,children:[e.jsx("option",{value:"",children:"Selecione uma categoria"}),c.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pr,{label:"Estoque Atual",error:g.currentStock,children:e.jsx("input",{type:"number",...u("currentStock",{required:"Estoque atual  obrigatrio",valueAsNumber:!0,min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"0",disabled:y})}),e.jsx(pr,{label:"Estoque Mnimo",error:g.minStock,children:e.jsx("input",{type:"number",...u("minStock",{required:"Estoque mnimo  obrigatrio",valueAsNumber:!0,min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"0",disabled:y})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(pr,{label:"Unidade",error:g.unit,children:e.jsx(dn,{name:"unit",control:h,rules:{required:"Unidade  obrigatria"},render:({field:j})=>e.jsx("select",{...j,className:"form-select",disabled:y,children:_.map(C=>e.jsx("option",{value:C,children:C},C))})})}),e.jsx(pr,{label:"Custo por Unidade (R$)",error:g.cost,children:e.jsx("input",{type:"number",step:"0.01",...u("cost",{required:"Custo  obrigatrio",valueAsNumber:!0,min:{value:0,message:"Valor deve ser maior ou igual a 0"}}),className:"form-input",placeholder:"0,00",disabled:y})})]}),e.jsx(pr,{label:"Fornecedor (Opcional)",error:g.supplier,children:e.jsx("input",{...u("supplier"),className:"form-input",placeholder:"Nome do fornecedor",disabled:y})}),e.jsxs(pr,{label:"URL da Imagem (Opcional)",error:g.image_url,children:[e.jsx("input",{...u("image_url"),className:"form-input",placeholder:"https://exemplo.com/imagem.jpg",disabled:y}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cole aqui o link de uma imagem para representar este item do estoque"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(dn,{name:"availableForSale",control:h,render:({field:j})=>e.jsx("input",{type:"checkbox",checked:j.value||!1,onChange:C=>j.onChange(C.target.checked),onBlur:j.onBlur,name:j.name,ref:j.ref,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:y})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Disponvel para Venda"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Marque esta opo para que o produto aparea automaticamente no balco e comandas quando houver estoque"})]})]}),e.jsxs("div",{className:"pt-6 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"btn-secondary",disabled:y,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center justify-center space-x-2",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Salvando..."})]}):e.jsx("span",{children:r?"Salvar Alteraes":"Adicionar Item"})})]})]})]})})})},pr=({label:t,children:s,error:r})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:t}),s,r&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center space-x-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})}),e.jsx("span",{children:r.message})]})]}),pO=({item:t,categories:s,onEdit:r,onDelete:i})=>{const l=t.currentStock<=t.minStock,c=t.availableForSale||!1,u=s.find(m=>m.id===t.categoryId);return e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white border rounded-lg p-4 hover:shadow-lg transition-shadow relative ${l?"border-red-300":c?"border-green-300":"border-gray-200"}`,children:[t.image_url&&e.jsx("div",{className:"w-full h-32 mb-3 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:t.image_url,alt:t.name,className:"max-w-full max-h-full object-contain hover:scale-105 transition-transform duration-300",onError:m=>{m.currentTarget.style.display="none"}})}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"pr-4 flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:(u==null?void 0:u.name)||"Sem categoria"})]}),e.jsxs("div",{className:"flex space-x-2 ml-2",children:[e.jsx("button",{onClick:()=>r(t),className:"text-gray-400 hover:text-blue-600 transition-colors p-1 rounded hover:bg-gray-100",title:"Editar item","aria-label":`Editar ${t.name}`,children:e.jsx(Nl,{size:16})}),e.jsx("button",{onClick:()=>i(t.id),className:"text-gray-400 hover:text-red-600 transition-colors p-1 rounded hover:bg-gray-100",title:"Excluir item","aria-label":`Excluir ${t.name}`,children:e.jsx(_l,{size:16})})]})]}),e.jsx("div",{className:"mb-3",children:c?e.jsxs("div",{className:"flex items-center space-x-1 bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium w-fit",children:[e.jsx(hl,{size:12}),e.jsx("span",{children:"Disponvel para venda"})]}):e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs font-medium w-fit",children:[e.jsx(_v,{size:12}),e.jsx("span",{children:"No disponvel para venda"})]})}),e.jsxs("div",{className:"flex justify-between items-baseline mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-800",children:t.currentStock}),e.jsxs("span",{className:"text-sm text-gray-600",children:["/ ",t.minStock," ",t.unit]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${l?"bg-red-500":"bg-blue-500"}`,style:{width:`${Math.min(t.currentStock/(t.minStock*2)*100,100)}%`}})}),(l||!c)&&e.jsxs("div",{className:"flex flex-col space-y-1 mt-2",children:[l&&e.jsxs("div",{className:"flex items-center space-x-1 text-red-600 text-xs",children:[e.jsx(As,{size:14}),e.jsx("span",{children:"Estoque baixo"})]}),!c&&e.jsxs("div",{className:"flex items-center space-x-1 text-orange-600 text-xs",children:[e.jsx(_v,{size:14}),e.jsx("span",{children:"Produto no liberado para venda no balco"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-3 flex justify-between",children:[e.jsxs("span",{children:["Custo: R$ ",t.cost.toFixed(2)]}),e.jsxs("span",{children:["Fornecedor: ",t.supplier||"N/A"]})]})]})},gO=()=>{const t=Sr(),{inventory:s,inventoryCategories:r,removeInventoryItem:i}=_t(),[l,c]=b.useState(!1),[u,m]=b.useState(null),[h,f]=b.useState(""),g=j=>{m(j),c(!0)},y=()=>{m(null),c(!0)},v=()=>{c(!1),m(null)},N=b.useMemo(()=>s.filter(j=>j.name.toLowerCase().includes(h.toLowerCase())),[s,h]),_=b.useMemo(()=>{const j=s.reduce((M,S)=>M+S.cost*S.currentStock,0),C=s.filter(M=>M.currentStock<=M.minStock).length;return{totalValue:j,lowStockCount:C,totalItems:s.length}},[s]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mdulo Estoque"}),e.jsx("p",{className:"text-gray-600",children:"Controle e gesto de inventrio"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 mt-4 sm:mt-0",children:[e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t("/inventory/atualizacao-massiva"),className:"bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(un,{size:20}),e.jsx("span",{children:"Atualizao Massiva"})]}),e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(ks,{size:20}),e.jsx("span",{children:"Novo Item"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Ah,{icon:Yt,title:"Valor Total do Estoque",value:`R$ ${_.totalValue.toFixed(2)}`,color:"green"}),e.jsx(Ah,{icon:un,title:"Itens Totais",value:_.totalItems,color:"blue"}),e.jsx(Ah,{icon:As,title:"Itens com Estoque Baixo",value:_.lowStockCount,color:"orange",onClick:()=>t("/inventory/estoque-baixo"),clickable:!0})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Itens do Inventrio"}),e.jsxs("div",{className:"relative",children:[e.jsx(qa,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar itens...",value:h,onChange:j=>f(j.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(j=>e.jsx(pO,{item:j,categories:r,onEdit:g,onDelete:i},j.id))}),N.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum item encontrado"})})]}),l&&e.jsx(fO,{isOpen:l,onClose:v,item:u})]})},Ah=({icon:t,title:s,value:r,color:i,onClick:l,clickable:c=!1})=>{const u={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",orange:"bg-orange-100 text-orange-600"},m="bg-white rounded-lg shadow-md p-6",h=c?"cursor-pointer hover:shadow-lg transition-shadow":"";return e.jsx(Ne.div,{className:`${m} ${h}`,onClick:l,whileHover:c?{scale:1.02}:{},whileTap:c?{scale:.98}:{},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:s}),e.jsx("p",{className:`text-3xl font-bold text-${i}-600`,children:r})]}),e.jsx("div",{className:`p-3 rounded-full ${u[i]}`,children:e.jsx(t,{className:"w-6 h-6"})})]})})},xO=({isOpen:t,onClose:s,itens:r,categorias:i})=>{const[l,c]=b.useState(""),[u,m]=b.useState(""),[h,f]=b.useState(""),[g,y]=b.useState("telefone"),v=O=>{const L=O.replace(/\D/g,"");return L.length<=2?L:L.length<=7?`(${L.slice(0,2)}) ${L.slice(2)}`:`(${L.slice(0,2)}) ${L.slice(2,7)}-${L.slice(7,11)}`},N=O=>{const L=O.replace(/\D/g,"");return L.length===11&&L.startsWith("11",0)||L.length===11},_=(O,L)=>Math.max(L*2-O,L),j=()=>{const O=new Date,L=O.toLocaleDateString("pt-BR"),V=O.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),H=r.reduce((K,G)=>{var oe;const ae=((oe=i.find($=>$.id===G.categoryId))==null?void 0:oe.name)||"Sem Categoria";return K[ae]||(K[ae]=[]),K[ae].push(G),K},{});let B=` *AABB - Lista de Compras*
`;return B+=` ${L} s ${V}

`,B+=` *ITENS PARA REPOSIO:*

`,Object.entries(H).forEach(([K,G])=>{B+=` *${K.toUpperCase()}*
`,G.forEach(ae=>{const oe=_(ae.currentStock,ae.minStock),$=ae.currentStock===0?" ESGOTADO":" BAIXO";B+=` ${ae.name}
`,B+=`  ${$} - Atual: ${ae.currentStock} ${ae.unit}
`,B+=`  Mnimo: ${ae.minStock} ${ae.unit}
`,B+=`  *Sugesto: ${oe} ${ae.unit}*
`,ae.supplier&&(B+=`  Fornecedor: ${ae.supplier}
`),ae.cost&&(B+=`  Custo: R$ ${ae.cost.toFixed(2)}
`),B+=`
`}),B+=`
`}),B+=` *Observaes:*
`,B+=`- Quantidades baseadas no estoque mnimo
`,B+=`- Verificar disponibilidade com fornecedores
`,B+=`- Priorizar itens esgotados

`,B+=` Solicitado pelo Sistema AABB
`,B+=` Contato: (11) 99999-9999

`,B+=`---
`,B+="Sistema AABB - Gesto de Estoque",B},C=O=>{const L=v(O.target.value);c(L),u&&m("")},M=()=>{if(!N(l)){m("Nmero de telefone invlido. Use o formato (XX) XXXXX-XXXX");return}const O=j();f(O),y("mensagem")},S=()=>{const L=`55${l.replace(/\D/g,"")}`,V=encodeURIComponent(h),H=`https://web.whatsapp.com/send?phone=${L}&text=${V}`;if(!window.open(H,"_blank")){const K=`whatsapp://send?phone=${L}&text=${V}`;window.location.href=K}s()},A=async()=>{try{await navigator.clipboard.writeText(h),alert("Mensagem copiada para a rea de transferncia!")}catch(O){console.error("Erro ao copiar mensagem:",O),alert("Erro ao copiar mensagem. Tente selecionar e copiar manualmente.")}},E=()=>{y("telefone"),f("")},w=()=>{c(""),m(""),f(""),y("telefone"),s()};return e.jsx(fn,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:g==="telefone"?"Compartilhar no WhatsApp":"Confirmar Envio"}),e.jsx("button",{onClick:w,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(it,{size:20,className:"text-gray-500"})})]}),e.jsx("div",{className:"p-6",children:g==="telefone"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Insira o nmero de telefone para enviar a lista de compras via WhatsApp."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nmero de Telefone"}),e.jsxs("div",{className:"relative",children:[e.jsx(pd,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:l,onChange:C,placeholder:"(11) 99999-9999",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent ${u?"border-red-300":"border-gray-300"}`,maxLength:15})]}),u&&e.jsx("p",{className:"text-red-600 text-sm",children:u})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Resumo da Lista"}),e.jsxs("p",{className:"text-blue-700 text-sm",children:[r.length," ",r.length===1?"item":"itens"," com estoque baixo sero includos na mensagem."]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:["Mensagem que ser enviada para ",e.jsx("strong",{children:l}),":"]}),e.jsx("div",{className:"bg-gray-50 border rounded-lg p-4 max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono",children:h})})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:A,className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(br,{size:16}),e.jsx("span",{children:"Copiar Mensagem"})]})})]})}),e.jsx("div",{className:"flex justify-between p-6 border-t bg-gray-50",children:g==="telefone"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:w,className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:M,disabled:!l,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:e.jsx("span",{children:"Gerar Mensagem"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:E,className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Voltar"}),e.jsxs("button",{onClick:S,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(e5,{size:16}),e.jsx("span",{children:"Enviar WhatsApp"})]})]})})]})})})},yO=()=>{const t=Sr(),{inventory:s,inventoryCategories:r}=_t(),[i,l]=b.useState(!1),c=b.useMemo(()=>s.filter(f=>f.currentStock<=f.minStock),[s]),u=b.useMemo(()=>{const f=c.reduce((g,y)=>{var N;const v=((N=r.find(_=>_.id===y.categoryId))==null?void 0:N.name)||"Sem Categoria";return g[v]||(g[v]=[]),g[v].push(y),g},{});return Object.entries(f).sort(([g],[y])=>g.localeCompare(y))},[c,r]),m=(f,g)=>Math.max(g*2-f,g),h=()=>{l(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/inventory"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Dd,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Itens com Estoque Baixo"}),e.jsxs("p",{className:"text-gray-600",children:[c.length," ",c.length===1?"item precisa":"itens precisam"," de reposio"]})]})]}),c.length>0&&e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:h,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center space-x-2",children:[e.jsx(a5,{size:20}),e.jsx("span",{children:"Compartilhar no WhatsApp"})]})]}),c.length===0?e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:e.jsx(un,{className:"w-8 h-8 text-green-600"})})}),e.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Parabns! Todos os itens esto com estoque adequado"}),e.jsx("p",{className:"text-green-600",children:"No h itens que precisam de reposio no momento."})]}):e.jsx("div",{className:"space-y-6",children:u.map(([f,g],y)=>e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[e.jsx(As,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{children:f}),e.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",g.length," itens)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(v=>{const N=m(v.currentStock,v.minStock),_=v.currentStock===0;return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${_?"border-red-300 bg-red-50":"border-orange-300 bg-orange-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-sm",children:v.name}),_&&e.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full",children:"ESGOTADO"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Estoque Atual:"}),e.jsxs("span",{className:`font-medium ${_?"text-red-600":"text-orange-600"}`,children:[v.currentStock," ",v.unit]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Estoque Mnimo:"}),e.jsxs("span",{className:"font-medium text-gray-800",children:[v.minStock," ",v.unit]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Sugesto de Compra:"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[N," ",v.unit]})]}),v.supplier&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fornecedor:"}),e.jsx("span",{className:"font-medium text-gray-800 text-xs",children:v.supplier})]}),v.cost&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Custo Unit.:"}),e.jsxs("span",{className:"font-medium text-gray-800",children:["R$ ",v.cost.toFixed(2)]})]})]})]},v.id)})})]},f))}),e.jsx(xO,{isOpen:i,onClose:()=>l(!1),itens:c,categorias:r})]})},bO=()=>{const t=Sr(),{inventory:s,inventoryCategories:r,updateInventoryItem:i}=_t(),[l,c]=b.useState(""),[u,m]=b.useState(""),[h,f]=b.useState({}),[g,y]=b.useState(!1),v=b.useMemo(()=>s.filter(E=>{const w=E.name.toLowerCase().includes(l.toLowerCase()),O=!u||E.categoryId===u;return w&&O}),[s,l,u]),N=b.useMemo(()=>Object.values(h).filter(E=>E.selecionado),[h]),_=b.useMemo(()=>N.reduce((E,w)=>E+w.valorTotal,0),[N]),j=(E,w)=>{f(O=>{var L,V,H;return{...O,[E]:{...O[E],id:E,selecionado:w,quantidadeComprada:((L=O[E])==null?void 0:L.quantidadeComprada)||1,valorUnitario:((V=O[E])==null?void 0:V.valorUnitario)||0,valorTotal:((H=O[E])==null?void 0:H.valorTotal)||0}}})},C=(E,w)=>{w<0||f(O=>{const L=O[E]||{id:E,selecionado:!1,quantidadeComprada:0,valorUnitario:0,valorTotal:0},V=w*L.valorUnitario;return{...O,[E]:{...L,quantidadeComprada:w,valorTotal:V}}})},M=(E,w)=>{w<0||f(O=>{const L=O[E]||{id:E,selecionado:!1,quantidadeComprada:0,valorUnitario:0,valorTotal:0},V=L.quantidadeComprada*w;return{...O,[E]:{...L,valorUnitario:w,valorTotal:V}}})},S=async()=>{y(!0);try{const E=N.map(async w=>{const O=s.find(B=>B.id===w.id);if(!O)return;const L=O.currentStock+w.quantidadeComprada,V=w.valorUnitario>0?w.valorUnitario:O.cost,H={...O,currentStock:L,cost:V};await i(H)});await Promise.all(E),f({}),alert(`${N.length} itens atualizados com sucesso!`)}catch(E){console.error("Erro ao atualizar estoque:",E),alert("Erro ao atualizar estoque. Tente novamente.")}finally{y(!1)}},A=E=>h[E]||{id:E,selecionado:!1,quantidadeComprada:1,valorUnitario:0,valorTotal:0};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>t("/inventory"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Dd,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Atualizao Massiva de Estoque"}),e.jsx("p",{className:"text-gray-600",children:"Selecione os itens comprados e atualize o estoque em lote"})]})]}),N.length>0&&e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:S,disabled:g,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(gd,{size:20}),e.jsx("span",{children:g?"Salvando...":`Salvar ${N.length} Itens`})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(qa,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar produtos...",value:l,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:u,onChange:E=>m(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),r.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]}),e.jsxs("button",{onClick:()=>{const E=v.filter(O=>O.currentStock<=O.minStock),w={...h};E.forEach(O=>{const L=Math.max(O.minStock*2-O.currentStock,O.minStock);w[O.id]={id:O.id,selecionado:!0,quantidadeComprada:L,valorUnitario:O.cost||0,valorTotal:L*(O.cost||0)}}),f(w)},className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(un,{size:16}),e.jsx("span",{children:"Selecionar Estoque Baixo"})]}),e.jsxs("button",{onClick:()=>f({}),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(it,{size:16}),e.jsx("span",{children:"Limpar Seleo"})]})]})}),N.length>0&&e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:N.length}),e.jsx("p",{className:"text-blue-800 text-sm",children:"Itens Selecionados"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:N.reduce((E,w)=>E+w.quantidadeComprada,0)}),e.jsx("p",{className:"text-blue-800 text-sm",children:"Quantidade Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["R$ ",_.toFixed(2)]}),e.jsx("p",{className:"text-blue-800 text-sm",children:"Valor Total"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Produtos Disponveis (",v.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selecionar"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque Atual"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade Comprada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Unitrio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Novo Estoque"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(E=>{const w=A(E.id),O=r.find(V=>V.id===E.categoryId),L=E.currentStock+(w.selecionado?w.quantidadeComprada:0);return e.jsxs("tr",{className:w.selecionado?"bg-blue-50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:w.selecionado,onChange:V=>j(E.id,V.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),e.jsx("div",{className:"text-sm text-gray-500",children:O==null?void 0:O.name})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("span",{className:`text-sm font-medium ${E.currentStock<=E.minStock?"text-red-600":"text-gray-900"}`,children:[E.currentStock," ",E.unit]}),E.currentStock<=E.minStock&&e.jsx("div",{className:"text-xs text-red-500",children:"Estoque baixo"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.selecionado?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>C(E.id,w.quantidadeComprada-1),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(Ri,{size:16})}),e.jsx("input",{type:"number",min:"0",value:w.quantidadeComprada,onChange:V=>C(E.id,parseInt(V.target.value)||0),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:()=>C(E.id,w.quantidadeComprada+1),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(ks,{size:16})}),e.jsx("span",{className:"text-sm text-gray-500",children:E.unit})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.selecionado?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm",children:"R$"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:w.valorUnitario,onChange:V=>M(E.id,parseFloat(V.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"0,00"})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.selecionado?e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["R$ ",w.valorTotal.toFixed(2)]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("span",{className:`text-sm font-medium ${w.selecionado?"text-green-600":"text-gray-500"}`,children:[L," ",E.unit]}),w.selecionado&&w.quantidadeComprada>0&&e.jsxs("div",{className:"text-xs text-green-500",children:["+",w.quantidadeComprada," ",E.unit]})]})]},E.id)})})]})}),v.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(un,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum produto encontrado"})]})]})]})},vO=({isOpen:t,onClose:s,member:r})=>{const{addMember:i,updateMember:l}=_t(),{register:c,handleSubmit:u,control:m,reset:h,formState:{errors:f}}=D0(),[g,y]=b.useState(!1);b.useEffect(()=>{h(r||{name:"",email:"",phone:"",avatar:`https://api.dicebear.com/8.x/initials/svg?seed=${name||"user"}`,status:"active",membershipType:"individual"})},[r,h]);const v=async j=>{y(!0);try{r?await l({...r,...j}):await i(j),s()}catch(C){console.error("Falha ao salvar o scio:",C)}finally{y(!1)}},N=["active","inactive","pending"],_=["individual","family","vip"];return e.jsx(fn,{children:t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r?"Editar Scio":"Novo Scio"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(it,{size:24})})]}),e.jsxs("form",{onSubmit:u(v),className:"p-6 space-y-4",children:[e.jsx(pi,{label:"Nome Completo",error:f.name,children:e.jsx("input",{...c("name",{required:"Nome  obrigatrio"}),className:"form-input",disabled:g})}),e.jsx(pi,{label:"Email",error:f.email,children:e.jsx("input",{type:"email",...c("email",{required:"Email  obrigatrio",pattern:{value:/^\S+@\S+$/i,message:"Email invlido"}}),className:"form-input",disabled:g})}),e.jsx(pi,{label:"Telefone",error:f.phone,children:e.jsx("input",{...c("phone",{required:"Telefone  obrigatrio"}),className:"form-input",disabled:g})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pi,{label:"Status",error:f.status,children:e.jsx(dn,{name:"status",control:m,render:({field:j})=>e.jsx("select",{...j,className:"form-input",disabled:g,children:N.map(C=>e.jsx("option",{value:C,className:"capitalize",children:C},C))})})}),e.jsx(pi,{label:"Tipo de Plano",error:f.membershipType,children:e.jsx(dn,{name:"membershipType",control:m,render:({field:j})=>e.jsx("select",{...j,className:"form-input",disabled:g,children:_.map(C=>e.jsx("option",{value:C,className:"capitalize",children:C},C))})})})]}),e.jsx(pi,{label:"URL do Avatar",error:f.avatar,children:e.jsx("input",{...c("avatar"),className:"form-input",disabled:g})}),e.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",disabled:g,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-wait",disabled:g,children:g?"Salvando...":r?"Salvar Alteraes":"Adicionar Scio"})]})]})]})})})},pi=({label:t,children:s,error:r})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),s,r&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.message})]}),jO=({member:t,onEdit:s})=>{const r={active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"},i={active:"Ativo",inactive:"Inativo",pending:"Pendente"};return e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-lg p-4 text-center hover:shadow-xl transition-shadow flex flex-col",children:[e.jsxs("div",{className:"relative self-center",children:[e.jsx("img",{src:t.avatar,alt:t.name,className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover"}),e.jsx("span",{className:`absolute bottom-1 right-1 block h-4 w-4 rounded-full border-2 border-white ${t.status==="active"?"bg-green-500":t.status==="inactive"?"bg-red-500":"bg-yellow-500"}`})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:t.name}),e.jsx("p",{className:`text-xs font-medium px-2 py-0.5 rounded-full self-center my-2 ${r[t.status]}`,children:i[t.status]}),e.jsx("div",{className:"text-sm text-gray-600 capitalize mb-4",children:t.membershipType}),e.jsxs("div",{className:"text-left space-y-2 text-xs text-gray-500 border-t pt-3 mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v0,{size:14}),e.jsx("span",{children:t.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pd,{size:14}),e.jsx("span",{children:t.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Tr,{size:14}),e.jsxs("span",{children:["Scio desde ",es(t.joinDate,"MMM yyyy",{locale:ds})]})]})]}),e.jsxs("button",{onClick:()=>s(t),className:"mt-4 w-full bg-gray-100 text-gray-700 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Nl,{size:14}),e.jsx("span",{children:"Editar Perfil"})]})]})},wO=()=>{const{members:t}=_t(),[s,r]=b.useState(!1),[i,l]=b.useState(null),[c,u]=b.useState(""),[m,h]=b.useState("all"),f=_=>{l(_),r(!0)},g=()=>{l(null),r(!0)},y=()=>{r(!1),l(null)},v=b.useMemo(()=>t.filter(_=>{const j=_.name.toLowerCase().includes(c.toLowerCase()),C=m==="all"||_.status===m;return j&&C}),[t,c,m]),N=b.useMemo(()=>{const _=zM(new Date);return{total:t.length,active:t.filter(j=>j.status==="active").length,newThisMonth:t.filter(j=>LM(j.joinDate,_)).length}},[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Scios do Clube"}),e.jsx("p",{className:"text-gray-600",children:"Gesto completa de scios do clube"})]}),e.jsxs(Ne.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center space-x-2 mt-4 sm:mt-0",children:[e.jsx(ks,{size:20}),e.jsx("span",{children:"Novo Scio"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Mh,{icon:ea,title:"Total de Scios",value:N.total,color:"blue"}),e.jsx(Mh,{icon:A1,title:"Scios Ativos",value:N.active,color:"green"}),e.jsx(Mh,{icon:x5,title:"Novos (ltimo Ms)",value:N.newThisMonth,color:"purple"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 sm:mb-0",children:"Lista de Scios"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(qa,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar scios...",value:c,onChange:_=>u(_.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:m,onChange:_=>h(_.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"}),e.jsx("option",{value:"pending",children:"Pendente"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:v.map(_=>e.jsx(jO,{member:_,onEdit:f},_.id))}),v.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum scio encontrado"})})]}),s&&e.jsx(vO,{isOpen:s,onClose:y,member:i})]})},Mh=({icon:t,title:s,value:r,color:i})=>{const l={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600"};return e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:s}),e.jsx("p",{className:`text-3xl font-bold text-${i}-600`,children:r})]}),e.jsx("div",{className:`p-3 rounded-full ${l[i]}`,children:e.jsx(t,{className:"w-6 h-6"})})]})})},NO=()=>{const[t,s]=b.useState(!0),r=b.useRef(null),i=b.useCallback(()=>(r.current||(r.current=new(window.AudioContext||window.webkitAudioContext)),r.current),[]),l=b.useCallback(()=>{if(t)try{const h=i(),f=(g,y,v=0)=>{setTimeout(()=>{const N=h.createOscillator(),_=h.createGain();N.connect(_),_.connect(h.destination),N.frequency.setValueAtTime(g,h.currentTime),N.type="sine",_.gain.setValueAtTime(0,h.currentTime),_.gain.linearRampToValueAtTime(.3,h.currentTime+.01),_.gain.exponentialRampToValueAtTime(.01,h.currentTime+y),N.start(h.currentTime),N.stop(h.currentTime+y)},v)};f(800,.2,0),f(1e3,.3,200)}catch(h){console.warn("Erro ao reproduzir som de notificao:",h);try{const f="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcCTSNzPLOdSUGMIMcaYOlhAAAaYOlhAAAaYOlhAAAaYOlhAAAAA==",g=new Audio(f);g.volume=.3,g.play().catch(()=>{console.log(" Pedido pronto!")})}catch{console.log(" Pedido pronto!")}}},[t,i]),c=b.useCallback(()=>{r.current&&(r.current.close(),r.current=null)},[]),u=b.useCallback(h=>{console.log("Volume definido para:",h)},[]),m=b.useCallback(()=>{s(h=>!h)},[]);return{play:l,stop:c,setVolume:u,isEnabled:t,toggle:m}},Cl=()=>{const[t,s]=b.useState([]),[r,i]=b.useState(!0),[l,c]=b.useState(null),u=NO(),{refreshKitchenOrders:m,refreshBarOrders:h}=_t(),f=async()=>{try{i(!0);const{data:A,error:E}=await W.from("comandas").select(`
          *,
          table:bar_tables(*),
          customer:bar_customers(*),
          employee:profiles(*),
          items:comanda_items(
            *,
            menu_item:menu_items(*)
          )
        `).order("opened_at",{ascending:!1});if(E)throw E;s(A||[])}catch(A){c(A instanceof Error?A.message:"Erro ao carregar comandas")}finally{i(!1)}},g=async A=>{try{const{data:E,error:w}=await W.from("comandas").insert([A]).select(`
          *,
          table:bar_tables(*),
          customer:bar_customers(*),
          employee:profiles(*)
        `).single();if(w)throw w;return s(O=>[E,...O]),E}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao criar comanda")}},y=async(A,E)=>{try{const w={status:E};E==="closed"&&(w.closed_at=new Date().toISOString());const{error:O}=await W.from("comandas").update(w).eq("id",A);if(O)throw O;s(L=>L.map(V=>V.id===A?{...V,status:E,...w}:V))}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao atualizar comanda")}},v=async(A,E)=>{try{const{data:w,error:O}=await W.from("comanda_items").insert([{comanda_id:A,...E}]).select(`
          *,
          menu_item:menu_items(*)
        `).single();if(O)throw O;return s(L=>L.map(V=>V.id===A?{...V,items:[...V.items||[],w]}:V)),console.log(" Atualizando pedidos da cozinha e bar aps adicionar item..."),await Promise.all([m(),h()]),w}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao adicionar item  comanda")}},N=async(A,E)=>{try{const w={status:E};E==="ready"?w.prepared_at=new Date().toISOString():E==="delivered"&&(w.delivered_at=new Date().toISOString());const{error:O}=await W.from("comanda_items").update(w).eq("id",A);if(O)throw O;E==="ready"&&u.play(),s(L=>L.map(V=>{var H;return{...V,items:(H=V.items)==null?void 0:H.map(B=>B.id===A?{...B,status:E,...w}:B)}}))}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao atualizar item")}},_=async A=>{try{const{data:E,error:w}=await W.from("comandas").select(`
          *,
          table:bar_tables(*),
          customer:bar_customers(*),
          employee:profiles(*),
          items:comanda_items(
            *,
            menu_item:menu_items(*)
          )
        `).eq("table_id",A).eq("status","open").single();if(w&&w.code!=="PGRST116")throw w;return E}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao buscar comanda da mesa")}},j=async A=>{try{const{error:E}=await W.from("comanda_items").delete().eq("id",A);if(E)throw E;s(w=>w.map(O=>{var L;return{...O,items:(L=O.items)==null?void 0:L.filter(V=>V.id!==A)}}))}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao remover item da comanda")}},C=async(A,E)=>{try{const{data:w,error:O}=await W.from("bill_splits").insert([{comanda_id:A,split_type:E.type,person_count:E.person_count,splits:E.splits,service_charge_percentage:E.service_charge_percentage,discount_amount:E.discount_amount}]).select().single();if(O)throw O;return w}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao criar diviso de conta")}},M=async A=>{try{const{data:E,error:w}=await W.from("bill_splits").select("*").eq("comanda_id",A).single();if(w&&w.code!=="PGRST116")throw w;return E}catch(E){throw new Error(E instanceof Error?E.message:"Erro ao buscar diviso de conta")}},S=async(A,E)=>{try{return await y(A,"closed"),console.log("Processando pagamentos mltiplos:",E),{success:!0,payments:E}}catch(w){throw new Error(w instanceof Error?w.message:"Erro ao processar pagamentos")}};return b.useEffect(()=>{f()},[]),{comandas:t,loading:r,error:l,refetch:f,createComanda:g,updateComandaStatus:y,addItemToComanda:v,updateItemStatus:N,getComandaByTable:_,removeItemFromComanda:j,createBillSplit:C,getBillSplit:M,processMultiplePayments:S}},_O=({mode:t,onModeChange:s,user:r})=>{const i={balcao:"Balco",mesas:"Mesas",comandas:"Comandas",fila:"Fila",pedidos:"Preparo"},l={balcao:"Balco",mesas:"Mesas",comandas:"Comandas",fila:"Fila de Pedidos",pedidos:"Pedidos Bar"},c={balcao:"",mesas:"",comandas:"",fila:"",pedidos:""};return e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"px-2 sm:px-4 lg:px-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center py-3 space-y-3 lg:space-y-0 min-h-16",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 min-w-0 flex-1",children:[e.jsxs("h1",{className:"text-base sm:text-lg lg:text-xl font-semibold text-gray-900 truncate",children:[e.jsx("span",{className:"hidden sm:inline",children:"Sistema de Atendimento - "}),"Bar"]}),r&&e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 mt-1 sm:mt-0 truncate",children:[e.jsx("span",{className:"hidden sm:inline",children:"Atendente: "}),r.full_name||r.name||"Usurio"]})]}),e.jsx("nav",{className:"flex flex-wrap gap-1 sm:gap-2",children:Object.keys(i).map(u=>e.jsxs("button",{onClick:()=>s(u),className:`
                  flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 rounded-lg font-medium transition-colors text-xs sm:text-sm
                  ${t===u?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}
                `,children:[e.jsx("span",{className:"text-sm sm:text-lg",children:c[u]}),e.jsx("span",{className:"hidden sm:inline",children:l[u]}),e.jsx("span",{className:"sm:hidden",children:i[u]})]},u))})]})})})};function SO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Jv=b.forwardRef(SO);function CO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const EO=b.forwardRef(CO);function TO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Z1=b.forwardRef(TO);function kO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const rd=b.forwardRef(kO);function AO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const MO=b.forwardRef(AO);function DO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Dh=b.forwardRef(DO);function OO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const wf=b.forwardRef(OO);function RO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const PO=b.forwardRef(RO);function LO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const Nf=b.forwardRef(LO);function zO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const $O=b.forwardRef(zO);function BO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const UO=b.forwardRef(BO);function VO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const qO=b.forwardRef(VO);function IO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const _d=b.forwardRef(IO);function FO({title:t,titleId:s,...r},i){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),t?b.createElement("title",{id:s},t):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const R0=b.forwardRef(FO),J1=(t=!1)=>{const[s,r]=b.useState([]),[i,l]=b.useState(!0),[c,u]=b.useState(null),m=async()=>{try{l(!0),console.log("Fetching menu items...");try{const{data:C,error:M}=await W.from("menu_items").select("count").limit(1);if(M&&M.message.includes("JWT"))throw new Error("Supabase no configurado")}catch(C){console.error("Supabase no configurado. Criando dados mock...",C);const M=[{id:"mock-1",name:"Cerveja Pilsen",description:"Cerveja gelada 350ml",price:8.5,category:"Bebidas",image_url:void 0,available:!0,preparation_time:0,item_type:"prepared",direct_inventory_item_id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"mock-2",name:"Refrigerante",description:"Coca-Cola 350ml",price:5,category:"Bebidas",image_url:void 0,available:!0,preparation_time:0,item_type:"prepared",direct_inventory_item_id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"mock-3",name:"Poro de Batata",description:"Batata frita crocante",price:15,category:"Petiscos",image_url:void 0,available:!0,preparation_time:15,item_type:"prepared",direct_inventory_item_id:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];r(M),u("Dados de exemplo sendo exibidos. Configure o Supabase para usar dados reais.");return}const{data:g,error:y}=await W.from("menu_items").select("*");console.log("All menu items:",g,"Error:",y);let v=W.from("menu_items").select(`
          *,
          inventory_items!left(
            name,
            image_url,
            current_stock,
            min_stock,
            unit,
            available_for_sale
          )
        `).eq("available",!0).order("category",{ascending:!0}).order("name",{ascending:!0});t||(v=v.neq("item_type","direct"));const{data:N,error:_}=await v;if(console.log("Available menu items:",N,"Error:",_),_)throw _;if(!N||N.length===0){console.log("No menu items found - creating sample data");const C=[{name:"Cerveja Pilsen",description:"Cerveja gelada 350ml",price:8.5,category:"Bebidas",available:!0},{name:"Refrigerante",description:"Coca-Cola 350ml",price:5,category:"Bebidas",available:!0}],{data:M,error:S}=await W.from("menu_items").insert(C).select();if(console.log("Sample data inserted:",M,"Error:",S),!S&&M){const A=M.map(E=>({id:E.id,name:E.name,description:E.description||"",price:E.price,category:E.category||"",image_url:E.image_url||void 0,available:E.available||!1,preparation_time:E.preparation_time||0,item_type:E.item_type||"prepared",direct_inventory_item_id:E.direct_inventory_item_id||void 0,created_at:E.created_at||void 0,updated_at:E.updated_at||void 0}));r(A);return}}const j=(N||[]).map(C=>{const M=C.inventory_items,S=C.item_type==="direct";return{id:C.id,name:S&&(M!=null&&M.name)?M.name:C.name,description:C.description||"",price:typeof C.price=="string"?parseFloat(C.price):C.price||0,category:C.category||"",image_url:S&&(M!=null&&M.image_url)?M.image_url:C.image_url||void 0,available:C.available||!1,preparation_time:C.preparation_time||0,item_type:C.item_type||"prepared",direct_inventory_item_id:C.direct_inventory_item_id||void 0,created_at:C.created_at||void 0,updated_at:C.updated_at||void 0,inventory_items:M?{id:"",name:M.name||"",currentStock:M.current_stock||0,minStock:M.min_stock||0,unit:M.unit||"unidades",lastUpdated:new Date,cost:0,availableForSale:M.available_for_sale||!1,image_url:M.image_url||void 0}:void 0}});console.log("Mapped items:",j),r(j)}catch(g){console.error("Error in fetchMenuItems:",g),u(g instanceof Error?g.message:"Erro ao carregar itens do menu")}finally{l(!1)}},h=g=>s.filter(y=>y.category===g),f=()=>s.filter(g=>g.available);return b.useEffect(()=>{m()},[t]),{menuItems:s,loading:i,error:c,refetch:m,getItemsByCategory:h,getAvailableItems:f}},Ld=()=>{const{user:t}=Kt(),{refreshKitchenOrders:s,refreshBarOrders:r}=_t(),[i,l]=b.useState({orders:[],metrics:null,loading:!0,error:null}),c=b.useCallback(w=>{l(O=>({...O,...w}))},[]),u=b.useCallback((w,O)=>{console.error(`Erro em ${O}:`,w),c({error:`Erro em ${O}: ${w.message||"Erro desconhecido"}`,loading:!1})},[c]),m=b.useCallback(async()=>{if(t)try{c({loading:!0,error:null});const{data:w,error:O}=await W.from("balcao_orders_with_details").select("*").order("created_at",{ascending:!1}).limit(50);if(O)throw O;const L=await Promise.all((w||[]).map(async V=>{const{data:H,error:B}=await W.from("balcao_order_items").select(`
              *,
              menu_items:menu_item_id (
                id,
                name,
                category,
                price,
                preparation_time,
                item_type
              )
            `).eq("balcao_order_id",V.id);return B&&console.warn(`Erro ao carregar itens do pedido ${V.id}:`,B),{...V,items:(H==null?void 0:H.map(K=>({...K,menu_item:Array.isArray(K.menu_items)?K.menu_items[0]:K.menu_items})))||[]}}));c({orders:L,loading:!1})}catch(w){u(w,"carregamento de pedidos")}},[t,c,u]),h=b.useCallback(async w=>{if(!t)throw new Error("Usurio no autenticado");try{c({loading:!0,error:null});const{data:O,error:L}=await W.from("balcao_orders").insert({employee_id:t.id,customer_name:w.customer_name,customer_phone:w.customer_phone,discount_amount:w.discount_amount||0,notes:w.notes,customer_notes:w.customer_notes,status:"pending_payment"}).select().single();if(L)throw L;const V=w.items.map(B=>({balcao_order_id:O.id,menu_item_id:B.menu_item_id,quantity:B.quantity,unit_price:B.unit_price,notes:B.notes,status:"pending"})),{error:H}=await W.from("balcao_order_items").insert(V);if(H)throw H;return await m(),O.id}catch(O){throw u(O,"criao de pedido"),O}},[t,c,u,m]),f=b.useCallback(async(w,O)=>{try{c({loading:!0,error:null});const L={status:O.status,updated_at:new Date().toISOString()};O.status==="paid"?(L.payment_method=O.payment_method,L.cash_session_id=O.cash_session_id,L.paid_at=new Date().toISOString()):O.status==="preparing"?L.preparation_started_at=new Date().toISOString():O.status==="ready"?L.preparation_completed_at=new Date().toISOString():O.status==="delivered"&&(L.delivered_at=new Date().toISOString(),L.delivered_by=O.delivered_by||(t==null?void 0:t.id)),O.notes&&(L.notes=O.notes);const{error:V}=await W.from("balcao_orders").update(L).eq("id",w);if(V)throw V;await m()}catch(L){throw u(L,"atualizao de status do pedido"),L}},[c,u,m,t]),g=b.useCallback(async w=>{try{console.log(" Iniciando processamento de pagamento:",w.order_id);const{data:O,error:L}=await W.from("balcao_orders").select("order_number, customer_name").eq("id",w.order_id).single();if(L)throw console.error(" Erro ao buscar dados do pedido:",L),L;await f(w.order_id,{status:"paid",payment_method:w.payment_method,cash_session_id:w.cash_session_id,notes:w.notes}),console.log(" Registrando transao no caixa..."),console.log(" Dados do pedido:",O);const V=O.order_number.toString().padStart(4,"0"),H=O.customer_name?` - ${O.customer_name}`:"",B=`Pedido Balco #${V}${H}`;console.log(" Nota que ser salva:",B);const K={cash_session_id:w.cash_session_id,transaction_type:"sale",payment_method:w.payment_method,amount:w.amount_paid,processed_by:t.id,notes:B};console.log(" Dados da transao de balco:",K);const{data:G,error:ae}=await W.from("cash_transactions").insert(K).select().single();if(ae)throw console.error(" Erro ao inserir transao de balco:",ae),ae;if(console.log(" Transao de balco inserida:",G),ae)throw ae;console.log(" Pagamento processado com sucesso!"),console.log(" Forando atualizao dos monitores em mltiplas camadas..."),setTimeout(async()=>{await Promise.all([s(),r()]),console.log(" Primeira atualizao dos monitores concluda!")},500),setTimeout(async()=>{await Promise.all([s(),r(),m()]),console.log(" Atualizao backup dos monitores concluda!")},1500)}catch(O){throw u(O,"processamento de pagamento"),O}},[f,u,t,s,r,m]),y=b.useCallback(async(w,O)=>{try{const L={status:O,updated_at:new Date().toISOString()};O==="preparing"?L.preparation_started_at=new Date().toISOString():O==="ready"&&(L.preparation_completed_at=new Date().toISOString());const{error:V}=await W.from("balcao_order_items").update(L).eq("id",w);if(V)throw V;await m()}catch(L){throw u(L,"atualizao de status do item"),L}},[u,m]),v=b.useCallback(async(w,O)=>{try{await f(w,{status:"cancelled",notes:O?`Cancelado: ${O}`:"Pedido cancelado"})}catch(L){throw u(L,"cancelamento de pedido"),L}},[f,u]),N=b.useCallback(async w=>{try{let O=W.from("balcao_orders_with_details").select("*");w.status&&w.status.length>0&&(O=O.in("status",w.status)),w.employee_id&&(O=O.eq("employee_id",w.employee_id)),w.start_date&&(O=O.gte("created_at",w.start_date)),w.end_date&&(O=O.lte("created_at",w.end_date)),w.customer_name&&(O=O.ilike("customer_name",`%${w.customer_name}%`)),w.order_number&&(O=O.eq("order_number",w.order_number)),w.payment_method&&(O=O.eq("payment_method",w.payment_method));const{data:L,error:V}=await O.order("created_at",{ascending:!1}).limit(100);if(V)throw V;return L||[]}catch(O){return u(O,"busca de pedidos"),[]}},[u]),_=b.useCallback(async()=>{try{const w=new Date().toISOString().split("T")[0],{data:O,error:L}=await W.from("balcao_orders").select("status, final_amount, payment_method").gte("created_at",`${w}T00:00:00.000Z`).lt("created_at",`${w}T23:59:59.999Z`);if(L)throw L;const V=O||[],H={today:{total_orders:V.length,total_revenue:V.reduce((B,K)=>B+(K.final_amount||0),0),avg_order_value:V.length>0?V.reduce((B,K)=>B+(K.final_amount||0),0)/V.length:0,pending_payment:V.filter(B=>B.status==="pending_payment").length,preparing:V.filter(B=>B.status==="preparing").length,ready_for_delivery:V.filter(B=>B.status==="ready").length},by_status:[],by_payment_method:[],hourly_breakdown:[]};c({metrics:H})}catch(w){u(w,"carregamento de mtricas")}},[c,u]),j=b.useCallback(async()=>{await Promise.all([m(),_()])},[m,_]),C=b.useCallback(w=>i.orders.filter(O=>O.status===w),[i.orders]),M=b.useCallback(w=>i.orders.find(O=>O.id===w),[i.orders]),S=C("pending_payment"),A=C("preparing"),E=C("ready");return b.useEffect(()=>{t&&j()},[t,j]),b.useEffect(()=>{if(!t)return;const w=W.channel("balcao_orders_changes").on("postgres_changes",{event:"*",schema:"public",table:"balcao_orders"},()=>{m()}).on("postgres_changes",{event:"*",schema:"public",table:"balcao_order_items"},()=>{m()}).subscribe();return()=>{w.unsubscribe()}},[t,m]),{orders:i.orders,pendingOrders:S,preparingOrders:A,readyOrders:E,metrics:i.metrics,loading:i.loading,error:i.error,createOrder:h,updateOrderStatus:f,updateItemStatus:y,cancelOrder:v,processPayment:g,searchOrders:N,getOrdersByStatus:C,refreshData:j,getOrderById:M,loadMetrics:_}},eN=()=>{const{user:t}=Kt(),[s,r]=b.useState({currentSession:null,pendingComandas:[],todaysTransactions:[],todaysSessions:[],todaysSummary:{session_date:new Date().toISOString().split("T")[0],total_sessions:0,total_sales:0,total_transactions:0,by_payment_method:[],by_employee:[],discrepancies:[],avg_ticket:0,peak_hours:[]},loading:!0,error:null}),i=b.useCallback(h=>{r(f=>({...f,...h}))},[]),l=b.useCallback((h,f)=>{console.error(`Erro em ${f}:`,h),i({error:`Erro em ${f}: ${h.message||"Erro desconhecido"}`,loading:!1})},[i]),c=b.useCallback(async()=>{if(t)try{i({loading:!0,error:null});const{data:h,error:f}=await W.from("cash_sessions").select("*").eq("employee_id",t.id).eq("status","open").maybeSingle();if(f&&f.code!=="PGRST116")throw f;const g=h?{...h,employee:{id:t.id,name:t.name||"Usurio",role:"employee"}}:null;i({currentSession:g,pendingComandas:[],todaysTransactions:[],todaysSessions:[],loading:!1})}catch(h){l(h,"carregamento inicial")}},[t,i,l]),u=b.useCallback(async h=>{if(!t)throw new Error("Usurio no autenticado");try{i({loading:!0,error:null});const f={employee_id:t.id,opening_amount:h.opening_amount,opening_notes:h.opening_notes,supervisor_approval_id:h.supervisor_approval_id,status:"open"},{data:g,error:y}=await W.from("cash_sessions").insert(f).select("*").single();if(y)throw y;await c()}catch(f){throw l(f,"abertura de caixa"),f}},[t,i,l,c]),m=b.useCallback(async h=>{if(!s.currentSession)throw new Error("Nenhuma sesso aberta");try{i({loading:!0,error:null});const f=h.closing_amount-s.currentSession.expected_amount,{error:g}=await W.from("cash_sessions").update({status:"closed",closed_at:new Date().toISOString(),closing_amount:h.closing_amount,cash_discrepancy:f,closing_notes:h.closing_notes}).eq("id",s.currentSession.id);if(g)throw g;const y=h.reconciliation.map(N=>({cash_session_id:s.currentSession.id,payment_method:N.payment_method,expected_amount:N.expected_amount,actual_amount:N.actual_amount,transaction_count:N.transaction_count,reconciled_by:t.id,notes:N.notes})),{error:v}=await W.from("payment_reconciliation").insert(y);if(v)throw v;await c()}catch(f){throw l(f,"fechamento de caixa"),f}},[s.currentSession,t,i,l,c]);return b.useEffect(()=>{c()},[c]),{currentSession:s.currentSession,pendingComandas:s.pendingComandas,todaysTransactions:s.todaysTransactions,todaysSessions:s.todaysSessions,todaysSummary:s.todaysSummary,loading:s.loading,error:s.error,openCashSession:u,closeCashSession:m,getCurrentSession:()=>s.currentSession,processComandaPayment:async()=>{throw new Error("No implementado ainda")},processRefund:async()=>{throw new Error("No implementado ainda")},processAdjustment:async()=>{throw new Error("No implementado ainda")},generateDailySummary:async()=>s.todaysSummary,generateMonthlySummary:async()=>({month:new Date().toISOString().slice(0,7),total_sessions:0,total_sales:0,total_transactions:0,employees_performance:[],top_payment_methods:[],daily_breakdown:[],avg_discrepancy:0,peak_days:[]}),getTransactionsByFilters:async()=>[],getSessionsByFilters:async()=>[],validateCashAmount:async()=>({isValid:!0,errors:[]}),validateSession:async()=>({isValid:!0,errors:[]}),reloadData:c}},Ae=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),zd={dinheiro:"Dinheiro",cartao_debito:"Carto de Dbito",cartao_credito:"Carto de Crdito",pix:"PIX",transferencia:"Transferncia"},tN={sale:"Venda",refund:"Estorno",adjustment:"Ajuste",tip:"Gorjeta",cash_withdrawal:"Sada de Dinheiro",treasury_transfer:"Transferncia para Tesouraria"},HO=({isOpen:t,onClose:s,onSelectCustomer:r})=>{const[i,l]=b.useState(""),[c,u]=b.useState([]),[m,h]=b.useState(!1),[f,g]=b.useState("phone");b.useEffect(()=>{t&&(l(""),u([]))},[t]);const y=async()=>{if(i.trim()){h(!0);try{let _=W.from("bar_customers").select("*");f==="phone"?_=_.ilike("phone",`%${i}%`):_=_.ilike("name",`%${i}%`);const{data:j,error:C}=await _.eq("status","active").order("name").limit(10);if(C)throw C;if(!j||j.length===0){const M=[{id:"mock-1",phone:i.includes("11")?i:"(11) 99999-1234",name:"Joo Silva",email:"joao@exemplo.com",credit_limit:1e3,current_balance:0,status:"active",is_vip:!0,loyalty_points:250,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_visit:"2024-08-30"},{id:"mock-2",phone:"(11) 88888-5678",name:"Maria Santos",email:"maria@exemplo.com",credit_limit:500,current_balance:0,status:"active",is_vip:!1,loyalty_points:120,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_visit:"2024-08-28"}];u(f==="phone"?M.filter(S=>S.phone.includes(i)||i.includes("11")):M.filter(S=>S.name.toLowerCase().includes(i.toLowerCase())))}else u(j)}catch(_){console.error("Erro ao buscar clientes:",_),u([])}finally{h(!1)}}},v=_=>{_.key==="Enter"&&y()},N=_=>{r(_),s()};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Identificar Membro"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R0,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("div",{className:"flex space-x-4 mb-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>g("phone"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${f==="phone"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Nf,{className:"h-4 w-4 inline mr-1"}),"Telefone"]}),e.jsxs("button",{onClick:()=>g("name"),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${f==="name"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(_d,{className:"h-4 w-4 inline mr-1"}),"Nome"]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:f==="phone"?"Digite o telefone (ex: 11999999999)":"Digite o nome do membro",value:i,onChange:_=>l(_.target.value),onKeyPress:v,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0})]}),e.jsx("button",{onClick:y,disabled:m||!i.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Buscando...":"Buscar"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:[c.length," resultado(s) encontrado(s)"]}),c.map(_=>e.jsxs("div",{onClick:()=>N(_),className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 cursor-pointer transition-colors border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:_.name}),_.is_vip&&e.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-100 px-2 py-1 rounded-full",children:[e.jsx(UO,{className:"h-3 w-3 text-yellow-600"}),e.jsx("span",{className:"text-xs font-medium text-yellow-800",children:"VIP"})]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nf,{className:"h-4 w-4"}),e.jsx("span",{children:_.phone})]}),_.email&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(MO,{className:"h-4 w-4"}),e.jsx("span",{children:_.email})]})]})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("div",{className:"text-gray-900 font-medium",children:[_.loyalty_points," pontos"]}),_.last_visit&&e.jsxs("div",{className:"text-gray-500",children:["ltima visita: ",new Date(_.last_visit).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs",children:[e.jsx("span",{className:`px-2 py-1 rounded-full ${_.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.status==="active"?"Ativo":"Inativo"}),e.jsxs("span",{className:"text-gray-500",children:["Limite: R$ ",_.credit_limit.toFixed(2)]})]})]},_.id))]}):i&&!m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_d,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum membro encontrado"}),e.jsxs("p",{className:"text-gray-600",children:["Tente buscar por outro ",f==="phone"?"telefone":"nome"," ou verifique se o membro est cadastrado."]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(wf,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Buscar Membro"}),e.jsxs("p",{className:"text-gray-600",children:["Digite o ",f==="phone"?"telefone":"nome"," do membro para aplicar descontos e benefcios."]})]})}),e.jsx("div",{className:"p-6 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:" Membros recebem 10% de desconto automaticamente"}),e.jsx("button",{onClick:s,className:"text-blue-600 hover:text-blue-800 font-medium",children:"Continuar sem identificar"})]})})]})}):null},ej=()=>{const{user:t}=Kt(),{menuItems:s,loading:r}=J1(!0),{createOrder:i}=Ld(),{currentSession:l}=eN(),{inventory:c}=_t(),[u,m]=b.useState([]),[h,f]=b.useState(null),[g,y]=b.useState(""),[v,N]=b.useState(""),[_,j]=b.useState("all"),[C,M]=b.useState(""),[S,A]=b.useState(!1),[E,w]=b.useState(!1),[O,L]=b.useState({}),V=b.useMemo(()=>Array.from(new Set(s.map(q=>q.category))).sort(),[s]),H=b.useMemo(()=>{let D=s.filter(q=>q.available);return _!=="all"&&(D=D.filter(q=>q.category===_)),C&&(D=D.filter(q=>{var U;return q.name.toLowerCase().includes(C.toLowerCase())||((U=q.description)==null?void 0:U.toLowerCase().includes(C.toLowerCase()))})),D},[s,_,C]),B=b.useMemo(()=>u.reduce((D,q)=>D+q.price*q.quantity,0),[u]),K=b.useMemo(()=>h?B*.1:0,[h,B]),G=b.useMemo(()=>B-K,[B,K]),ae=(D,q)=>{if(D.item_type==="direct"&&D.direct_inventory_item_id){const U=c.find(Z=>Z.id===D.direct_inventory_item_id);return U?U.currentStock<q?{available:!1,currentStock:U.currentStock,warning:`Estoque insuficiente. Disponvel: ${U.currentStock} ${U.unit}`}:U.currentStock<=U.minStock?{available:!0,currentStock:U.currentStock,warning:`Estoque baixo! Disponvel: ${U.currentStock} ${U.unit}`}:{available:!0,currentStock:U.currentStock}:{available:!1,warning:"Item no encontrado no estoque"}}return{available:!0}},oe=D=>{const q=ae(D,1);if(!q.available){alert(q.warning);return}m(U=>{const Z=U.find(ie=>ie.menu_item_id===D.id);if(Z){const ie=Z.quantity+1,he=ae(D,ie);return he.available?(he.warning?L(fe=>({...fe,[D.id]:he.warning})):L(fe=>{const Ce={...fe};return delete Ce[D.id],Ce}),U.map(fe=>fe.menu_item_id===D.id?{...fe,quantity:ie}:fe)):(alert(he.warning),U)}else return q.warning&&L(ie=>({...ie,[D.id]:q.warning})),[...U,{menu_item_id:D.id,name:D.name,price:D.price,quantity:1}]})},$=D=>{m(q=>q.filter(U=>U.menu_item_id!==D)),L(q=>{const U={...q};return delete U[D],U})},T=(D,q)=>{if(q<=0){$(D);return}const U=s.find(Z=>Z.id===D);if(U){const Z=ae(U,q);if(!Z.available){alert(Z.warning);return}Z.warning?L(ie=>({...ie,[D]:Z.warning})):L(ie=>{const he={...ie};return delete he[D],he})}m(Z=>Z.map(ie=>ie.menu_item_id===D?{...ie,quantity:q}:ie))},R=()=>{m([]),f(null),y(""),N(""),L({})},z=()=>{const D=[];for(const q of u){const U=s.find(Z=>Z.id===q.menu_item_id);if(U){const Z=ae(U,q.quantity);Z.available||D.push(`${U.name}: ${Z.warning}`)}}return{valid:D.length===0,errors:D}},X=async()=>{if(u.length===0)return;const D=z();if(!D.valid){alert(`Problemas de estoque encontrados:

`+D.errors.join(`
`));return}w(!0);try{const q={customer_name:h==null?void 0:h.name,customer_phone:h==null?void 0:h.phone,customer_notes:v||void 0,items:u.map(Z=>({menu_item_id:Z.menu_item_id,quantity:Z.quantity,unit_price:Z.price,notes:Z.notes})),discount_amount:K,notes:g||void 0},U=await i(q);R(),alert(`Pedido #${U.slice(-4).toUpperCase()} criado com sucesso!

O pedido est aguardando pagamento no caixa.`)}catch(q){console.error("Erro ao criar pedido:",q),q instanceof Error&&q.message.includes("Estoque insuficiente")?alert("Estoque insuficiente para um ou mais itens. Verifique o estoque e tente novamente."):alert("Erro ao criar pedido. Tente novamente.")}finally{w(!1)}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Criar Pedido de Balco"}),e.jsx("p",{className:"text-gray-600",children:"O pedido ficar pendente at o pagamento ser processado no caixa"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:l?e.jsx("div",{className:"bg-green-100 px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z1,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-green-800 font-medium",children:"Caixa Aberto"})]})}):e.jsx("div",{className:"bg-yellow-100 px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rd,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-800 font-medium",children:"Caixa Fechado"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Pedidos sero processados quando o caixa abrir"})]})]})})})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-white p-4 border-b",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(wf,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar itens...",value:C,onChange:D=>M(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:_,onChange:D=>j(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas Categorias"}),V.map(D=>e.jsx("option",{value:D,children:D},D))]})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:H.map(D=>{const q=ae(D,1),U=q.warning&&q.available,Z=!q.available;return e.jsxs(Ne.div,{whileHover:{scale:Z?1:1.02},whileTap:{scale:Z?1:.98},onClick:()=>!Z&&oe(D),className:`bg-white rounded-lg p-4 shadow-sm border transition-all duration-200 relative ${Z?"cursor-not-allowed opacity-50 border-red-300":U?"cursor-pointer hover:shadow-lg hover:border-yellow-400 hover:bg-yellow-50 border-yellow-300":"cursor-pointer hover:shadow-lg hover:border-blue-400 hover:bg-blue-50 border-gray-200"}`,children:[Z&&e.jsxs("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[e.jsx(Dh,{className:"h-3 w-3"}),e.jsx("span",{children:"Esgotado"})]}),U&&e.jsxs("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[e.jsx(Dh,{className:"h-3 w-3"}),e.jsx("span",{children:"Baixo"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2 line-clamp-2",children:D.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:D.category}),D.item_type==="direct"&&q.currentStock!==void 0&&e.jsxs("p",{className:`text-xs mb-2 ${Z?"text-red-600":U?"text-yellow-600":"text-gray-500"}`,children:["Estoque: ",q.currentStock]}),e.jsx("p",{className:`text-lg font-bold ${Z?"text-gray-400":"text-blue-600"}`,children:Ae(D.price)})]})]},D.id)})})})]}),e.jsxs("div",{className:"w-96 bg-white border-l flex flex-col",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Carrinho"}),u.length>0&&e.jsx("button",{onClick:R,className:"text-red-600 hover:text-red-700 text-sm",children:"Limpar"})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"Carrinho vazio"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Adicione itens do menu"})]}):e.jsx("div",{className:"space-y-4",children:u.map(D=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:D.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Ae(D.price)," cada"]}),O[D.menu_item_id]&&e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(Dh,{className:"h-4 w-4 text-yellow-500"}),e.jsx("p",{className:"text-xs text-yellow-600",children:O[D.menu_item_id]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T(D.menu_item_id,D.quantity-1),className:"p-1 rounded hover:bg-gray-200",children:e.jsx(PO,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:D.quantity}),e.jsx("button",{onClick:()=>T(D.menu_item_id,D.quantity+1),className:"p-1 rounded hover:bg-gray-200",children:e.jsx($O,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$(D.menu_item_id),className:"p-1 rounded hover:bg-red-100 text-red-600 ml-2",children:e.jsx(qO,{className:"h-4 w-4"})})]})]},D.menu_item_id))})}),h&&e.jsx("div",{className:"p-4 border-t bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:h.name}),e.jsx("p",{className:"text-sm text-blue-700",children:"Membro - Desconto 10%"})]}),e.jsx("button",{onClick:()=>f(null),className:"text-blue-600 hover:text-blue-700",children:e.jsx(R0,{className:"h-5 w-5"})})]})}),u.length>0&&e.jsxs("div",{className:"p-4 border-t bg-gray-50",children:[e.jsxs("button",{onClick:()=>A(!0),className:"w-full mb-4 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 flex items-center justify-center space-x-2",children:[e.jsx(_d,{className:"h-5 w-5"}),e.jsx("span",{children:h?"Trocar Cliente":"Identificar Cliente"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:Ae(B)})]}),K>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Desconto (10%):"}),e.jsxs("span",{children:["-",Ae(K)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:Ae(G)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes do Cliente"}),e.jsx("textarea",{value:v,onChange:D=>N(D.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observaes especiais..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes Internas"}),e.jsx("textarea",{value:g,onChange:D=>y(D.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observaes sobre o pedido..."})]}),e.jsx("button",{onClick:X,disabled:E||u.length===0,className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-medium",children:E?"Criando Pedido...":"Enviar para Caixa"})]})]})]}),e.jsx(HO,{isOpen:S,onClose:()=>A(!1),onSelectCustomer:D=>{f(D),A(!1)}})]})},GO={pending_payment:"Aguardando Pagamento",paid:"Pago",preparing:"Preparando",ready:"Pronto",delivered:"Entregue",cancelled:"Cancelado"},YO={pending_payment:"bg-yellow-100 text-yellow-800",paid:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",ready:"bg-green-100 text-green-800",delivered:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"},tj=t=>`#${t.toString().padStart(4,"0")}`,KO=()=>{var E;const{pendingOrders:t,preparingOrders:s,readyOrders:r,updateOrderStatus:i,processPayment:l,loading:c,refreshData:u}=Ld(),{currentSession:m}=eN(),[h,f]=b.useState(!1),[g,y]=b.useState(null),[v,N]=b.useState("dinheiro"),[_,j]=b.useState(!1),C=async()=>{if(!(!g||!m)){j(!0);try{await l({order_id:g.id,payment_method:v,cash_session_id:m.id,amount_paid:g.final_amount}),f(!1),y(null)}catch(w){console.error("Erro ao processar pagamento:",w),alert("Erro ao processar pagamento. Tente novamente.")}finally{j(!1)}}},M=async w=>{try{await i(w,{status:"ready"})}catch(O){console.error("Erro ao marcar como pronto:",O),alert("Erro ao atualizar status. Tente novamente.")}},S=async w=>{try{await i(w,{status:"delivered"})}catch(O){console.error("Erro ao marcar como entregue:",O),alert("Erro ao atualizar status. Tente novamente.")}},A=({order:w})=>{var K;const O=YO[w.status],L=GO[w.status],H=(()=>{const G=new Date(w.created_at);return Math.floor((new Date().getTime()-G.getTime())/(1e3*60))})(),B=H>15;return e.jsxs(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-lg shadow-md p-4 border-l-4 ${B?"border-red-500":w.status==="ready"?"border-green-500":"border-blue-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:tj(w.order_number)}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O}`,children:L})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(rd,{className:"h-4 w-4"}),e.jsxs("span",{className:B?"text-red-600 font-medium":"",children:[H,"min"]})]})]}),(w.customer_name||w.customer_phone)&&e.jsx("div",{className:"mb-3 p-2 bg-gray-50 rounded",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[w.customer_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_d,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:w.customer_name})]}),w.customer_phone&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Nf,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:w.customer_phone})]})]})}),e.jsx("div",{className:"space-y-2 mb-3",children:(K=w.items)==null?void 0:K.map(G=>{var ae;return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[G.quantity,"x ",((ae=G.menu_item)==null?void 0:ae.name)||"Item",G.notes&&e.jsxs("span",{className:"text-gray-500 italic",children:[" - ",G.notes]})]}),e.jsx("span",{className:"font-medium",children:Ae(G.total_price)})]},G.id)})}),(w.customer_notes||w.notes)&&e.jsxs("div",{className:"mb-3 p-2 bg-yellow-50 rounded",children:[w.customer_notes&&e.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[e.jsx(EO,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsx("span",{className:"text-yellow-800",children:w.customer_notes})]}),w.notes&&e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Obs. interna: ",w.notes]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-3 pt-2 border-t",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Total:"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:Ae(w.final_amount)})]}),e.jsxs("div",{className:"flex space-x-2",children:[w.status==="pending_payment"&&e.jsx("button",{onClick:()=>{y(w),f(!0)},disabled:!m,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Receber Pagamento"}),w.status==="preparing"&&e.jsx("button",{onClick:()=>M(w.id),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 text-sm font-medium",children:"Marcar como Pronto"}),w.status==="ready"&&e.jsx("button",{onClick:()=>S(w.id),className:"flex-1 bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 text-sm font-medium",children:"Entregar ao Cliente"})]})]})};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pedidos de Balco"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[m?e.jsx("div",{className:"bg-green-100 px-3 py-1 rounded-lg",children:e.jsx("span",{className:"text-green-800 text-sm font-medium",children:"Caixa Aberto"})}):e.jsx("div",{className:"bg-red-100 px-3 py-1 rounded-lg",children:e.jsx("span",{className:"text-red-800 text-sm font-medium",children:"Caixa Fechado"})}),e.jsxs("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(Jv,{className:"h-4 w-4"}),e.jsx("span",{children:"Atualizar"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-yellow-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"Aguardando Pagamento"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:t.length})]}),e.jsx(rd,{className:"h-8 w-8 text-yellow-600"})]})}),e.jsx("div",{className:"bg-blue-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"Preparando"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:s.length})]}),e.jsx(Jv,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-green-100 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-800 text-sm font-medium",children:"Prontos"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:r.length})]}),e.jsx(Z1,{className:"h-8 w-8 text-green-600"})]})})]}),e.jsxs("div",{className:"space-y-6",children:[t.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Aguardando Pagamento (",t.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(w=>e.jsx(A,{order:w},w.id))})]}),s.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Preparando (",s.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(w=>e.jsx(A,{order:w},w.id))})]}),r.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Prontos para Entrega (",r.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(w=>e.jsx(A,{order:w},w.id))})]}),t.length===0&&s.length===0&&r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(rd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido pendente"}),e.jsx("p",{className:"text-gray-600",children:"Todos os pedidos foram processados e entregues."})]})]}),h&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Receber Pagamento - ",tj(g.order_number)]}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R0,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Resumo do Pedido"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[(E=g.items)==null?void 0:E.map(w=>{var O;return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[w.quantity,"x ",(O=w.menu_item)==null?void 0:O.name]}),e.jsx("span",{children:Ae(w.total_price)})]},w.id)}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-medium",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:Ae(g.final_amount)})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pagamento"}),e.jsxs("select",{value:v,onChange:w=>N(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),e.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"transferencia",children:"Transferncia"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:C,disabled:_||!m,className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:_?"Processando...":"Confirmar Pagamento"})]})]})})]})},$d=()=>{const[t,s]=b.useState([]),[r,i]=b.useState(!0),[l,c]=b.useState(null),u=async()=>{try{i(!0);const{data:f,error:g}=await W.from("bar_tables").select("*").order("number");if(g)throw g;s(f||[])}catch(f){c(f instanceof Error?f.message:"Erro ao carregar mesas")}finally{i(!1)}},m=async(f,g)=>{try{const{error:y}=await W.from("bar_tables").update({status:g}).eq("id",f);if(y)throw y;s(v=>v.map(N=>N.id===f?{...N,status:g}:N))}catch(y){throw new Error(y instanceof Error?y.message:"Erro ao atualizar mesa")}},h=async(f,g,y)=>{try{const{error:v}=await W.from("bar_tables").update({position_x:g,position_y:y}).eq("id",f);if(v)throw v;s(N=>N.map(_=>_.id===f?{..._,position_x:g,position_y:y}:_))}catch(v){throw new Error(v instanceof Error?v.message:"Erro ao atualizar posio da mesa")}};return b.useEffect(()=>{u()},[]),{tables:t,loading:r,error:l,refetch:u,updateTableStatus:m,updateTablePosition:h}},sN=({isOpen:t,onClose:s,selectedTable:r,onComandaCreated:i})=>{const{user:l}=Kt(),{tables:c}=$d(),{createComanda:u}=Cl(),[m,h]=b.useState({table_id:(r==null?void 0:r.id)||"",customer_id:"",customer_name:"",people_count:1,notes:""}),[f,g]=b.useState(""),[y,v]=b.useState([]),[N,_]=b.useState(!1),[j,C]=b.useState(!1),M=async E=>{if(!E.trim()){v([]);return}try{_(!0);const{data:w,error:O}=await W.from("bar_customers").select("*").or(`phone.ilike.%${E}%,name.ilike.%${E}%`).eq("status","active").limit(10);if(O)throw O;v(w||[])}catch(w){console.error("Erro ao buscar clientes:",w)}finally{_(!1)}},S=E=>{h(w=>({...w,customer_id:E.id,customer_name:E.name})),g(E.name),v([])},A=async E=>{if(E.preventDefault(),!!l)try{C(!0);const w={table_id:m.table_id||void 0,customer_id:m.customer_id||void 0,customer_name:m.customer_name||void 0,employee_id:l.id,people_count:m.people_count,notes:m.notes||void 0};await u(w),i&&i(),s(),h({table_id:"",customer_id:"",customer_name:"",people_count:1,notes:""}),g("")}catch(w){console.error("Erro ao criar comanda:",w),alert("Erro ao criar comanda. Tente novamente.")}finally{C(!1)}};return b.useEffect(()=>{r&&h(E=>({...E,table_id:r.id}))},[r]),b.useEffect(()=>{const E=setTimeout(()=>{M(f)},300);return()=>clearTimeout(E)},[f]),t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nova Comanda"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(it,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:A,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(wl,{className:"w-4 h-4 inline mr-1"}),"Mesa (opcional)"]}),e.jsxs("select",{value:m.table_id,onChange:E=>h(w=>({...w,table_id:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Balco (sem mesa)"}),c.filter(E=>E.status==="available").map(E=>e.jsxs("option",{value:E.id,children:["Mesa ",E.number," (",E.capacity," pessoas)"]},E.id))]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Js,{className:"w-4 h-4 inline mr-1"}),"Cliente (opcional)"]}),e.jsx("input",{type:"text",value:f,onChange:E=>{g(E.target.value),E.target.value||h(w=>({...w,customer_id:"",customer_name:""}))},placeholder:"Buscar por telefone ou nome...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),y.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-40 overflow-y-auto",children:y.map(E=>e.jsxs("button",{type:"button",onClick:()=>S(E),className:"w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100",children:[e.jsx("div",{className:"font-medium",children:E.name}),e.jsx("div",{className:"text-sm text-gray-600",children:E.phone})]},E.id))}),N&&e.jsx("div",{className:"absolute right-3 top-9",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),f&&!m.customer_id&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do cliente"}),e.jsx("input",{type:"text",value:m.customer_name,onChange:E=>h(w=>({...w,customer_name:E.target.value})),placeholder:"Digite o nome do cliente",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ea,{className:"w-4 h-4 inline mr-1"}),"Nmero de pessoas"]}),e.jsx("input",{type:"number",min:"1",max:"20",value:m.people_count,onChange:E=>h(w=>({...w,people_count:parseInt(E.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:m.notes,onChange:E=>h(w=>({...w,notes:E.target.value})),placeholder:"Observaes sobre a comanda...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:j,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:j?"Criando...":"Criar Comanda"})]})]})]})}):null},XO=({isOpen:t,onClose:s})=>{const{tables:r,updateTablePosition:i}=$d(),[l,c]=b.useState([]),[u,m]=b.useState({isDragging:!1,tableId:null,startX:0,startY:0,offsetX:0,offsetY:0}),[h,f]=b.useState(!1),g=b.useRef(null);b.useEffect(()=>{c([...r])},[r]);const y=(M,S)=>{var O;if(M.preventDefault(),!((O=g.current)==null?void 0:O.getBoundingClientRect()))return;const w=M.currentTarget.getBoundingClientRect();m({isDragging:!0,tableId:S.id,startX:M.clientX,startY:M.clientY,offsetX:M.clientX-w.left,offsetY:M.clientY-w.top})},v=M=>{if(!u.isDragging||!u.tableId||!g.current)return;const S=g.current.getBoundingClientRect(),A=(M.clientX-S.left-u.offsetX)/S.width*100,E=(M.clientY-S.top-u.offsetY)/S.height*100,w=Math.max(0,Math.min(95,A)),O=Math.max(0,Math.min(95,E));c(L=>L.map(V=>V.id===u.tableId?{...V,position_x:w,position_y:O}:V))},N=()=>{m({isDragging:!1,tableId:null,startX:0,startY:0,offsetX:0,offsetY:0})},_=async()=>{try{f(!0);const M=l.map(S=>{const A=r.find(E=>E.id===S.id);return A&&(A.position_x!==S.position_x||A.position_y!==S.position_y)?i(S.id,S.position_x,S.position_y):Promise.resolve()});await Promise.all(M),s(),alert("Layout salvo com sucesso!")}catch(M){console.error("Erro ao salvar layout:",M),alert("Erro ao salvar layout. Tente novamente.")}finally{f(!1)}},j=()=>{c([...r])},C=M=>{switch(M){case"available":return"bg-green-500";case"occupied":return"bg-red-500";case"reserved":return"bg-yellow-500";case"cleaning":return"bg-gray-500";case"maintenance":return"bg-orange-500";default:return"bg-gray-400"}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(IA,{className:"w-6 h-6 text-gray-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Configurar Layout do Salo"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(it,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"Instrues:"})," Arraste as mesas para reposicion-las no salo. As posies so salvas em porcentagem para se adaptar a diferentes tamanhos de tela."]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{children:"Disponvel"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{children:"Ocupada"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{children:"Reservada"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-500 rounded"}),e.jsx("span",{children:"Limpeza"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),e.jsx("span",{children:"Manuteno"})]})]}),e.jsxs("div",{ref:g,className:"relative bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg h-96 overflow-hidden select-none",onMouseMove:v,onMouseUp:N,onMouseLeave:N,children:[l.map(M=>e.jsx("div",{className:`absolute w-12 h-12 rounded-lg border-2 border-white shadow-lg cursor-move flex items-center justify-center text-white font-bold text-xs transition-transform hover:scale-110 ${C(M.status)} ${u.tableId===M.id?"scale-110 shadow-xl":""}`,style:{left:`${M.position_x}%`,top:`${M.position_y}%`,zIndex:u.tableId===M.id?10:1},onMouseDown:S=>y(S,M),title:`Mesa ${M.number} - ${M.capacity} pessoas - ${M.status}`,children:M.number},M.id)),e.jsx("div",{className:"absolute top-2 left-2 text-xs text-gray-500 bg-white px-2 py-1 rounded",children:"Salo Principal"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsxs("button",{onClick:j,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(j0,{className:"w-4 h-4"}),e.jsx("span",{children:"Resetar"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:s,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{onClick:_,disabled:h,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(gd,{className:"w-4 h-4"}),e.jsx("span",{children:h?"Salvando...":"Salvar Layout"})]})]})]})]})]})}):null},P0=()=>{const{user:t}=Kt(),[s,r]=b.useState({mesas:[],comandas:[],metricas:null,notificacoes:[],loading:!0,error:null}),i=b.useCallback(B=>{r(K=>({...K,...B}))},[]),l=b.useCallback((B,K)=>{console.error(`Erro em ${K}:`,B),i({error:`Erro em ${K}: ${B.message||"Erro desconhecido"}`,loading:!1})},[i]),c=b.useCallback(async()=>{if(t)try{i({loading:!0,error:null});const{data:B,error:K}=await W.from("bar_tables").select(`
          *,
          comandas!comandas_table_id_fkey(
            id,
            customer_name,
            people_count,
            total,
            opened_at,
            status,
            comanda_items(
              id,
              quantity,
              price,
              status
            )
          )
        `).order("number");if(K)throw K;const G=(B==null?void 0:B.map(z=>{var D;const X=(D=z.comandas)==null?void 0:D.find(q=>q.status==="open");return{...z,currentComanda:X||void 0,occupiedSince:(X==null?void 0:X.opened_at)||void 0,currentTotal:(X==null?void 0:X.total)||0,peopleCount:(X==null?void 0:X.people_count)||0}}))||[],{data:ae,error:oe}=await W.from("comandas").select(`
          *,
          bar_tables(number, capacity),
          bar_customers(name, phone),
          comanda_items(
            *,
            menu_items(name, price, category)
          )
        `).in("status",["open","pending_payment"]).order("opened_at",{ascending:!1});if(oe)throw oe;const $=(ae==null?void 0:ae.map(z=>({...z,items:z.comanda_items||[],table:z.bar_tables||void 0,customer:z.bar_customers||void 0})))||[],{data:T,error:R}=await W.from("attendance_metrics").select("*").eq("employee_id",t.id).eq("date",new Date().toISOString().split("T")[0]).maybeSingle();R&&console.warn("Erro ao carregar mtricas:",R),i({mesas:G,comandas:$,metricas:T||null,loading:!1})}catch(B){l(B,"carregamento inicial")}},[t,i,l]);b.useEffect(()=>{if(!t)return;const B=[],K=W.channel("bar-tables-changes").on("postgres_changes",{event:"*",schema:"public",table:"bar_tables"},oe=>{console.log("Mudana em mesas:",oe),c()}).subscribe();B.push(K);const G=W.channel("comandas-changes").on("postgres_changes",{event:"*",schema:"public",table:"comandas"},oe=>{console.log("Mudana em comandas:",oe),c()}).subscribe();B.push(G);const ae=W.channel("comanda-items-changes").on("postgres_changes",{event:"*",schema:"public",table:"comanda_items"},oe=>{console.log("Mudana em itens de comanda:",oe),c()}).subscribe();return B.push(ae),()=>{B.forEach(oe=>W.removeChannel(oe))}},[t,c]),b.useEffect(()=>{t&&c()},[t,c]);const u=b.useCallback(async(B,K,G)=>{if(!t)throw new Error("Usurio no autenticado");try{i({loading:!0,error:null});const{data:ae,error:oe}=await W.from("comandas").insert({table_id:B||null,customer_name:K||null,people_count:G||1,employee_id:t.id,status:"open",opened_at:new Date().toISOString(),total:0}).select().single();if(oe)throw oe;return B&&await h(B,"occupied"),await c(),ae.id}catch(ae){throw l(ae,"criao de comanda"),ae}},[t,i,l,c]),m=b.useCallback(async(B,K)=>{try{i({loading:!0,error:null});const{error:G}=await W.from("comandas").update({...K,updated_at:new Date().toISOString()}).eq("id",B);if(G)throw G;await c()}catch(G){throw l(G,"atualizao de comanda"),G}},[i,l,c]),h=b.useCallback(async(B,K)=>{try{const{error:G}=await W.from("bar_tables").update({status:K,updated_at:new Date().toISOString()}).eq("id",B);if(G)throw G;await c()}catch(G){throw l(G,"atualizao de status da mesa"),G}},[l,c]),f=b.useCallback(async B=>{try{await h(B,"cleaning"),setTimeout(async()=>{await h(B,"available")},5*60*1e3)}catch(K){throw l(K,"liberao de mesa"),K}},[h,l]),g=b.useCallback(async B=>{if(t)try{const K=new Date().toISOString().split("T")[0],{data:G,error:ae}=await W.from("attendance_metrics").select("*").eq("employee_id",t.id).eq("date",K).single();if(ae&&ae.code!=="PGRST116")throw ae;if(G){const{error:oe}=await W.from("attendance_metrics").update({total_sales:(G.total_sales||0)+B,orders_count:(G.orders_count||0)+1,comandas_count:(G.comandas_count||0)+1,updated_at:new Date().toISOString()}).eq("id",G.id);if(oe)throw oe}else{const{error:oe}=await W.from("attendance_metrics").insert({employee_id:t.id,date:K,total_sales:B,orders_count:1,comandas_count:1});if(oe)throw oe}}catch(K){console.error("Erro ao atualizar mtricas de venda:",K)}},[t]),y=b.useCallback(async(B,K,G)=>{try{i({loading:!0,error:null});const{data:ae,error:oe}=await W.from("comandas").select("table_id, total").eq("id",B).single();if(oe)throw oe;const{error:$}=await W.from("comandas").update({status:"closed",closed_at:new Date().toISOString(),payment_method:K,notes:G,updated_at:new Date().toISOString()}).eq("id",B);if($)throw $;ae.table_id&&await f(ae.table_id),await g(ae.total||0),await c()}catch(ae){throw l(ae,"fechamento de comanda"),ae}},[i,l,c,f,g]),v=b.useCallback(async(B,K,G,ae)=>{try{i({loading:!0,error:null});const{data:oe,error:$}=await W.from("menu_items").select("price").eq("id",K).single();if($)throw $;const{error:T}=await W.from("comanda_items").insert({comanda_id:B,menu_item_id:K,quantity:G,price:oe.price,notes:ae,status:"pending",added_at:new Date().toISOString()});if(T)throw T;const{data:R,error:z}=await W.from("comanda_items").select("quantity, price").eq("comanda_id",B);if(z)throw z;const X=R.reduce((D,q)=>D+q.quantity*q.price,0);await m(B,{total:X})}catch(oe){throw l(oe,"adio de item  comanda"),oe}},[i,l,m]),N=b.useCallback(async B=>{try{i({loading:!0,error:null});const{data:K,error:G}=await W.from("comanda_items").select("comanda_id").eq("id",B).single();if(G)throw G;const{error:ae}=await W.from("comanda_items").delete().eq("id",B);if(ae)throw ae;const{data:oe,error:$}=await W.from("comanda_items").select("quantity, price").eq("comanda_id",K.comanda_id);if($)throw $;const T=oe.reduce((R,z)=>R+z.quantity*z.price,0);await m(K.comanda_id,{total:T})}catch(K){throw l(K,"remoo de item da comanda"),K}},[i,l,m]),_=b.useCallback(async(B,K)=>{try{const G={status:K,updated_at:new Date().toISOString()};K==="ready"?G.prepared_at=new Date().toISOString():K==="delivered"&&(G.delivered_at=new Date().toISOString());const{error:ae}=await W.from("comanda_items").update(G).eq("id",B);if(ae)throw ae;await c()}catch(G){throw l(G,"atualizao de status do item"),G}},[l,c]),j=b.useCallback(async(B,K)=>{try{await h(B,"occupied"),K&&await m(K,{table_id:B})}catch(G){throw l(G,"ocupao de mesa"),G}},[h,m,l]),C=b.useCallback(async(B,K,G)=>{try{const{error:ae}=await W.from("bar_tables").update({status:"reserved",notes:`Reservado para ${K} s ${G.toLocaleTimeString()}`,updated_at:new Date().toISOString()}).eq("id",B);if(ae)throw ae;await c()}catch(ae){throw l(ae,"reserva de mesa"),ae}},[l,c]),M=b.useCallback(async B=>{try{await h(B,"available")}catch(K){throw l(K,"limpeza de mesa"),K}},[h,l]),S=b.useCallback(async B=>{var K;if(!t)throw new Error("Usurio no autenticado");try{i({loading:!0,error:null});const{data:G,error:ae}=await W.from("comandas").insert({customer_name:((K=B.customer)==null?void 0:K.name)||"Cliente Balco",employee_id:t.id,status:"closed",opened_at:new Date().toISOString(),closed_at:new Date().toISOString(),total:B.total,payment_method:B.payment_method||"dinheiro",notes:B.notes}).select().single();if(ae)throw ae;const oe=B.items.map(T=>({comanda_id:G.id,menu_item_id:T.menu_item_id,quantity:T.quantity,price:T.price,notes:T.notes,status:"delivered",added_at:new Date().toISOString(),delivered_at:new Date().toISOString()})),{error:$}=await W.from("comanda_items").insert(oe);if($)throw $;return await g(B.total),await c(),G.id}catch(G){throw l(G,"processamento de pedido do balco"),G}},[t,i,l,c]),A=b.useCallback(async(B,K)=>{if(!t)throw new Error("Usurio no autenticado");try{i({loading:!0,error:null});const{error:G}=await W.from("bill_splits").insert({comanda_id:B,split_type:K.type,person_count:K.person_count,splits:K.splits,total_amount:K.splits.reduce((ae,oe)=>ae+oe.total,0),service_charge:K.service_charge_percentage||0,discount_amount:K.discount_amount||0,created_by:t.id});if(G)throw G;await c()}catch(G){throw l(G,"diviso de conta"),G}},[t,i,l,c]),E=b.useCallback(async()=>{if(t)try{const B=new Date().toISOString().split("T")[0],{data:K}=await W.from("attendance_metrics").select("*").eq("employee_id",t.id).eq("date",B).single(),{data:G}=await W.from("comandas").select("total, opened_at, closed_at").eq("employee_id",t.id).gte("opened_at",`${B}T00:00:00`).lt("opened_at",`${B}T23:59:59`),ae=(G==null?void 0:G.reduce((T,R)=>T+(R.total||0),0))||0,oe=(G==null?void 0:G.length)||0,$={employee_id:t.id,date:B,comandas_count:oe,total_sales:ae,orders_count:oe,updated_at:new Date().toISOString()};if(K){const{error:T}=await W.from("attendance_metrics").update($).eq("id",K.id);if(T)throw T}else{const{error:T}=await W.from("attendance_metrics").insert($);if(T)throw T}await c()}catch(B){l(B,"atualizao de mtricas")}},[t,l,c]),w=b.useCallback(async B=>{i({notificacoes:s.notificacoes.map(K=>K.id===B?{...K,read:!0}:K)})},[s.notificacoes,i]),O=b.useCallback(async()=>{i({notificacoes:[]})},[i]),L=b.useCallback(async()=>{await c()},[c]),V=b.useCallback(B=>s.comandas.find(K=>K.table_id===B&&K.status==="open"),[s.comandas]),H=b.useCallback(B=>s.mesas.find(K=>K.number===B),[s.mesas]);return{...s,criarComanda:u,atualizarComanda:m,fecharComanda:y,adicionarItemComanda:v,removerItemComanda:N,atualizarStatusItem:_,ocuparMesa:j,liberarMesa:f,reservarMesa:C,limparMesa:M,atualizarStatusMesa:h,processarPedidoBalcao:S,dividirConta:A,atualizarMetricas:E,marcarNotificacaoLida:w,limparNotificacoes:O,recarregarDados:L,obterComandaPorMesa:V,obterMesaPorNumero:H}},WO=({isOpen:t,onClose:s,mesa:r,onStatusChange:i})=>{if(!t||!r)return null;const{getComandaByTable:l}=Cl();P0();const[c,u]=b.useState(null),[m,h]=b.useState(!1),[f,g]=b.useState(!1),[y,v]=b.useState(!1);b.useEffect(()=>{t&&r&&r.status==="occupied"&&N()},[t,r]);const N=async()=>{if(r)try{h(!0);const w=await l(r.id);u(w)}catch(w){console.error("Erro ao carregar detalhes da comanda:",w)}finally{h(!1)}},_=w=>new Date(w).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),j=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w),C=w=>{switch(w){case"available":return"text-green-600 bg-green-100";case"occupied":return"text-red-600 bg-red-100";case"reserved":return"text-yellow-600 bg-yellow-100";case"cleaning":return"text-gray-600 bg-gray-100";case"maintenance":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},M=w=>{switch(w){case"available":return"Disponvel";case"occupied":return"Ocupada";case"reserved":return"Reservada";case"cleaning":return"Limpeza";case"maintenance":return"Manuteno";default:return"Indefinido"}},S=async(w,O)=>{if(c){v(!0);try{console.log(" Enviando comanda para o caixa:",c.id,"Mtodo:",w);const{error:L}=await W.from("comandas").update({status:"pending_payment",payment_method:w,notes:O,updated_at:new Date().toISOString()}).eq("id",c.id);if(L)throw L;console.log(" Comanda enviada para o caixa com sucesso"),await N(),g(!1)}catch(L){console.error(" Erro ao enviar comanda para o caixa:",L)}finally{v(!1)}}},A=w=>{r&&(i(r.id,w),s())},E=w=>{const O=new Date(w),V=new Date().getTime()-O.getTime(),H=Math.floor(V/(1e3*60*60)),B=Math.floor(V%(1e3*60*60)/(1e3*60));return H>0?`${H}h ${B}min`:`${B}min`};return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Mesa ",r.number]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${C(r.status)}`,children:M(r.status)})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(it,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ea,{size:20,className:"text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Capacidade"})]}),e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[r.capacity," pessoas"]})]}),r.status==="occupied"&&r.occupiedSince&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Vt,{size:20,className:"text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Tempo de ocupao"})]}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:E(r.occupiedSince)})]})]}),r.status==="occupied"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaes da Comanda"}),m?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Carregando comanda..."})]}):c?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cliente"}),e.jsx("p",{className:"font-medium",children:c.customer_name||"No informado"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pessoas"}),e.jsx("p",{className:"font-medium",children:c.people_count||r.peopleCount||1})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Aberta em"}),e.jsx("p",{className:"font-medium",children:_(c.opened_at)})]})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yt,{size:20,className:"text-green-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Total da Comanda"})]}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:j(c.total)})]})}),c.items&&c.items.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Itens da Comanda (",c.items.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:c.items.map((w,O)=>{var L,V;return console.log(" Debug item no MesaDetailsModal:",w),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[w.quantity,"x ",((L=w.menu_item)==null?void 0:L.name)||((V=w.menu_items)==null?void 0:V.name)||`Item #${w.menu_item_id}`]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Adicionado em ",_(w.added_at)]}),w.notes&&e.jsxs("p",{className:"text-sm text-gray-500 italic",children:["Obs: ",w.notes]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900",children:j(w.price*w.quantity)}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${w.status==="delivered"?"bg-green-100 text-green-800":w.status==="ready"?"bg-blue-100 text-blue-800":w.status==="preparing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.status==="delivered"?"Entregue":w.status==="ready"?"Pronto":w.status==="preparing"?"Preparando":"Pendente"})]})]},w.id)})})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma comanda encontrada para esta mesa"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aes Rpidas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.status==="available"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>A("occupied"),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Ocupar Mesa"}),e.jsx("button",{onClick:()=>A("reserved"),className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors",children:"Reservar Mesa"})]}),r.status==="occupied"&&e.jsxs(e.Fragment,{children:[c&&c.status==="open"&&c.items&&c.items.length>0&&e.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors col-span-2 flex items-center justify-center space-x-2",children:[e.jsx(Yt,{size:16}),e.jsxs("span",{children:["Enviar para Caixa - ",j(c.total)]})]}),e.jsx("button",{onClick:()=>A("available"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Liberar Mesa"}),e.jsx("button",{onClick:()=>A("cleaning"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Marcar para Limpeza"})]}),(r.status==="cleaning"||r.status==="reserved")&&e.jsx("button",{onClick:()=>A("available"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors col-span-2",children:"Liberar Mesa"})]})]})]})]}),f&&c&&e.jsx(QO,{isOpen:f,onClose:()=>g(!1),comanda:c,onConfirm:S,isLoading:y})]})},QO=({isOpen:t,onClose:s,comanda:r,onConfirm:i,isLoading:l})=>{var y;const[c,u]=b.useState("dinheiro"),[m,h]=b.useState("");if(!t)return null;const f=v=>{v.preventDefault(),i(c,m)},g=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Enviar para Caixa"}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[(y=r.table)!=null&&y.number?`Mesa ${r.table.number}`:"Balco"," - ",r.customer_name||"Cliente"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total da conta:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:g(r.total)})]})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pagamento"}),e.jsxs("select",{value:c,onChange:v=>u(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),e.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"vale_refeicao",children:"Vale Refeio"}),e.jsx("option",{value:"outros",children:"Outros"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes (opcional)"}),e.jsx("textarea",{value:m,onChange:v=>h(v.target.value),placeholder:"Observaes para o caixa...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:s,disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:l,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Enviando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(pn,{size:16}),e.jsx("span",{children:"Enviar para Caixa"})]})})]})]})]})})})},ZO=()=>{const{tables:t,loading:s,updateTableStatus:r,refetch:i}=$d(),{comandas:l,refetch:c}=Cl(),[u,m]=b.useState(!1),[h,f]=b.useState(!1),[g,y]=b.useState(!1),[v,N]=b.useState(null),[_,j]=b.useState([]);b.useEffect(()=>{const V=t.map(H=>{const B=l.find(G=>G.table_id===H.id&&G.status==="open"),K=B?"occupied":H.status;return{...H,status:K,currentComanda:B,occupiedSince:B==null?void 0:B.opened_at,currentTotal:(B==null?void 0:B.total)||0,peopleCount:(B==null?void 0:B.people_count)||void 0}});j(V)},[t,l]);const C=()=>{N(null),m(!0)},M=()=>{f(!0)},S=V=>{N(V),V.status==="available"?m(!0):y(!0)},A=async(V,H)=>{try{await r(V,H)}catch(B){console.error("Erro ao atualizar status da mesa:",B)}},w=(()=>{const V={available:0,occupied:0,reserved:0,cleaning:0,maintenance:0};return _.forEach(H=>{H.status in V&&V[H.status]++}),V})(),O=V=>{switch(V){case"available":return"bg-green-100 border-green-300 text-green-800 hover:bg-green-200";case"occupied":return"bg-red-100 border-red-300 text-red-800 hover:bg-red-200";case"reserved":return"bg-yellow-100 border-yellow-300 text-yellow-800 hover:bg-yellow-200";case"cleaning":return"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200";case"maintenance":return"bg-orange-100 border-orange-300 text-orange-800 hover:bg-orange-200";default:return"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200"}},L=V=>{switch(V){case"available":return"";case"occupied":return"";case"reserved":return"";case"cleaning":return"";case"maintenance":return"";default:return"?"}};return e.jsxs("div",{className:"mesas-container space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gesto de Mesas"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[_.length," mesas configuradas"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:C,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(ks,{size:20}),e.jsx("span",{children:"Nova Comanda"})]}),e.jsxs("button",{onClick:()=>i(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(j0,{size:20}),e.jsx("span",{children:"Atualizar"})]}),e.jsxs("button",{onClick:M,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(w0,{size:20}),e.jsx("span",{children:"Configurar Layout"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.available}),e.jsx("div",{className:"text-sm text-green-700",children:"Disponveis"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:w.occupied}),e.jsx("div",{className:"text-sm text-red-700",children:"Ocupadas"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:w.reserved}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Reservadas"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:w.cleaning}),e.jsx("div",{className:"text-sm text-gray-700",children:"Limpeza"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:w.maintenance}),e.jsx("div",{className:"text-sm text-orange-700",children:"Manuteno"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Layout do Salo"}),e.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:e.jsx("span",{children:"Clique nas mesas para gerenciar"})})]}),s?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Carregando mesas..."})]}):e.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-4 p-4 bg-gray-50 rounded-lg min-h-96",children:[_.map(V=>e.jsxs("div",{onClick:()=>S(V),className:`
                  relative aspect-square rounded-lg border-2 cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg
                  flex flex-col items-center justify-center text-center p-2
                  ${O(V.status)}
                `,children:[e.jsx("div",{className:"font-bold text-sm mb-1",children:V.number}),e.jsx("div",{className:"text-xs opacity-75",children:L(V.status)}),V.currentComanda&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:V.peopleCount||"!"}),e.jsxs("div",{className:"text-xs mt-1 opacity-60",children:[V.capacity,"p"]})]},V.id)),Array.from({length:Math.max(0,40-_.length)}).map((V,H)=>e.jsx("div",{className:"aspect-square rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center text-gray-400 text-xs",children:"Vazio"},`empty-${H}`))]})]}),e.jsx(sN,{isOpen:u,onClose:()=>{m(!1),N(null)},selectedTable:v,onComandaCreated:()=>{c()}}),e.jsx(XO,{isOpen:h,onClose:()=>f(!1)}),e.jsx(WO,{isOpen:g,onClose:()=>{y(!1),N(null)},mesa:v,onStatusChange:A})]})},JO=({comandas:t,onComandaClick:s,onDismissAlert:r})=>{const i=()=>{const h=new Date;return t.filter(f=>{if(f.status!=="open")return!1;const g=new Date(f.opened_at);return(h.getTime()-g.getTime())/(1e3*60*60)>2})},l=()=>{const h=new Date;return t.filter(f=>{if(f.status!=="open")return!1;const g=new Date(f.opened_at);return(h.getTime()-g.getTime())/(1e3*60*60)>4})},c=h=>{const f=new Date(h),y=new Date().getTime()-f.getTime(),v=Math.floor(y/(1e3*60*60)),N=Math.floor(y%(1e3*60*60)/(1e3*60));return v>0?`${v}h ${N}m`:`${N}m`},u=i(),m=l();return u.length===0?null:e.jsxs("div",{className:"mb-6 space-y-3",children:[m.map(h=>{var f,g;return e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(As,{className:"w-6 h-6 text-red-500"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-red-800 font-semibold",children:["Comanda Crtica - ",((f=h.table)==null?void 0:f.number)||"Balco"]}),e.jsxs("p",{className:"text-red-700 text-sm",children:[((g=h.customer)==null?void 0:g.name)||h.customer_name||"Cliente no identificado","  Aberta h ",c(h.opened_at),"  R$ ",h.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>s(h),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Ver Detalhes"}),r&&e.jsx("button",{onClick:()=>r(h.id),className:"p-1 text-red-500 hover:bg-red-100 rounded transition-colors",children:e.jsx(it,{className:"w-4 h-4"})})]})]})},`critical-${h.id}`)}),u.filter(h=>!m.includes(h)).map(h=>{var f,g;return e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Vt,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-yellow-800 font-semibold",children:["Ateno - ",((f=h.table)==null?void 0:f.number)||"Balco"]}),e.jsxs("p",{className:"text-yellow-700 text-sm",children:[((g=h.customer)==null?void 0:g.name)||h.customer_name||"Cliente no identificado","  Aberta h ",c(h.opened_at),"  R$ ",h.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>s(h),className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700 transition-colors",children:"Ver Detalhes"}),r&&e.jsx("button",{onClick:()=>r(h.id),className:"p-1 text-yellow-500 hover:bg-yellow-100 rounded transition-colors",children:e.jsx(it,{className:"w-4 h-4"})})]})]})},`warning-${h.id}`)}),u.length>3&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 p-3 rounded-lg text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:[u.length," comandas com tempo excessivo ",m.length," crticas"]})})]})},eR=({searchTerm:t,onSearchChange:s,statusFilter:r,onStatusFilterChange:i,employeeFilter:l,onEmployeeFilterChange:c,tableFilter:u,onTableFilterChange:m,timeFilter:h,onTimeFilterChange:f,employees:g,tables:y,onClearFilters:v})=>{var C,M;const N=t||r!=="all"||l||u||h!=="all",_=S=>{switch(S){case"all":return"Todos os Status";case"open":return"Abertas";case"pending_payment":return"Aguardando Pagamento";case"closed":return"Fechadas";case"cancelled":return"Canceladas";default:return S}},j=S=>{switch(S){case"all":return"Todos os Tempos";case"recent":return"Recentes (< 1h)";case"overdue":return"Atrasadas (> 2h)";case"critical":return"Crticas (> 4h)";default:return S}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k1,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filtros"})]}),N&&e.jsxs("button",{onClick:v,className:"flex items-center space-x-1 px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(it,{className:"w-4 h-4"}),e.jsx("span",{children:"Limpar Filtros"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"xl:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:t,onChange:S=>s(S.target.value),placeholder:"Mesa, cliente ou funcionrio...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:r,onChange:S=>i(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"open",children:"Abertas"}),e.jsx("option",{value:"pending_payment",children:"Aguardando Pagamento"}),e.jsx("option",{value:"closed",children:"Fechadas"}),e.jsx("option",{value:"cancelled",children:"Canceladas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funcionrio"}),e.jsxs("select",{value:l,onChange:S=>c(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os Funcionrios"}),g.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesa"}),e.jsxs("select",{value:u,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todas as Mesas"}),e.jsx("option",{value:"balcao",children:"Balco"}),y.map(S=>e.jsxs("option",{value:S.id,children:["Mesa ",S.number]},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo"}),e.jsxs("select",{value:h,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os Tempos"}),e.jsx("option",{value:"recent",children:"Recentes (< 1h)"}),e.jsx("option",{value:"overdue",children:"Atrasadas (> 2h)"}),e.jsx("option",{value:"critical",children:"Crticas (> 4h)"})]})]})]}),N&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[t&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:['Busca: "',t,'"',e.jsx("button",{onClick:()=>s(""),className:"ml-1 p-0.5 hover:bg-blue-200 rounded-full",children:e.jsx(it,{className:"w-3 h-3"})})]}),r!=="all"&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:["Status: ",_(r),e.jsx("button",{onClick:()=>i("all"),className:"ml-1 p-0.5 hover:bg-green-200 rounded-full",children:e.jsx(it,{className:"w-3 h-3"})})]}),l&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:["Funcionrio: ",(C=g.find(S=>S.id===l))==null?void 0:C.name,e.jsx("button",{onClick:()=>c(""),className:"ml-1 p-0.5 hover:bg-purple-200 rounded-full",children:e.jsx(it,{className:"w-3 h-3"})})]}),u&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full",children:["Mesa: ",u==="balcao"?"Balco":(M=y.find(S=>S.id===u))==null?void 0:M.number,e.jsx("button",{onClick:()=>m(""),className:"ml-1 p-0.5 hover:bg-orange-200 rounded-full",children:e.jsx(it,{className:"w-3 h-3"})})]}),h!=="all"&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-full",children:["Tempo: ",j(h),e.jsx("button",{onClick:()=>f("all"),className:"ml-1 p-0.5 hover:bg-red-200 rounded-full",children:e.jsx(it,{className:"w-3 h-3"})})]})]})]})};var aN=(t=>(t.ABERTA="aberta",t.PENDENTE_PAGAMENTO="pendente_pagamento",t.FECHADA="fechada",t.CANCELADA="cancelada",t))(aN||{}),nd=(t=>(t.PENDENTE="pendente",t.PREPARANDO="preparando",t.PRONTO="pronto",t.ENTREGUE="entregue",t.CANCELADO="cancelado",t))(nd||{});const sj=10,gi=0,xi=30;class ys{static validatePercentage(s){return s>=gi&&s<=xi&&!isNaN(s)&&isFinite(s)}static calculateCommission(s,r){if(!this.validatePercentage(r))throw new Error(`Percentual de comisso deve estar entre ${gi}% e ${xi}%`);if(s<=0)throw new Error("Valor base deve ser maior que zero");return s*r/100}static calculateTotal(s,r){const i=this.calculateCommission(s,r);return s+i}static calculateWithValidation(s,r){try{if(!this.validatePercentage(r))return{valor_base:s,percentual_comissao:r,valor_comissao:0,valor_total:s,percentual_valido:!1,erro:`Percentual deve estar entre ${gi}% e ${xi}%`};if(s<=0)return{valor_base:s,percentual_comissao:r,valor_comissao:0,valor_total:s,percentual_valido:!1,erro:"Valor base deve ser maior que zero"};const l=this.calculateCommission(s,r),c=s+l;return{valor_base:s,percentual_comissao:r,valor_comissao:l,valor_total:c,percentual_valido:!0}}catch(i){return{valor_base:s,percentual_comissao:r,valor_comissao:0,valor_total:s,percentual_valido:!1,erro:i instanceof Error?i.message:"Erro desconhecido"}}}static validateCommissionData(s,r){const i=[];let l=!0,c;s<=0&&(l=!1,c="Valor base deve ser maior que zero"),this.validatePercentage(r)||(l=!1,c=`Percentual deve estar entre ${gi}% e ${xi}%`,r<gi?i.push(`Percentual mnimo  ${gi}%`):r>xi&&i.push(`Percentual mximo  ${xi}%`)),l&&(r===0?i.push("Comisso zerada - confirme se est correto"):r<5?i.push("Percentual baixo - considere o padro de 10%"):r>20&&i.push("Percentual alto - verifique se est correto"));const u=l?this.calculateCommission(s,r):0;return{valido:l,percentual:r,valor_calculado:u,mensagem_erro:c,sugestoes:i.length>0?i:void 0}}static calculatePercentageFromAmount(s,r){if(s<=0)throw new Error("Valor base deve ser maior que zero");return r/s*100}static formatCurrency(s){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}static formatPercentage(s){return`${s.toFixed(1)}%`}}ys.validatePercentage;ys.calculateCommission;ys.calculateTotal;ys.formatCurrency;const rN=({isOpen:t,comanda:s,onClose:r,onConfirm:i,loading:l=!1})=>{var _;const[c,u]=b.useState(sj),[m,h]=b.useState(""),[f,g]=b.useState(),y=ys.calculateWithValidation(s.total,c);b.useEffect(()=>{t&&(u(sj),h(""),g(void 0))},[t]);const v=j=>{const C=parseFloat(j)||0;u(C),g(void 0)},N=async()=>{try{if(g(void 0),!y.percentual_valido){g(y.erro);return}const j={comanda_id:s.id,valor_base:s.total,percentual_comissao:c,valor_comissao:y.valor_comissao,valor_total:y.valor_total,metodo_pagamento:"dinheiro",observacoes:m.trim()||void 0};await i(j)}catch(j){g(j instanceof Error?j.message:"Erro ao processar fechamento")}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Nv,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Fechamento de Conta"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Comanda #",Pd(s.id),((_=s.mesa)==null?void 0:_.numero)&&` - Mesa ${s.mesa.numero}`]})]})]}),e.jsx("button",{onClick:r,disabled:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"Itens Consumidos"}),s.itens&&s.itens.length>0&&e.jsxs("span",{className:"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[s.itens.length," ",s.itens.length===1?"item":"itens"]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:s.itens&&s.itens.length>0?e.jsxs("div",{className:"space-y-3",children:[s.itens.map((j,C)=>e.jsxs("div",{className:"flex justify-between items-start bg-white rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full",children:C+1}),e.jsx("div",{className:"font-medium text-gray-900",children:j.nome_produto})]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[e.jsxs("span",{className:"font-medium",children:[j.quantidade,"x"]})," ",ys.formatCurrency(j.preco_unitario),j.observacoes&&e.jsxs("div",{className:"text-xs text-gray-400 italic mt-1",children:["Obs: ",j.observacoes]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ys.formatCurrency(j.preco_total)}),e.jsx("div",{className:"text-xs text-gray-500",children:j.quantidade>1&&`${j.quantidade} unidades`})]})]},j.id)),e.jsx("div",{className:"border-t pt-3 mt-3 bg-white rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center font-semibold text-gray-900",children:[e.jsx("span",{children:"Subtotal dos Itens"}),e.jsx("span",{className:"text-lg",children:ys.formatCurrency(s.total)})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx(Nv,{className:"w-12 h-12 mx-auto"})}),e.jsx("p",{className:"text-gray-500",children:"Nenhum item encontrado na comanda"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Verifique se a comanda possui itens adicionados"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Comisso do Garom"}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Percentual de Comisso (0% - 30%)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"0",max:"30",step:"0.1",value:c,onChange:j=>v(j.target.value),disabled:l,className:`flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${y.percentual_valido?"border-gray-300":"border-red-300 bg-red-50"}`,placeholder:"10.0"}),e.jsx("span",{className:"text-sm text-gray-500",children:"%"}),e.jsx("button",{type:"button",onClick:()=>u(0),disabled:l,className:"px-3 py-2 text-sm bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Zerar"})]}),!y.percentual_valido&&y.erro&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.erro}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Voc pode ajustar o percentual ou zer-lo completamente"})]}),y.percentual_valido&&e.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Valor da comisso:"}),e.jsx("span",{className:"font-medium",children:ys.formatCurrency(y.valor_comissao)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Percentual aplicado:"}),e.jsx("span",{className:"font-medium",children:ys.formatPercentage(y.percentual_comissao)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes (opcional)"}),e.jsx("textarea",{value:m,onChange:j=>h(j.target.value),disabled:l,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Adicione observaes sobre o fechamento..."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-blue-600 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Envio para Caixa"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Esta comanda ser enviada como ",e.jsx("strong",{children:"pendente de pagamento"})," para o caixa. O operador do caixa escolher o mtodo de pagamento (dinheiro, carto, PIX, etc.) no momento do processamento."]})]})]})}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-red-600 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"Erro no Processamento"}),e.jsx("p",{className:"text-red-700 text-sm",children:f})]})]})})]}),e.jsx("div",{className:"border-t bg-gray-50 p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Valor dos itens:"}),e.jsx("span",{children:ys.formatCurrency(s.total)})]}),y.percentual_valido&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Comisso (",ys.formatPercentage(c),"):"]}),e.jsx("span",{children:ys.formatCurrency(y.valor_comissao)})]}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total a Pagar:"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:ys.formatCurrency(y.percentual_valido?y.valor_total:s.total)})]})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,disabled:l,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:N,disabled:l||!y.percentual_valido,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enviando para Caixa..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pn,{className:"w-4 h-4"}),"Fechar e Enviar para Caixa"]})})]})]})})]})}):null},nN=(t={})=>{const[s,r]=b.useState(!1),[i,l]=b.useState(null),[c,u]=b.useState(!1),[m,h]=b.useState(null),f=b.useCallback(N=>{l(N),r(!0),h(null)},[]),g=b.useCallback(()=>{r(!1),l(null),h(null),u(!1)},[]),y=b.useCallback(()=>{h(null)},[]),v=b.useCallback(async N=>{try{u(!0),h(null),console.log(" Processando fechamento de comanda:",N),await new Promise(j=>setTimeout(j,1e3));const _={success:!0,data:{transaction_id:`TXN-${Date.now()}`,reference_number:`REF-${Date.now()}`,pending_id:`PEND-${Date.now()}`,total_amount:N.valor_total,commission_amount:N.valor_comissao,payment_method:N.metodo_pagamento,receipt:void 0,processed_at:new Date().toISOString(),additional_data:{status:"pending_payment",message:"Comanda enviada para processamento no caixa"}}};return t.onSuccess&&t.onSuccess(_),setTimeout(()=>{g()},1500),_}catch(_){const j=_ instanceof Error?_:new Error("Erro interno do sistema");return h(j.message),t.onError&&t.onError(j),{success:!1,error:{type:"system",message:j.message,details:{error:j instanceof Error?j.stack:String(j)}}}}finally{u(!1)}},[g,t]);return{isOpen:s,selectedComanda:i,loading:c,error:m,openModal:f,closeModal:g,handleConfirm:v,clearError:y}},tR=()=>{var ge,Ze;const{comandas:t,loading:s,refetch:r}=Cl(),{tables:i}=$d(),[l,c]=b.useState(""),[u,m]=b.useState("all"),[h,f]=b.useState(""),[g,y]=b.useState(""),[v,N]=b.useState("all"),[_,j]=b.useState(!1),[C,M]=b.useState(null),[S,A]=b.useState(new Set),[E,w]=b.useState("list"),[O,L]=b.useState([]),[V,H]=b.useState("all"),[B,K]=b.useState(""),[G,ae]=b.useState(!1),[oe,$]=b.useState(!1),[T,R]=b.useState(""),{isOpen:z,selectedComanda:X,loading:D,error:q,openModal:U,closeModal:Z,handleConfirm:ie,clearError:he}=nN({onSuccess:async J=>{if(console.log(" Modal processado com sucesso:",J),C)try{console.log(" Fechando comanda no sistema do bar:",C.id);const{error:De}=await W.from("comandas").update({status:"pending_payment",payment_method:"pending",notes:"Enviado para caixa - aguardando processamento",updated_at:new Date().toISOString()}).eq("id",C.id);if(De)throw new Error(`Erro ao atualizar comanda: ${De.message}`);console.log(" [MODAL NOVO] Comanda atualizada para pendente de pagamento com sucesso"),await r(),await ue(),await Te(),w("list"),M(null),L([]),R("Comanda enviada para o caixa com sucesso!"),$(!0),setTimeout(()=>$(!1),3e3)}catch(De){console.error(" [MODAL NOVO] Erro ao fechar comanda no sistema do bar:",De),R(" Erro ao processar fechamento da comanda"),$(!0),setTimeout(()=>$(!1),5e3)}},onError:J=>{console.error(" Erro no modal:",J),R(`Erro: ${J.message}`),$(!0),setTimeout(()=>$(!1),5e3)}}),{menuItems:fe,loading:Ce}=J1(!0),{adicionarItemComanda:we}=P0(),{refreshBarOrders:ue,refreshKitchenOrders:Te}=_t();b.useEffect(()=>{if(C&&t.length>0){const J=t.find(De=>De.id===C.id);J&&(console.log(" Atualizando comanda selecionada com novos dados:",J),M(J))}},[t,C==null?void 0:C.id]);const ye=()=>{j(!0)},Ee=J=>{M(J),w("details")},Oe=()=>{w("list"),M(null),L([])},Qe=J=>{console.log("Adicionando item ao carrinho:",J);const De=O.findIndex(ze=>ze.menu_item_id===J.id);if(De>=0){const ze=[...O];ze[De].quantity+=1,L(ze),console.log("Item j existia, quantidade atualizada:",ze)}else{const ze={menu_item_id:J.id,name:J.name,price:typeof J.price=="string"?parseFloat(J.price):J.price,quantity:1,notes:""},ot=[...O,ze];L(ot),console.log("Novo item adicionado ao carrinho:",ot)}},St=(J,De)=>{De<=0?L(O.filter(ze=>ze.menu_item_id!==J)):L(O.map(ze=>ze.menu_item_id===J?{...ze,quantity:De}:ze))},Me=()=>O.reduce((J,De)=>J+De.price*De.quantity,0),Ue=async()=>{if(console.log(" Boto clicado! Iniciando adio de itens  comanda"),console.log("Comanda selecionada:",C),console.log("Itens no carrinho:",O),!C){console.error(" Nenhuma comanda selecionada");return}if(O.length===0){console.error(" Carrinho vazio");return}ae(!0);try{console.log(" Adicionando",O.length,"itens  comanda",C.id);for(const De of O)console.log(" Adicionando item:",De),await we(C.id,De.menu_item_id,De.quantity,De.notes||""),console.log(" Item adicionado com sucesso");console.log(" Limpando carrinho");const J=O.length;L([]),console.log(" Atualizando dados"),await r(),console.log(" Dados atualizados, comanda selecionada ser atualizada automaticamente"),console.log(" Forando atualizao dos pedidos do bar e cozinha..."),await ue(),await Te(),console.log(" Pedidos do bar e cozinha atualizados"),R(` ${J} ${J===1?"item adicionado":"itens adicionados"} com sucesso!`),$(!0),setTimeout(()=>{$(!1)},3e3),console.log(" Processo concludo com sucesso!")}catch(J){console.error(" Erro ao adicionar itens  comanda:",J),R(" Erro ao adicionar itens  comanda"),$(!0),setTimeout(()=>{$(!1)},3e3)}finally{ae(!1)}},Ct=J=>{var De;return console.log(" Convertendo comanda:",J),{id:J.id,mesa_id:J.table_id||void 0,cliente_id:J.customer_id||void 0,nome_cliente:J.customer_name||void 0,funcionario_id:J.employee_id,status:J.status==="open"?"aberta":J.status,total:J.total||0,quantidade_pessoas:J.people_count||1,aberta_em:J.opened_at||J.created_at||new Date().toISOString(),fechada_em:J.closed_at||void 0,observacoes:J.notes||void 0,created_at:J.created_at||new Date().toISOString(),updated_at:J.updated_at||J.created_at||new Date().toISOString(),data_abertura:J.opened_at||J.created_at||new Date().toISOString(),mesa:J.table?{id:J.table.id,numero:J.table.number,capacidade:J.table.capacity}:void 0,itens:((De=J.items)==null?void 0:De.map(ze=>{console.log(" Convertendo item:",ze);const ot=ze.menu_item||ze.menu_items,Xt=ze.product_name||(ot==null?void 0:ot.name)||"Item sem nome",ns=ze.unit_price||(ot==null?void 0:ot.price)||0,aa=ze.quantity||1,kr=ze.total_price||ns*aa;return{id:ze.id,comanda_id:J.id,produto_id:ze.menu_item_id||"",nome_produto:Xt,quantidade:aa,preco_unitario:ns,preco_total:kr,status:ze.status,adicionado_em:ze.created_at||new Date().toISOString(),entregue_em:ze.delivered_at||void 0,created_at:ze.created_at||new Date().toISOString(),observacoes:ze.notes||void 0}}))||[]}},us=J=>{A(De=>new Set([...De,J]))},F=b.useMemo(()=>t.filter(J=>{var aa,kr,Ii,gn,Ia,El;const De=!l||((aa=J.customer_name)==null?void 0:aa.toLowerCase().includes(l.toLowerCase()))||((Ii=(kr=J.table)==null?void 0:kr.number)==null?void 0:Ii.toString().includes(l))||J.id.toLowerCase().includes(l.toLowerCase()),ze=u==="all"||J.status===u,ot=!h||((gn=J.employee_name)==null?void 0:gn.toLowerCase().includes(h.toLowerCase())),Xt=!g||((El=(Ia=J.table)==null?void 0:Ia.number)==null?void 0:El.toString().includes(g)),ns=(()=>{if(v==="all")return!0;const Tl=new Date(J.opened_at),Ar=(new Date().getTime()-Tl.getTime())/(1e3*60*60);switch(v){case"recent":if(Ar>=1)return!1;break;case"overdue":if(Ar<=2)return!1;break;case"critical":if(Ar<=4)return!1;break}return!0})();return De&&ze&&ot&&Xt&&ns}),[t,l,u,h,g,v]),te=F.filter(J=>J.status==="open"),le=F.filter(J=>J.status==="pending_payment"),be=F.filter(J=>{if(J.status!=="open")return!1;const De=new Date(J.opened_at);return(new Date().getTime()-De.getTime())/(1e3*60*60)>2}),xe=be.filter(J=>!S.has(J.id)),pe=J=>new Date(J).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),_e=J=>{switch(J){case"open":return"Aberta";case"pending_payment":return"Aguardando Pagamento";case"closed":return"Fechada";default:return J}},Le=[...new Set(fe.map(J=>J.category))],qe=fe.filter(J=>{const De=V==="all"||J.category===V,ze=J.name.toLowerCase().includes(B.toLowerCase());return De&&ze&&J.available});if(console.log("Estado atual do carrinho:",O),console.log("Carrinho tem itens?",O.length>0),console.log(" Debug boto Fechar Conta:",{selectedComanda:!!C,status:C==null?void 0:C.status,shouldShow:(C==null?void 0:C.status)==="open"}),E==="details"&&C)return e.jsxs("div",{className:"comanda-details-container h-full flex flex-col bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-white flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:Oe,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Dd,{size:20}),e.jsx("span",{children:"Voltar para Comandas"})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[(ge=C.table)!=null&&ge.number?`Mesa ${C.table.number}`:"Balco"," - ",C.customer_name||"Cliente"]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Aberta em ",pe(C.opened_at)]}),e.jsx("div",{className:"bg-green-100 px-4 py-2 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Total da Comanda:"}),e.jsxs("span",{className:"text-xl font-bold text-green-900",children:["R$ ",((Ze=C.total)==null?void 0:Ze.toFixed(2))||"0,00"]})]})})]})]})]}),e.jsx("div",{className:"flex flex-col space-y-2",children:e.jsxs("button",{onClick:()=>{if(console.log(" Boto Fechar Conta clicado!"),console.log(" Comanda selecionada:",C),console.log(" Itens da comanda:",C==null?void 0:C.items),C){const J=Ct(C);console.log(" Comanda convertida:",J),console.log(" Itens convertidos:",J.itens),console.log(" Abrindo modal..."),U(J)}else console.error(" Nenhuma comanda selecionada")},className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center space-x-2",children:[e.jsx(pn,{size:20}),e.jsx("span",{children:"Fechar Conta"})]})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[e.jsxs("div",{className:"flex-1 flex flex-col p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{type:"text",placeholder:"Buscar itens...",value:B,onChange:J=>K(J.target.value),className:"w-full pl-4 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsxs("select",{value:V,onChange:J=>H(J.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todas as Categorias"}),Le.map(J=>e.jsx("option",{value:J,children:J},J))]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:Ce?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):qe.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 mb-2",children:"Nenhum item encontrado"})}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:qe.map(J=>e.jsxs("div",{onClick:()=>Qe(J),className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 group cursor-pointer hover:border-blue-300 hover:bg-blue-50",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg mb-3 flex items-center justify-center group-hover:bg-blue-100 transition-colors",children:[J.image_url?e.jsx("img",{src:J.image_url,alt:J.name,className:"max-w-full max-h-full object-contain rounded-lg",onError:De=>{De.currentTarget.style.display="none",De.currentTarget.nextElementSibling.style.display="block"}}):null,e.jsx("div",{className:"text-gray-400 text-2xl group-hover:text-blue-500 transition-colors",style:{display:J.image_url?"none":"block"},children:""})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-1 line-clamp-2 group-hover:text-blue-900",children:J.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2 group-hover:text-blue-700",children:J.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-green-600 group-hover:text-green-700",children:["R$ ",(typeof J.price=="string"?parseFloat(J.price):J.price).toFixed(2)]}),e.jsx("div",{className:"bg-blue-600 text-white p-2 rounded-lg group-hover:bg-blue-700 transition-colors",children:e.jsx(ks,{size:16})})]})]},J.id))})})]}),e.jsxs("div",{className:"w-96 bg-gray-50 border-l border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 flex-shrink-0",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pedidos da Comanda"})})}),(C==null?void 0:C.items)&&C.items.length>0&&e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"p-4 bg-blue-50",children:[e.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:["Itens j pedidos (",C.items.length,")",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Debug: ",new Date().toLocaleTimeString(),")"]})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:C.items.map(J=>{var De,ze;return console.log(" Debug item da comanda:",J),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900 text-sm",children:((De=J.menu_item)==null?void 0:De.name)||((ze=J.menu_items)==null?void 0:ze.name)||`Item ${J.menu_item_id}`}),e.jsxs("p",{className:"text-xs text-gray-600",children:["R$ ",J.price.toFixed(2)," cada"]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${J.status==="pending"?"bg-yellow-100 text-yellow-800":J.status==="preparing"?"bg-blue-100 text-blue-800":J.status==="ready"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:J.status==="pending"?"Pendente":J.status==="preparing"?"Preparando":J.status==="ready"?"Pronto":J.status==="delivered"?"Entregue":J.status})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Qtd: ",J.quantity]}),e.jsxs("span",{className:"font-medium text-green-600 text-sm",children:["R$ ",(J.price*J.quantity).toFixed(2)]})]}),J.notes&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Obs: ",J.notes]})]},J.id)})})]})}),e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Novos Itens (",O.length,")"]}),O.length>0&&e.jsx("button",{onClick:()=>L([]),className:"text-xs text-red-600 hover:text-red-800",children:"Limpar"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:O.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-4 h-full flex flex-col items-center justify-center",children:[e.jsx(hl,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"Nenhum item novo selecionado"})]}):e.jsxs("div",{className:"space-y-4",children:[O.map(J=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:J.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["R$ ",J.price.toFixed(2)," cada"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>St(J.menu_item_id,J.quantity-1),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:e.jsx(Ri,{size:14})}),e.jsx("span",{className:"w-8 text-center font-medium",children:J.quantity}),e.jsx("button",{onClick:()=>St(J.menu_item_id,J.quantity+1),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:e.jsx(ks,{size:14})})]}),e.jsxs("span",{className:"font-bold text-green-600",children:["R$ ",(J.price*J.quantity).toFixed(2)]})]})]},J.menu_item_id)),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200 mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-green-800",children:"Total dos Novos Itens:"}),e.jsxs("span",{className:"text-3xl font-bold text-green-900",children:["R$ ",Me().toFixed(2)]})]})}),e.jsx("button",{onClick:Ue,disabled:G,className:`w-full py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 ${G?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Adicionando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ks,{size:20}),e.jsx("span",{children:"Adicionar  Comanda"})]})}),oe&&e.jsx("div",{className:`mt-3 p-3 rounded-lg text-sm font-medium text-center transition-all duration-300 ${T.includes("")?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:T})]})]})})]})]}),(console.log(" Debug Modal:",{showCloseModal:z,closeModalComanda:!!X,isClosingComanda:D}),X&&e.jsx(rN,{isOpen:z,comanda:X,onClose:Z,onConfirm:ie,loading:D})),q&&e.jsx("div",{className:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:"font-medium",children:["Erro: ",q]}),e.jsx("button",{onClick:he,className:"text-red-600 hover:text-red-800",children:""})]})})]});return e.jsxs("div",{className:"comandas-container",children:[e.jsx(JO,{comandas:xe,onComandaClick:Ee,onDismissAlert:us}),e.jsx(eR,{searchTerm:l,onSearchChange:c,statusFilter:u,onStatusFilterChange:m,employeeFilter:h,onEmployeeFilterChange:f,tableFilter:g,onTableFilterChange:y,timeFilter:v,onTimeFilterChange:N,employees:[],tables:i||[],onClearFilters:()=>{c(""),m("all"),f(""),y(""),N("all")}}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:te.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Abertas"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:le.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Aguardando Pagamento"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:be.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Com Atraso"})]})]}),e.jsx("button",{onClick:ye,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"+ Nova Comanda"})]}),e.jsx("div",{className:"bg-white rounded-lg border",children:s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mesa/Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abertura"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(J=>{var ot,Xt;const De=st(J.opened_at),ze=new Date().getTime()-new Date(J.opened_at).getTime()>2*60*60*1e3;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[((ot=J.table)==null?void 0:ot.number)||"Balco",J.customer_name&&e.jsx("div",{className:"text-xs text-gray-500",children:J.customer_name})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${J.status==="open"?"bg-green-100 text-green-800":J.status==="pending_payment"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:_e(J.status)}),ze&&J.status==="open"&&e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:" Atrasada"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J.employee_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[pe(J.opened_at),e.jsxs("div",{className:`text-xs ${ze?"text-red-600 font-medium":"text-gray-400"}`,children:[De," decorrido"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:["R$ ",((Xt=J.total)==null?void 0:Xt.toFixed(2))||"0,00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("button",{onClick:()=>Ee(J),className:"inline-flex items-center px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:[e.jsx(Is,{className:"w-3 h-3 mr-1"}),"Ver Detalhes"]})})]},J.id)})})]})})}),e.jsx(sN,{isOpen:_,onClose:()=>j(!1),onComandaCreated:()=>{r()}}),console.log(" Debug modal:",{showCloseModal:z,selectedComanda:!!C,viewMode:E}),oe&&E==="list"&&e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx("div",{className:`p-4 rounded-lg shadow-lg ${T.includes("")?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:T})})]});function st(J){const De=new Date(J),ot=new Date().getTime()-De.getTime(),Xt=Math.floor(ot/(1e3*60*60)),ns=Math.floor(ot%(1e3*60*60)/(1e3*60));return Xt>0?`${Xt}h ${ns}min`:`${ns}min`}},sR=()=>{const{user:t}=Kt(),[s,r]=b.useState([]),[i,l]=b.useState({orderQueue:[],alerts:[],loading:!0,error:null}),c=b.useCallback($=>{l(T=>({...T,...$}))},[]),u=b.useCallback(($,T)=>{console.error(`Erro em ${T}:`,$),c({error:`Erro em ${T}: ${$.message||"Erro desconhecido"}`,loading:!1})},[c]),m=b.useCallback(async()=>{if(t)try{c({loading:!0,error:null});const{data:$,error:T}=await W.rpc("get_order_queue_items");if(T)throw T;const R=($||[]).map(X=>{const D=N([X]);return{...X,priority:{level:D.priorityLevel,complexity:_(D.finalEstimate),estimatedTime:D.finalEstimate,isManuallyPrioritized:X.is_priority||!1,createdAt:new Date(X.added_at),timerStatus:h(new Date(X.added_at),D.finalEstimate),alertsEnabled:!0}}}),z=E(R);c({orderQueue:z,loading:!1})}catch($){u($,"carregamento da fila de pedidos")}},[t,c,u]),h=($,T)=>{const z=(new Date().getTime()-$.getTime())/(1e3*60),X=T*.8,D=T*1.2;return z>=D?"overdue":z>=X?"warning":"normal"},f={bebidas:{baseTime:2,complexity:"simple"},drinks:{baseTime:3,complexity:"simple"},petiscos:{baseTime:8,complexity:"medium"},pratos:{baseTime:15,complexity:"complex"},sobremesas:{baseTime:5,complexity:"simple"},cafes:{baseTime:3,complexity:"simple"}},g={simple:1,medium:1.3,complex:1.8},y=b.useCallback($=>{let T=0,R="simple",z=0;$.forEach(U=>{var Z,ie;if(U.menu_items){const he=U.menu_items.category.toLowerCase(),fe=U.menu_items.preparation_time||0,Ce=fe>0?fe:((Z=f[he])==null?void 0:Z.baseTime)||8;T+=Ce*U.quantity;const we=((ie=f[he])==null?void 0:ie.complexity)||"medium";v(we)>v(R)&&(R=we),he==="pratos"&&(z+=2),he==="petiscos"&&(z+=1)}});const X=g[R],D=Math.ceil((T+z)*X);let q="low";return D>=20?q="high":D>=12?q="medium":q="low",{baseTime:T,complexityMultiplier:X,categoryBonus:z,finalEstimate:D,priorityLevel:q}},[]),v=$=>{switch($){case"simple":return 1;case"medium":return 2;case"complex":return 3;default:return 1}},N=b.useCallback(($,T=!1,R)=>{const z=y($);return{level:T&&R?R:z.priorityLevel,complexity:_(z.finalEstimate),estimatedTime:z.finalEstimate,isManuallyPrioritized:T,createdAt:new Date,timerStatus:"normal",alertsEnabled:!0}},[y]),_=$=>$>=15?"complex":$>=8?"medium":"simple",j=b.useCallback(($,T)=>{const R={id:$,startTime:new Date,estimatedTime:T,status:"normal",alertsSent:[]};r(z=>[...z.filter(X=>X.id!==$),R])},[]),C=b.useCallback($=>{r(T=>T.filter(R=>R.id!==$))},[]),M=b.useCallback(($,T,R)=>{r(X=>X.map(D=>D.id===$?{...D,status:T==="urgent"?"warning":D.status}:D));const z={id:`priority-${$}-${Date.now()}`,orderId:$,type:"warning",message:`Pedido marcado como ${S(T)}${R?`: ${R}`:""}`,timestamp:new Date,acknowledged:!1};setAlerts(X=>[z,...X])},[]),S=$=>{switch($){case"low":return"Baixa Prioridade";case"medium":return"Prioridade Mdia";case"high":return"Alta Prioridade";case"urgent":return"Urgente";default:return $}},A=$=>{switch($){case"low":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"urgent":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},E=b.useCallback($=>{const T={urgent:4,high:3,medium:2,low:1};return $.sort((R,z)=>{var he,fe,Ce,we,ue,Te,ye,Ee;if((he=R.priority)!=null&&he.isManuallyPrioritized&&!((fe=z.priority)!=null&&fe.isManuallyPrioritized))return-1;if(!((Ce=R.priority)!=null&&Ce.isManuallyPrioritized)&&((we=z.priority)!=null&&we.isManuallyPrioritized))return 1;const X=((ue=R.priority)==null?void 0:ue.level)||"low",D=((Te=z.priority)==null?void 0:Te.level)||"low",q=T[X],U=T[D];if(q!==U)return U-q;const Z=new Date(((ye=R.priority)==null?void 0:ye.createdAt)||R.added_at||0).getTime(),ie=new Date(((Ee=z.priority)==null?void 0:Ee.createdAt)||z.added_at||0).getTime();return Z-ie})},[]),w=b.useCallback(async($,T)=>{try{const{error:R}=await W.from("comanda_items").update({is_priority:T,updated_at:new Date().toISOString()}).eq("id",$);if(R)throw R;c({orderQueue:i.orderQueue.map(z=>z.id===$&&z.priority?{...z,priority:{...z.priority,isManuallyPrioritized:T,level:T?"urgent":z.priority.level}}:z)}),await m()}catch(R){throw u(R,"marcao de prioridade"),R}},[i.orderQueue,c,u,m]),O=b.useCallback(async($,T)=>{try{const R={status:T,updated_at:new Date().toISOString()};T==="preparing"?R.started_at=new Date().toISOString():T==="ready"?R.prepared_at=new Date().toISOString():T==="delivered"&&(R.delivered_at=new Date().toISOString());const{error:z}=await W.from("comanda_items").update(R).eq("id",$);if(z)throw z;await m()}catch(R){throw u(R,"atualizao de status"),R}},[u,m]);b.useCallback(($,T,R)=>{const z={id:`alert-${$}-${Date.now()}`,orderId:$,type:T,message:R,timestamp:new Date,acknowledged:!1};c({alerts:[z,...i.alerts]})},[i.alerts,c]);const L=b.useCallback($=>{c({alerts:i.alerts.map(T=>T.id===$?{...T,acknowledged:!0}:T)})},[i.alerts,c]),V=b.useCallback(()=>{c({alerts:[]})},[c]),H=b.useCallback($=>{if($.priority)return $.priority;const T=N([$]);return{level:T.priorityLevel,complexity:_(T.finalEstimate),estimatedTime:T.finalEstimate,isManuallyPrioritized:!1,createdAt:new Date($.added_at),timerStatus:h(new Date($.added_at),T.finalEstimate),alertsEnabled:!0}},[]),B=b.useCallback($=>{const T=H($);return h(T.createdAt,T.estimatedTime)},[H]),K=b.useCallback($=>{const T=H($),R=(new Date().getTime()-T.createdAt.getTime())/(1e3*60);return Math.max(0,T.estimatedTime-R)},[H]),G=b.useCallback($=>{const T=K($);if(T<1)return"< 1min";if(T<60)return`${Math.ceil(T)}min`;const R=Math.floor(T/60),z=Math.ceil(T%60);return z===0?`${R}h`:`${R}h ${z}min`},[K]),ae=b.useCallback(()=>{const $={urgent:0,high:0,medium:0,low:0,overdue:0,warning:0};return i.orderQueue.forEach(T=>{const R=H(T);$[R.level]++,R.timerStatus==="overdue"?$.overdue++:R.timerStatus==="warning"&&$.warning++}),$},[i.orderQueue,H]),oe=b.useCallback(async()=>{await m()},[m]);return b.useEffect(()=>{if(!t)return;const $=W.channel("order-priority-changes").on("postgres_changes",{event:"*",schema:"public",table:"comanda_items"},T=>{console.log("Mudana em itens de comanda:",T),m()}).subscribe();return()=>{W.removeChannel($)}},[t,m]),b.useEffect(()=>{t&&m()},[t,m]),b.useEffect(()=>{const $=setInterval(()=>{if(i.orderQueue.length>0){const T=i.orderQueue.map(R=>{if(R.priority){const z=h(R.priority.createdAt,R.priority.estimatedTime);return{...R,priority:{...R.priority,timerStatus:z}}}return R});c({orderQueue:T})}},6e4);return()=>clearInterval($)},[i.orderQueue,c]),{...i,markItemAsPriority:w,updateItemStatus:O,dismissAlert:L,clearAllAlerts:V,getItemPriority:H,getTimerStatus:B,getRemainingTime:K,formatRemainingTime:G,getPriorityStats:ae,refreshQueue:oe,getPriorityLabel:S,getPriorityColor:A,sortOrdersByPriority:E,calculateOrderPriority:N,calculateAutoPriority:y,startOrderTimer:j,stopOrderTimer:C,markOrderAsPriority:M,orderTimers:s,allAlerts:i.alerts}},aR=({onUpdateItemStatus:t})=>{const{orderQueue:s,loading:r,markItemAsPriority:i,updateItemStatus:l,getItemPriority:c,getTimerStatus:u,formatRemainingTime:m,alerts:h,getPriorityLabel:f,getPriorityColor:g}=sR(),[y,v]=b.useState(!0),[N,_]=b.useState(null),j=s,M=(()=>{const H=new Map;return j.forEach(B=>{var G,ae;const K=((ae=(G=B.comandas)==null?void 0:G.bar_tables)==null?void 0:ae.number)||"Balco";H.has(K)||H.set(K,[]),H.get(K).push(B)}),H})(),S=H=>(M.get(H)||[]).length>1,A=H=>H.id.slice(-4).toUpperCase(),E=async(H,B)=>{try{t?await t(H,B):await l(H,B)}catch(K){console.error("Erro ao atualizar status:",K)}},w=async(H,B)=>{try{await i(H,B),_(null)}catch(K){console.error("Erro ao marcar prioridade:",K)}},O=H=>{switch(H){case"pending":return e.jsx(Vt,{className:"h-4 w-4"});case"preparing":return e.jsx(Ev,{className:"h-4 w-4"});case"ready":return e.jsx(ml,{className:"h-4 w-4"});default:return e.jsx(Vt,{className:"h-4 w-4"})}},L=H=>{switch(H){case"pending":return"text-yellow-600 bg-yellow-100";case"preparing":return"text-blue-600 bg-blue-100";case"ready":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},V=H=>{switch(H){case"pending":return"Pendente";case"preparing":return"Preparando";case"ready":return"Pronto";default:return H}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(fn,{children:y&&h.length>0&&e.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(sA,{className:"h-5 w-5 text-red-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-red-800",children:["Alertas (",h.length,")"]})]}),e.jsx("button",{onClick:()=>v(!1),className:"text-red-600 hover:text-red-800",title:"Fechar alertas","aria-label":"Fechar alertas",children:e.jsx(it,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"space-y-2",children:h.slice(0,3).map(H=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-red-800",children:H.message}),e.jsx("p",{className:"text-xs text-red-600",children:es(H.timestamp,"HH:mm",{locale:ds})})]}),e.jsx("button",{onClick:()=>acknowledgeAlert(H.id),className:"text-red-600 hover:text-red-800 ml-2",title:"Reconhecer alerta","aria-label":"Reconhecer alerta",children:e.jsx(ml,{className:"h-4 w-4"})})]},H.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Fila de Pedidos"}),e.jsxs("p",{className:"text-gray-600",children:[j.length," itens na fila, ordenados por prioridade"]}),Array.from(M.entries()).filter(([H,B])=>B.length>1).length>0&&e.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium mt-1 inline-block",children:[Array.from(M.entries()).filter(([H,B])=>B.length>1).length," mesa(s) com mltiplos pedidos"]})]}),h.length>0&&!y&&e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 bg-red-100 text-red-800 px-3 py-2 rounded-lg hover:bg-red-200 transition-colors",title:"Mostrar alertas","aria-label":"Mostrar alertas",children:[e.jsx(y0,{className:"h-4 w-4"}),e.jsxs("span",{children:[h.length," alertas"]})]})]}),Array.from(M.entries()).filter(([H,B])=>B.length>1).length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:" Mesas com Mltiplos Pedidos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(M.entries()).filter(([H,B])=>B.length>1).map(([H,B])=>e.jsxs("span",{className:"bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:["Mesa ",H,": ",B.length," itens"]},H))})]}),e.jsx("div",{className:"space-y-4",children:j.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Vt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum pedido na fila"})]}):j.map((H,B)=>{var ae,oe,$,T,R,z;const K=u(H),G=c(H);return e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:B*.1},className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${G!=null&&G.isManuallyPrioritized?"border-red-500":(G==null?void 0:G.level)==="high"?"border-orange-500":(G==null?void 0:G.level)==="medium"?"border-yellow-500":"border-green-500"} ${S(((oe=(ae=H.comandas)==null?void 0:ae.bar_tables)==null?void 0:oe.number)||"Balco")?"ring-2 ring-orange-300 ring-offset-2":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm font-medium",children:["#",B+1]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:(($=H.menu_items)==null?void 0:$.name)||"Item sem nome"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["x",H.quantity]}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",A(H)]})]}),(G==null?void 0:G.isManuallyPrioritized)&&e.jsx(yf,{className:"h-5 w-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[((R=(T=H.comandas)==null?void 0:T.bar_tables)==null?void 0:R.number)&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:["Mesa ",H.comandas.bar_tables.number]}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",A(H)]}),S(H.comandas.bar_tables.number)&&e.jsxs("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:[(M.get(H.comandas.bar_tables.number)||[]).length," itens"]})]}),((z=H.comandas)==null?void 0:z.customer_name)&&e.jsxs("span",{children:["Cliente: ",H.comandas.customer_name]}),e.jsxs("span",{children:["Pedido s ",es(new Date(H.added_at||""),"HH:mm",{locale:ds})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${g((G==null?void 0:G.level)||"low")}`,children:f((G==null?void 0:G.level)||"low")}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Tempo estimado: ",(G==null?void 0:G.estimatedTime)||0,"min"]}),e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded text-sm ${K==="overdue"?"bg-red-100 text-red-800":K==="warning"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:[e.jsx(Ev,{className:"h-3 w-3"}),e.jsx("span",{children:m(H)}),K==="overdue"&&e.jsx(As,{className:"h-3 w-3"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${L(H.status||"pending")}`,children:[O(H.status||"pending"),e.jsx("span",{children:V(H.status||"pending")})]})})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[e.jsxs("button",{onClick:()=>_(H.id),className:"flex items-center space-x-1 px-3 py-1 bg-orange-100 text-orange-800 rounded hover:bg-orange-200 transition-colors",title:"Marcar como prioritrio","aria-label":"Marcar como prioritrio",children:[e.jsx(Wk,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Priorizar"})]}),H.status==="pending"&&e.jsx("button",{onClick:()=>E(H.id,"preparing"),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:"Iniciar"}),H.status==="preparing"&&e.jsx("button",{onClick:()=>E(H.id,"ready"),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"Pronto"})]})]})},H.id)})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Definir Prioridade"}),e.jsx("div",{className:"space-y-3",children:["urgent","high","medium","low"].map(H=>e.jsxs("button",{onClick:()=>w(N||"",!0),className:`w-full p-3 rounded border-2 text-left transition-colors ${g(H)} hover:opacity-80`,children:[e.jsx("div",{className:"font-medium",children:f(H)}),e.jsxs("div",{className:"text-sm opacity-75",children:[H==="urgent"&&"Para pedidos que precisam ser feitos imediatamente",H==="high"&&"Para pedidos importantes com prazo apertado",H==="medium"&&"Para pedidos com prioridade normal",H==="low"&&"Para pedidos que podem aguardar"]})]},H))}),e.jsx("div",{className:"mt-4 flex space-x-3",children:e.jsx("button",{onClick:()=>_(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded hover:bg-gray-400 transition-colors",children:"Cancelar"})})]})})]})},rR=({orders:t,menuItems:s})=>{const{updateOrderStatus:r}=_t(),[i,l]=b.useState(new Set),u=(()=>{const j=new Map;return t.forEach(C=>{const M=C.tableNumber||"Balco";j.has(M)||j.set(M,[]),j.get(M).push(C)}),j})(),m=j=>j.items.reduce((C,M)=>{const S=s.find(E=>E.id===M.menuItemId)||M.menuItem,A=(S==null?void 0:S.preparation_time)||(S==null?void 0:S.preparationTime)||0;return C+A},0),h=j=>{const C=(new Date().getTime()-j.createdAt.getTime())/6e4;return C>20?"high":C>10?"medium":"low"},f=j=>{switch(j){case"high":return"border-red-400 bg-red-50";case"medium":return"border-yellow-400 bg-yellow-50";case"low":return"border-green-400 bg-green-50";default:return"border-gray-200 bg-white"}},g=j=>j.id.slice(-4).toUpperCase(),y=j=>j.id.startsWith("balcao-"),v=j=>j.id.startsWith("comanda-"),N=async(j,C)=>{l(M=>new Set([...M,j]));try{await r(j,C),console.log(` Status do pedido ${j} atualizado para ${C}`)}catch(M){console.error("Erro ao atualizar status:",M)}finally{setTimeout(()=>{l(M=>{const S=new Set(M);return S.delete(j),S})},1e3)}},_=j=>(u.get(j)||[]).length>1;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Pedidos do Bar"}),e.jsx("div",{className:"text-sm text-gray-600",children:Array.from(u.entries()).filter(([j,C])=>C.length>1).length>0&&e.jsxs("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:[Array.from(u.entries()).filter(([j,C])=>C.length>1).length," mesa(s) com mltiplos pedidos"]})})]}),Array.from(u.entries()).filter(([j,C])=>C.length>1).length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-2",children:" Mesas com Mltiplos Pedidos:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(u.entries()).filter(([j,C])=>C.length>1).map(([j,C])=>e.jsxs("span",{className:"bg-orange-200 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:["Mesa ",j,": ",C.length," pedidos"]},j))})]}),t.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum pedido pendente no bar"})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(j=>{const C=h(j),M=m(j),S=j.items,A=_(j.tableNumber||"Balco");return e.jsxs(Ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`border-2 rounded-lg p-4 ${f(C)} ${A?"ring-2 ring-orange-300 ring-offset-2":""} ${y(j)?"border-green-400 bg-green-50 shadow-lg":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wl,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"font-bold text-lg",children:O0(j.tableNumber)}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:["#",g(j)]}),y(j)&&e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:" PAGO"}),v(j)&&e.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"AGUARDA PAGTO"}),_(j.tableNumber||"Balco")&&e.jsxs("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:[(u.get(j.tableNumber||"Balco")||[]).length," pedidos"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(Vt,{size:14}),e.jsx("span",{children:es(j.createdAt,"HH:mm",{locale:ds})})]})]}),e.jsx("div",{className:"space-y-2 mb-4",children:S.map(E=>{const w=s.find(O=>O.id===E.menuItemId)||E.menuItem;return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[E.quantity,"x ",(w==null?void 0:w.name)||"Item no encontrado"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[(w==null?void 0:w.preparation_time)||(w==null?void 0:w.preparationTime)||0,"min"]})]},E.id)})}),j.notes&&e.jsx("div",{className:"mb-4 p-2 bg-yellow-100 rounded border",children:e.jsx("p",{className:"text-sm text-yellow-800",children:j.notes})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Tempo estimado: ",M,"min"]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${C==="high"?"bg-red-200 text-red-800":C==="medium"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:C==="high"?"Urgente":C==="medium"?"Mdio":"Normal"})]}),e.jsxs("div",{className:"space-y-2",children:[j.status==="pending"&&e.jsx("button",{onClick:()=>N(j.id,"preparing"),disabled:i.has(j.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(j.id)?"bg-blue-300 text-blue-700 cursor-not-allowed animate-pulse scale-95":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(j.id)?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-700 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Iniciando..."})]}):"Iniciar Preparo"}),j.status==="preparing"&&e.jsx("button",{onClick:()=>N(j.id,"ready"),disabled:i.has(j.id),className:`w-full py-2 rounded-lg font-medium transition-all duration-300 ${i.has(j.id)?"bg-green-300 text-green-700 cursor-not-allowed animate-pulse scale-95":"bg-green-600 text-white hover:bg-green-700 hover:shadow-lg transform hover:scale-105 active:scale-95"}`,children:i.has(j.id)?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Finalizando..."})]}):"Marcar como Pronto"}),j.status==="ready"&&e.jsx("div",{className:"w-full py-2 rounded-lg font-medium bg-green-100 text-green-800 border-2 border-green-300 text-center animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:""})}),e.jsx("span",{children:"Pronto para Entrega"})]})})]})]},j.id)})})]})},nR=()=>null,iR=()=>{const{user:t}=Kt(),{updateItemStatus:s}=Cl(),{barOrders:r,menuItems:i}=_t(),[l,c]=b.useState("balcao"),[u,m]=b.useState(!1),h=y=>{c(y)},f=async(y,v)=>{try{await s(y,v)}catch(N){throw console.error("Erro ao atualizar status do item:",N),N}},g=()=>{switch(l){case"balcao":return u?e.jsx(KO,{}):e.jsx(ej,{});case"mesas":return e.jsx(ZO,{});case"comandas":return e.jsx(tR,{});case"fila":return e.jsx(aR,{onUpdateItemStatus:f});case"pedidos":return e.jsx(rR,{orders:r,menuItems:i});default:return e.jsx(ej,{})}};return e.jsxs("div",{className:"bar-attendance-container min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(_O,{mode:l,onModeChange:h,user:t}),l==="balcao"&&e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>m(!1),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-600 text-white"}`,children:" Criar Pedido"}),e.jsx("button",{onClick:()=>m(!0),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Gerenciar Pedidos"})]})}),e.jsx("main",{className:"bar-content flex-1 p-4 md:p-6 overflow-auto",children:g()}),e.jsx(nR,{})]})},L0=()=>{const{user:t}=Kt(),{fecharComanda:s,recarregarDados:r}=P0(),{refreshKitchenOrders:i,refreshBarOrders:l}=_t(),[c,u]=b.useState({currentSession:null,pendingComandas:[],todaysTransactions:[],todaysSessions:[],todaysSummary:{session_date:new Date().toISOString().split("T")[0],total_sessions:0,total_sales:0,total_transactions:0,total_cash_withdrawals:0,total_treasury_transfers:0,cash_balance:0,by_payment_method:[],by_employee:[],discrepancies:[],avg_ticket:0,peak_hours:[]},loading:!0,error:null}),m=b.useCallback($=>{u(T=>({...T,...$}))},[]),h=b.useCallback(($,T)=>{console.error(`Erro em ${T}:`,$),m({error:`Erro em ${T}: ${$.message||"Erro desconhecido"}`,loading:!1})},[m]),f=b.useCallback(async()=>{if(!t){console.log("useCashManagement: Usurio no encontrado, pulando carregamento");return}try{console.log("useCashManagement: Iniciando carregamento para usurio:",t),m({loading:!0,error:null});const $=new Date().toISOString().split("T")[0];console.log("useCashManagement: Data atual:",$),console.log("useCashManagement: Buscando sesso para usurio ID:",t.id);const{data:T,error:R}=await W.from("cash_sessions").select("*").eq("employee_id",t.id).eq("status","open").maybeSingle();if(console.log("useCashManagement: Resultado da busca de sesso:",{currentSessionData:T,sessionError:R}),R&&R.code!=="PGRST116")throw console.error("Erro ao carregar sesso:",R),R;const{data:z,error:X}=await W.from("comandas").select("*").eq("status","pending_payment").order("opened_at",{ascending:!1});if(X)throw X;console.log(" Buscando TODAS as transaes...");const{data:D,error:q}=await W.from("cash_transactions").select("id, transaction_type, payment_method, amount, created_at").order("created_at",{ascending:!1}).limit(10);console.log(" ltimas 10 transaes no banco:",(D==null?void 0:D.length)||0),D&&D.length>0&&console.table(D.map(Oe=>({id:Oe.id.slice(-8),tipo:Oe.transaction_type,metodo:Oe.payment_method,valor:Oe.amount,data:new Date(Oe.created_at).toLocaleDateString("pt-BR")}))),console.log(" Buscando transaes para o dia:",$);let U=[],Z=null;const{data:ie,error:he}=await W.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `).gte("created_at",`${$}T00:00:00.000Z`).lt("created_at",`${$}T23:59:59.999Z`).order("created_at",{ascending:!1});if(!he&&ie&&(U=ie,console.log(" Transaes encontradas por created_at:",U.length)),U.length===0){const{data:Oe,error:Qe}=await W.from("cash_transactions").select(`
            *,
            comandas(id, customer_name, table_id, total),
            profiles!cash_transactions_processed_by_fkey(id, name),
            cash_sessions(id, session_date, employee_id)
          `).gte("processed_at",`${$}T00:00:00.000Z`).lt("processed_at",`${$}T23:59:59.999Z`).order("processed_at",{ascending:!1});!Qe&&Oe?(U=Oe,console.log(" Transaes encontradas por processed_at:",U.length)):Z=Qe}if(console.log(" Transaes de hoje encontradas:",(U==null?void 0:U.length)||0),U&&U.length>0&&(console.log(" Primeira transao de hoje:",U[0]),console.log(" Mtodos de pagamento de hoje:",[...new Set(U.map(Oe=>Oe.payment_method))])),Z)throw console.error(" Erro ao buscar transaes:",Z),Z;const{data:fe,error:Ce}=await W.from("cash_sessions").select("*").eq("session_date",$).order("opened_at",{ascending:!1});if(Ce)throw Ce;console.log("Dados da sesso atual:",T),console.log("Usurio atual:",t);const we=T?{...T,employee:{id:t.id,name:t.name||"Usurio",role:t.role||"employee"},supervisor:void 0}:null;console.log("Sesso processada:",we);const ue=(z==null?void 0:z.map(Oe=>({...Oe,items:[],table:void 0,customer:void 0})))||[],Te=(U==null?void 0:U.map(Oe=>({...Oe,comanda:Oe.comandas||void 0,processed_by_employee:Oe.profiles||{id:t.id,name:t.name||"Usurio"},session:Oe.cash_sessions||void 0})))||[],ye=(fe==null?void 0:fe.map(Oe=>({...Oe,employee:{id:t.id,name:t.name||"Usurio",role:"employee"}})))||[],Ee=await E(new Date);m({currentSession:we,pendingComandas:ue,todaysTransactions:Te,todaysSessions:ye,todaysSummary:Ee,loading:!1})}catch($){h($,"carregamento inicial")}},[t,m,h]),g=b.useCallback(async $=>{try{const T=$||(t==null?void 0:t.id);if(!T)return 0;const{data:R,error:z}=await W.from("cash_sessions").select("closing_amount, session_date").eq("employee_id",T).eq("status","closed").order("session_date",{ascending:!1}).order("closed_at",{ascending:!1}).limit(1).maybeSingle();return z&&z.code!=="PGRST116"?(console.error("Erro ao buscar ltima sesso fechada:",z),0):(R==null?void 0:R.closing_amount)||0}catch(T){return console.error("Erro ao obter saldo da ltima sesso:",T),0}},[t]),y=b.useCallback(async $=>{try{const{data:T,error:R}=await W.from("cash_sessions").select(`
          *,
          profiles!cash_sessions_employee_id_fkey(id, name, role)
        `).eq("session_date",$).order("opened_at",{ascending:!0});if(R)throw R;console.log(" Buscando transaes para movimento do dia:",$);const{data:z,error:X}=await W.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `).gte("created_at",`${$}T00:00:00.000Z`).lt("created_at",`${$}T23:59:59.999Z`).order("created_at",{ascending:!0});if(console.log(" Transaes encontradas para movimento:",(z==null?void 0:z.length)||0),X)throw X;const D=(T==null?void 0:T.map(ye=>({...ye,employee:ye.profiles||{id:ye.employee_id,name:"Usurio",role:"employee"}})))||[],q=(z==null?void 0:z.map(ye=>({...ye,comanda:ye.comandas||void 0,processed_by_employee:ye.profiles||{id:ye.processed_by,name:"Usurio"},session:ye.cash_sessions||void 0})))||[],U=D.reduce((ye,Ee)=>ye+(Ee.opening_amount||0),0),Z=D.reduce((ye,Ee)=>ye+(Ee.closing_amount||0),0),ie=D.reduce((ye,Ee)=>ye+(Ee.cash_discrepancy||0),0),he=q.filter(ye=>ye.transaction_type==="sale"),fe=he.reduce((ye,Ee)=>ye+Ee.amount,0),Ce=he.filter(ye=>ye.payment_method==="dinheiro").reduce((ye,Ee)=>ye+Ee.amount,0),we=he.filter(ye=>["cartao_debito","cartao_credito"].includes(ye.payment_method)).reduce((ye,Ee)=>ye+Ee.amount,0),ue=he.filter(ye=>ye.payment_method==="pix").reduce((ye,Ee)=>ye+Ee.amount,0),Te=q.filter(ye=>ye.transaction_type==="adjustment").reduce((ye,Ee)=>ye+Ee.amount,0);return{sessions:D,transactions:q,summary:{opening_total:U,closing_total:Z,sales_total:fe,cash_sales:Ce,card_sales:we,pix_sales:ue,adjustments:Te,discrepancy_total:ie,transaction_count:q.length}}}catch(T){return console.error("Erro ao obter movimento dirio:",T),{sessions:[],transactions:[],summary:{opening_total:0,closing_total:0,sales_total:0,cash_sales:0,card_sales:0,pix_sales:0,adjustments:0,discrepancy_total:0,transaction_count:0}}}},[]),v=b.useCallback(async $=>{if(!t)throw new Error("Usurio no autenticado");try{console.log("Iniciando abertura de caixa para usurio:",t.id),m({loading:!0,error:null});const T={employee_id:t.id,opening_amount:$.opening_amount,opening_notes:$.opening_notes,supervisor_approval_id:$.supervisor_approval_id,status:"open"};console.log("Dados da sesso:",T);const{data:R,error:z}=await W.from("cash_sessions").insert(T).select("*").single();if(z)throw console.error("Erro ao inserir sesso:",z),z;console.log("Sesso criada com sucesso:",R),await f()}catch(T){throw h(T,"abertura de caixa"),T}},[t,m,h,f]),N=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sesso aberta");try{m({loading:!0,error:null});const T=$.closing_amount-c.currentSession.expected_amount,{error:R}=await W.from("cash_sessions").update({status:"closed",closed_at:new Date().toISOString(),closing_amount:$.closing_amount,cash_discrepancy:T,closing_notes:$.closing_notes}).eq("id",c.currentSession.id);if(R)throw R;const z=$.reconciliation.map(D=>({cash_session_id:c.currentSession.id,payment_method:D.payment_method,expected_amount:D.expected_amount,actual_amount:D.actual_amount,transaction_count:D.transaction_count,reconciled_by:t.id,notes:D.notes})),{error:X}=await W.from("payment_reconciliation").insert(z);if(X)throw X;await f()}catch(T){throw h(T,"fechamento de caixa"),T}},[c.currentSession,t,m,h,f]),_=b.useCallback(()=>c.currentSession,[c.currentSession]),j=b.useCallback(async $=>{if(console.log(" Processando pagamento de comanda..."),console.log(" Sesso atual:",c.currentSession),console.log(" Dados do pagamento:",$),!c.currentSession)throw console.error(" Nenhuma sesso de caixa aberta!"),new Error("Nenhuma sesso de caixa aberta");try{m({loading:!0,error:null}),await s($.comanda_id,$.payment_method,$.notes),console.log(" Criando transao de pagamento...");const T={cash_session_id:c.currentSession.id,comanda_id:$.comanda_id,transaction_type:"sale",payment_method:$.payment_method,amount:$.amount,processed_by:t.id,reference_number:$.reference_number,customer_name:$.customer_name,notes:$.notes};console.log(" Dados da transao:",T);const{data:R,error:z}=await W.from("cash_transactions").insert(T).select().single();if(z)throw console.error(" Erro ao inserir transao:",z),z;console.log(" Transao criada com sucesso:",R),await oe($.amount),await f(),await r(),$.notes&&$.notes.includes("balco")&&(console.log(" Forando atualizao dos monitores aps pagamento de balco..."),setTimeout(async()=>{await Promise.all([i(),l()]),console.log(" Monitores atualizados imediatamente!")},500),setTimeout(async()=>{await Promise.all([i(),l()]),console.log(" Atualizao backup dos monitores concluda!")},2e3))}catch(T){throw h(T,"processamento de pagamento"),T}},[c.currentSession,t,s,m,h,f,r]),C=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sesso de caixa aberta");try{m({loading:!0,error:null});const T={cash_session_id:c.currentSession.id,transaction_type:"refund",payment_method:$.refund_method,amount:-Math.abs($.amount),processed_by:t.id,notes:`Estorno: ${$.reason}. Transao original: ${$.original_transaction_id}`},{error:R}=await W.from("cash_transactions").insert(T);if(R)throw R;await f()}catch(T){throw h(T,"processamento de estorno"),T}},[c.currentSession,t,m,h,f]),M=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sesso de caixa aberta");try{m({loading:!0,error:null});const T=$.adjustment_type==="add"?$.amount:-$.amount,R={cash_session_id:c.currentSession.id,transaction_type:"adjustment",payment_method:$.payment_method||"dinheiro",amount:T,processed_by:t.id,notes:`Ajuste ${$.adjustment_type==="add"?"positivo":"negativo"}: ${$.reason}`},{error:z}=await W.from("cash_transactions").insert(R);if(z)throw z;await f()}catch(T){throw h(T,"processamento de ajuste"),T}},[c.currentSession,t,m,h,f]),S=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sesso de caixa aberta");try{m({loading:!0,error:null});const T={cash_session_id:c.currentSession.id,transaction_type:"adjustment",payment_method:"dinheiro",amount:-Math.abs($.amount),processed_by:t.id,notes:`[SADA] ${$.purpose}: ${$.reason}. Autorizado por: ${$.authorized_by}${$.recipient?`. Destinatrio: ${$.recipient}`:""}`},{data:R,error:z}=await W.from("cash_transactions").insert(T).select("*").single();if(z)throw z;const X=c.currentSession.expected_amount-$.amount,{error:D}=await W.from("cash_sessions").update({expected_amount:X}).eq("id",c.currentSession.id);if(D)throw D;return await f(),R.id}catch(T){throw h(T,"processamento de sada de dinheiro"),T}},[c.currentSession,t,m,h,f]),A=b.useCallback(async $=>{if(!c.currentSession)throw new Error("Nenhuma sesso de caixa aberta");try{m({loading:!0,error:null});const T={cash_session_id:c.currentSession.id,transaction_type:"adjustment",payment_method:"dinheiro",amount:-Math.abs($.amount),processed_by:t.id,notes:`[TRANSFERNCIA TESOURARIA] Autorizado por: ${$.authorized_by}${$.treasury_receipt_number?`. Comprovante: ${$.treasury_receipt_number}`:""}${$.notes?`. Obs: ${$.notes}`:""}`},{data:R,error:z}=await W.from("cash_transactions").insert(T).select("*").single();if(z)throw z;const X=c.currentSession.expected_amount-$.amount,{error:D}=await W.from("cash_sessions").update({expected_amount:X}).eq("id",c.currentSession.id);if(D)throw D;return await f(),R.id}catch(T){throw h(T,"processamento de transferncia para tesouraria"),T}},[c.currentSession,t,m,h,f]),E=b.useCallback(async $=>{const R=($||new Date).toISOString().split("T")[0];try{console.log(" Gerando resumo para o dia:",R);let z=[];const{data:X,error:D}=await W.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `).gte("created_at",`${R}T00:00:00.000Z`).lt("created_at",`${R}T23:59:59.999Z`);if(!D&&X&&(z=X,console.log(" Resumo: transaes por created_at:",z.length)),z.length===0){const{data:Me,error:Ue}=await W.from("cash_transactions").select(`
            *,
            comandas(id, customer_name, table_id, total),
            profiles!cash_transactions_processed_by_fkey(id, name),
            cash_sessions(id, session_date, employee_id)
          `).gte("processed_at",`${R}T00:00:00.000Z`).lt("processed_at",`${R}T23:59:59.999Z`);!Ue&&Me&&(z=Me,console.log(" Resumo: transaes por processed_at:",z.length))}const q=null;console.log(" TODAS as transaes encontradas:",(z==null?void 0:z.length)||0);const U=(z==null?void 0:z.filter(Me=>Me.transaction_type==="sale"))||[];console.log(" Transaes de venda:",U.length),z&&z.length>0&&(console.log(" Tipos de transao encontrados:",[...new Set(z.map(Me=>Me.transaction_type))]),console.log(" Mtodos de pagamento encontrados:",[...new Set(z.map(Me=>Me.payment_method))]),console.log(" Primeira transao:",z[0]));const{data:Z,error:ie}=await W.from("cash_sessions").select(`
          *,
          profiles!cash_sessions_employee_id_fkey(id, name, role)
        `).eq("session_date",R);if(ie)throw console.error("Erro ao buscar sesses para resumo:",ie),ie;const he=U||[],fe=Z||[];console.log(" Iniciando clculo de totais..."),console.log(" Transaes para calcular:",he.length);const Ce={};he.forEach((Me,Ue)=>{const Ct=Me.payment_method||"desconhecido",us=Number(Me.amount)||0;console.log(` [${Ue+1}] ${Ct}: R$ ${us}`),Ce[Ct]||(Ce[Ct]={amount:0,count:0}),Ce[Ct].amount+=us,Ce[Ct].count+=1}),console.log(" Totais finais por mtodo:",Ce);const we=he.reduce((Me,Ue)=>Me+Ue.amount,0),ue=he.length;console.log(" Criando array de mtodos de pagamento...");const ye=["dinheiro","cartao_debito","cartao_credito","pix","transferencia"].map(Me=>{const Ue=Ce[Me]||{amount:0,count:0},Ct=we>0?Ue.amount/we*100:0;return console.log(` ${Me}: R$ ${Ue.amount} (${Ue.count} transaes) - ${Ct.toFixed(1)}%`),{payment_method:Me,amount:Ue.amount,transaction_count:Ue.count,percentage:Ct,expected_amount:Ue.amount,actual_amount:Ue.amount,discrepancy:0}});console.log(" Array de mtodos criado:",ye);const Ee=he.reduce((Me,Ue)=>{var F;const Ct=Ue.processed_by,us=((F=Ue.profiles)==null?void 0:F.name)||"Funcionrio";return Me[Ct]||(Me[Ct]={employee_id:Ct,employee_name:us,session_count:0,total_sales:0,transaction_count:0,avg_ticket:0,cash_discrepancy:0,session_duration:"8:00"}),Me[Ct].total_sales+=Ue.amount,Me[Ct].transaction_count+=1,Me},{});Object.values(Ee).forEach(Me=>{Me.avg_ticket=Me.transaction_count>0?Me.total_sales/Me.transaction_count:0});const{data:Oe}=await W.from("cash_transactions").select("amount, notes, transaction_type").gte("created_at",`${R}T00:00:00.000Z`).lt("created_at",`${R}T23:59:59.999Z`).in("transaction_type",["adjustment","refund"]),Qe=(Oe||[]).filter(Me=>{var Ue;return(Ue=Me.notes)==null?void 0:Ue.includes("[SADA]")}).reduce((Me,Ue)=>Me+Math.abs(Ue.amount),0),St=(Oe||[]).filter(Me=>{var Ue;return(Ue=Me.notes)==null?void 0:Ue.includes("[TRANSFERNCIA TESOURARIA]")}).reduce((Me,Ue)=>Me+Math.abs(Ue.amount),0);return{session_date:R,total_sessions:fe.length,total_sales:we,total_transactions:ue,total_cash_withdrawals:Qe,total_treasury_transfers:St,cash_balance:we-Qe-St,by_payment_method:ye,by_employee:Object.values(Ee),discrepancies:fe.filter(Me=>Math.abs(Me.cash_discrepancy||0)>0).map(Me=>{var Ue;return{employee_id:Me.employee_id,employee_name:((Ue=Me.profiles)==null?void 0:Ue.name)||"Funcionrio",session_id:Me.id,cash_discrepancy:Me.cash_discrepancy||0,payment_discrepancies:[],total_discrepancy:Me.cash_discrepancy||0}}),avg_ticket:ue>0?we/ue:0,peak_hours:[]}}catch(z){throw console.error("Erro ao gerar resumo dirio:",z),z}},[]),w=b.useCallback(async $=>E($),[E]),O=b.useCallback(async $=>{throw new Error("Relatrio mensal ainda no implementado")},[]),L=b.useCallback(async($,T)=>{throw new Error("Relatrio de performance ainda no implementado")},[]),V=b.useCallback(async $=>{if(!c.currentSession)return{isValid:!1,warnings:[],errors:[{type:"invalid_state",message:"Nenhuma sesso ativa"}],suggestions:["Abra uma sesso de caixa primeiro"]};const T=$-c.currentSession.expected_amount,R=Math.abs(T/c.currentSession.expected_amount)*100,z=[],X=[],D=[];return Math.abs(T)>10&&(z.push({type:"discrepancy",message:`Discrepncia alta: R$ ${T.toFixed(2)}`,severity:"high",data:{discrepancy:T,percentage:R}}),D.push("Recontagem recomendada")),{isValid:Math.abs(T)<=5,warnings:z,errors:X,suggestions:D}},[c.currentSession]),H=b.useCallback(async $=>({isValid:!0,warnings:[],errors:[],suggestions:[]}),[]),B=b.useCallback(async()=>{await f()},[f]),K=b.useCallback(async($,T)=>{throw new Error("Exportao de relatrios ainda no implementada")},[]),G=b.useCallback(async $=>{try{let T=W.from("cash_transactions").select(`
          *,
          comandas(id, customer_name, table_id, total),
          profiles!cash_transactions_processed_by_fkey(id, name),
          cash_sessions(id, session_date, employee_id)
        `);$.start_date&&(T=T.gte("processed_at",$.start_date)),$.end_date&&(T=T.lte("processed_at",$.end_date)),$.payment_method&&(T=T.eq("payment_method",$.payment_method)),$.transaction_type&&(T=T.eq("transaction_type",$.transaction_type)),$.employee_id&&(T=T.eq("processed_by",$.employee_id)),$.session_id&&(T=T.eq("cash_session_id",$.session_id)),$.min_amount&&(T=T.gte("amount",$.min_amount)),$.max_amount&&(T=T.lte("amount",$.max_amount));const{data:R,error:z}=await T.order("processed_at",{ascending:!1});if(z)throw z;return(R==null?void 0:R.map(X=>({...X,comanda:X.comandas||void 0,processed_by_employee:X.profiles||void 0,session:X.cash_sessions||void 0})))||[]}catch(T){throw console.error("Erro na busca de transaes:",T),T}},[]),ae=b.useCallback(async $=>{try{let T=W.from("cash_sessions").select(`
          *,
          profiles!cash_sessions_employee_id_fkey(id, name, role)
        `);$.start_date&&(T=T.gte("session_date",$.start_date)),$.end_date&&(T=T.lte("session_date",$.end_date)),$.employee_id&&(T=T.eq("employee_id",$.employee_id)),$.status&&(T=T.eq("status",$.status)),$.has_discrepancy&&(T=T.neq("cash_discrepancy",0));const{data:R,error:z}=await T.order("session_date",{ascending:!1});if(z)throw z;return(R==null?void 0:R.map(X=>({...X,employee:X.profiles||void 0})))||[]}catch(T){throw console.error("Erro na busca de sesses:",T),T}},[]),oe=b.useCallback(async $=>{if(t)try{const T=new Date().toISOString().split("T")[0],{error:R}=await W.rpc("atualizar_metricas_venda",{p_employee_id:t.id,p_date:T,p_sale_amount:$});R&&console.warn("Erro ao atualizar mtricas:",R)}catch(T){console.warn("Erro ao atualizar mtricas:",T)}},[t]);return b.useEffect(()=>{f()},[f]),b.useEffect(()=>{if(!t)return;const $=[],T=W.channel("cash-sessions-changes").on("postgres_changes",{event:"*",schema:"public",table:"cash_sessions"},X=>{console.log("Mudana em sesses de caixa:",X),f()}).subscribe();$.push(T);const R=W.channel("cash-transactions-changes").on("postgres_changes",{event:"*",schema:"public",table:"cash_transactions"},X=>{console.log("Mudana em transaes:",X),f()}).subscribe();$.push(R);const z=W.channel("comandas-changes").on("postgres_changes",{event:"*",schema:"public",table:"comandas"},X=>{console.log("Mudana em comandas:",X),f()}).subscribe();return $.push(z),()=>{$.forEach(X=>{W.removeChannel(X)})}},[t,f]),{...c,openCashSession:v,closeCashSession:N,getCurrentSession:_,processComandaPayment:j,processRefund:C,processAdjustment:M,processCashWithdrawal:S,processTreasuryTransfer:A,getDailySummary:w,getMonthlyCashReport:O,getEmployeePerformance:L,validateCashCount:V,validateSession:H,refreshData:B,exportReport:K,searchTransactions:G,searchSessions:ae,getLastClosedSessionBalance:g,getDailyCashMovement:y}},oR=({isOpen:t,onClose:s,onOpenCash:r,getLastClosedSessionBalance:i})=>{const[l,c]=b.useState({opening_amount:0,opening_notes:""}),[u,m]=b.useState(!1),[h,f]=b.useState(null),[g,y]=b.useState(!1);b.useEffect(()=>{(async()=>{if(t&&i){y(!0);try{const j=await i();f(j),j>0&&l.opening_amount===0&&c(C=>({...C,opening_amount:j}))}catch(j){console.error("Erro ao carregar saldo da ltima sesso:",j)}finally{y(!1)}}})()},[t,i,l.opening_amount]);const v=()=>{h!==null&&c(_=>({..._,opening_amount:h}))},N=async _=>{_.preventDefault(),m(!0);try{await r(l),s(),c({opening_amount:0,opening_notes:""})}catch(j){console.error("Erro ao abrir caixa:",j)}finally{m(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(Yt,{className:"h-6 w-6 text-green-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Abrir Caixa"})]}),e.jsx("button",{onClick:s,disabled:u,className:"text-gray-400 hover:text-gray-600","aria-label":"Fechar modal",children:e.jsx(it,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[h!==null&&h>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Vt,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Saldo da ltima sesso fechada"}),e.jsxs("p",{className:"text-lg font-bold text-blue-700",children:["R$ ",h.toFixed(2)]}),e.jsx("button",{type:"button",onClick:v,className:"mt-2 text-sm text-blue-600 hover:text-blue-800 underline",disabled:u,children:"Usar este valor como abertura"})]})]})}),g&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}),e.jsx("span",{className:"text-sm",children:"Carregando histrico..."})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Inicial (R$) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:l.opening_amount,onChange:_=>c(j=>({...j,opening_amount:parseFloat(_.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,disabled:u,"aria-label":"Valor inicial em reais"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),e.jsx("textarea",{value:l.opening_notes||"",onChange:_=>c(j=>({...j,opening_notes:_.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Observaes sobre a abertura do caixa...",disabled:u})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,disabled:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:u,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:u?"Abrindo...":"Abrir Caixa"})]})]})]})}):null},lR=({isOpen:t,onClose:s,session:r,onCloseCash:i})=>{var w;const{preparingOrders:l,readyOrders:c}=Ld(),[u,m]=b.useState({closing_amount:r.expected_amount,closing_notes:"",reconciliation:[{payment_method:"dinheiro",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"cartao_debito",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"cartao_credito",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"pix",expected_amount:0,actual_amount:0,transaction_count:0},{payment_method:"transferencia",expected_amount:0,actual_amount:0,transaction_count:0}]}),[h,f]=b.useState(!1),[g,y]=b.useState([]),[v,N]=b.useState(!1);b.useEffect(()=>{t&&r&&(m(O=>({...O,closing_amount:r.expected_amount})),_())},[t,r]);const _=async()=>{N(!0);try{const{data:O,error:L}=await W.from("comanda_items").select(`
          *,
          comanda:comandas!inner(
            id,
            customer_name,
            table_id,
            bar_tables(number)
          ),
          menu_item:menu_items(name)
        `).in("status",["pending","preparing","ready"]).eq("comanda.status","open").order("added_at",{ascending:!0});L?(console.error("Erro ao carregar itens pendentes:",L),y([])):y(O||[])}catch(O){console.error("Erro ao validar pedidos pendentes:",O),y([])}finally{N(!1)}},j=async O=>{O.preventDefault();const L=l.length+c.length+g.length;if(L>0){const V=`ATENO: Existem ${L} pedidos pendentes de entrega:

 ${l.length} pedidos de balco em preparo
 ${c.length} pedidos de balco prontos para entrega
 ${g.length} itens de comandas no entregues

Tem certeza que deseja fechar o caixa mesmo com pedidos pendentes?`;if(!window.confirm(V))return}f(!0);try{await i(u),s()}catch(V){console.error("Erro ao fechar caixa:",V)}finally{f(!1)}},C=(O,L,V)=>{m(H=>({...H,reconciliation:H.reconciliation.map(B=>B.payment_method===O?{...B,[L]:V}:B)}))},M=u.reconciliation.reduce((O,L)=>O+L.actual_amount,0),S=M-r.expected_amount,E=l.length+c.length+g.length>0;return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:e.jsx(Yt,{className:"h-6 w-6 text-red-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Fechar Caixa"})]}),e.jsx("button",{onClick:s,disabled:h,className:"text-gray-400 hover:text-gray-600",children:e.jsx(it,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[E&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(As,{className:"h-6 w-6 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:" Ateno: Pedidos Pendentes de Entrega"}),e.jsxs("div",{className:"text-sm text-yellow-700 space-y-1",children:[l.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsxs("span",{children:[l.length," pedidos de balco em preparo"]})]}),c.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xf,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.length," pedidos de balco prontos para entrega"]})]}),g.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsxs("span",{children:[g.length," itens de comandas no entregues"]})]})]}),e.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"Recomenda-se entregar todos os pedidos antes de fechar o caixa."})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Resumo da Sesso"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Valor inicial:"}),e.jsx("span",{className:"font-medium",children:Ae(r.opening_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Valor esperado total:"}),e.jsx("span",{className:"font-medium",children:Ae(r.expected_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aberta em:"}),e.jsx("span",{className:"font-medium",children:new Date(r.opened_at).toLocaleString("pt-BR")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Funcionrio:"}),e.jsx("span",{className:"font-medium",children:(w=r.employee)==null?void 0:w.name})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reconciliao por Mtodo de Pagamento"}),e.jsx("div",{className:"space-y-4",children:u.reconciliation.map((O,L)=>{const V=H=>{switch(H){case"dinheiro":return e.jsx(Yt,{className:"h-5 w-5"});case"cartao_debito":case"cartao_credito":return e.jsx(pn,{className:"h-5 w-5"});case"pix":return e.jsx(mn,{className:"h-5 w-5"});case"transferencia":return e.jsx(nA,{className:"h-5 w-5"});default:return e.jsx(Yt,{className:"h-5 w-5"})}};return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[V(O.payment_method),e.jsx("h4",{className:"font-medium text-gray-900",children:zd[O.payment_method]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Valor Esperado"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 rounded text-sm font-medium",children:Ae(O.expected_amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Valor Real *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:O.actual_amount,onChange:H=>C(O.payment_method,"actual_amount",parseFloat(H.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:h})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Transaes"}),e.jsx("input",{type:"number",min:"0",value:O.transaction_count,onChange:H=>C(O.payment_method,"transaction_count",parseInt(H.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:h})]})]}),Math.abs(O.actual_amount-O.expected_amount)>.01&&e.jsxs("div",{className:`mt-2 p-2 rounded text-xs ${O.actual_amount>O.expected_amount?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[O.actual_amount>O.expected_amount?"Sobra":"Falta",":",Ae(Math.abs(O.actual_amount-O.expected_amount))]})]},O.payment_method)})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"Resumo Final"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total esperado:"}),e.jsx("span",{className:"font-medium",children:Ae(r.expected_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total contado:"}),e.jsx("span",{className:"font-medium",children:Ae(M)})]}),e.jsxs("div",{className:"flex justify-between col-span-2 pt-2 border-t border-blue-200",children:[e.jsx("span",{className:"font-medium",children:"Diferena:"}),e.jsxs("span",{className:`font-bold ${Math.abs(S)<.01||S>0?"text-green-600":"text-red-600"}`,children:[S===0?"Exato":Ae(S),S>0&&" (Sobra)",S<0&&" (Falta)"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes do Fechamento"}),e.jsx("textarea",{value:u.closing_notes||"",onChange:O=>m(L=>({...L,closing_notes:O.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Observaes sobre o fechamento...",disabled:h})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,disabled:h,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:h||v,className:`flex-1 px-4 py-2 text-white rounded-md disabled:opacity-50 transition-colors ${E?"bg-yellow-600 hover:bg-yellow-700":"bg-red-600 hover:bg-red-700"}`,children:h?"Fechando...":v?"Validando...":E?"Fechar Mesmo Assim":"Fechar Caixa"})]})]})]})}):null},cR=({isOpen:t,onClose:s,onProcessWithdrawal:r,currentCashBalance:i,loading:l=!1})=>{const[c,u]=b.useState({amount:0,reason:"",authorized_by:"",recipient:"",purpose:"other"}),[m,h]=b.useState({}),[f,g]=b.useState(!1),y=(C,M)=>{u(S=>({...S,[C]:M})),m[C]&&h(S=>({...S,[C]:""}))},v=()=>{var M;const C={};return(!c.amount||c.amount<=0)&&(C.amount="Valor deve ser maior que zero"),c.amount>i&&(C.amount="Valor no pode ser maior que o saldo em caixa"),c.reason.trim()||(C.reason="Motivo  obrigatrio"),c.authorized_by.trim()||(C.authorized_by="Nome do autorizador  obrigatrio"),c.purpose==="transfer"&&!((M=c.recipient)!=null&&M.trim())&&(C.recipient="Destinatrio  obrigatrio para transferncias"),h(C),Object.keys(C).length===0},N=async C=>{if(C.preventDefault(),!!v()){g(!0);try{await r(c),_()}catch(M){console.error("Erro ao processar sada:",M)}finally{g(!1)}}},_=()=>{u({amount:0,reason:"",authorized_by:"",recipient:"",purpose:"other"}),h({}),g(!1),s()},j=[{value:"change",label:"Troco"},{value:"expense",label:"Despesa"},{value:"transfer",label:"Transferncia"},{value:"other",label:"Outros"}];return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:e.jsx(Ri,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sada de Dinheiro"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Saldo disponvel: ",Ae(i)]})]})]}),e.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:f,title:"Fechar modal","aria-label":"Fechar modal",children:e.jsx(it,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6 pb-0",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(As,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Ateno"}),e.jsx("p",{className:"text-yellow-700 mt-1",children:"Esta operao reduzir o saldo em caixa e deve ser autorizada por um supervisor."})]})]})}),e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor da Sada *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:i,value:c.amount||"",onChange:C=>y("amount",parseFloat(C.target.value)||0),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${m.amount?"border-red-300":"border-gray-300"}`,placeholder:"0,00",disabled:f})]}),m.amount&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:m.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finalidade *"}),e.jsx("select",{value:c.purpose,onChange:C=>y("purpose",C.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:f,title:"Selecione a finalidade da sada","aria-label":"Finalidade da sada de dinheiro",children:j.map(C=>e.jsx("option",{value:C.value,children:C.label},C.value))})]}),c.purpose==="transfer"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destinatrio *"}),e.jsx("input",{type:"text",value:c.recipient||"",onChange:C=>y("recipient",C.target.value),className:`w-full px-3 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${m.recipient?"border-red-300":"border-gray-300"}`,placeholder:"Nome do destinatrio",disabled:f}),m.recipient&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:m.recipient})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo/Descrio *"}),e.jsx("textarea",{value:c.reason,onChange:C=>y("reason",C.target.value),rows:3,className:`w-full px-3 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none ${m.reason?"border-red-300":"border-gray-300"}`,placeholder:"Descreva o motivo da sada de dinheiro...",disabled:f}),m.reason&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:m.reason})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Autorizado por *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",value:c.authorized_by,onChange:C=>y("authorized_by",C.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${m.authorized_by?"border-red-300":"border-gray-300"}`,placeholder:"Nome do supervisor/gerente",disabled:f})]}),m.authorized_by&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:m.authorized_by})]})]}),c.amount>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Resumo da Operao"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Saldo atual:"}),e.jsx("span",{className:"font-medium",children:Ae(i)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor da sada:"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",Ae(c.amount)]})]}),e.jsx("div",{className:"border-t pt-1 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:"Saldo aps sada:"}),e.jsx("span",{className:"font-bold",children:Ae(i-c.amount)})]})})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:_,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors font-medium",disabled:f,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-orange-600 text-white py-3 rounded-lg hover:bg-orange-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:f||l||!c.amount||!c.reason.trim()||!c.authorized_by.trim(),children:f?"Processando...":"Processar Sada"})]})]})]})}):null},dR=({isOpen:t,onClose:s,onProcessTransfer:r,currentCashBalance:i,loading:l=!1})=>{const[c,u]=b.useState({amount:i,transfer_date:new Date().toISOString().split("T")[0],authorized_by:"",treasury_receipt_number:"",notes:""}),[m,h]=b.useState({}),[f,g]=b.useState(!1),y=(C,M)=>{u(S=>({...S,[C]:M})),m[C]&&h(S=>({...S,[C]:""}))},v=()=>{const C={};(!c.amount||c.amount<=0)&&(C.amount="Valor deve ser maior que zero"),c.amount>i&&(C.amount="Valor no pode ser maior que o saldo em caixa"),c.transfer_date||(C.transfer_date="Data da transferncia  obrigatria"),c.authorized_by.trim()||(C.authorized_by="Nome do autorizador  obrigatrio");const M=new Date(c.transfer_date),S=new Date;return S.setHours(23,59,59,999),M>S&&(C.transfer_date="Data no pode ser futura"),h(C),Object.keys(C).length===0},N=async C=>{if(C.preventDefault(),!!v()){g(!0);try{await r(c),_()}catch(M){console.error("Erro ao processar transferncia:",M)}finally{g(!1)}}},_=()=>{u({amount:i,transfer_date:new Date().toISOString().split("T")[0],authorized_by:"",treasury_receipt_number:"",notes:""}),h({}),g(!1),s()},j=()=>{y("amount",i)};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Ne.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:e.jsx(fd,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transferncia para Tesouraria"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Saldo disponvel: ",Ae(i)]})]})]}),e.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:f,title:"Fechar modal","aria-label":"Fechar modal",children:e.jsx(it,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6 pb-0",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start space-x-3",children:[e.jsx(oA,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Transferncia para Tesouraria"}),e.jsx("p",{className:"text-blue-700 mt-1",children:"Esta operao transfere o dinheiro em caixa para a tesouraria central. Um comprovante ser gerado para assinatura do conferente."})]})]})}),e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor da Transferncia *"}),e.jsx("button",{type:"button",onClick:j,className:"text-xs text-purple-600 hover:text-purple-700 underline",disabled:f,children:"Transferir todo o saldo"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"R$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:i,value:c.amount||"",onChange:C=>y("amount",parseFloat(C.target.value)||0),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${m.amount?"border-red-300":"border-gray-300"}`,placeholder:"0,00",disabled:f})]}),m.amount&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:m.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Transferncia *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"date",value:c.transfer_date,onChange:C=>y("transfer_date",C.target.value),max:new Date().toISOString().split("T")[0],className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${m.transfer_date?"border-red-300":"border-gray-300"}`,disabled:f,title:"Selecione a data da transferncia","aria-label":"Data da transferncia"})]}),m.transfer_date&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:m.transfer_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Autorizado por *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",value:c.authorized_by,onChange:C=>y("authorized_by",C.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${m.authorized_by?"border-red-300":"border-gray-300"}`,placeholder:"Nome do supervisor/gerente",disabled:f})]}),m.authorized_by&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:m.authorized_by})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero do Comprovante da Tesouraria"}),e.jsxs("div",{className:"relative",children:[e.jsx(T1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",value:c.treasury_receipt_number||"",onChange:C=>y("treasury_receipt_number",C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: TSR-2024-001234",disabled:f})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Nmero de referncia do comprovante da tesouraria (opcional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),e.jsx("textarea",{value:c.notes||"",onChange:C=>y("notes",C.target.value),rows:3,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",placeholder:"Observaes adicionais sobre a transferncia...",disabled:f})]})]}),c.amount>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Resumo da Transferncia"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Saldo atual em caixa:"}),e.jsx("span",{className:"font-medium",children:Ae(i)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Valor a transferir:"}),e.jsx("span",{className:"font-medium text-purple-600",children:Ae(c.amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data da transferncia:"}),e.jsx("span",{className:"font-medium",children:es(new Date(c.transfer_date),"dd 'de' MMMM 'de' yyyy",{locale:ds})})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:"Saldo restante em caixa:"}),e.jsx("span",{className:"font-bold",children:Ae(i-c.amount)})]})})]})]}),c.amount===i&&c.amount>0&&e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start space-x-2",children:[e.jsx(As,{className:"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Transferncia Total"}),e.jsx("p",{className:"text-yellow-700",children:"Voc est transferindo todo o saldo em caixa. O caixa ficar zerado aps esta operao."})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:_,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors font-medium",disabled:f,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:f||l||!c.amount||!c.authorized_by.trim(),children:f?"Processando...":"Transferir e Imprimir Comprovante"})]})]})]})}):null},uR=({receiptData:t,onPrint:s})=>{const r=()=>{const i=document.getElementById("treasury-transfer-receipt");if(!i)return;const l=window.open("","_blank");l&&(l.document.write(`
      <html>
        <head>
          <title>Comprovante de Transferncia - Tesouraria</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.4;
              margin: 0;
              padding: 20px;
              background: white;
            }
            .receipt {
              max-width: 300px;
              margin: 0 auto;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #000;
              padding-bottom: 10px;
              margin-bottom: 15px;
            }
            .company-name {
              font-size: 16px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .receipt-title {
              font-size: 14px;
              font-weight: bold;
              margin-top: 10px;
            }
            .section {
              margin-bottom: 15px;
            }
            .section-title {
              font-weight: bold;
              border-bottom: 1px solid #000;
              margin-bottom: 5px;
              text-transform: uppercase;
            }
            .row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 3px;
            }
            .row-full {
              margin-bottom: 3px;
            }
            .total {
              border-top: 2px solid #000;
              border-bottom: 2px solid #000;
              padding: 8px 0;
              margin: 15px 0;
              font-weight: bold;
              font-size: 14px;
            }
            .signatures {
              margin-top: 30px;
              border-top: 1px solid #000;
              padding-top: 20px;
            }
            .signature-line {
              border-bottom: 1px solid #000;
              margin: 30px 0 10px 0;
              height: 1px;
            }
            .signature-label {
              text-align: center;
              font-size: 10px;
              margin-top: 5px;
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              font-size: 10px;
              border-top: 1px solid #000;
              padding-top: 10px;
            }
            @media print {
              body { margin: 0; padding: 10px; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          ${i.innerHTML}
        </body>
      </html>
    `),l.document.close(),l.focus(),l.print(),s&&s())};return e.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[e.jsxs("div",{id:"treasury-transfer-receipt",className:"receipt",children:[e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"company-name",children:"AABB - SISTEMA DE GESTO"}),e.jsx("div",{children:"Associao Atltica Banco do Brasil"}),e.jsx("div",{className:"receipt-title",children:"COMPROVANTE DE TRANSFERNCIA"}),e.jsx("div",{className:"receipt-title",children:"TESOURARIA"})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Dados da Transferncia"}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"ID Transferncia:"}),e.jsxs("span",{children:["#",t.transferId.slice(-8).toUpperCase()]})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Data/Hora:"}),e.jsx("span",{children:es(t.timestamp,"dd/MM/yyyy HH:mm",{locale:ds})})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Data Transferncia:"}),e.jsx("span",{children:es(new Date(t.transferDate),"dd/MM/yyyy",{locale:ds})})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Sesso Caixa:"}),e.jsxs("span",{children:["#",t.sessionId.slice(-6).toUpperCase()]})]})]}),e.jsx("div",{className:"total",children:e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"VALOR TRANSFERIDO:"}),e.jsx("span",{children:Ae(t.amount)})]})}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Autorizao"}),e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Autorizado por:"})," ",t.authorizedBy]}),e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Operador:"})," ",t.cashierName]}),t.treasuryReceiptNumber&&e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Comprovante Tesouraria:"})," ",t.treasuryReceiptNumber]})]}),t.notes&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Observaes"}),e.jsx("div",{className:"row-full",children:t.notes})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Informaes"}),e.jsx("div",{className:"row-full",style:{fontSize:"10px"},children:"Este comprovante confirma a transferncia de valores em dinheiro do caixa operacional para a tesouraria central."}),e.jsx("div",{className:"row-full",style:{fontSize:"10px",marginTop:"5px"},children:"Confira os dados e guarde este comprovante."})]}),e.jsxs("div",{className:"signatures",children:[e.jsx("div",{className:"section-title",children:"Assinaturas"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"OPERADOR DE CAIXA"}),e.jsx("div",{className:"signature-label",children:t.cashierName})]}),e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"SUPERVISOR/AUTORIZAO"}),e.jsx("div",{className:"signature-label",children:t.authorizedBy})]}),e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"CONFERENTE TESOURARIA"}),e.jsx("div",{className:"signature-label",children:"Nome: ___________________________"})]})]}),e.jsxs("div",{className:"footer",children:[e.jsx("div",{children:"AABB - Sistema de Gesto v1.0"}),e.jsx("div",{children:"Documento gerado automaticamente"}),e.jsx("div",{children:es(new Date,"dd/MM/yyyy HH:mm:ss",{locale:ds})})]})]}),e.jsx("div",{className:"flex justify-center mt-6 no-print",children:e.jsxs("button",{onClick:r,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Imprimir Comprovante"})]})})]})},mR={change:"Troco",expense:"Despesa",transfer:"Transferncia",other:"Outros"},hR=({receiptData:t,onPrint:s})=>{const r=()=>{const i=document.getElementById("cash-withdrawal-receipt");if(!i)return;const l=window.open("","_blank");l&&(l.document.write(`
      <html>
        <head>
          <title>Comprovante de Sada de Dinheiro</title>
          <style>
            body {
              font-family: 'Courier New', monospace;
              font-size: 12px;
              line-height: 1.4;
              margin: 0;
              padding: 20px;
              background: white;
            }
            .receipt {
              max-width: 300px;
              margin: 0 auto;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #000;
              padding-bottom: 10px;
              margin-bottom: 15px;
            }
            .company-name {
              font-size: 16px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .receipt-title {
              font-size: 14px;
              font-weight: bold;
              margin-top: 10px;
            }
            .section {
              margin-bottom: 15px;
            }
            .section-title {
              font-weight: bold;
              border-bottom: 1px solid #000;
              margin-bottom: 5px;
              text-transform: uppercase;
            }
            .row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 3px;
            }
            .row-full {
              margin-bottom: 3px;
            }
            .total {
              border-top: 2px solid #000;
              border-bottom: 2px solid #000;
              padding: 8px 0;
              margin: 15px 0;
              font-weight: bold;
              font-size: 14px;
            }
            .signatures {
              margin-top: 30px;
              border-top: 1px solid #000;
              padding-top: 20px;
            }
            .signature-line {
              border-bottom: 1px solid #000;
              margin: 30px 0 10px 0;
              height: 1px;
            }
            .signature-label {
              text-align: center;
              font-size: 10px;
              margin-top: 5px;
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              font-size: 10px;
              border-top: 1px solid #000;
              padding-top: 10px;
            }
            .highlight {
              background-color: #f0f0f0;
              padding: 5px;
              border: 1px solid #000;
              margin: 10px 0;
            }
            @media print {
              body { margin: 0; padding: 10px; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          ${i.innerHTML}
        </body>
      </html>
    `),l.document.close(),l.focus(),l.print(),s&&s())};return e.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[e.jsxs("div",{id:"cash-withdrawal-receipt",className:"receipt",children:[e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"company-name",children:"AABB - SISTEMA DE GESTO"}),e.jsx("div",{children:"Associao Atltica Banco do Brasil"}),e.jsx("div",{className:"receipt-title",children:"COMPROVANTE DE SADA"}),e.jsx("div",{className:"receipt-title",children:"DE DINHEIRO"})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Dados da Operao"}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"ID Operao:"}),e.jsxs("span",{children:["#",t.withdrawalId.slice(-8).toUpperCase()]})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Data/Hora:"}),e.jsx("span",{children:es(t.timestamp,"dd/MM/yyyy HH:mm",{locale:ds})})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Sesso Caixa:"}),e.jsxs("span",{children:["#",t.sessionId.slice(-6).toUpperCase()]})]}),e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"Finalidade:"}),e.jsx("span",{children:mR[t.purpose]})]})]}),e.jsx("div",{className:"total",children:e.jsxs("div",{className:"row",children:[e.jsx("span",{children:"VALOR DA SADA:"}),e.jsx("span",{children:Ae(t.amount)})]})}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Justificativa"}),e.jsx("div",{className:"highlight",children:e.jsx("div",{className:"row-full",children:t.reason})})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Autorizao"}),e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Autorizado por:"})," ",t.authorizedBy]}),e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Operador de Caixa:"})," ",t.cashierName]}),t.recipient&&e.jsxs("div",{className:"row-full",children:[e.jsx("strong",{children:"Beneficirio:"})," ",t.recipient]})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-title",children:"Informaes"}),e.jsx("div",{className:"row-full",style:{fontSize:"10px"},children:"Este comprovante documenta a sada de dinheiro do caixa operacional."}),e.jsx("div",{className:"row-full",style:{fontSize:"10px",marginTop:"5px"},children:"Operao devidamente autorizada e registrada no sistema."}),e.jsx("div",{className:"row-full",style:{fontSize:"10px",marginTop:"5px"},children:"Confira os dados e mantenha este comprovante arquivado."})]}),e.jsxs("div",{className:"signatures",children:[e.jsx("div",{className:"section-title",children:"Assinaturas e Confirmaes"}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"OPERADOR DE CAIXA"}),e.jsx("div",{className:"signature-label",children:t.cashierName})]}),e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"SUPERVISOR/AUTORIZAO"}),e.jsx("div",{className:"signature-label",children:t.authorizedBy})]}),t.recipient&&e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"BENEFICIRIO/RECEBEDOR"}),e.jsx("div",{className:"signature-label",children:t.recipient})]}),e.jsxs("div",{style:{marginTop:"25px"},children:[e.jsx("div",{className:"signature-line"}),e.jsx("div",{className:"signature-label",children:"TESTEMUNHA (se necessrio)"}),e.jsx("div",{className:"signature-label",children:"Nome: ___________________________"})]})]}),e.jsxs("div",{className:"footer",children:[e.jsx("div",{children:"AABB - Sistema de Gesto v1.0"}),e.jsx("div",{children:"Documento gerado automaticamente"}),e.jsx("div",{children:es(new Date,"dd/MM/yyyy HH:mm:ss",{locale:ds})}),e.jsx("div",{style:{marginTop:"10px",fontSize:"8px"},children:" Este documento possui valor legal e deve ser arquivado"})]})]}),e.jsx("div",{className:"flex justify-center mt-6 no-print",children:e.jsxs("button",{onClick:r,className:"bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Imprimir Comprovante"})]})})]})},fR=({transactions:t,onAddWithdrawal:s,onExportReport:r,isCashSessionOpen:i=!1})=>{const[l,c]=b.useState("all"),[u,m]=b.useState("all"),h=N=>{var _,j;return(_=N.notes)!=null&&_.includes("[SADA]")?"cash_withdrawal":(j=N.notes)!=null&&j.includes("[TRANSFERNCIA TESOURARIA]")?"treasury_transfer":N.transaction_type},f=t.filter(N=>{const _=h(N),j=l==="all"||_===l,C=u==="all"||N.payment_method===u;return j&&C}),g={entradas:t.filter(N=>{const _=h(N);return["sale","adjustment"].includes(_)&&N.amount>0}).reduce((N,_)=>N+_.amount,0),saidas:t.filter(N=>{const _=h(N);return["refund","cash_withdrawal","treasury_transfer"].includes(_)||_==="adjustment"&&N.amount<0}).reduce((N,_)=>N+Math.abs(_.amount),0),saldo:0};g.saldo=g.entradas-g.saidas;const y=N=>{switch(N){case"sale":return e.jsx(Pi,{className:"h-4 w-4 text-green-600"});case"refund":return e.jsx(Tv,{className:"h-4 w-4 text-red-600"});case"adjustment":return e.jsx(fd,{className:"h-4 w-4 text-blue-600"});case"cash_withdrawal":return e.jsx(Ri,{className:"h-4 w-4 text-orange-600"});case"treasury_transfer":return e.jsx(fd,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(Yt,{className:"h-4 w-4 text-gray-600"})}},v=(N,_)=>N==="sale"||N==="adjustment"&&_>0?"text-green-600":["refund","cash_withdrawal","treasury_transfer"].includes(N)||N==="adjustment"&&_<0?"text-red-600":"text-gray-600";return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Movimentao do Dia"}),e.jsx("p",{className:"text-sm text-gray-600",children:es(new Date,"dd 'de' MMMM 'de' yyyy",{locale:ds})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:s,disabled:!i,className:`px-4 py-2 rounded-lg flex items-center space-x-2 text-sm transition-colors ${i?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:i?"Registrar sada de dinheiro":"Caixa deve estar aberto para realizar sadas de dinheiro",children:[e.jsx(Ri,{className:"h-4 w-4"}),e.jsx("span",{children:"Sada de Dinheiro"})]}),e.jsxs("button",{onClick:r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2 text-sm",children:[e.jsx(b0,{className:"h-4 w-4"}),e.jsx("span",{children:"Exportar"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Entradas"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:Ae(g.entradas)})]}),e.jsx(Pi,{className:"h-8 w-8 text-green-600"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Sadas"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:Ae(g.saidas)})]}),e.jsx(Tv,{className:"h-8 w-8 text-red-600"})]})}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`border rounded-lg p-4 ${g.saldo>=0?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${g.saldo>=0?"text-blue-800":"text-orange-800"}`,children:"Saldo"}),e.jsx("p",{className:`text-2xl font-bold ${g.saldo>=0?"text-blue-900":"text-orange-900"}`,children:Ae(Math.abs(g.saldo))})]}),e.jsx(Yt,{className:`h-8 w-8 ${g.saldo>=0?"text-blue-600":"text-orange-600"}`})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:l,onChange:N=>c(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",title:"Filtrar por tipo de transao","aria-label":"Filtro por tipo de transao",children:[e.jsx("option",{value:"all",children:"Todos os Tipos"}),e.jsx("option",{value:"sale",children:"Vendas"}),e.jsx("option",{value:"refund",children:"Estornos"}),e.jsx("option",{value:"adjustment",children:"Ajustes"}),e.jsx("option",{value:"cash_withdrawal",children:"Sadas de Dinheiro"}),e.jsx("option",{value:"treasury_transfer",children:"Transferncias"})]}),e.jsxs("select",{value:u,onChange:N=>m(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",title:"Filtrar por mtodo de pagamento","aria-label":"Filtro por mtodo de pagamento",children:[e.jsx("option",{value:"all",children:"Todos os Mtodos"}),e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),e.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"transferencia",children:"Transferncia"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[f.length," de ",t.length," transaes"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma transao encontrada"})}):f.map(N=>{var j,C;const _=h(N);return e.jsxs(Ne.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[y(_),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[tN[_]||"Transao",N.comanda&&e.jsxs("span",{className:"ml-2 text-blue-600",children:["- Comanda #",Pd(N.comanda.id)]}),!N.comanda&&N.notes&&(N.notes.includes("Pedido Balco")||N.notes.includes("Pedido de balco"))&&e.jsxs("span",{className:"ml-2 text-green-600",children:["- Pedido Balco ",Q1(N.notes)]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[e.jsx(Vt,{className:"h-3 w-3"}),e.jsx("span",{children:es(new Date(N.processed_at),"HH:mm",{locale:ds})}),e.jsx("span",{children:""}),e.jsx("span",{children:zd[N.payment_method]}),((j=N.comanda)==null?void 0:j.customer_name)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:N.comanda.customer_name})]}),((C=N.comanda)==null?void 0:C.table_number)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Mesa ",N.comanda.table_number]})]}),N.processed_by_employee&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx(Js,{className:"h-3 w-3"}),e.jsx("span",{children:N.processed_by_employee.name})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-sm font-bold ${v(_,N.amount)}`,children:[["refund","cash_withdrawal","treasury_transfer"].includes(_)||_==="adjustment"&&N.amount<0?"-":"+",Ae(Math.abs(N.amount))]}),N.reference_number&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",N.reference_number]})]})]},N.id)})})]})},pR=({receiptData:t,onPrint:s})=>{var y;const{order:r,paymentMethod:i,amountPaid:l,cashierName:c,referenceNumber:u,timestamp:m}=t,h=v=>({dinheiro:"Dinheiro",cartao_debito:"Carto Dbito",cartao_credito:"Carto Crdito",pix:"PIX",transferencia:"Transferncia"})[v]||v,f=()=>{s&&s();const v=window.open("","_blank");v&&(v.document.write(g()),v.document.close(),v.print(),v.close())},g=()=>{var v;return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Comprovante - ${r.order_number.toString().padStart(4,"0")}</title>
        <style>
          body {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            margin: 0;
            padding: 20px;
            width: 300px;
          }
          .header {
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
            margin-bottom: 15px;
          }
          .title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
          }
          .subtitle {
            font-size: 10px;
            color: #666;
          }
          .section {
            margin-bottom: 15px;
          }
          .section-title {
            font-weight: bold;
            border-bottom: 1px solid #ccc;
            padding-bottom: 2px;
            margin-bottom: 5px;
          }
          .item-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
          }
          .item-name {
            flex: 1;
          }
          .item-qty {
            width: 30px;
            text-align: center;
          }
          .item-price {
            width: 60px;
            text-align: right;
          }
          .total-row {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            border-top: 1px solid #000;
            padding-top: 5px;
            margin-top: 10px;
          }
          .footer {
            text-align: center;
            border-top: 2px solid #000;
            padding-top: 10px;
            margin-top: 15px;
            font-size: 10px;
          }
          .dashed-line {
            border-top: 1px dashed #666;
            margin: 10px 0;
          }
          .payment-status {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            margin: 15px 0;
          }
          @media print {
            body { margin: 0; padding: 10px; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="title">CLUBE SOCIAL</div>
          <div class="subtitle">Bar & Restaurante</div>
          <div class="subtitle">CNPJ: 12.345.678/0001-90</div>
        </div>

        <div class="section">
          <div class="section-title">COMPROVANTE DE PAGAMENTO</div>
          <div>Pedido: #${r.order_number.toString().padStart(4,"0")}</div>
          <div>Data Pedido: ${new Date(r.created_at).toLocaleDateString("pt-BR")}</div>
          <div>Hora Pedido: ${new Date(r.created_at).toLocaleTimeString("pt-BR")}</div>
          <div>Data Pagto: ${m.toLocaleDateString("pt-BR")}</div>
          <div>Hora Pagto: ${m.toLocaleTimeString("pt-BR")}</div>
          <div>Atendente: ${r.employee_name||"N/A"}</div>
          <div>Caixa: ${c}</div>
          ${r.customer_name?`<div>Cliente: ${r.customer_name}</div>`:""}
          ${r.customer_phone?`<div>Telefone: ${r.customer_phone}</div>`:""}
        </div>

        <div class="dashed-line"></div>

        <div class="section">
          <div class="section-title">ITENS VENDIDOS</div>
          ${((v=r.items)==null?void 0:v.map(N=>{var _;return`
            <div class="item-row">
              <div class="item-name">${((_=N.menu_item)==null?void 0:_.name)||"Item"}</div>
              <div class="item-qty">${N.quantity}x</div>
              <div class="item-price">R$ ${(N.unit_price*N.quantity).toFixed(2)}</div>
            </div>
            ${N.notes?`<div style="font-size: 10px; color: #666; margin-left: 10px;">Obs: ${N.notes}</div>`:""}
          `}).join(""))||"<div>Nenhum item encontrado</div>"}
        </div>

        <div class="dashed-line"></div>

        <div class="section">
          <div class="item-row">
            <div>Subtotal:</div>
            <div>R$ ${r.total_amount.toFixed(2)}</div>
          </div>
          ${r.discount_amount&&r.discount_amount>0?`
            <div class="item-row" style="color: #666;">
              <div>Desconto:</div>
              <div>-R$ ${r.discount_amount.toFixed(2)}</div>
            </div>
          `:""}
          <div class="total-row">
            <div>TOTAL PAGO:</div>
            <div>R$ ${l.toFixed(2)}</div>
          </div>
        </div>

        <div class="dashed-line"></div>

        <div class="section">
          <div class="section-title">INFORMAES DE PAGAMENTO</div>
          <div>Forma de Pagamento: ${h(i)}</div>
          <div>Valor Pago: R$ ${l.toFixed(2)}</div>
          ${u?`<div>Ref. Transao: ${u}</div>`:""}
          <div>Status: PAGO </div>
        </div>

        ${r.notes?`
          <div class="dashed-line"></div>
          <div class="section">
            <div class="section-title">OBSERVAES DO PEDIDO</div>
            <div>${r.notes}</div>
          </div>
        `:""}

        ${r.customer_notes?`
          <div class="dashed-line"></div>
          <div class="section">
            <div class="section-title">OBSERVAES DO CLIENTE</div>
            <div>${r.customer_notes}</div>
          </div>
        `:""}

        <div class="payment-status">
          <div> PAGAMENTO APROVADO </div>
          <div style="margin-top: 5px; font-size: 10px;">
            Transao processada com sucesso
          </div>
        </div>

        <div class="footer">
          <div>Obrigado pela preferncia!</div>
          <div>Volte sempre!</div>
          <div style="margin-top: 10px;">
            ${r.customer_name?`Pontos acumulados: +${Math.floor(r.final_amount/10)}`:"Cadastre-se e ganhe pontos!"}
          </div>
          <div style="margin-top: 10px;">
            ID: ${r.id.substring(0,8).toUpperCase()}
          </div>
        </div>
      </body>
      </html>
    `};return e.jsxs("div",{className:"payment-receipt",children:[e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 max-w-sm mx-auto font-mono text-sm",children:[e.jsxs("div",{className:"text-center border-b-2 border-black pb-3 mb-4",children:[e.jsx("div",{className:"font-bold text-lg",children:"CLUBE SOCIAL"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Bar & Restaurante"}),e.jsx("div",{className:"text-xs text-gray-600",children:"CNPJ: 12.345.678/0001-90"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"COMPROVANTE DE PAGAMENTO"}),e.jsxs("div",{children:["Pedido: #",r.order_number.toString().padStart(4,"0")]}),e.jsxs("div",{children:["Data Pedido: ",new Date(r.created_at).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:["Hora Pedido: ",new Date(r.created_at).toLocaleTimeString("pt-BR")]}),e.jsxs("div",{children:["Data Pagto: ",m.toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:["Hora Pagto: ",m.toLocaleTimeString("pt-BR")]}),e.jsxs("div",{children:["Atendente: ",r.employee_name||"N/A"]}),e.jsxs("div",{children:["Caixa: ",c]}),r.customer_name&&e.jsxs("div",{children:["Cliente: ",r.customer_name]}),r.customer_phone&&e.jsxs("div",{children:["Telefone: ",r.customer_phone]})]}),e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"ITENS VENDIDOS"}),((y=r.items)==null?void 0:y.map((v,N)=>{var _;return e.jsxs("div",{className:"mb-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"flex-1",children:((_=v.menu_item)==null?void 0:_.name)||"Item"}),e.jsxs("span",{className:"w-8 text-center",children:[v.quantity,"x"]}),e.jsxs("span",{className:"w-16 text-right",children:["R$ ",(v.unit_price*v.quantity).toFixed(2)]})]}),v.notes&&e.jsxs("div",{className:"text-xs text-gray-600 ml-2",children:["Obs: ",v.notes]})]},N)}))||e.jsx("div",{className:"text-gray-500 text-center py-2",children:"Nenhum item encontrado"})]}),e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["R$ ",r.total_amount.toFixed(2)]})]}),r.discount_amount&&r.discount_amount>0&&e.jsxs("div",{className:"flex justify-between mb-1 text-gray-600",children:[e.jsx("span",{children:"Desconto:"}),e.jsxs("span",{children:["-R$ ",r.discount_amount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t border-black pt-2",children:[e.jsx("span",{children:"TOTAL PAGO:"}),e.jsxs("span",{children:["R$ ",l.toFixed(2)]})]})]}),e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"INFORMAES DE PAGAMENTO"}),e.jsxs("div",{children:["Forma: ",h(i)]}),e.jsxs("div",{children:["Valor Pago: ",Ae(l)]}),u&&e.jsxs("div",{children:["Ref.: ",u]}),e.jsx("div",{children:"Status: PAGO "})]}),r.notes&&e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"OBSERVAES DO PEDIDO"}),e.jsx("div",{children:r.notes})]}),r.customer_notes&&e.jsxs("div",{className:"border-t border-dashed border-gray-400 pt-3 mb-4",children:[e.jsx("div",{className:"font-bold border-b border-gray-400 pb-1 mb-2",children:"OBSERVAES DO CLIENTE"}),e.jsx("div",{children:r.customer_notes})]}),e.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-800 p-3 text-center font-bold mb-4",children:[e.jsx("div",{children:" PAGAMENTO APROVADO "}),e.jsx("div",{className:"text-xs mt-1",children:"Transao processada com sucesso"})]}),e.jsxs("div",{className:"text-center border-t-2 border-black pt-3 text-xs",children:[e.jsx("div",{children:"Obrigado pela preferncia!"}),e.jsx("div",{children:"Volte sempre!"}),e.jsx("div",{className:"mt-2",children:r.customer_name?`Pontos acumulados: +${Math.floor(r.final_amount/10)}`:"Cadastre-se e ganhe pontos!"}),e.jsxs("div",{className:"mt-2",children:["ID: ",r.id.substring(0,8).toUpperCase()]})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:f,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Imprimir Comprovante"})})]})},gR=({comandas:t,onPayComanda:s,disabled:r=!1})=>{const i=c=>{const u=new Date,m=new Date(c),h=Math.floor((u.getTime()-m.getTime())/(1e3*60));if(h<60)return`${h}min`;const f=Math.floor(h/60),g=h%60;return`${f}h ${g}min`},l=c=>{const u=Math.floor((new Date().getTime()-new Date(c).getTime())/6e4);return u>120?"text-red-600 bg-red-50":u>60?"text-orange-600 bg-orange-50":"text-green-600 bg-green-50"};return t.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(ml,{className:"h-6 w-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Comandas Pendentes de Pagamento"})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ml,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Todas as comandas foram pagas!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"No h comandas aguardando pagamento no momento."})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Vt,{className:"h-6 w-6 text-orange-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Comandas Pendentes de Pagamento"}),e.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:t.length})]}),r&&e.jsxs("div",{className:"flex items-center space-x-2 text-amber-600",children:[e.jsx(Oi,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Abra o caixa para processar pagamentos"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(c=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center space-x-2",children:c.table?e.jsxs(e.Fragment,{children:[e.jsx(wl,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Mesa ",c.table.number]})]}):e.jsxs(e.Fragment,{children:[e.jsx(pn,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Balco"})]})}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(c.opened_at)}`,children:i(c.opened_at)})]}),c.customer_name&&e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ea,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:c.customer_name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",c.people_count," pessoas)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(Tr,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:new Date(c.opened_at).toLocaleString("pt-BR")})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[c.items.length," ",c.items.length===1?"item":"itens"]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ae(c.total)}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total da comanda"})]}),e.jsx("button",{onClick:()=>s(c),disabled:r,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Receber"})]})]},c.id))})]})},xR=[{value:"dinheiro",label:"Dinheiro",icon:""},{value:"cartao_debito",label:"Carto Dbito",icon:""},{value:"cartao_credito",label:"Carto Crdito",icon:""},{value:"pix",label:"PIX",icon:""},{value:"vale_refeicao",label:"Vale Refeio",icon:""},{value:"credito_conta",label:"Crdito em Conta",icon:""}],yR=({isOpen:t,comanda:s,onClose:r,onConfirm:i,loading:l=!1})=>{const[c,u]=b.useState("dinheiro"),[m,h]=b.useState("");if(!t||!s)return null;const f=async()=>{await i(c,m.trim()||void 0)},g=y=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(y);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pn,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Processar Pagamento"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Comanda #",Pd(s.id),s.table&&` - Mesa ${s.table.number}`]})]})]}),e.jsx("button",{onClick:r,disabled:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detalhes da Comanda"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cliente"}),e.jsx("p",{className:"font-medium",children:s.customer_name||"Cliente"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Mesa"}),e.jsx("p",{className:"font-medium",children:s.table?`Mesa ${s.table.number}`:"Balco"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pessoas"}),e.jsx("p",{className:"font-medium",children:s.people_count||1})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aberta em"}),e.jsx("p",{className:"font-medium",children:new Date(s.opened_at||s.created_at||"").toLocaleString("pt-BR")})]})]}),s.items&&s.items.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Itens (",s.items.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.items.map((y,v)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{children:[y.quantity,"x ",y.product_name]}),e.jsx("span",{className:"font-medium",children:g(y.total_price)})]},y.id))})]}),e.jsx("div",{className:"border-t pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total"}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:g(s.total||0)})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Mtodo de Pagamento"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:xR.map(y=>e.jsx("button",{onClick:()=>u(y.value),disabled:l,className:`p-4 rounded-lg border-2 transition-all ${c===y.value?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:y.icon}),e.jsx("span",{className:"text-sm font-medium text-center",children:y.label})]})},y.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes (opcional)"}),e.jsx("textarea",{value:m,onChange:y=>h(y.target.value),disabled:l,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Adicione observaes sobre o pagamento..."})]})]}),e.jsx("div",{className:"border-t bg-gray-50 p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,disabled:l,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:f,disabled:l,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Yt,{className:"w-4 h-4"}),"Confirmar Pagamento"]})})]})})]})})},bR=()=>{const{user:t}=Kt(),s=Sr(),{currentSession:r,pendingComandas:i,todaysSummary:l,todaysTransactions:c,loading:u,error:m,openCashSession:h,closeCashSession:f,processComandaPayment:g,processCashWithdrawal:y,processTreasuryTransfer:v}=L0(),{pendingOrders:N,processPayment:_}=Ld(),[j,C]=b.useState(!1),[M,S]=b.useState(!1),[A,E]=b.useState(!1),[w,O]=b.useState(!1),[L,V]=b.useState(!1),[H,B]=b.useState(!1),[K,G]=b.useState(!1),[ae,oe]=b.useState(!1),[$,T]=b.useState(null),[R,z]=b.useState(null),[X,D]=b.useState(!1),[q,U]=b.useState("dinheiro"),[Z,ie]=b.useState(!1),[he,fe]=b.useState(null),[Ce,we]=b.useState(null),[ue,Te]=b.useState(null),[ye,Ee]=b.useState(!0),[Oe,Qe]=b.useState(!1),[St,Me]=b.useState(0),Ue=async ge=>{if(!r){alert(" necessrio ter uma sesso de caixa aberta para processar pagamentos.");return}T(ge),E(!0)},Ct=ge=>{if(!r){alert(" necessrio ter uma sesso de caixa aberta para processar pagamentos.");return}z(ge),D(!0)},us=async(ge,Ze)=>{if(!(!R||!r))try{ie(!0),await g({comanda_id:R.id,payment_method:ge,amount:R.total||0,notes:Ze}),console.log(" Pagamento da comanda processado com sucesso"),D(!1),z(null)}catch(J){console.error(" Erro ao processar pagamento da comanda:",J),alert("Erro ao processar pagamento da comanda")}finally{ie(!1)}},F=async()=>{if(!(!$||!r)){ie(!0);try{await _({order_id:$.id,payment_method:q,cash_session_id:r.id,amount_paid:$.final_amount}),fe({order:$,paymentMethod:q,amountPaid:$.final_amount,cashierName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Operador de Caixa",timestamp:new Date}),E(!1),O(!0),T(null)}catch(ge){console.error("Erro ao processar pagamento:",ge),alert("Erro ao processar pagamento. Tente novamente.")}finally{ie(!1)}}},te=()=>{O(!1),fe(null)},le=async ge=>{try{const Ze=await y(ge);Te({withdrawalId:Ze,amount:ge.amount,reason:ge.reason,authorizedBy:ge.authorized_by,recipient:ge.recipient,purpose:ge.purpose,cashierName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Operador de Caixa",timestamp:new Date,sessionId:(r==null?void 0:r.id)||""}),V(!1),oe(!0)}catch(Ze){console.error("Erro ao processar sada de dinheiro:",Ze),alert("Erro ao processar sada de dinheiro. Tente novamente.")}},be=async ge=>{try{const Ze=await v(ge);we({transferId:Ze,amount:ge.amount,transferDate:ge.transfer_date,authorizedBy:ge.authorized_by,treasuryReceiptNumber:ge.treasury_receipt_number,notes:ge.notes,cashierName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||"Operador de Caixa",timestamp:new Date,sessionId:(r==null?void 0:r.id)||""}),B(!1),G(!0)}catch(Ze){console.error("Erro ao processar transferncia:",Ze),alert("Erro ao processar transferncia. Tente novamente.")}},xe=()=>{V(!0)},pe=()=>{console.log("Exportando relatrio...")},_e=()=>{G(!1),we(null)},Le=()=>{oe(!1),Te(null)};b.useEffect(()=>{const ge=N.length;if(ge>St&&St>0){Qe(!0),Ee(!0);const Ze=setTimeout(()=>{Qe(!1)},1e4);return()=>clearTimeout(Ze)}Me(ge)},[N.length,St]);const qe=()=>{Ee(!1),Qe(!1);const ge=document.getElementById("pending-orders-section");ge&&ge.scrollIntoView({behavior:"smooth"})},st=()=>{Ee(!1),Qe(!1)};return u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):m?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(As,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Erro no Sistema"}),e.jsx("p",{className:"text-red-600",children:m})]})]})})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gesto de Caixa"}),e.jsx("p",{className:"text-gray-600 mt-1",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>s("/cash/movement"),className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors",children:[e.jsx(T1,{className:"h-5 w-5"}),e.jsx("span",{children:"Movimento"})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>B(!0),className:"bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 flex items-center space-x-2 transition-colors",children:[e.jsx(fd,{className:"h-5 w-5"}),e.jsx("span",{children:"Transferncia"})]}),e.jsxs("button",{onClick:()=>S(!0),className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 flex items-center space-x-2 transition-colors",children:[e.jsx(Yt,{className:"h-5 w-5"}),e.jsx("span",{children:"Fechar Caixa"})]})]}):e.jsxs("button",{onClick:()=>C(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 flex items-center space-x-2 transition-colors",children:[e.jsx(ks,{className:"h-5 w-5"}),e.jsx("span",{children:"Abrir Caixa"})]})]})]}),r?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(Yt,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Caixa Aberto"}),e.jsxs("p",{className:"text-green-600",children:["Aberto s ",new Date(r.opened_at).toLocaleTimeString("pt-BR")]}),e.jsxs("p",{className:"text-sm text-green-600",children:["Valor inicial: ",Ae(r.opening_amount)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-800",children:Ae(r.expected_amount)}),e.jsx("p",{className:"text-sm text-green-600",children:"Valor esperado"})]})]})}):e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx(As,{className:"h-8 w-8 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Caixa Fechado"}),e.jsx("p",{className:"text-yellow-600",children:" necessrio abrir o caixa para processar pagamentos"})]})]})}),N.length>0&&ye&&e.jsx("div",{className:`mb-8 transition-all duration-300 ${Oe?"animate-pulse":""}`,children:e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border-2 border-orange-300 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-3 rounded-full ${Oe?"bg-red-200 animate-bounce":"bg-orange-100"}`,children:e.jsxs("div",{className:"relative",children:[e.jsx(xf,{className:`h-8 w-8 ${Oe?"text-red-600":"text-orange-600"}`}),N.length>0&&e.jsx("div",{className:`absolute -top-2 -right-2 h-6 w-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${Oe?"bg-red-500 animate-ping":"bg-orange-500"}`,children:N.length})]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:`text-xl font-bold flex items-center space-x-2 ${Oe?"text-red-800":"text-orange-800"}`,children:[e.jsx("span",{children:"Pedidos Aguardando Pagamento"}),Oe&&e.jsx(y0,{className:"h-5 w-5 text-red-600 animate-bounce"})]}),e.jsxs("p",{className:`${Oe?"text-red-600":"text-orange-600"} font-medium`,children:[N.length," ",N.length===1?"pedido pendente":"pedidos pendentes"]}),e.jsx("div",{className:"mt-2 text-sm text-gray-700",children:e.jsxs("p",{children:["Valor total: ",e.jsx("span",{className:"font-semibold text-green-600",children:Ae(N.reduce((ge,Ze)=>ge+Ze.final_amount,0))})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:qe,className:`px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-all duration-200 ${Oe?"bg-red-600 hover:bg-red-700 text-white shadow-lg transform hover:scale-105":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:[e.jsx(Is,{className:"h-5 w-5"}),e.jsx("span",{children:"Ver Pedidos"})]}),e.jsx("button",{onClick:st,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors",title:"Dispensar alerta","aria-label":"Dispensar alerta",children:e.jsx(it,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-orange-200",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-3",children:"Pedidos mais recentes:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:N.slice(0,3).map(ge=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-orange-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-900",children:["#",ge.order_number.toString().padStart(4,"0")]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(ge.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),ge.customer_name&&e.jsx("p",{className:"text-sm text-gray-700 mb-1 truncate",children:ge.customer_name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[(ge.items||[]).length," ",(ge.items||[]).length===1?"item":"itens"]}),e.jsx("span",{className:"font-bold text-green-600",children:Ae(ge.final_amount)})]})]},ge.id))}),N.length>3&&e.jsxs("p",{className:"text-sm text-orange-600 mt-3 text-center",children:["+",N.length-3," pedidos adicionais aguardando pagamento"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(Pi,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vendas Hoje"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ae(l.total_sales)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(KA,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transaes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total_transactions})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(E1,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ticket Mdio"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ae(l.avg_ticket)})]})]})}),e.jsx("div",{className:`bg-white rounded-lg shadow p-6 relative ${i.length>0?"ring-2 ring-orange-300":""}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-full ${i.length>0,"bg-orange-100"}`,children:e.jsx(Vt,{className:`h-6 w-6 ${i.length>0,"text-orange-600"}`})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Comandas Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),i.length>0&&e.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold animate-pulse",children:"!"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vendas por Mtodo de Pagamento"}),e.jsx("div",{className:"space-y-4",children:l.by_payment_method.map(ge=>{const Ze=ge.payment_method==="dinheiro"?eA:ge.payment_method==="pix"?mn:pn;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ze,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:zd[ge.payment_method]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Ae(ge.amount)}),e.jsxs("p",{className:"text-xs text-gray-600",children:[ge.percentage.toFixed(1),"%"]})]})]},ge.payment_method)})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance por Funcionrio"}),e.jsx("div",{className:"space-y-4",children:l.by_employee.map(ge=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:e.jsx(ea,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:ge.employee_name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[ge.transaction_count," transaes"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Ae(ge.total_sales)}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Mdia: ",Ae(ge.avg_ticket)]})]})]},ge.employee_id))})]})]}),e.jsx(fR,{transactions:c,onAddWithdrawal:xe,onExportReport:pe,isCashSessionOpen:(r==null?void 0:r.status)==="open"}),e.jsx("div",{className:"mb-8",children:e.jsx(gR,{comandas:i,onPayComanda:Ct,disabled:!r||Z})}),e.jsxs("div",{id:"pending-orders-section",className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(hl,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pedidos de Balco Aguardando Pagamento"}),e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:N.length})]}),N.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(hl,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Todos os pedidos foram pagos!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"No h pedidos de balco aguardando pagamento."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(ge=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["#",ge.order_number.toString().padStart(4,"0")]}),e.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded-full",children:"Aguardando Pagamento"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(ge.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),ge.customer_name&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:ge.customer_name}),ge.customer_phone&&e.jsx("p",{className:"text-xs text-gray-600",children:ge.customer_phone})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1",children:[(ge.items||[]).length," ",(ge.items||[]).length===1?"item":"itens"]}),e.jsxs("div",{className:"space-y-1",children:[(ge.items||[]).slice(0,3).map((Ze,J)=>{var De;return e.jsxs("p",{className:"text-xs text-gray-600",children:[Ze.quantity,"x ",((De=Ze.menu_item)==null?void 0:De.name)||"Item"]},J)}),(ge.items||[]).length>3&&e.jsxs("p",{className:"text-xs text-gray-500 italic",children:["+",(ge.items||[]).length-3," mais..."]})]})]}),ge.customer_notes&&e.jsx("div",{className:"mb-3 p-2 bg-yellow-50 rounded border",children:e.jsx("p",{className:"text-xs text-yellow-800",children:ge.customer_notes})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-green-600",children:Ae(ge.final_amount)}),e.jsx("button",{onClick:()=>Ue(ge),disabled:!r,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Receber Pagamento"})]})]},ge.id))})]}),e.jsx(oR,{isOpen:j,onClose:()=>C(!1),onOpenCash:h}),r&&e.jsx(lR,{isOpen:M,onClose:()=>S(!1),session:r,onCloseCash:f}),A&&$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-h-screen overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Receber Pagamento - #",$.order_number.toString().padStart(4,"0")]}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Fechar modal",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Resumo do Pedido"}),$.customer_name&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Cliente: ",$.customer_name]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[($.items||[]).map((ge,Ze)=>{var J;return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[ge.quantity,"x ",(J=ge.menu_item)==null?void 0:J.name]}),e.jsx("span",{children:Ae(ge.unit_price*ge.quantity)})]},Ze)}),($.discount_amount||0)>0&&e.jsxs("div",{className:"flex justify-between text-green-600 border-t pt-1",children:[e.jsx("span",{children:"Desconto:"}),e.jsxs("span",{children:["-",Ae($.discount_amount||0)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-medium",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:Ae($.final_amount)})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pagamento"}),e.jsxs("select",{value:q,onChange:ge=>U(ge.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Mtodo de pagamento",children:[e.jsx("option",{value:"dinheiro",children:"Dinheiro"}),e.jsx("option",{value:"cartao_debito",children:"Carto de Dbito"}),e.jsx("option",{value:"cartao_credito",children:"Carto de Crdito"}),e.jsx("option",{value:"pix",children:"PIX"}),e.jsx("option",{value:"transferencia",children:"Transferncia"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>E(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:F,disabled:Z||!r,className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:Z?"Processando...":"Processar e Imprimir"})]})]})}),e.jsx(yR,{isOpen:X,comanda:R,onClose:()=>{D(!1),z(null)},onConfirm:us,loading:Z}),w&&he&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 sticky top-0 bg-white pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pagamento Processado!"})]}),e.jsx("button",{onClick:te,className:"text-gray-400 hover:text-gray-600",title:"Fechar modal de comprovante","aria-label":"Fechar modal de comprovante",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"mb-6 text-center",children:[e.jsxs("p",{className:"text-gray-600 mb-2",children:["Pagamento de #",he.order.order_number.toString().padStart(4,"0")," processado com sucesso!"]}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Comprovante de pagamento gerado"})]}),e.jsx("div",{className:"mb-6",children:e.jsx(pR,{receiptData:he,onPrint:te})}),e.jsxs("div",{className:"flex space-x-3 sticky bottom-0 bg-white pt-4 border-t",children:[e.jsx("button",{onClick:te,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Fechar"}),e.jsxs("button",{onClick:()=>{console.log("Reimprimindo comprovante de pagamento...")},className:"flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"Reimprimir"})]})]})]})}),e.jsx(cR,{isOpen:L,onClose:()=>V(!1),onProcessWithdrawal:le,currentCashBalance:(r==null?void 0:r.expected_amount)||0,loading:Z}),e.jsx(dR,{isOpen:H,onClose:()=>B(!1),onProcessTransfer:be,currentCashBalance:(r==null?void 0:r.expected_amount)||0,loading:Z}),K&&Ce&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transferncia Processada!"})]}),e.jsx("button",{onClick:_e,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Fechar modal de comprovante","aria-label":"Fechar modal de comprovante",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-4 text-center",children:"Transferncia para tesouraria processada com sucesso!"}),e.jsx("p",{className:"text-sm text-green-600 font-medium text-center mb-4",children:"Comprovante de transferncia gerado"}),e.jsx(uR,{receiptData:Ce,onPrint:_e})]}),e.jsx("div",{className:"flex space-x-3 p-6 pt-0 border-t border-gray-200",children:e.jsx("button",{onClick:_e,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Fechar"})})]})}),ae&&ue&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sada de Dinheiro Processada!"})]}),e.jsx("button",{onClick:Le,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Fechar modal de comprovante","aria-label":"Fechar modal de comprovante",children:e.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-4 text-center",children:"Sada de dinheiro processada com sucesso!"}),e.jsx("p",{className:"text-sm text-orange-600 font-medium text-center mb-4",children:"Comprovante gerado para assinatura"}),e.jsx(hR,{receiptData:ue,onPrint:Le})]}),e.jsx("div",{className:"flex space-x-3 p-6 pt-0 border-t border-gray-200",children:e.jsx("button",{onClick:Le,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Fechar"})})]})}),N.length>0&&!ye&&e.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:e.jsxs("button",{onClick:qe,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-full p-4 shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-200 flex items-center space-x-2 animate-bounce",title:`${N.length} pedidos aguardando pagamento`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(xf,{className:"h-6 w-6"}),e.jsx("div",{className:"absolute -top-2 -right-2 h-5 w-5 bg-white rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 text-xs font-bold",children:N.length})})]}),e.jsx("span",{className:"hidden sm:block font-medium",children:"Pedidos Pendentes"})]})})]})},vR=()=>e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Relatrios de Caixa"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Anlise detalhada das operaes financeiras"})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(b0,{className:"h-5 w-5"}),e.jsx("span",{children:"Exportar"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perodo"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"Hoje"}),e.jsx("option",{children:"Esta Semana"}),e.jsx("option",{children:"Este Ms"}),e.jsx("option",{children:"Personalizado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionrio"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"Todos"}),e.jsx("option",{children:"Joo Silva"}),e.jsx("option",{children:"Maria Santos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mtodo de Pagamento"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"Todos"}),e.jsx("option",{children:"Dinheiro"}),e.jsx("option",{children:"Carto"}),e.jsx("option",{children:"PIX"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Aplicar Filtros"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(Pi,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vendas Totais"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"R$ 12.450,00"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(E1,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transaes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"247"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(Tr,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Sesses"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"8"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:e.jsx(Pi,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ticket Mdio"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"R$ 50,40"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vendas por Dia"}),e.jsx("div",{className:"h-64 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Grfico de vendas dirias (a implementar)"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mtodos de Pagamento"}),e.jsx("div",{className:"h-64 bg-gray-100 rounded flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Grfico de pizza (a implementar)"})})]})]})]}),jR=()=>e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Histrico de Transaes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Todas as transaes registradas no sistema"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Buscar por cliente, valor, mtodo...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(k1,{className:"h-4 w-4"}),e.jsx("span",{children:"Filtros"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(Tr,{className:"h-4 w-4"}),e.jsx("span",{children:"Perodo"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(Kk,{className:"h-4 w-4"}),e.jsx("span",{children:"Ordenar"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Hora"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mtodo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Funcionrio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"08/09/2025 14:30"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Venda"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Maria Silva"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"PIX"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"R$ 45,80"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Joo Santos"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Concluda"})})]}),e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx("p",{children:"Carregando transaes..."}),e.jsx("p",{className:"text-sm mt-1",children:"A integrao com dados reais ser implementada"})]})})]})]})}),e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Anterior"}),e.jsx("button",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Prximo"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:"1"})," at ",e.jsx("span",{className:"font-medium",children:"10"})," de"," ",e.jsx("span",{className:"font-medium",children:"247"})," resultados"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Anterior"}),e.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:"1"}),e.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-blue-600 text-sm font-medium text-white",children:"2"}),e.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:"3"}),e.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Prximo"})]})})]})]})]})]}),wR=()=>{const{user:t}=Kt(),{currentSession:s,loading:r,error:i}=L0();return b.useEffect(()=>{console.log("CashTest: Usurio:",t),console.log("CashTest: Sesso atual:",s),console.log("CashTest: Loading:",r),console.log("CashTest: Error:",i)},[t,s,r,i]),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Teste de Cash Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-100 rounded",children:[e.jsx("h3",{className:"font-semibold",children:"Usurio:"}),e.jsx("pre",{children:JSON.stringify(t,null,2)})]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded",children:[e.jsx("h3",{className:"font-semibold",children:"Sesso Atual:"}),e.jsx("pre",{children:JSON.stringify(s,null,2)})]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded",children:[e.jsx("h3",{className:"font-semibold",children:"Status:"}),e.jsxs("p",{children:["Loading: ",r.toString()]}),e.jsxs("p",{children:["Error: ",i||"Nenhum erro"]})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Recarregar Pgina"})]})]})},NR=()=>{const{getDailyCashMovement:t}=L0(),[s,r]=b.useState(new Date().toISOString().split("T")[0]),[i,l]=b.useState(null),[c,u]=b.useState(!1),[m,h]=b.useState(null),[f,g]=b.useState(!0),[y,v]=b.useState(!0),[N,_]=b.useState(!0),j=async E=>{u(!0),h(null);try{const w=await t(E);l(w)}catch(w){const O=w.message||"Erro ao carregar dados do movimento";h(O),console.error("Erro ao carregar movimento dirio:",w),l({sessions:[],transactions:[],summary:{opening_total:0,closing_total:0,sales_total:0,cash_sales:0,card_sales:0,pix_sales:0,adjustments:0,discrepancy_total:0,transaction_count:0}})}finally{u(!1)}};b.useEffect(()=>{j(s)},[s]);const C=E=>new Date(E).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),M=E=>{const w={open:{bg:"bg-green-100",text:"text-green-800",label:"Aberto"},closed:{bg:"bg-gray-100",text:"text-gray-800",label:"Fechado"},reconciled:{bg:"bg-blue-100",text:"text-blue-800",label:"Reconciliado"}},O=w[E]||w.closed;return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O.bg} ${O.text}`,children:O.label})},S=E=>({sale:"text-green-600",refund:"text-red-600",adjustment:"text-blue-600",tip:"text-purple-600"})[E]||"text-gray-600",A=({isVisible:E,onClick:w,title:O})=>e.jsxs("button",{onClick:w,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800",title:E?`Ocultar ${O}`:`Mostrar ${O}`,children:[E?e.jsx(_r,{className:"h-4 w-4"}):e.jsx(Is,{className:"h-4 w-4"}),e.jsx("span",{children:E?"Ocultar":"Mostrar"})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(Tr,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Movimento do Caixa"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Consulte o movimento detalhado por data"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"date",value:s,onChange:E=>r(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c,"aria-label":"Selecione a data"}),e.jsx("button",{onClick:()=>j(s),disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:c?"Carregando...":"Consultar"})]})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oi,{className:"h-5 w-5 text-red-600"}),e.jsx("p",{className:"text-red-800",children:m})]})}),c&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"inline-flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"Carregando movimento..."})]})}),i&&!c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Resumo do Dia"}),e.jsx(A,{isVisible:N,onClick:()=>_(!N),title:"resumo"})]}),N&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg inline-flex",children:e.jsx(Yt,{className:"h-6 w-6 text-green-600"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Vendas Totais"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ae(i.summary.sales_total)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg inline-flex",children:e.jsx(ea,{className:"h-6 w-6 text-blue-600"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Sesses"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.sessions.length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg inline-flex",children:e.jsx(Pi,{className:"h-6 w-6 text-purple-600"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Transaes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary.transaction_count})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg inline-flex",children:e.jsx(Oi,{className:"h-6 w-6 text-yellow-600"})}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600",children:"Discrepncias"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ae(Math.abs(i.summary.discrepancy_total))})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Por Mtodo de Pagamento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Dinheiro"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ae(i.summary.cash_sales)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cartes"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ae(i.summary.card_sales)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"PIX"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ae(i.summary.pix_sales)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ajustes"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:Ae(i.summary.adjustments)})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Sesses do Dia (",i.sessions.length,")"]}),e.jsx(A,{isVisible:f,onClick:()=>g(!f),title:"sesses"})]}),f&&e.jsx("div",{className:"p-6",children:i.sessions.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhuma sesso encontrada para esta data"}):e.jsx("div",{className:"space-y-4",children:i.sessions.map(E=>{var w;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(ea,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:((w=E.employee)==null?void 0:w.name)||"Funcionrio"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Sesso #",E.id.slice(-8)]})]})]}),M(E.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Abertura"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:Ae(E.opening_amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:C(E.opened_at)})]}),E.closed_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Fechamento"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:Ae(E.closing_amount||0)}),e.jsx("p",{className:"text-xs text-gray-500",children:C(E.closed_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Esperado"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:Ae(E.expected_amount)})]}),E.cash_discrepancy!==null&&E.cash_discrepancy!==void 0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Discrepncia"}),e.jsx("p",{className:`text-lg font-bold ${E.cash_discrepancy>=0?"text-green-600":"text-red-600"}`,children:Ae(E.cash_discrepancy)})]})]}),(E.opening_notes||E.closing_notes)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[E.opening_notes&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Obs. Abertura:"})," ",E.opening_notes]}),E.closing_notes&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Obs. Fechamento:"})," ",E.closing_notes]})]})]},E.id)})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Transaes do Dia (",i.transactions.length,")"]}),e.jsx(A,{isVisible:y,onClick:()=>v(!y),title:"transaes"})]}),y&&e.jsx("div",{className:"p-6",children:i.transactions.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhuma transao encontrada para esta data"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Horrio"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Tipo"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Mtodo"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-600",children:"Valor"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Cliente/Obs"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Funcionrio"})]})}),e.jsx("tbody",{children:i.transactions.map(E=>{var w;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:C(E.processed_at)}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`text-sm font-medium ${S(E.transaction_type)}`,children:tN[E.transaction_type]||E.transaction_type})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:zd[E.payment_method]||E.payment_method}),e.jsx("td",{className:`py-3 px-4 text-right text-sm font-medium ${E.amount>=0?"text-green-600":"text-red-600"}`,children:Ae(E.amount)}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:E.comanda?e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-blue-600",children:["Comanda #",Pd(E.comanda.id)]}),E.comanda.customer_name&&e.jsx("div",{className:"text-xs text-gray-500",children:E.comanda.customer_name}),E.comanda.table_number&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Mesa ",E.comanda.table_number]})]}):E.notes&&(E.notes.includes("Pedido Balco")||E.notes.includes("Pedido de balco"))?e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-green-600",children:["Pedido Balco ",Q1(E.notes)]}),E.customer_name&&e.jsx("div",{className:"text-xs text-gray-500",children:E.customer_name}),e.jsx("div",{className:"text-xs text-gray-500",children:"Balco"})]}):E.customer_name||E.notes||"-"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:((w=E.processed_by_employee)==null?void 0:w.name)||"Funcionrio"})]},E.id)})})]})})})]})]})]})},_R=()=>e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs(pj,{children:[e.jsx(gt,{path:"/",element:e.jsx(bR,{})}),e.jsx(gt,{path:"/reports",element:e.jsx(vR,{})}),e.jsx(gt,{path:"/transactions",element:e.jsx(jR,{})}),e.jsx(gt,{path:"/movement",element:e.jsx(NR,{})}),e.jsx(gt,{path:"/test",element:e.jsx(wR,{})})]})}),SR={id:"CMD-TEST-001",mesa_id:"MESA-05",cliente_id:"CLI-123",nome_cliente:"Joo Silva",funcionario_id:"FUNC-001",status:"aberta",total:87.5,quantidade_pessoas:4,aberta_em:new Date().toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),data_abertura:new Date().toISOString(),mesa:{id:"MESA-05",numero:5,capacidade:6},itens:[{id:"ITEM-001",comanda_id:"CMD-TEST-001",produto_id:"PROD-001",nome_produto:"Bolinho de Bacalhau",quantidade:2,preco_unitario:16.9,preco_total:33.8,status:"entregue",adicionado_em:new Date().toISOString(),entregue_em:new Date().toISOString(),created_at:new Date().toISOString(),observacoes:"Sem cebola"},{id:"ITEM-002",comanda_id:"CMD-TEST-001",produto_id:"PROD-002",nome_produto:"Cerveja Heineken 350ml",quantidade:3,preco_unitario:10.3,preco_total:30.9,status:"entregue",adicionado_em:new Date().toISOString(),entregue_em:new Date().toISOString(),created_at:new Date().toISOString()}]},CR=()=>{const{isOpen:t,selectedComanda:s,loading:r,error:i,openModal:l,closeModal:c,handleConfirm:u,clearError:m}=nN({onSuccess:h=>{console.log(" Teste - Modal funcionou:",h),alert("Modal funcionou! Verifique o console.")},onError:h=>{console.error(" Teste - Erro no modal:",h),alert(`Erro no modal: ${h.message}`)}});return e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Teste do Novo Modal"}),e.jsx("button",{onClick:()=>l(SR),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Abrir Modal de Teste"}),i&&e.jsx("div",{className:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:["Erro: ",i]}),e.jsx("button",{onClick:m,className:"text-red-600 hover:text-red-800",children:""})]})}),s&&e.jsx(rN,{isOpen:t,comanda:s,onClose:c,onConfirm:u,loading:r})]})},aj=({children:t,modulo:s,acao:r="visualizar",requireAdmin:i=!1})=>{const{isAuthenticated:l,isLoading:c,user:u,verificarPermissao:m}=Gj(),h=Va();return c?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):!l||!u?e.jsx(Ti,{to:"/login",state:{from:h},replace:!0}):u.senha_provisoria?e.jsx(Ti,{to:"/alterar-senha",replace:!0}):u.status!=="ativo"?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Conta Inativa"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Sua conta est ",u.status==="inativo"?"inativa":"bloqueada",". Entre em contato com o administrador da empresa."]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>window.location.href="/logout",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Sair"})})]})})}):i&&u.tipo_usuario!=="administrador"?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100",children:e.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 0h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Acesso Restrito"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Esta pgina requer privilgios de administrador."}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Voltar"})})]})})}):s&&!m(s,r)?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Acesso Negado"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Voc no tem permisso para ",r," neste mdulo (",s,")."]}),e.jsxs("div",{className:"mt-6 space-x-3",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Voltar"}),e.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ir para Dashboard"})]})]})})}):e.jsx(e.Fragment,{children:t})},rj={seguranca:{tempo_sessao:480,tentativas_login:5,bloqueio_temporario:30,exigir_2fa:!1,senha_minima_caracteres:8,senha_exigir_maiuscula:!0,senha_exigir_numero:!0,senha_exigir_simbolo:!1,logout_automatico_inatividade:!0},sistema:{tema:"auto",idioma:"pt-BR",timezone:"America/Sao_Paulo",formato_data:"DD/MM/YYYY",formato_moeda:"R$ 0,00",moeda_padrao:"BRL",primeira_pagina:"/dashboard",itens_por_pagina:20},notificacoes:{email_novos_usuarios:!0,email_tentativas_login:!0,email_alteracoes_config:!0,email_backup_diario:!1,email_relatorios_semanais:!1,notificacao_browser:!0,som_notificacoes:!0},integracao:{webhook_url:"",api_keys:{},backup_automatico:!0,backup_frequencia:"diario",backup_horario:"02:00",manutencao_automatica:!0}},ER=()=>{const{user:t,empresa:s}=Gj(),[r,i]=b.useState("empresa"),[l,c]=b.useState(rj),[u,m]=b.useState(!0),[h,f]=b.useState(!1),[g,y]=b.useState({}),[v,N]=b.useState(""),[_,j]=b.useState(!1),[C,M]=b.useState(""),[S,A]=b.useState({}),[E,w]=b.useState({nome:(s==null?void 0:s.nome)||"",cnpj:"",email:(s==null?void 0:s.email)||"",telefone:(s==null?void 0:s.telefone)||"",endereco:"",cidade:"",estado:"",cep:"",site:"",descricao:""}),[O,L]=b.useState(!1),V=async()=>{if(s!=null&&s.id)try{const{data:T,error:R}=await W.from("empresas").select("*").eq("id",s.id).single();if(R){console.error("Erro ao carregar dados da empresa:",R);return}T&&w({nome:T.nome||"",cnpj:T.cnpj||"",email:T.email||"",telefone:T.telefone||"",endereco:T.endereco||"",cidade:T.cidade||"",estado:T.estado||"",cep:T.cep||"",site:T.site||"",descricao:T.descricao||""})}catch(T){console.error("Erro ao carregar dados da empresa:",T)}},H=async()=>{if(s!=null&&s.id)try{L(!0),setError("");const{error:T}=await W.from("empresas").update({nome:E.nome,cnpj:E.cnpj,email:E.email,telefone:E.telefone,endereco:E.endereco,cidade:E.cidade,estado:E.estado,cep:E.cep,site:E.site,descricao:E.descricao,updated_at:new Date().toISOString()}).eq("id",s.id);if(T)throw new Error(T.message);N("Dados da empresa salvos com sucesso!"),setTimeout(()=>N(""),3e3),await W.rpc("registrar_log_auditoria",{p_empresa_id:s.id,p_usuario_id:t==null?void 0:t.user_id,p_acao:"UPDATE_COMPANY_DATA",p_recurso:"empresas",p_detalhes:{campos_alterados:Object.keys(E)}})}catch(T){console.error("Erro ao salvar dados da empresa:",T),setError(T instanceof Error?T.message:"Erro ao salvar dados da empresa")}finally{L(!1)}};b.useEffect(()=>{s!=null&&s.id&&(B(),V())},[s==null?void 0:s.id]);const B=async()=>{try{m(!0);const{data:T,error:R}=await W.from("configuracoes_empresa").select("*").eq("empresa_id",s==null?void 0:s.id);if(R){console.error("Erro ao carregar configuraes:",R);return}const z={...rj};T==null||T.forEach(X=>{const D=X.categoria;D in z&&(z[D]={...z[D],...X.configuracoes})}),c(z)}catch(T){console.error("Erro ao carregar configuraes:",T)}finally{m(!1)}},K=async(T,R)=>{try{f(!0),y({});const{error:z}=await W.from("configuracoes_empresa").upsert({empresa_id:s==null?void 0:s.id,categoria:T,configuracoes:R},{onConflict:"empresa_id,categoria"});if(z)throw new Error(z.message);c(X=>({...X,[T]:R})),N("Configuraes salvas com sucesso!"),setTimeout(()=>N(""),3e3),await W.rpc("registrar_log_auditoria",{p_empresa_id:s==null?void 0:s.id,p_usuario_id:t==null?void 0:t.user_id,p_acao:"UPDATE_CONFIG",p_recurso:`configuracoes_${T}`,p_detalhes:{categoria:T,alteracoes:Object.keys(R)}})}catch(z){console.error("Erro ao salvar configuraes:",z),y({submit:z instanceof Error?z.message:"Erro ao salvar configuraes"})}finally{f(!1)}},G=async()=>{if(!C)return y({password:"Senha  obrigatria para confirmar alteraes"}),!1;try{const{error:T}=await W.auth.signInWithPassword({email:(t==null?void 0:t.email)||"",password:C});return T?(y({password:"Senha incorreta"}),!1):!0}catch{return y({password:"Erro ao verificar senha"}),!1}},ae=async()=>{if(await G()){for(const[R,z]of Object.entries(S))await K(R,z);A({}),j(!1),M("")}},oe=(T,R,z)=>{const X={...l[T],[R]:z};c(D=>({...D,[T]:X})),T===Ke.SEGURANCA?(A(D=>({...D,[T]:X})),j(!0)):K(T,X)},$=[{id:"empresa",name:"Empresa",icon:"",description:"Dados e informaes da empresa"},{id:Ke.SISTEMA,name:"Sistema",icon:"",description:"Configuraes gerais do sistema"},{id:Ke.SEGURANCA,name:"Segurana",icon:"",description:"Configuraes de segurana e autenticao"},{id:Ke.NOTIFICACOES,name:"Notificaes",icon:"",description:"Configuraes de notificaes e alertas"},{id:Ke.INTEGRACAO,name:"Integrao",icon:"",description:"Configuraes de integrao e backup"}];return u?e.jsx(aj,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando configuraes..."})]})})}):e.jsxs(aj,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuraes da Empresa"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Configure as preferncias e comportamentos do sistema para ",s==null?void 0:s.nome]})]}),v&&e.jsx("div",{className:"mb-6 rounded-md bg-green-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:v})})]})}),g.submit&&e.jsx("div",{className:"mb-6 rounded-md bg-red-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:g.submit})})]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6","aria-label":"Tabs",children:$.map(T=>e.jsxs("button",{onClick:()=>i(T.id),className:`group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm ${r===T.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("span",{className:"text-lg mr-2",children:T.icon}),T.name]},T.id))})}),e.jsxs("div",{className:"p-6",children:[r==="empresa"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dados da Empresa"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure as informaes bsicas da sua empresa."})]}),e.jsx("button",{onClick:H,disabled:O,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:O?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Salvando..."]}):"Salvar Dados"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Empresa *"}),e.jsx("input",{type:"text",value:E.nome,onChange:T=>w(R=>({...R,nome:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Digite o nome da empresa",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CNPJ"}),e.jsx("input",{type:"text",value:E.cnpj,onChange:T=>w(R=>({...R,cnpj:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"00.000.000/0000-00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:E.email,onChange:T=>w(R=>({...R,email:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"contato@empresa.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",value:E.telefone,onChange:T=>w(R=>({...R,telefone:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 99999-9999",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site"}),e.jsx("input",{type:"url",value:E.site,onChange:T=>w(R=>({...R,site:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://www.empresa.com"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereo"}),e.jsx("input",{type:"text",value:E.endereco,onChange:T=>w(R=>({...R,endereco:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Rua, nmero, bairro"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cidade"}),e.jsx("input",{type:"text",value:E.cidade,onChange:T=>w(R=>({...R,cidade:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome da cidade"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{value:E.estado,onChange:T=>w(R=>({...R,estado:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Selecione o estado"}),e.jsx("option",{value:"AC",children:"Acre"}),e.jsx("option",{value:"AL",children:"Alagoas"}),e.jsx("option",{value:"AP",children:"Amap"}),e.jsx("option",{value:"AM",children:"Amazonas"}),e.jsx("option",{value:"BA",children:"Bahia"}),e.jsx("option",{value:"CE",children:"Cear"}),e.jsx("option",{value:"DF",children:"Distrito Federal"}),e.jsx("option",{value:"ES",children:"Esprito Santo"}),e.jsx("option",{value:"GO",children:"Gois"}),e.jsx("option",{value:"MA",children:"Maranho"}),e.jsx("option",{value:"MT",children:"Mato Grosso"}),e.jsx("option",{value:"MS",children:"Mato Grosso do Sul"}),e.jsx("option",{value:"MG",children:"Minas Gerais"}),e.jsx("option",{value:"PA",children:"Par"}),e.jsx("option",{value:"PB",children:"Paraba"}),e.jsx("option",{value:"PR",children:"Paran"}),e.jsx("option",{value:"PE",children:"Pernambuco"}),e.jsx("option",{value:"PI",children:"Piau"}),e.jsx("option",{value:"RJ",children:"Rio de Janeiro"}),e.jsx("option",{value:"RN",children:"Rio Grande do Norte"}),e.jsx("option",{value:"RS",children:"Rio Grande do Sul"}),e.jsx("option",{value:"RO",children:"Rondnia"}),e.jsx("option",{value:"RR",children:"Roraima"}),e.jsx("option",{value:"SC",children:"Santa Catarina"}),e.jsx("option",{value:"SP",children:"So Paulo"}),e.jsx("option",{value:"SE",children:"Sergipe"}),e.jsx("option",{value:"TO",children:"Tocantins"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CEP"}),e.jsx("input",{type:"text",value:E.cep,onChange:T=>w(R=>({...R,cep:T.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"00000-000"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio da Empresa"}),e.jsx("textarea",{value:E.descricao,onChange:T=>w(R=>({...R,descricao:T.target.value})),rows:4,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descreva brevemente a empresa, seus servios e atividades..."})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-md p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Informaes Importantes:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" Os campos marcados com * so obrigatrios"}),e.jsx("li",{children:" As alteraes sero registradas nos logs de auditoria"}),e.jsx("li",{children:" O nome da empresa ser exibido em todo o sistema"}),e.jsx("li",{children:" O email ser usado para comunicaes oficiais"})]})]})]}),r===Ke.SISTEMA&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuraes do Sistema"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure a aparncia e comportamento geral do sistema."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tema da Interface"}),e.jsxs("select",{value:l.sistema.tema,onChange:T=>oe(Ke.SISTEMA,"tema",T.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"claro",children:"Claro"}),e.jsx("option",{value:"escuro",children:"Escuro"}),e.jsx("option",{value:"auto",children:"Automtico"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Idioma"}),e.jsxs("select",{value:l.sistema.idioma,onChange:T=>oe(Ke.SISTEMA,"idioma",T.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"pt-BR",children:"Portugus (Brasil)"}),e.jsx("option",{value:"en-US",children:"English (US)"}),e.jsx("option",{value:"es-ES",children:"Espaol"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuso Horrio"}),e.jsxs("select",{value:l.sistema.timezone,onChange:T=>oe(Ke.SISTEMA,"timezone",T.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"America/Sao_Paulo",children:"So Paulo (GMT-3)"}),e.jsx("option",{value:"America/New_York",children:"New York (GMT-5)"}),e.jsx("option",{value:"Europe/London",children:"London (GMT+0)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formato de Data"}),e.jsxs("select",{value:l.sistema.formato_data,onChange:T=>oe(Ke.SISTEMA,"formato_data",T.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Moeda Padro"}),e.jsxs("select",{value:l.sistema.moeda_padrao,onChange:T=>oe(Ke.SISTEMA,"moeda_padrao",T.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"BRL",children:"Real (R$)"}),e.jsx("option",{value:"USD",children:"Dlar ($)"}),e.jsx("option",{value:"EUR",children:"Euro ()"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Itens por Pgina"}),e.jsxs("select",{value:l.sistema.itens_por_pagina,onChange:T=>oe(Ke.SISTEMA,"itens_por_pagina",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]})]}),r===Ke.SEGURANCA&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuraes de Segurana"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure as polticas de segurana e autenticao. Alteraes nesta seo requerem confirmao de senha."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tempo de Sesso (minutos)"}),e.jsx("input",{type:"number",min:"30",max:"1440",value:l.seguranca.tempo_sessao,onChange:T=>oe(Ke.SEGURANCA,"tempo_sessao",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mximo de Tentativas de Login"}),e.jsx("input",{type:"number",min:"3",max:"10",value:l.seguranca.tentativas_login,onChange:T=>oe(Ke.SEGURANCA,"tentativas_login",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bloqueio Temporrio (minutos)"}),e.jsx("input",{type:"number",min:"5",max:"120",value:l.seguranca.bloqueio_temporario,onChange:T=>oe(Ke.SEGURANCA,"bloqueio_temporario",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caracteres Mnimos da Senha"}),e.jsx("input",{type:"number",min:"6",max:"20",value:l.seguranca.senha_minima_caracteres,onChange:T=>oe(Ke.SEGURANCA,"senha_minima_caracteres",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"exigir_2fa",type:"checkbox",checked:l.seguranca.exigir_2fa,onChange:T=>oe(Ke.SEGURANCA,"exigir_2fa",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"exigir_2fa",className:"ml-2 block text-sm text-gray-900",children:"Exigir autenticao de dois fatores (2FA)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"senha_exigir_maiuscula",type:"checkbox",checked:l.seguranca.senha_exigir_maiuscula,onChange:T=>oe(Ke.SEGURANCA,"senha_exigir_maiuscula",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"senha_exigir_maiuscula",className:"ml-2 block text-sm text-gray-900",children:"Senha deve conter pelo menos uma letra maiscula"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"senha_exigir_numero",type:"checkbox",checked:l.seguranca.senha_exigir_numero,onChange:T=>oe(Ke.SEGURANCA,"senha_exigir_numero",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"senha_exigir_numero",className:"ml-2 block text-sm text-gray-900",children:"Senha deve conter pelo menos um nmero"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"senha_exigir_simbolo",type:"checkbox",checked:l.seguranca.senha_exigir_simbolo,onChange:T=>oe(Ke.SEGURANCA,"senha_exigir_simbolo",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"senha_exigir_simbolo",className:"ml-2 block text-sm text-gray-900",children:"Senha deve conter pelo menos um smbolo"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"logout_automatico_inatividade",type:"checkbox",checked:l.seguranca.logout_automatico_inatividade,onChange:T=>oe(Ke.SEGURANCA,"logout_automatico_inatividade",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"logout_automatico_inatividade",className:"ml-2 block text-sm text-gray-900",children:"Logout automtico por inatividade"})]})]})]}),r===Ke.NOTIFICACOES&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuraes de Notificaes"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure quando e como receber notificaes do sistema."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-800 mb-4",children:"Notificaes por Email"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"email_novos_usuarios",type:"checkbox",checked:l.notificacoes.email_novos_usuarios,onChange:T=>oe(Ke.NOTIFICACOES,"email_novos_usuarios",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"email_novos_usuarios",className:"ml-2 block text-sm text-gray-900",children:"Novos usurios cadastrados"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"email_tentativas_login",type:"checkbox",checked:l.notificacoes.email_tentativas_login,onChange:T=>oe(Ke.NOTIFICACOES,"email_tentativas_login",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"email_tentativas_login",className:"ml-2 block text-sm text-gray-900",children:"Tentativas de login suspeitas"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"email_alteracoes_config",type:"checkbox",checked:l.notificacoes.email_alteracoes_config,onChange:T=>oe(Ke.NOTIFICACOES,"email_alteracoes_config",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"email_alteracoes_config",className:"ml-2 block text-sm text-gray-900",children:"Alteraes nas configuraes"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"email_backup_diario",type:"checkbox",checked:l.notificacoes.email_backup_diario,onChange:T=>oe(Ke.NOTIFICACOES,"email_backup_diario",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"email_backup_diario",className:"ml-2 block text-sm text-gray-900",children:"Relatrio de backup dirio"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"email_relatorios_semanais",type:"checkbox",checked:l.notificacoes.email_relatorios_semanais,onChange:T=>oe(Ke.NOTIFICACOES,"email_relatorios_semanais",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"email_relatorios_semanais",className:"ml-2 block text-sm text-gray-900",children:"Relatrios semanais de atividade"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-800 mb-4",children:"Notificaes do Navegador"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"notificacao_browser",type:"checkbox",checked:l.notificacoes.notificacao_browser,onChange:T=>oe(Ke.NOTIFICACOES,"notificacao_browser",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"notificacao_browser",className:"ml-2 block text-sm text-gray-900",children:"Habilitar notificaes do navegador"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"som_notificacoes",type:"checkbox",checked:l.notificacoes.som_notificacoes,onChange:T=>oe(Ke.NOTIFICACOES,"som_notificacoes",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"som_notificacoes",className:"ml-2 block text-sm text-gray-900",children:"Som nas notificaes"})]})]})]})]})]}),r===Ke.INTEGRACAO&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuraes de Integrao"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure integraes externas, backups e manuteno automtica."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL do Webhook"}),e.jsx("input",{type:"url",value:l.integracao.webhook_url||"",onChange:T=>oe(Ke.INTEGRACAO,"webhook_url",T.target.value),placeholder:"https://exemplo.com/webhook",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"URL para receber notificaes de eventos do sistema"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-800 mb-4",children:"Backup Automtico"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"backup_automatico",type:"checkbox",checked:l.integracao.backup_automatico,onChange:T=>oe(Ke.INTEGRACAO,"backup_automatico",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"backup_automatico",className:"ml-2 block text-sm text-gray-900",children:"Habilitar backup automtico"})]}),l.integracao.backup_automatico&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ml-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequncia do Backup"}),e.jsxs("select",{value:l.integracao.backup_frequencia,onChange:T=>oe(Ke.INTEGRACAO,"backup_frequencia",T.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"diario",children:"Dirio"}),e.jsx("option",{value:"semanal",children:"Semanal"}),e.jsx("option",{value:"mensal",children:"Mensal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horrio do Backup"}),e.jsx("input",{type:"time",value:l.integracao.backup_horario,onChange:T=>oe(Ke.INTEGRACAO,"backup_horario",T.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"manutencao_automatica",type:"checkbox",checked:l.integracao.manutencao_automatica,onChange:T=>oe(Ke.INTEGRACAO,"manutencao_automatica",T.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"manutencao_automatica",className:"ml-2 block text-sm text-gray-900",children:"Habilitar manuteno automtica do sistema"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 ml-6",children:"Limpeza automtica de logs antigos, otimizao de banco de dados, etc."})]})]})]})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmar Alteraes de Segurana"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Para sua segurana, confirme sua senha para aplicar as alteraes nas configuraes de segurana."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha Atual"}),e.jsx("input",{type:"password",value:C,onChange:T=>M(T.target.value),className:`w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${g.password?"border-red-300":"border-gray-300"}`,placeholder:"Digite sua senha atual"}),g.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.password})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{j(!1),M(""),A({}),y({}),B()},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),e.jsx("button",{onClick:ae,disabled:h,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:h?"Salvando...":"Confirmar"})]})]})})})]})};aN.ABERTA,nd.ENTREGUE,nd.ENTREGUE,nd.ENTREGUE;new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString();const TR=()=>{const t=[{tableNumber:5,expected:"Mesa 5"},{tableNumber:"10",expected:"Mesa 10"},{tableNumber:null,expected:"Balco"},{tableNumber:void 0,expected:"Balco"},{tableNumber:"",expected:"Balco"}];return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Teste de Formatao Mesa/Balco"}),e.jsx("div",{className:"space-y-3",children:t.map((s,r)=>{const i=O0(s.tableNumber),l=i===s.expected;return e.jsx("div",{className:`p-3 rounded border ${l?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Input:"})," ",JSON.stringify(s.tableNumber)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Resultado:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-sm ${l?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Esperado:"})," ",s.expected]}),e.jsx("div",{children:l?e.jsx("span",{className:"text-green-600 font-bold",children:""}):e.jsx("span",{className:"text-red-600 font-bold",children:""})})]})},r)})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Exemplos de Uso:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("code",{children:"formatTableDisplay(5)"}),"  ",e.jsx("strong",{children:"Mesa 5"})]}),e.jsxs("div",{children:[e.jsx("code",{children:"formatTableDisplay('10')"}),"  ",e.jsx("strong",{children:"Mesa 10"})]}),e.jsxs("div",{children:[e.jsx("code",{children:"formatTableDisplay(null)"}),"  ",e.jsx("strong",{children:"Balco"})]}),e.jsxs("div",{children:[e.jsx("code",{children:"formatTableDisplay(undefined)"}),"  ",e.jsx("strong",{children:"Balco"})]})]})]})]})},kR=async()=>{console.log(" INICIANDO DEBUG DE TRANSAES"),console.log("================================");try{const{data:t,error:s}=await W.from("cash_transactions").select("*").order("created_at",{ascending:!1}).limit(10);console.log(" ltimas 10 transaes no banco:",(t==null?void 0:t.length)||0),t&&t.length>0&&console.table(t.map(f=>({id:f.id.slice(-8),tipo:f.transaction_type,metodo:f.payment_method,valor:f.amount,data:new Date(f.created_at).toLocaleString("pt-BR")})));const r=new Date().toISOString().split("T")[0],{data:i,error:l}=await W.from("cash_transactions").select("*").gte("created_at",`${r}T00:00:00.000Z`).lt("created_at",`${r}T23:59:59.999Z`).order("created_at",{ascending:!1});if(console.log(` Transaes de hoje (${r}):`,(i==null?void 0:i.length)||0),i&&i.length>0){console.table(i.map(g=>({id:g.id.slice(-8),tipo:g.transaction_type,metodo:g.payment_method,valor:g.amount,hora:new Date(g.created_at).toLocaleTimeString("pt-BR")})));const f=i.reduce((g,y)=>(y.transaction_type==="sale"&&(g[y.payment_method]||(g[y.payment_method]={valor:0,quantidade:0}),g[y.payment_method].valor+=y.amount,g[y.payment_method].quantidade+=1),g),{});console.log(" Totais por mtodo de pagamento:",f)}const{data:c,error:u}=await W.from("cash_sessions").select("*").eq("session_date",r).order("opened_at",{ascending:!1});console.log(" Sesses de caixa de hoje:",(c==null?void 0:c.length)||0),c&&c.length>0&&console.table(c.map(f=>({id:f.id.slice(-8),funcionario:f.employee_id.slice(-8),status:f.status,abertura:f.opening_amount,esperado:f.expected_amount,aberto_em:new Date(f.opened_at).toLocaleTimeString("pt-BR")})));const{data:m,error:h}=await W.from("comandas").select("*").eq("status","pending_payment").limit(5);return console.log(" Comandas pendentes de pagamento:",(m==null?void 0:m.length)||0),console.log(" DEBUG CONCLUDO"),console.log("=================="),{allTransactions:(t==null?void 0:t.length)||0,todayTransactions:(i==null?void 0:i.length)||0,sessions:(c==null?void 0:c.length)||0,comandas:(m==null?void 0:m.length)||0}}catch(t){return console.error(" Erro no debug:",t),null}},AR=async()=>{console.log(" Criando transao de teste...");try{const t={transaction_type:"sale",payment_method:"dinheiro",amount:50,processed_by:"test-user-id",notes:"Transao de teste para debug"},{data:s,error:r}=await W.from("cash_transactions").insert(t).select().single();if(r)throw r;return console.log(" Transao de teste criada:",s),s}catch(t){return console.error(" Erro ao criar transao de teste:",t),null}},MR=async()=>{console.log(" Verificando notas das transaes...");try{const{data:t,error:s}=await W.from("cash_transactions").select("id, notes, created_at, amount, payment_method").order("created_at",{ascending:!1}).limit(10);if(s)throw s;return console.log(" ltimas transaes com notas:"),t==null||t.forEach((r,i)=>{console.log(`${i+1}. ${r.notes} (R$ ${r.amount} - ${r.payment_method})`)}),t}catch(t){return console.error(" Erro ao verificar notas:",t),null}},DR=async()=>{console.log(" Testando insero direta de transao...");try{const t={transaction_type:"sale",payment_method:"dinheiro",amount:25.5,processed_by:"test-user-123",notes:"Teste direto de insero"};console.log(" Dados para inserir:",t);const{data:s,error:r}=await W.from("cash_transactions").insert(t).select().single();return r?(console.error(" Erro na insero:",r),{success:!1,error:r}):(console.log(" Transao inserida com sucesso:",s),{success:!0,data:s})}catch(t){return console.error(" Erro geral:",t),{success:!1,error:t}}};typeof window<"u"&&(window.debugTransactions=kR,window.createTestTransaction=AR,window.testDirectInsert=DR,window.checkTransactionNotes=MR);const OR=()=>{const{user:t}=Kt();return t?e.jsx(rE,{children:e.jsxs(iE,{children:[e.jsx(k5,{})," "]})}):e.jsx(Ti,{to:"/login",replace:!0})},RR=()=>{const{user:t}=Kt();return t?e.jsx(Ti,{to:"/",replace:!0}):e.jsx(S5,{})},PR=()=>{const{user:t}=Kt();return t?e.jsx(Ti,{to:"/",replace:!0}):e.jsx(C5,{})};function LR(){return e.jsx(FS,{children:e.jsx(aE,{children:e.jsxs(pj,{children:[e.jsx(gt,{path:"/login",element:e.jsx(RR,{})}),e.jsx(gt,{path:"/register",element:e.jsx(PR,{})}),e.jsxs(gt,{element:e.jsx(OR,{}),children:[e.jsx(gt,{index:!0,element:e.jsx(hD,{})}),e.jsx(gt,{path:"bar",element:e.jsx(gD,{})}),e.jsx(gt,{path:"bar-customers",element:e.jsx(xD,{})}),e.jsx(gt,{path:"bar-employees",element:e.jsx(FD,{})}),e.jsx(gt,{path:"cash/*",element:e.jsx(_R,{})}),e.jsx(gt,{path:"kitchen",element:e.jsx(hO,{})}),e.jsx(gt,{path:"inventory",element:e.jsx(gO,{})}),e.jsx(gt,{path:"inventory/estoque-baixo",element:e.jsx(yO,{})}),e.jsx(gt,{path:"inventory/atualizacao-massiva",element:e.jsx(bO,{})}),e.jsx(gt,{path:"members",element:e.jsx(wO,{})}),e.jsx(gt,{path:"bar/attendance",element:e.jsx(iR,{})}),e.jsx(gt,{path:"settings",element:e.jsx(ER,{})}),e.jsx(gt,{path:"test-modal",element:e.jsx(CR,{})}),e.jsx(gt,{path:"test-table-display",element:e.jsx(TR,{})})]}),e.jsx(gt,{path:"*",element:e.jsx(Ti,{to:"/",replace:!0})})]})})})}k2.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(LR,{})}));export{aN as C,nd as I,W as s};
